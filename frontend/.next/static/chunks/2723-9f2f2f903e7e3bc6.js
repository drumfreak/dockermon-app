"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2723],{2723:function(e,r,n){n.r(r),n.d(r,{default:function(){return O}});var t=n(34051),a=n.n(t),i=n(85893),s=n(67294),o=n(11163),c=n(41664),u=n(42896),l=n(58650),d=n(45795),f=n(46374),m=n(25617),v=n(28565),h=n(92814),p=n(99403),x=n(25600),b=n(66367),g=n(51436),j=n(40424),y=n(78927),k=n(29318),S=n(57191);function w(e,r,n,t,a,i,s){try{var o=e[i](s),c=o.value}catch(u){return void n(u)}o.done?r(c):Promise.resolve(c).then(t,a)}function N(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function s(e){w(i,t,a,s,o,"next",e)}function o(e){w(i,t,a,s,o,"throw",e)}s(void 0)}))}}function C(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function I(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){C(e,r,n[r])}))}return e}function O(e){var r=(0,o.useRouter)(),n=(0,s.useState)(!0),t=n[0],w=n[1],C=(0,s.useRef)(t);C.current=t;var O=(0,m.v9)((function(e){return e.site})),R=(0,m.v9)((function(e){return e.hosts.hosts})),U=(0,s.useRef)(R);U.current=R;var P=(0,m.v9)((function(e){return e.hosts.activeHost})),T=(0,s.useRef)(P);T.current=P;var F=(0,s.useState)(),M=F[0],D=F[1],A=(0,s.useRef)(M);A.current=M;var E=(0,s.useState)(),L=E[0],_=E[1],W=(0,s.useRef)(L);W.current=L;var G=(0,s.useState)(),q=G[0],z=G[1],H=(0,s.useRef)(q);H.current=q;var K=(0,s.useState)(),Q=K[0],V=K[1],B=(0,s.useRef)(Q);B.current=Q;var J=(0,m.v9)((function(e){return e.containers})),X=(0,m.v9)((function(e){return e.images})),Y=(0,m.v9)((function(e){return e.volumes})),Z=(0,m.v9)((function(e){return e.networks})),$=(0,s.useState)()[0],ee=(0,s.useState)(),re=ee[0],ne=ee[1],te=(0,s.useRef)(re);te.current=re;var ae=(0,s.useState)(!1),ie=ae[0],se=ae[1],oe=(0,s.useState)(),ce=oe[0],ue=oe[1];(0,s.useRef)(ce).current=ce;var le=(0,s.useState)(),de=le[0],fe=le[1],me=(0,s.useRef)(de);me.current=de;var ve=(0,s.useState)(),he=ve[0],pe=ve[1],xe=(0,s.useState)(""),be=xe[0],ge=xe[1];function je(){return ye.apply(this,arguments)}function ye(){return(ye=N(a().mark((function n(){var t,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(ie){n.next=4;break}return n.next=4,we();case 4:if(Ie(),!(null===(t=r.query)||void 0===t?void 0:t.hostId)){n.next=14;break}if(!U.current){n.next=11;break}return i=U[r.query.hostId],D(i),setTimeout((function(){return ke()})),n.abrupt("return");case 11:return D(e.host),setTimeout((function(){return ke()})),n.abrupt("return");case 14:if(!e.host){n.next=18;break}return D(e.host),setTimeout((function(){return ke()})),n.abrupt("return");case 18:if(P&&(D(T.current),setTimeout((function(){return ke()}))),!e.image){n.next=23;break}return _(e.image),setTimeout((function(){return ke()})),n.abrupt("return");case 23:if(!e.volume){n.next=27;break}return z(e.volume),setTimeout((function(){return ke()})),n.abrupt("return");case 27:if(!e.network){n.next=31;break}return V(e.network),setTimeout((function(){return ke()})),n.abrupt("return");case 31:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function ke(){return Se.apply(this,arguments)}function Se(){return(Se=N(a().mark((function e(){var r,n,t,i,s,o,c,u,l,d,f,m,v,h,p,x,b,g,j;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=I({},J),A.current||(null===(r=A.current)||void 0===r?void 0:r.id)){e.next=4;break}return e.abrupt("return");case 4:if(null===(n=J[A.current.id])||void 0===n?void 0:n.containers){e.next=6;break}return e.abrupt("return");case 6:if(!(null===(t=W.current)||void 0===t?void 0:t.id)||!(null===(o=null===(i=X[A.current.id])||void 0===i?void 0:i.images[null===W||void 0===W||null===(s=W.current)||void 0===s?void 0:s.id])||void 0===o?void 0:o.containers)){e.next=12;break}return p=X[A.current.id].images[W.current.id].containers,x=Object.keys(p).map((function(e){return p[e]})),ue(x),w(!1),e.abrupt("return");case 12:if(!(null===(c=H.current)||void 0===c?void 0:c.id)||!(null===(d=null===(u=Y[A.current.id])||void 0===u?void 0:u.volumes[null===H||void 0===H||null===(l=H.current)||void 0===l?void 0:l.id])||void 0===d?void 0:d.containers)){e.next=18;break}return p=Y[A.current.id].volumes[H.current.id].containers,b=Object.keys(p).map((function(e){return p[e]})),ue(b),w(!1),e.abrupt("return");case 18:if(!(null===(f=B.current)||void 0===f?void 0:f.id)||!(null===(h=null===(m=Z[A.current.id])||void 0===m?void 0:m.networks[null===B||void 0===B||null===(v=B.current)||void 0===v?void 0:v.id])||void 0===h?void 0:h.containers)){e.next=24;break}return p=Z[A.current.id].networks[B.current.id].containers,g=Object.keys(p).map((function(e){return p[e]})),ue(g),w(!1),e.abrupt("return");case 24:p=J[A.current.id].containers,j=Object.keys(p).map((function(e){return p[e]})),ue(j),w(!1);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return Ne.apply(this,arguments)}function Ne(){return(Ne=N(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie){e.next=2;break}return e.abrupt("return");case 2:return se(!0),e.next=5,v.L.getSocket();case 5:return r=e.sent,ne(r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=N(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te.current.emit("docker",{command:"listContainers",callback:"containersIndexList",hostId:A.current.id}),w(!0),setTimeout((function(){w(!1)}),1e3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,s.useEffect)(N(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je();case 1:case"end":return e.stop()}}),e)}))),[]),(0,s.useEffect)(N(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je();case 1:case"end":return e.stop()}}),e)}))),[P,J]);var Ie=function(){pe({global:{value:null,matchMode:b.a6.CONTAINS},name:{operator:b.pg.AND,constraints:[{value:null,matchMode:b.a6.CONTAINS}]},project:{operator:b.pg.AND,constraints:[{value:null,matchMode:b.a6.CONTAINS}]},containerId:{operator:b.pg.AND,constraints:[{value:null,matchMode:b.a6.CONTAINS}]}})};if($)return(0,i.jsxs)("div",{children:["Failed to load Container: ",$]});if(!J)return(0,i.jsx)("div",{children:"No Containers."});if(0===J.length)return(0,i.jsx)("div",{children:"No Containers."});var Oe=function(e){var r;te.current.emit("docker",{command:"remove",containerId:e.containerId,containerLongId:e.containerLongId,hostId:null===(r=e.host)||void 0===r?void 0:r.id,callback:"dockerResuls_containers"+e.id,hook:"removeContainer"})},Re=function(){me.current.forEach((function(e){!1===e.running&&Oe(e)})),fe(null)};return(0,i.jsxs)("div",{className:"col-12 p-0 m-0",children:[(0,i.jsxs)("div",{className:"col-12 p-0 m-0 pr-1 grid",children:[(0,i.jsx)("div",{className:"col-6",children:(0,i.jsxs)("h2",{children:[(0,i.jsx)(h.G,{icon:g.MW5,pull:"left",className:"fa-1x lightblue-color mt-0 pt-0",swapOpacity:!0}),"Docker Containers"]})}),(0,i.jsxs)("div",{className:"col-6 text-right pr-0",children:[(0,i.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,i.jsx)("i",{className:"pi pi-search"}),(0,i.jsx)(x.o,{value:be,onChange:function(e){var r=e.target.value,n=I({},he);n.global.value=r,pe(n),ge(r)},placeholder:"Keyword Search"})]}),(0,i.jsx)(p.z,{label:"Container",className:"p-button-secondary mr-2",icon:"fa fa-plus",onClick:function(){return r.push("/containers/create")}}),(0,i.jsx)("button",{className:"p-button p-component p-button-secondary mt-1 p-2",label:"",onClick:function(){return function(){return Ce.apply(this,arguments)}()},children:(0,i.jsx)(h.G,{icon:g.lUd,className:"mt-0 p-1",swapOpacity:!0})})]})]}),(0,i.jsxs)(u.w,{value:ce,stripedRows:!0,rowHover:!0,showGridlines:!0,selection:de,onSelectionChange:function(e){return function(e){fe(e.value)}(e)},paginator:!0,rows:15,totalRecords:null===ce||void 0===ce?void 0:ce.length,dataKey:"id",rowsPerPageOptions:[10,15,20,50,100,200],sortMode:"multiple",multiSortMeta:[{field:"statsSummary.cpuUsage",order:-1},{field:"statsSummary.memoryUsage",order:-1},{field:"running",order:-1},{field:"name",order:1}],responsiveLayout:"scroll",filters:he,filterDisplay:"menu",loading:C.current,globalFilterFields:["name","containerId"],children:[(0,i.jsx)(l.s,{sortable:!0,field:"id",header:"Id",body:function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.id})})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"name",header:"Name",body:function(e){var r,n,t,a,s,o="leftMenu-progressbar "+k.Q.progressBarCPUClasses(e),u=(null===(r=e.statsSummary)||void 0===r?void 0:r.cpuUsage)>0;return u=!!(e.running&&u&&(null===(n=O.userSettings)||void 0===n||null===(t=n.leftMenu)||void 0===t?void 0:t.showCpu)),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{className:"lightblue-color",children:e.name})}),u&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.k,{tooltip:(null===(a=e.statsSummary)||void 0===a?void 0:a.cpuUsage)+" % CPU Usage",className:o+" mt-3",value:Number(null===(s=e.statsSummary)||void 0===s?void 0:s.cpuUsage),displayValueTemplate:function(){return(0,i.jsx)("div",{})}})}),!u&&e.running&&(0,i.jsx)("div",{className:"col-12 p-0 m-0 progressbar-blank"})]})},filter:!0,filterPlaceholder:"Search by name",style:{minWidth:"12rem"}}),(0,i.jsx)(l.s,{sortable:!0,field:"project",header:"Project",filter:!0,filterPlaceholder:"Search by project name",style:{minWidth:"12rem"},body:function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"col-12 m-0 p-0",children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.project})})}),e.image&&(0,i.jsx)("div",{className:"col-12 m-0 mt-2 p-0",children:(0,i.jsx)(c.default,{href:"/images/[id]",as:"/images/".concat(e.image.id),children:(0,i.jsx)("a",{className:"lightblue-color",children:e.image.name})})})]})}}),(0,i.jsx)(l.s,{sortable:!0,field:"running",header:"Running",align:"center",body:function(e){return e.running?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:(0,i.jsx)(f.Q,{className:"p-2 mr-2",status:e.state})})})}):(0,i.jsx)("div",{})}}),(0,i.jsx)(l.s,{sortable:!0,field:"statsSummary.cpuUsage",header:"CPU",align:"center",body:function(e){var r;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsxs)("a",{children:[(null===e||void 0===e||null===(r=e.statsSummary)||void 0===r?void 0:r.cpuUsage)||0,"%"]})})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"status",header:"Status",align:"center",body:function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.status})})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"statsSummary.memoryUsage",header:"Memory",align:"center",body:function(e){var r,n,t;return(null===(r=e.statsSummary)||void 0===r?void 0:r.memoryUsage)?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:(null===(n=e.statsSummary)||void 0===n?void 0:n.memoryUsage)?S.t.bytes((null===e||void 0===e||null===(t=e.statsSummary)||void 0===t?void 0:t.memoryUsage)||0):0})})}):(0,i.jsx)("div",{children:"-"})}}),(0,i.jsx)(l.s,{sortable:!0,field:"dead",header:"Dead",align:"center",body:function(e){return e.dead?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:(0,i.jsx)(d.C,{severity:"danger"})})})}):(0,i.jsx)("div",{children:(0,i.jsx)(d.C,{severity:"info"})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"containerId",filter:!0,filterPlaceholder:"Search by docker Id",style:{minWidth:"12rem"},header:"Docker Id",body:function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.containerId})})})}}),(0,i.jsx)(l.s,{selectionMode:"multiple",headerStyle:{width:"3em"}})]}),(null===de||void 0===de?void 0:de.length)>0&&(0,i.jsx)("div",{className:"col-12 text-right pr-2",children:(0,i.jsx)(p.z,{className:"mt-2 p-button-warning",label:"Remove Selected",icon:"fa fa-trash",onClick:function(e){return function(e,r,n){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,j.V)({className:"confirm-dialogs",message:n,target:(null===t||void 0===t?void 0:t.currentTarget)?t.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){switch(e){case"removeContainer":Oe(r);break;case"removeSelected":Re()}}})}("removeSelected",null,"Remove Selected Containers?",e)}})})]})}}}]);