(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{5958:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/volumes/create",function(){return r(61982)}])},61982:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(34051),o=r.n(n),s=r(85893),a=r(11163),i=r(67294),l=r(40424),c=r(87536),u=r(95496),f=r(74231),m=r(99403),p=r(25600),d=r(46479),v=r(28565),h=r(49861),y=r(42670),b=r(43964),g=r(25617);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t,r,n,o,s,a){try{var i=e[s](a),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){x(s,n,o,a,i,"next",e)}function i(e){x(s,n,o,a,i,"throw",e)}a(void 0)}))}}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){N(e,t,r[t])}))}return e}function O(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(){var e,t,r,n=function(){return h.W.generateName()},j=(0,a.useRouter)(),x=(0,i.useRef)(null),N=(0,g.v9)((function(e){return e.hosts.activeHost})),C=(0,i.useRef)(N);C.current=N;var S=(0,i.useState)(null)[0];(0,i.useRef)(S).current=S;var _=(0,i.useState)(!1),E=_[0],R=_[1],P=(0,i.useState)(!0),A=P[0],V=P[1];(0,i.useRef)(A).current=A;var D=(0,i.useState)(null),F=D[0],I=D[1],T=(0,i.useRef)(F);T.current=F;var L=(0,i.useState)(!1),$=L[0],B=L[1],M=(0,i.useState)(2),z=M[0],U=M[1];(0,i.useEffect)(k(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=3;break}return e.next=3,K();case 3:V(!1);case 4:case"end":return e.stop()}}),e)}))),[]),(0,i.useEffect)((function(){return function(){T.current&&T.current.removeListener("createVolumeForm")}}),[]);var q=function(){x.current.clear()};function K(){return W.apply(this,arguments)}function W(){return(W=k(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$){e.next=2;break}return e.abrupt("return");case 2:return B(!0),e.next=5,v.L.getSocket();case 5:return(t=e.sent).on("createVolumeForm",(function(e){"success"===e.status&&(0,l.V)({className:"confirm-dialogs",message:"Would you like to view it now?",header:"Volume Created",icon:"pi pi-exclamation-check",accept:function(){return j.push("/volumes/"+e.data.id)},reject:function(){return V(!1)}}),e.error&&(E||R(!0),V(!1))})),I(t),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=f.Ry({name:f.Z_().required()}).required(),H=(0,c.cI)({resolver:(0,u.X)(X)}),Z=H.register,G=H.handleSubmit,J=H.setValue,Q=H.formState.errors;return A?(0,s.jsx)(y.$,{}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"New Volume"}),(0,s.jsx)(b.s,{className:"col-8 md:8 m-auto",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("form",{onSubmit:G((function(e){var t;console.log("Submitting"),console.log("Fields Data",e),q();var r={Name:e.name,Driver:e.driver,DriverOpt:e.driverOptions,Labels:[]};if((null===(t=e.Labels)||void 0===t?void 0:t.length)>0){var n={};e.Labels.forEach((function(e,t){t+1>z||e.key&&e.value&&(n[e.key]=e.value)})),r.Labels=n}V(!0),T.current.emit("dockerCreateVolume",{command:"createVolume",data:r,callback:"createVolumeForm",hook:"createVolume",hostId:C.current.id})})),children:(0,s.jsxs)("div",{className:"p-fluid p-formgrid p-grid mt-5 ml-auto mr-auto jc-center",children:[(0,s.jsxs)(b.s,{className:"mt-3",header:"Basic Details",toggleable:!0,children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("div",{className:"p-field mt-2 col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Volume Name"}),(0,s.jsxs)("div",{className:"p-inputgroup",children:[(0,s.jsx)(p.o,w({id:"name",keyfilter:/^[^<>*!\s]+$/,name:"name",type:"text",required:!0},Z("name",{value:n()}),{className:"form-control f-height-inputs ".concat(Q.name?"p-invalid":"")}),"name"),(0,s.jsx)("div",{className:"p-inputgroup-addon",children:(0,s.jsx)(m.z,{className:"p-button p-button-secondary",icon:"fa fa-rotate-right",onClick:function(e){e.preventDefault();var t=n();J("name",t)}})})]}),(0,s.jsx)("div",{className:"invalid-feedback",children:null===(e=Q.name)||void 0===e?void 0:e.message})]})}),(0,s.jsxs)("div",{className:"form-group mt-5",children:[(0,s.jsxs)("div",{className:"mt-4 p-field col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"driver",children:"Driver"}),(0,s.jsx)(p.o,w({id:"driver",name:"driver",keyfilter:/^[^<>*!\s]+$/,type:"text"},Z("driver",{value:"local"}),{className:"form-control f-height-inputs ".concat(Q.driver?"p-invalid":"")}),"tag1"),(0,s.jsx)("div",{className:"invalid-feedback",children:null===(t=Q.driver)||void 0===t?void 0:t.message})]}),(0,s.jsxs)("div",{className:"mt-4 p-field col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"driver",children:"Driver Options"}),(0,s.jsx)(p.o,w({id:"driverOptions",name:"driverOptions",keyfilter:/^[^<>*!\s]+$/,type:"text"},Z("driverOptions",{value:""}),{className:"form-control f-height-inputs ".concat(Q.driverOptions?"p-invalid":"")}),"driverOptions"),(0,s.jsx)("div",{className:"invalid-feedback",children:null===(r=Q.driverOptions)||void 0===r?void 0:r.message})]})]})]}),(0,s.jsx)(b.s,{className:"mt-3 mt-5",header:"Labels",toggleable:!0,children:(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)("div",{className:"grid col-12 jusitify-center",children:[(0,s.jsx)("div",{className:"col-10 ml-0 m-auto grid",children:O(Array(z)).map((function(e,t){return(0,s.jsxs)("div",{className:"col-12 p-shadow-3 grid",children:[(0,s.jsxs)("div",{className:"col-6 field",children:[t<1&&(0,s.jsx)("label",{htmlFor:"labels",children:"Key"}),(0,s.jsx)(p.o,w({},Z("Labels."+t+".key",{value:null,shouldUnregister:!0}),{className:"form-control f-height-inputs"}),"labels_ct1"+t)]},"labelsVars_ct_value34"+t),(0,s.jsxs)("div",{className:"col-6 field",children:[t<1&&(0,s.jsx)("label",{htmlFor:"labels.value",children:"Value"}),(0,s.jsx)(p.o,w({placeholder:""},Z("Labels."+t+".value",{value:null}),{className:"form-control f-height-inputs"}),"labels_ct_value"+t)]},"labelss_ct_value33"+t)]},"labelsVars_ct_value_x"+t)}))}),(0,s.jsx)("div",{className:"col-2",children:(0,s.jsxs)("span",{className:"p-input-group-addon",children:[(0,s.jsx)(m.z,{className:"p-button p-button-secondary mt-2",icon:"fa fa-faw fa-plus",onClick:function(e){e.preventDefault(),U(z+1)}}),z>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(m.z,{className:"p-button p-button-secondary mt-2",icon:"fa fa-faw fa-minus",onClick:function(e){U(z-1),e.preventDefault()}})]})]})})]})})}),(0,s.jsx)("div",{className:"col-6 ml-auto mr-auto mt-5",children:(0,s.jsx)(m.z,{className:"p-button p-button-primary p-3",type:"submit",label:"Create Volume"})}),(0,s.jsx)(d.V,{ref:x})]})})})},"containerForm")]})})}},46479:function(e,t,r){"use strict";r.d(t,{V:function(){return C}});var n=r(67294),o=r(13643),s=r(69868),a=r(73350),i=r(9529);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}var k=function(e){v(r,e);var t=x(r);function r(e){var n;return u(this,r),(n=t.call(this,e)).onClick=n.onClick.bind(p(n)),n.onClose=n.onClose.bind(p(n)),n}return m(r,[{key:"componentDidMount",value:function(){var e=this;this.props.message.sticky||(this.timeout=setTimeout((function(){e.onClose(null)}),this.props.message.life||3e3))}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"onClose",value:function(e){this.timeout&&clearTimeout(this.timeout),this.props.onClose&&this.props.onClose(this.props.message),e&&(e.preventDefault(),e.stopPropagation())}},{key:"onClick",value:function(){this.props.onClick&&this.props.onClick(this.props.message)}},{key:"renderCloseIcon",value:function(){return!1!==this.props.message.closable?n.createElement("button",{type:"button",className:"p-message-close p-link",onClick:this.onClose},n.createElement("i",{className:"p-message-close-icon pi pi-times"}),n.createElement(s.H,null)):null}},{key:"renderMessage",value:function(){if(this.props.message){var e=this.props.message,t=e.severity,r=e.content,s=e.summary,a=e.detail,i=(0,o.AK)("p-message-icon pi ",{"pi-info-circle":"info"===t,"pi-check":"success"===t,"pi-exclamation-triangle":"warn"===t,"pi-times-circle":"error"===t});return r||n.createElement(n.Fragment,null,n.createElement("span",{className:i}),n.createElement("span",{className:"p-message-summary"},s),n.createElement("span",{className:"p-message-detail"},a))}return null}},{key:"render",value:function(){var e="p-message p-component p-message-"+this.props.message.severity,t=this.renderCloseIcon(),r=this.renderMessage();return n.createElement("div",{ref:this.props.forwardRef,className:e,onClick:this.onClick},n.createElement("div",{className:"p-message-wrapper"},r,t))}}]),r}(n.Component);g(k,"defaultProps",{message:null,onClose:null,onClick:null});var N=n.forwardRef((function(e,t){return n.createElement(k,j({forwardRef:t},e))}));function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}var O=0,C=function(e){v(r,e);var t=w(r);function r(e){var n;return u(this,r),(n=t.call(this,e)).state={messages:[]},n.onClose=n.onClose.bind(p(n)),n}return m(r,[{key:"show",value:function(e){if(e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r].id=O++,t=[].concat(c(this.state.messages),c(e));else e.id=O++,t=this.state.messages?[].concat(c(this.state.messages),[e]):[e];this.setState({messages:t})}}},{key:"clear",value:function(){this.setState({messages:[]})}},{key:"replace",value:function(e){var t=this;this.setState({messages:[]},(function(){return t.show(e)}))}},{key:"onClose",value:function(e){var t=this.state.messages.filter((function(t){return t.id!==e.id}));this.setState({messages:t}),this.props.onRemove&&this.props.onRemove(e)}},{key:"render",value:function(){var e=this;return n.createElement("div",{id:this.props.id,className:this.props.className,style:this.props.style},n.createElement(a.Z,null,this.state.messages.map((function(t){var r=n.createRef();return n.createElement(i.K,{nodeRef:r,key:t.id,classNames:"p-message",unmountOnExit:!0,timeout:{enter:300,exit:300},options:e.props.transitionOptions},n.createElement(N,{ref:r,message:t,onClick:e.props.onClick,onClose:e.onClose}))}))))}}]),r}(n.Component);g(C,"defaultProps",{id:null,className:null,style:null,transitionOptions:null,onRemove:null,onClick:null})}},function(e){e.O(0,[3978,9861,9774,2888,179],(function(){return t=5958,e(e.s=t);var t}));var t=e.O();_N_E=t}]);