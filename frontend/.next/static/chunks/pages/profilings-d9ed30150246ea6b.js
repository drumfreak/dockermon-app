(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{42813:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profilings",function(){return t(23957)}])},23957:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var r=t(34051),l=t.n(r),o=t(85893),i=t(67294),a=t(41664),u=t(42896),c=t(58650),s=t(99403),f=t(12199),d=t(11163),p=t(92814),h=t(66367),m=t(25600),b=t(51436),v=t(11577),g=t(25617);function y(e,n,t,r,l,o,i){try{var a=e[o](i),u=a.value}catch(c){return void t(c)}a.done?n(u):Promise.resolve(u).then(r,l)}function w(e){return function(){var n=this,t=arguments;return new Promise((function(r,l){var o=e.apply(n,t);function i(e){y(o,r,l,i,a,"next",e)}function a(e){y(o,r,l,i,a,"throw",e)}i(void 0)}))}}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function j(){var e=(0,d.useRouter)(),n=(0,i.useState)(!0),t=n[0],r=n[1],y=(0,i.useRef)(t);y.current=t;var j=(0,i.useState)(null)[0],C=(0,g.v9)((function(e){return e.hosts.activeHost})),S=(0,i.useRef)(C);S.current=C;var O=(0,i.useState)(null),N=O[0],P=(O[1],(0,i.useRef)(N));P.current=N;var E=(0,i.useState)(!1),F=(E[0],E[1],(0,i.useState)(null)),R=F[0],k=F[1];(0,i.useRef)(R).current=R;var _=(0,i.useState)(null),M=_[0],A=_[1],I=(0,i.useRef)(M);I.current=M;var T=(0,i.useState)(null),D=T[0],B=T[1],H=(0,i.useState)(""),z=H[0],G=H[1];function K(){return X.apply(this,arguments)}function X(){return(X=w(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.A.getProfilings({limit:100});case 2:"success"===(null===(n=e.sent)||void 0===n?void 0:n.status)&&k(n.data),r(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if((0,i.useEffect)(w(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(),K();case 3:case"end":return e.stop()}}),e)}))),[]),j)return(0,o.jsxs)("div",{children:["Failed to load Profilings: ",j]});var L=function(){B({global:{value:null,matchMode:h.a6.CONTAINS},name:{operator:h.pg.AND,constraints:[{value:null,matchMode:h.a6.CONTAINS}]},project:{operator:h.pg.AND,constraints:[{value:null,matchMode:h.a6.CONTAINS}]},containerId:{operator:h.pg.AND,constraints:[{value:null,matchMode:h.a6.CONTAINS}]}})},U=function(e){P.current.emit("docker",{command:"removeProfiling",profilingId:e.profilingId,hostId:S.current.id,callback:"dockerResuls_profilings"+e.id,hook:"removeProfiling"})},V=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,f.w)({message:t,target:(null===r||void 0===r?void 0:r.currentTarget)?r.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){switch(e){case"removeProfiling":U(n);break;case"removeSelected":q()}}})},q=function(){I.current.forEach((function(e){var n;0===(null===(n=e.containers)||void 0===n?void 0:n.length)&&U(e)})),A(null)};return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"col-12 p-0 mt-2 pr-1 grid",children:[(0,o.jsx)("div",{className:"col-6",children:(0,o.jsxs)("h2",{children:[(0,o.jsx)(p.G,{icon:b.Pk,pull:"left",className:"fa-1x lightblue-color mt-0 pt-0",swapOpacity:!0}),"Docker Profilings"]})}),(0,o.jsxs)("div",{className:"col-6 text-right pr-0",children:[(0,o.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,o.jsx)("i",{className:"pi pi-search"}),(0,o.jsx)(m.o,{value:z,onChange:function(e){var n=e.target.value,t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){x(e,n,t[n])}))}return e}({},D);t.global.value=n,B(t),G(n)},placeholder:"Keyword Search"})]}),(0,o.jsx)(s.z,{label:"Profiling",className:"p-button-secondary mr-2",icon:"fa fa-plus",onClick:function(){return e.push("/profilings/create")}}),(0,o.jsx)("button",{className:"p-button p-component p-button-secondary mt-1 p-2",label:"",onClick:function(){return K()},children:(0,o.jsx)(p.G,{icon:b.lUd,className:"mt-0 p-1",swapOpacity:!0})})]})]}),(0,o.jsxs)(u.w,{value:R,stripedRows:!0,rowHover:!0,showGridlines:!0,selection:M,onSelectionChange:function(e){return function(e){A(e.value)}(e)},paginator:!0,rows:15,totalRecords:null===R||void 0===R?void 0:R.length,dataKey:"id",rowsPerPageOptions:[10,15,20,50,100,200],sortMode:"single",responsiveLayout:"scroll",sortField:"startDate",sortOrder:0,filters:D,filterDisplay:"menu",loading:y.current,globalFilterFields:["name","imageId","tag"],children:[(0,o.jsx)(c.s,{sortable:!0,field:"name",header:"Name",filter:!0,filterPlaceholder:"Search by name",body:function(e){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.default,{href:"/profilings/[id]",as:"/profilings/".concat(e.id),children:(0,o.jsx)("a",{className:"lightblue-color",children:(0,o.jsx)("b",{children:e.name})})})})}}),(0,o.jsx)(c.s,{sortable:!0,field:"samples",header:"Samplings",align:"center",body:function(e){return(0,o.jsx)("div",{children:e.samples})}}),(0,o.jsx)(c.s,{sortable:!0,field:"containerId",header:"Container",align:"center"}),(0,o.jsx)(c.s,{sortable:!0,field:"startDate",header:"Start",align:"center"}),(0,o.jsx)(c.s,{sortable:!0,field:"endDate",header:"End",align:"center"}),(0,o.jsx)(c.s,{field:"id",header:"Actions",align:"center",body:function(e){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(s.z,{label:"",onClick:function(n){V("removeProfiling",e,"Remove "+e.name+"?",n)},className:"p-button-secondary",icon:"pi pi-trash"})})}}),(0,o.jsx)(c.s,{selectionMode:"multiple",headerStyle:{width:"3em"}})]}),(null===M||void 0===M?void 0:M.length)>0&&(0,o.jsx)("div",{className:"col-12 text-right pr-2",children:(0,o.jsx)(s.z,{className:"mt-2 p-button-warning",label:"Remove Selected",icon:"fa fa-trash",onClick:function(e){return V("removeSelected",null,"Remove Selected Profilings?",e)}})})]})})}},11577:function(e,n,t){"use strict";t.d(n,{A:function(){return c}});var r=t(22946),l=t(11752),o=t(51388),i=(0,l.default)().publicRuntimeConfig,a="".concat(i.apiUrl),u=new r.X(""),c={results:u.asObservable(),getProfilings:function(e){return o.h.post("".concat(a,"/profilings"),e).then((function(e){if("success"===e.status)return u.next(e),e;throw Error(e.message)})).catch((function(e){u.next(null),console.log(e)}))},getProfilingById:function(e){return o.h.get("".concat(a,"/profilings/").concat(e)).then((function(e){if("success"===e.status)return u.next(e),e;throw Error(e.message)})).catch((function(e){u.next(null),console.log(e)}))}}},58650:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){return o=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},o(e,n)}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,n){if(n&&("object"===i(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=u(e);if(n){var l=u(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return a(this,t)}}t.d(n,{s:function(){return p}});var s,f,d,p=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&o(e,n)}(u,e);var n,t,i,a=c(u);function u(){return l(this,u),a.apply(this,arguments)}return n=u,t&&r(n.prototype,t),i&&r(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}(t(67294).Component);d={columnKey:null,field:null,sortField:null,filterField:null,exportField:null,header:null,body:null,footer:null,sortable:!1,sortableDisabled:!1,sortFunction:null,dataType:"text",filter:!1,filterMatchMode:null,filterPlaceholder:null,filterType:"text",filterMaxLength:null,filterElement:null,filterFunction:null,filterHeaderStyle:null,filterHeaderClassName:null,showFilterMenu:!0,showFilterOperator:!0,showClearButton:!0,showApplyButton:!0,showFilterMatchModes:!0,showFilterMenuOptions:!0,showAddButton:!0,filterMatchModeOptions:null,maxConstraints:2,filterMenuClassName:null,filterMenuStyle:null,align:null,alignHeader:null,alignFrozen:"left",hidden:!1,onFilterClear:null,onFilterApplyClick:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,filterClear:null,filterApply:null,filterHeader:null,filterFooter:null,style:null,className:null,headerStyle:null,headerClassName:null,bodyStyle:null,bodyClassName:null,footerStyle:null,footerClassName:null,expander:!1,frozen:!1,selectionMode:null,colSpan:null,rowSpan:null,editor:null,cellEditValidator:null,cellEditValidatorEvent:"click",onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditInit:null,onCellEditComplete:null,onCellEditCancel:null,excludeGlobalFilter:!1,rowReorder:!1,rowReorderIcon:"pi pi-bars",rowEditor:!1,exportable:!0,reorderable:!0},(f="defaultProps")in(s=p)?Object.defineProperty(s,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[f]=d}},function(e){e.O(0,[5257,2727,9774,2888,179],(function(){return n=42813,e(e.s=n);var n}));var n=e.O();_N_E=n}]);