(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7473],{77355:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hosts",function(){return n(87862)}])},87862:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var o=n(34051),r=n.n(o),l=n(85893),i=n(67294),s=n(41664),a=n(42896),c=n(58650),u=n(25617),p=n(28565),f=n(99403),d=n(40424),h=n(11163),b=n(92814),y=n(66367),m=n(25600),v=n(51436),g=n(3718);function w(e,t,n,o,r,l,i){try{var s=e[l](i),a=s.value}catch(c){return void n(c)}s.done?t(a):Promise.resolve(a).then(o,r)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var l=e.apply(t,n);function i(e){w(l,o,r,i,s,"next",e)}function s(e){w(l,o,r,i,s,"throw",e)}i(void 0)}))}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){j(e,t,n[t])}))}return e}function x(){var e=(0,h.useRouter)(),t=(0,i.useState)(!0),n=t[0],o=t[1],w=(0,i.useRef)(n);w.current=n;var j=(0,i.useState)(null)[0],x=(0,u.v9)((function(e){return e.hosts.hosts})),S=(0,u.v9)((function(e){return e.hosts.activeHost})),C=(0,i.useRef)(S);C.current=S;var P=(0,i.useState)(null),N=P[0],E=P[1],_=(0,i.useRef)(N);_.current=N;var R=(0,i.useState)(!1),H=R[0],I=R[1],F=(0,i.useState)(null),D=F[0],L=F[1];(0,i.useRef)(D).current=D;var T=(0,i.useState)(null),M=T[0],A=T[1],B=(0,i.useRef)(M);B.current=M;var K=(0,i.useState)(null),z=K[0],G=K[1],U=(0,i.useState)(""),V=U[0],X=U[1];function J(){return W.apply(this,arguments)}function W(){return(W=O(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=2;break}return e.abrupt("return");case 2:return I(!0),e.next=5,p.L.getSocket();case 5:return(t=e.sent).on("hosts_list",(function(e){if("success"===e.status&&e.data){var t=e.data;L(t)}})),t.on("dockerResuls_hosts",(function(e){"success"===e.status&&e.data&&Y()})),E(t),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return q.apply(this,arguments)}function q(){return(q=O(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.current.emit("hosts",{command:"listHosts",callback:"hostsList",hostId:C.current.id}),o(!0),setTimeout((function(){o(!1)}),1e3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if((0,i.useEffect)(O(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=3;break}return e.next=3,J();case 3:Q();case 4:case"end":return e.stop()}}),e)}))),[]),(0,i.useEffect)((function(){var e=k({},x),t=Object.keys(e).map((function(t){return e[t]}));o(!0),t.sort((function(e,t){return e.name||(e.name="Unknown"),e.name.localeCompare(t.name)})),L(t),o(!1)}),[x]),(0,i.useEffect)((function(){return function(){(null===_||void 0===_?void 0:_.current)&&(_.current.removeListener("hosts_list"),_.current.removeListener("dockerResuls_hosts"))}}),[]),j)return(0,l.jsxs)("div",{children:["Failed to load Hosts: ",j]});var Q=function(){G({global:{value:null,matchMode:y.a6.CONTAINS},name:{operator:y.pg.AND,constraints:[{value:null,matchMode:y.a6.CONTAINS}]},project:{operator:y.pg.AND,constraints:[{value:null,matchMode:y.a6.CONTAINS}]},containerId:{operator:y.pg.AND,constraints:[{value:null,matchMode:y.a6.CONTAINS}]}})},Z=function(e){_.current.emit("hosts",{command:"removeHost",host:e,callback:"dockerResuls_hosts",hook:"removeHost"})},$=function(e){_.current.emit("hosts",{command:"disableHost",host:e,callback:"dockerResuls_hosts",hook:"disableHost"})},ee=function(e){_.current.emit("hosts",{command:"enableHost",host:e,callback:"dockerResuls_hosts",hook:"enableHost"})},te=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,d.V)({className:"confirm-dialogs",message:n,target:(null===o||void 0===o?void 0:o.currentTarget)?o.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){switch(e){case"removeHost":Z(t);break;case"removeSelected":ne();break;case"disableSelected":oe();break;case"enableSelected":re();break;case"disableHost":$(t);break;case"enableHost":ee(t)}}})},ne=function(){B.current.forEach((function(e){var t;0===(null===(t=e.containers)||void 0===t?void 0:t.length)&&Z(e)})),A(null)},oe=function(){B.current.forEach((function(e){var t;0===(null===(t=e.containers)||void 0===t?void 0:t.length)&&$(e)})),A(null)},re=function(){B.current.forEach((function(e){var t;0===(null===(t=e.containers)||void 0===t?void 0:t.length)&&ee(e)})),A(null)};return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"col-12 p-0 mt-2 pr-1 grid",children:[(0,l.jsx)("div",{className:"col-6",children:(0,l.jsxs)("h2",{children:[(0,l.jsx)(b.G,{icon:v.Pk,pull:"left",className:"fa-1x lightblue-color mt-0 pt-0",swapOpacity:!0}),"Docker Hosts"]})}),(0,l.jsxs)("div",{className:"col-6 text-right pr-0",children:[(0,l.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,l.jsx)("i",{className:"pi pi-search"}),(0,l.jsx)(m.o,{value:V,onChange:function(e){var t=e.target.value,n=k({},z);n.global.value=t,G(n),X(t)},placeholder:"Keyword Search"})]}),(0,l.jsx)(f.z,{label:"Host",className:"p-button-secondary mr-2",icon:"fa fa-plus",onClick:function(){return e.push("/hosts/create")}}),(0,l.jsx)("button",{className:"p-button p-component p-button-secondary mt-1 p-2",label:"",onClick:function(){return Y()},children:(0,l.jsx)(b.G,{icon:v.lUd,className:"mt-0 p-1",swapOpacity:!0})})]})]}),(0,l.jsxs)(a.w,{value:D,stripedRows:!0,rowHover:!0,showGridlines:!0,selection:M,onSelectionChange:function(e){return function(e){A(e.value)}(e)},paginator:!0,rows:15,totalRecords:null===D||void 0===D?void 0:D.length,dataKey:"id",rowsPerPageOptions:[10,15,20,50,100,200],sortMode:"single",responsiveLayout:"scroll",sortField:"name",sortOrder:1,filters:z,filterDisplay:"menu",loading:w.current,globalFilterFields:["name","imageId","tag"],children:[(0,l.jsx)(c.s,{sortable:!0,field:"name",header:"Name",filter:!0,filterPlaceholder:"Search by name",body:function(e){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/hosts/[id]",as:"/hosts/".concat(e.id),children:(0,l.jsx)("a",{className:"lightblue-color",children:(0,l.jsx)("b",{children:e.name})})})})}}),(0,l.jsx)(c.s,{sortable:!0,field:"connectionType",header:"Type",align:"center"}),(0,l.jsx)(c.s,{sortable:!0,field:"ipAddress",header:"IP / Host",align:"left"}),(0,l.jsx)(c.s,{sortable:!0,field:"port",header:"Port",align:"right"}),(0,l.jsx)(c.s,{field:"id",header:"Actions",align:"center",body:function(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.C,{className:"m-auto mr-2",checked:e.active,onChange:function(t){e.active?te("disableHost",e,"Deactivate "+e.name+"?",t):te("enableHost",e,"Activate "+e.name+"?",t)},onLabel:"Active",offLabel:"Inactive",onIcon:"pi pi-check",offIcon:"pi pi-times",tooltip:"Toggle this Host On / Off"}),(0,l.jsx)(f.z,{label:"",onClick:function(t){te("removeHost",e,"Remove "+e.name+"?",t)},className:"p-button-secondary",icon:"pi pi-trash"})]})}}),(0,l.jsx)(c.s,{selectionMode:"multiple",headerStyle:{width:"3em"}})]}),(null===M||void 0===M?void 0:M.length)>0&&(0,l.jsxs)("div",{className:"col-12 text-right pr-2",children:[(0,l.jsx)(f.z,{className:"mt-2 p-button-success",label:"Enable Selected",icon:"fa fa-trash",onClick:function(e){return te("enableSelected",null,"Enable Selected Hosts?",e)}}),(0,l.jsx)(f.z,{className:"mt-2 p-button-warning",label:"Disable Selected",icon:"fa fa-trash",onClick:function(e){return te("disableSelected",null,"Disable Selected Hosts?",e)}}),(0,l.jsx)(f.z,{className:"mt-2 p-button-danger",label:"Remove Selected",icon:"fa fa-trash",onClick:function(e){return te("removeSelected",null,"Remove Selected Hosts?",e)}})]})]})})}},58650:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=a(e);if(t){var r=a(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return s(this,n)}}n.d(t,{s:function(){return d}});var u,p,f,d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,n,i,s=c(a);function a(){return r(this,a),s.apply(this,arguments)}return t=a,n&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(n(67294).Component);f={columnKey:null,field:null,sortField:null,filterField:null,exportField:null,header:null,body:null,footer:null,sortable:!1,sortableDisabled:!1,sortFunction:null,dataType:"text",filter:!1,filterMatchMode:null,filterPlaceholder:null,filterType:"text",filterMaxLength:null,filterElement:null,filterFunction:null,filterHeaderStyle:null,filterHeaderClassName:null,showFilterMenu:!0,showFilterOperator:!0,showClearButton:!0,showApplyButton:!0,showFilterMatchModes:!0,showFilterMenuOptions:!0,showAddButton:!0,filterMatchModeOptions:null,maxConstraints:2,filterMenuClassName:null,filterMenuStyle:null,align:null,alignHeader:null,alignFrozen:"left",hidden:!1,onFilterClear:null,onFilterApplyClick:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,filterClear:null,filterApply:null,filterHeader:null,filterFooter:null,style:null,className:null,headerStyle:null,headerClassName:null,bodyStyle:null,bodyClassName:null,footerStyle:null,footerClassName:null,expander:!1,frozen:!1,selectionMode:null,colSpan:null,rowSpan:null,editor:null,cellEditValidator:null,cellEditValidatorEvent:"click",onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditInit:null,onCellEditComplete:null,onCellEditCancel:null,excludeGlobalFilter:!1,rowReorder:!1,rowReorderIcon:"pi pi-bars",rowEditor:!1,exportable:!0,reorderable:!0},(p="defaultProps")in(u=d)?Object.defineProperty(u,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[p]=f},3718:function(e,t,n){"use strict";n.d(t,{C:function(){return y}});var o=n(67294),r=n(13643),l=n(57074),i=n(69868);function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,n,u,p=b(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=p.call(this,e)).toggle=t.toggle.bind(a(t)),t.onKeyDown=t.onKeyDown.bind(a(t)),t}return t=f,n=[{key:"toggle",value:function(e){!this.props.disabled&&this.props.onChange&&this.props.onChange({originalEvent:e,value:!this.props.checked,stopPropagation:function(){},preventDefault:function(){},target:{name:this.props.name,id:this.props.id,value:!this.props.checked}})}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&(this.toggle(e),e.preventDefault())}},{key:"hasLabel",value:function(){return this.props.onLabel&&this.props.onLabel.length>0&&this.props.offLabel&&this.props.offLabel.length>0}},{key:"hasIcon",value:function(){return this.props.onIcon&&this.props.onIcon.length>0&&this.props.offIcon&&this.props.offIcon.length>0}},{key:"getLabel",value:function(){return this.hasLabel()?this.props.checked?this.props.onLabel:this.props.offLabel:"&nbsp;"}},{key:"componentDidMount",value:function(){this.props.tooltip&&this.renderTooltip()}},{key:"componentDidUpdate",value:function(e){e.tooltip===this.props.tooltip&&e.tooltipOptions===this.props.tooltipOptions||(this.tooltip?this.tooltip.update(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({content:this.props.tooltip},this.props.tooltipOptions||{})):this.renderTooltip())}},{key:"componentWillUnmount",value:function(){this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)}},{key:"renderTooltip",value:function(){this.tooltip=(0,l.I)({target:this.container,content:this.props.tooltip,options:this.props.tooltipOptions})}},{key:"render",value:function(){var e=this,t=(0,r.AK)("p-button p-togglebutton p-component",{"p-button-icon-only":this.hasIcon()&&!this.hasLabel(),"p-highlight":this.props.checked,"p-disabled":this.props.disabled},this.props.className),n=null,l=this.hasIcon(),s=this.getLabel(),a=this.props.checked?this.props.onIcon:this.props.offIcon;return l&&(n=(0,r.AK)("p-button-icon p-c",{"p-button-icon-left":"left"===this.props.iconPos&&s,"p-button-icon-right":"right"===this.props.iconPos&&s})),o.createElement("div",{ref:function(t){return e.container=t},id:this.props.id,className:t,style:this.props.style,onClick:this.toggle,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this.onKeyDown,tabIndex:!this.props.disabled&&this.props.tabIndex,"aria-labelledby":this.props.ariaLabelledBy},l&&r.Cz.getJSXIcon(a,{className:n},{props:this.props}),o.createElement("span",{className:"p-button-label"},s),o.createElement(i.H,null))}}],n&&s(t.prototype,n),u&&s(t,u),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.Component);d(y,"defaultProps",{id:null,onIcon:null,offIcon:null,onLabel:"Yes",offLabel:"No",iconPos:"left",style:null,className:null,checked:!1,tabIndex:0,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,onChange:null,onFocus:null,onBlur:null})}},function(e){e.O(0,[5257,2727,9774,2888,179],(function(){return t=77355,e(e.s=t);var t}));var t=e.O();_N_E=t}]);