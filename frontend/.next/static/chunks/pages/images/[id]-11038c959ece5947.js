(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3261],{22541:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/images/[id]",function(){return r(71394)}])},36345:function(e,n,r){"use strict";r.d(n,{Z:function(){return d}});var t=r(85893),a=r(67294),s=r(43964),c=r(25852),i=r(30022),u=r(84283),o=r(52450);function d(e){var n=JSON.stringify(e.data,null,2),r=(0,a.useState)(e.collapsed||!1)[0],d=(0,a.useState)(!e.collapsed||!1),l=d[0],f=d[1],m=e.toggleable||!0,h=e.hideTree||!1,v=!!e.hideRaw,g=!!e.hideCode;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.s,{className:"p-0",header:e.header||"Data View",onCollapse:function(){return f(!1)},onExpand:function(){return f(!0)},toggleable:m,collapsed:r,children:l&&(0,t.jsxs)(c.f,{activeIndex:1,className:"p-0 m-0",children:[!g&&(0,t.jsx)(c.x,{header:"Code View",className:"p-0 m-0",leftIcon:"fa fa-solid fa-code mr-2",children:(0,t.jsx)("div",{className:"code-highlighter-background p-0",children:(0,t.jsx)(i.Z,{className:"p-1 m-0",language:"javascript",style:u.RY,showLineNumbers:e.showLineNumbers,wrapLines:!0,wrapLongLines:!1,children:n})})}),!h&&(0,t.jsx)(c.x,{header:"Tree View",className:"p-0 m-0",leftIcon:"fa fa-solid fa-tree mr-2",children:(0,t.jsx)("div",{className:"code-highlighter-background p-2",style:{},children:(0,t.jsx)(o.L,{className:"m-0",data:e.data,theme:{scheme:"brewer",author:"timoth\xe9e poisot (http://github.com/tpoisot)",base00:"#161b22",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},invertTheme:!1,shouldExpandNode:function(e){return 1===e.length}})})}),!v&&(0,t.jsx)(c.x,{header:"Raw View",className:"p-0 m-0",leftIcon:"fa fa-fw fa-file mr-2",children:(0,t.jsx)("div",{className:"code-highlighter-background p-2 mt-0",style:{},children:(0,t.jsx)("pre",{className:"p-0 m-0",children:(0,t.jsx)("code",{className:"p-0 m-0",children:n})})})})]})})})}},71394:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return E}});var t=r(34051),a=r.n(t),s=r(85893),c=r(42670),i=r(11163),u=r(67294),o=r(10619),d=r(40424),l=r(25617),f=r(96486),m=r.n(f),h=r(36345),v=r(28565),g=r(22946),p=r(11752),x=r(51388),b=(0,p.default)().publicRuntimeConfig,w="".concat(b.apiUrl),j=new g.X(""),N={results:j.asObservable(),getImages:function(e){return x.h.post("".concat(w,"/images"),e).then((function(e){if("success"===e.status)return j.next(e),e;throw Error(e.message)})).catch((function(e){j.next(null),console.log(e)}))},getImageById:function(e){return x.h.get("".concat(w,"/images/").concat(e)).then((function(e){if("success"===e.status)return j.next(e),e;throw Error(e.message)})).catch((function(e){j.next(null),console.log(e)}))}};var I=r(2797);function k(e,n,r,t,a,s,c){try{var i=e[s](c),u=i.value}catch(o){return void r(o)}i.done?n(u):Promise.resolve(u).then(t,a)}function y(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function c(e){k(s,t,a,c,i,"next",e)}function i(e){k(s,t,a,c,i,"throw",e)}c(void 0)}))}}function E(e){var n=function(e){var n,t=[];n=e.current?e.current:e,t.push({label:"Inspect",icon:"fa fa-fw fa-eye",command:function(){r()}}),n.active||t.push({label:"Remove",icon:"fa fa-fw fa-power-off",command:function(e){te("removeImage","Remove Image?",e)}}),F(t)},r=function(){var e;(E(!0),null===O||void 0===O?void 0:O.current)&&M.current.emit("docker",{command:"inspectImage",imageId:O.current.imageId,hostId:null===(e=O.current.host)||void 0===e?void 0:e.id,callback:"dockerResulsImages_"+O.current.id,hook:"inspectImage"})},t=function(){var e;M.current.emit("docker",{command:"removeImage",imageId:O.current.details.Id,hostId:null===(e=O.current.host)||void 0===e?void 0:e.id,callback:"dockerResulsImages_"+O.current.id,hook:"removeImage"})},f=(0,i.useRouter)(),g=(0,l.v9)((function(e){return e.images})),p=(0,u.useState)(!0),x=p[0],b=p[1],w=(0,u.useRef)(x);w.current=x;var j=(0,u.useState)(!1),k=j[0],E=j[1];(0,u.useRef)(k).current=k;var R=(0,u.useState)(),_=R[0],S=R[1],q=(0,u.useRef)(_);q.current=_;var L=(0,u.useState)(),T=L[0],C=L[1],O=(0,u.useRef)(T);O.current=T;var P=(0,u.useState)(),V=P[0],F=P[1],B=(0,u.useState)(),D=B[0],X=B[1],Z=(0,u.useState)(),A=Z[0],J=Z[1],M=(0,u.useRef)(A);M.current=A;var U=(0,u.useState)(!1),Y=U[0],$=U[1],z=(0,u.useState)(!1),G=z[0],H=z[1],K=function(e){var n=(0,u.useRef)();return(0,u.useEffect)((function(){n.current=e})),n.current}(T);function Q(){return W.apply(this,arguments)}function W(){return(W=y(a().mark((function e(){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=2;break}return e.abrupt("return");case 2:return $(!0),r="dockerResulsImages_"+q.current,e.next=6,v.L.getSocket();case 6:(t=e.sent).on(r,(function(e){if("success"===e.status&&e.data)if("removeImage"===e.hook)C(null);else e.data.id&&(C(e.data),n(e.data))})),J(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=y(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.query.id&&g&&Object.keys(g).forEach((function(e){var r=g[e];if(!m().isEqual(K,r.images[f.query.id])&&f.query.id in r.images){var t=r.images[f.query.id];C(t),w.current&&b(!0),n(t),w.current&&b(!1)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return(re=y(a().mark((function e(){var r,t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.current&&b(!0),O){e.next=11;break}return e.next=4,N.getImageById(q.current);case 4:r=e.sent,t=r.data,(s=r.error)&&(X(s),console.log("Error",s)),t&&(C(t),n(t),w.current&&b(!1)),e.next=12;break;case 11:n(O),w.current&&b(!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,u.useEffect)(y(a().mark((function n(){var r,t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:!0===e.embedded&&H(!0),(f.query.id||(null===(r=e.image)||void 0===r?void 0:r.id))&&((null===(t=e.image)||void 0===t?void 0:t.id)?S(e.image.id):S(f.query.id),setTimeout(y(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=3;break}return e.next=3,Q();case 3:ne();case 4:case"end":return e.stop()}}),e)})))));case 3:case"end":return n.stop()}}),n)}))),[f.query,e]),(0,u.useEffect)((function(){!function(){ee.apply(this,arguments)}()}),[g]),(0,u.useEffect)((function(){return function(){if(M.current){var e="dockerResulsImages_"+q.current;M.current.removeListener(e)}}}),[]);var te=function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,d.V)({className:"confirm-dialogs",message:n,target:(null===(r=a.originalEvent)||void 0===r?void 0:r.currentTarget)?a.originalEvent.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){if("removeImage"===e)t()}})};if(x)return(0,s.jsx)(c.$,{});if(D)return(0,s.jsxs)("div",{children:["Failed to load Image: ",D]});if(!f.query.id)return(0,s.jsx)("div",{children:"Loading..."});if(!T)return(0,s.jsx)("div",{className:"text-center mt-5",children:"Image could not be found."});var ae=!G;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsxs)("h2",{className:"grid col-12 p-0 m-0",children:[(0,s.jsx)("div",{className:"flex col-10 p-0 m-0",children:T.name}),(0,s.jsx)("div",{className:"col-2 text-right p-0 m-0",children:(0,s.jsxs)("h4",{children:["[",T.id,"]"]})})]}),(0,s.jsx)("div",{className:"flex col-12 justify-content-end"}),(0,s.jsx)("div",{className:"col-12 p-0 card",children:(0,s.jsx)(o.n,{className:"flex col-12 justify-content-end",model:V})})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)(h.Z,{data:T,collapsed:0,header:"Image Details"}),(0,s.jsx)("div",{className:"col-12 m1-2"}),T.name&&T.tag&&(0,s.jsx)(I.default,{showTags:!1,showPreview:!0,showMarkdown:ae,image:T,imageName:T.name})]})]})}}},function(e){e.O(0,[3662,2727,9723,6424,2797,9774,2888,179],(function(){return n=22541,e(e.s=n);var n}));var n=e.O();_N_E=n}]);