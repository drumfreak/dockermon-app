(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3654],{60931:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hosts/create",function(){return n(13794)}])},13794:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(34051),o=n.n(r),s=n(85893),c=n(11163),a=n(67294),l=n(40424),i=n(87536),u=n(95496),d=n(74231),m=n(99403),p=n(25600),f=n(46479),v=n(28565),h=n(49861),x=n(42670),j=n(43964),b=n(91176),g=n(92814),N=n(51436),y=n(91202),k=n(3718);function w(e,t,n,r,o,s,c){try{var a=e[s](c),l=a.value}catch(i){return void n(i)}a.done?t(l):Promise.resolve(l).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function c(e){w(s,r,o,c,a,"next",e)}function a(e){w(s,r,o,c,a,"throw",e)}c(void 0)}))}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function A(){var e,t,n,r,w=function(){return h.W.generateName()},T=(0,c.useRouter)(),A=(0,a.useRef)(null),C=(0,a.useState)(null)[0];(0,a.useRef)(C).current=C;var R=(0,a.useState)(!1),F=R[0],H=R[1],O=(0,a.useState)(!0),P=O[0],E=O[1];(0,a.useRef)(P).current=P;var q=(0,a.useState)(null),D=q[0],I=q[1],L=(0,a.useRef)(D);L.current=D;var z=(0,a.useState)(!1),V=z[0],X=z[1],B=(0,a.useState)("http"),G=B[0],W=B[1],Z=(0,a.useRef)(G);Z.current=G;var $=(0,a.useState)(!0),J=$[0],K=$[1],M=(0,a.useRef)(J);M.current=J;var Q=(0,a.useState)(!0),U=Q[0],Y=Q[1],ee=(0,a.useRef)(U);ee.current=U,(0,a.useEffect)(S(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=3;break}return e.next=3,ne();case 3:E(!1);case 4:case"end":return e.stop()}}),e)}))),[]),(0,a.useEffect)((function(){return function(){L.current&&L.current.removeListener("createHostForm")}}),[]);var te=function(){A.current.clear()};function ne(){return re.apply(this,arguments)}function re(){return(re=S(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V){e.next=2;break}return e.abrupt("return");case 2:return X(!0),e.next=5,v.L.getSocket();case 5:return(t=e.sent).on("createHostForm",(function(e){console.debug("-----------\x3e Create Host Result  ",e),"success"===e.status&&(0,l.V)({message:"Would you like to view it now?",header:"Host Created",icon:"pi pi-exclamation-check",accept:function(){return T.push("/hosts/"+e.data.id)},reject:function(){return E(!1)}}),e.error&&(F||H(!0),E(!1))})),I(t),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=d.Ry({name:d.Z_().required(),ipAddress:d.Z_().required(),port:d.Rx().required()}).required(),se=(0,i.cI)({resolver:(0,u.X)(oe)}),ce=se.register,ae=se.handleSubmit,le=se.setValue,ie=se.formState.errors;return P?(0,s.jsx)(x.$,{}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"New Host"}),(0,s.jsx)(j.s,{className:"col-8 md:8 m-auto",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("form",{onSubmit:ae((function(e){console.log("Submitting"),console.log("Fields Data",e),te();var t={name:e.name,ipAddress:e.ipAddress,port:ee.current,active:M.current,connectionType:Z.current};console.log("form body",t),E(!0),L.current.emit("hosts",{command:"createHost",data:t,callback:"createHostForm",hook:"createHost"})})),children:(0,s.jsxs)("div",{className:"p-fluid p-formgrid p-grid mt-5 ml-auto mr-auto jc-center",children:[(0,s.jsxs)(j.s,{className:"mt-3",header:"Basic Details",toggleable:!0,children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("div",{className:"p-field mt-2 col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Name"}),(0,s.jsxs)("div",{className:"p-inputgroup",children:[(0,s.jsx)(p.o,_({id:"name",keyfilter:/^[^<>*!\s]+$/,name:"name",type:"text",required:!0},ce("name",{value:w()}),{className:"form-control f-height-inputs ".concat(ie.name?"p-invalid":"")}),"name"),(0,s.jsx)("div",{className:"p-inputgroup-addon",children:(0,s.jsx)(m.z,{className:"p-button p-button-secondary",onClick:function(e){e.preventDefault();var t=w();le("name",t)},children:(0,s.jsx)(g.G,{icon:N.qiA})})})]}),(0,s.jsx)("div",{className:"invalid-feedback",children:null===(e=ie.name)||void 0===e?void 0:e.message})]})}),(0,s.jsx)("div",{className:"form-group mt-5",children:(0,s.jsxs)("div",{className:"mt-4 p-field col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"project",children:"Connection Type"}),(0,s.jsxs)("div",{className:"p-inputgroup",children:[(0,s.jsx)(y.L,_({name:"connectionType",id:"connectionType",options:["http","https","ws"],placeholder:"Connection Type"},ce("connectionType",{value:"http"}),{onChange:function(e){W(e.value),le("connectionType",e.value)},value:null===Z||void 0===Z?void 0:Z.current,className:"form-control f-height-inputs ".concat(ie.connectionType?"p-invalid":"")}),"connectionType"),(0,s.jsx)("div",{className:"invalid-feedback",children:null===(t=ie.connectionType)||void 0===t?void 0:t.message})]})]})}),(0,s.jsxs)("div",{className:"form-group mt-5",children:[(0,s.jsxs)("div",{className:"mt-4 p-field col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"driver",children:"IP Address or Hostname"}),(0,s.jsx)(p.o,_({id:"ipAddress",name:"ipAddress",type:"text",placeholder:"192.168.100.10"},ce("ipAddress",{value:null}),{className:"form-control f-height-inputs ".concat(ie.ipAddress?"p-invalid":"")}),"ipAddress"),(0,s.jsx)("div",{className:"invalid-feedback",children:null===(n=ie.ipAddress)||void 0===n?void 0:n.message})]}),(0,s.jsxs)("div",{className:"mt-4 p-field col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"driver",children:"Port Number"}),(0,s.jsx)(b.R,_({min:1,inputId:"port",placeholder:"2375",step:1,useGrouping:!1,showButtons:!1,value:ee.current},ce("port",{value:2375}),{tooltip:"The port number.",onChange:function(e){return Y(e.value)}})),(0,s.jsx)("div",{className:"invalid-feedback",children:null===(r=ie.port)||void 0===r?void 0:r.message})]})]}),(0,s.jsx)("div",{className:"form-group mt-5",children:(0,s.jsxs)("div",{className:"mt-4 p-field col-12 col-md-6 col-lg-4 col-xl-4 text-left",children:[(0,s.jsx)("label",{htmlFor:"project",children:"Host Status"}),(0,s.jsx)("div",{className:"col-6 ml-auto mr-auto",children:(0,s.jsx)(k.C,{className:"col-6 m-auto",checked:J,onChange:function(e){return K(e.value)},onLabel:"Active",offLabel:"Disabled",onIcon:"pi pi-check",offIcon:"pi pi-times"})})]})})]}),(0,s.jsx)("div",{className:"col-6 ml-auto mr-auto mt-5",children:(0,s.jsx)(m.z,{className:"p-button p-button-primary p-3",type:"button",label:"Test Connection"})}),(0,s.jsx)("div",{className:"col-6 ml-auto mr-auto mt-5",children:(0,s.jsx)(m.z,{className:"p-button p-button-primary p-3",type:"submit",label:"Join Host"})}),(0,s.jsx)(f.V,{ref:A})]})})})},"containerForm")]})})}}},function(e){e.O(0,[3978,699,9861,9774,2888,179],(function(){return t=60931,e(e.s=t);var t}));var t=e.O();_N_E=t}]);