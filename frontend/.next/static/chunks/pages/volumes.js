/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["pages/volumes"],{

/***/ "./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fvolumes&absolutePagePath=%2FUsers%2Fphpfreak%2FDevelopment%2Fdockermon-sub%2Fdockermon%2Fdockermon-react%2Fpages%2Fvolumes%2Findex.jsx!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fvolumes&absolutePagePath=%2FUsers%2Fphpfreak%2FDevelopment%2Fdockermon-sub%2Fdockermon%2Fdockermon-react%2Fpages%2Fvolumes%2Findex.jsx! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/volumes\",\n      function () {\n        return __webpack_require__(/*! ./pages/volumes/index.jsx */ \"./pages/volumes/index.jsx\");\n      }\n    ]);\n    if(true) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/volumes\"])\n      });\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWNsaWVudC1wYWdlcy1sb2FkZXIuanM/cGFnZT0lMkZ2b2x1bWVzJmFic29sdXRlUGFnZVBhdGg9JTJGVXNlcnMlMkZwaHBmcmVhayUyRkRldmVsb3BtZW50JTJGZG9ja2VybW9uLXN1YiUyRmRvY2tlcm1vbiUyRmRvY2tlcm1vbi1yZWFjdCUyRnBhZ2VzJTJGdm9sdW1lcyUyRmluZGV4LmpzeCEuanMiLCJtYXBwaW5ncyI6IjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQU8sQ0FBQyw0REFBMkI7QUFDbEQ7QUFDQTtBQUNBLE9BQU8sSUFBVTtBQUNqQixNQUFNLFVBQVU7QUFDaEI7QUFDQSxPQUFPO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvP2M2NDgiXSwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgKHdpbmRvdy5fX05FWFRfUCA9IHdpbmRvdy5fX05FWFRfUCB8fCBbXSkucHVzaChbXG4gICAgICBcIi92b2x1bWVzXCIsXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZXF1aXJlKFwiLi9wYWdlcy92b2x1bWVzL2luZGV4LmpzeFwiKTtcbiAgICAgIH1cbiAgICBdKTtcbiAgICBpZihtb2R1bGUuaG90KSB7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuX19ORVhUX1AucHVzaChbXCIvdm9sdW1lc1wiXSlcbiAgICAgIH0pO1xuICAgIH1cbiAgIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fvolumes&absolutePagePath=%2FUsers%2Fphpfreak%2FDevelopment%2Fdockermon-sub%2Fdockermon%2Fdockermon-react%2Fpages%2Fvolumes%2Findex.jsx!\n");

/***/ }),

/***/ "./pages/volumes/index.jsx":
/*!*********************************!*\
  !*** ./pages/volumes/index.jsx ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ VolumeIndex; }\n/* harmony export */ });\n/* harmony import */ var _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/next/dist/compiled/regenerator-runtime/runtime.js */ \"./node_modules/next/dist/compiled/regenerator-runtime/runtime.js\");\n/* harmony import */ var _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/link */ \"./node_modules/next/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var primereact_datatable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! primereact/datatable */ \"./node_modules/primereact/datatable/datatable.esm.js\");\n/* harmony import */ var primereact_column__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! primereact/column */ \"./node_modules/primereact/column/column.esm.js\");\n/* harmony import */ var primereact_badge__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! primereact/badge */ \"./node_modules/primereact/badge/badge.esm.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var services_socket_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! services/socket.service */ \"./services/socket.service.jsx\");\n/* harmony import */ var primereact_button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! primereact/button */ \"./node_modules/primereact/button/button.esm.js\");\n/* harmony import */ var primereact_confirmdialog__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! primereact/confirmdialog */ \"./node_modules/primereact/confirmdialog/confirmdialog.esm.js\");\n/* harmony import */ var _helpers_format_bytes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../helpers/format-bytes */ \"./helpers/format-bytes.jsx\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @fortawesome/react-fontawesome */ \"./node_modules/@fortawesome/react-fontawesome/index.es.js\");\n/* harmony import */ var primereact_api__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! primereact/api */ \"./node_modules/primereact/api/api.esm.js\");\n/* harmony import */ var primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! primereact/inputtext */ \"./node_modules/primereact/inputtext/inputtext.esm.js\");\n/* harmony import */ var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @fortawesome/free-solid-svg-icons */ \"./node_modules/@fortawesome/free-solid-svg-icons/index.es.js\");\n\n\n/* eslint-disable react-hooks/exhaustive-deps */ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n        var info = gen[key](arg);\n        var value = info.value;\n    } catch (error) {\n        reject(error);\n        return;\n    }\n    if (info.done) {\n        resolve(value);\n    } else {\n        Promise.resolve(value).then(_next, _throw);\n    }\n}\nfunction _asyncToGenerator(fn) {\n    return function() {\n        var self = this, args = arguments;\n        return new Promise(function(resolve, reject) {\n            var gen = fn.apply(self, args);\n            function _next(value) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n            }\n            function _throw(err) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n            }\n            _next(undefined);\n        });\n    };\n}\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === \"function\") {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nvar _s = $RefreshSig$();\nfunction VolumeIndex(props) {\n    var _this = this;\n    _s();\n    var router = (0,next_router__WEBPACK_IMPORTED_MODULE_12__.useRouter)();\n    var ref9 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true), isLoading = ref9[0], setIsLoading = ref9[1];\n    var isLoadingRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(isLoading);\n    isLoadingRef.current = isLoading;\n    var ref1 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), error = ref1[0];\n    var hosts = (0,react_redux__WEBPACK_IMPORTED_MODULE_7__.useSelector)(function(state) {\n        return state.hosts.hosts;\n    });\n    var hostsRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(hosts);\n    hostsRef.current = hosts;\n    var activeHost = (0,react_redux__WEBPACK_IMPORTED_MODULE_7__.useSelector)(function(state) {\n        return state.hosts.activeHost;\n    });\n    var activeHostRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(activeHost);\n    activeHostRef.current = activeHost;\n    var ref2 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), currentHost = ref2[0], setCurrentHost = ref2[1];\n    var currentHostRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(currentHost);\n    currentHostRef.current = currentHost;\n    var volumes = (0,react_redux__WEBPACK_IMPORTED_MODULE_7__.useSelector)(function(state) {\n        return state.volumes;\n    });\n    var ref3 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), socket1 = ref3[0], setSocket = ref3[1];\n    var socketRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(socket1);\n    socketRef.current = socket1;\n    var ref4 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false), socketLoaded = ref4[0], setSocketLoaded = ref4[1];\n    var ref5 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), items = ref5[0], setItems = ref5[1];\n    var itemsRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(items);\n    itemsRef.current = items;\n    var ref6 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), selectedRows = ref6[0], setSelectedRows = ref6[1];\n    var selectedRowsRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(selectedRows);\n    selectedRowsRef.current = selectedRows;\n    var ref7 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), filters1 = ref7[0], setFilters1 = ref7[1];\n    var ref8 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(''), globalFilterValue1 = ref8[0], setGlobalFilterValue1 = ref8[1];\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(_asyncToGenerator(_Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n        return _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n            while(1)switch(_ctx.prev = _ctx.next){\n                case 0:\n                    setup();\n                case 1:\n                case \"end\":\n                    return _ctx.stop();\n            }\n        }, _callee);\n    })), []);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(_asyncToGenerator(_Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n        return _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n            while(1)switch(_ctx.prev = _ctx.next){\n                case 0:\n                    setup();\n                case 1:\n                case \"end\":\n                    return _ctx.stop();\n            }\n        }, _callee);\n    })), [\n        activeHost,\n        volumes\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function() {\n        // Do unmounting stuff here\n        return function() {\n            if (socketRef === null || socketRef === void 0 ? void 0 : socketRef.current) {\n                socketRef.current.removeListener('volumes_list');\n            }\n        };\n    }, []);\n    function setup() {\n        return _setup.apply(this, arguments);\n    }\n    function _setup() {\n        _setup = _asyncToGenerator(_Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n            var ref, h;\n            return _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                while(1)switch(_ctx.prev = _ctx.next){\n                    case 0:\n                        ;\n                        if (socketLoaded) {\n                            _ctx.next = 4;\n                            break;\n                        }\n                        _ctx.next = 4;\n                        return loadSocket();\n                    case 4:\n                        // loadData(router.query.id);\n                        initFilters1();\n                        if (!((ref = router.query) === null || ref === void 0 ? void 0 : ref.hostId)) {\n                            _ctx.next = 14;\n                            break;\n                        }\n                        if (!hostsRef.current) {\n                            _ctx.next = 11;\n                            break;\n                        }\n                        h = hostsRef[router.query.hostId];\n                        setCurrentHost(h);\n                        setTimeout(function() {\n                            return loadVolumes();\n                        });\n                        return _ctx.abrupt(\"return\");\n                    case 11:\n                        setCurrentHost(props.host);\n                        setTimeout(function() {\n                            return loadVolumes();\n                        });\n                        return _ctx.abrupt(\"return\");\n                    case 14:\n                        if (!props.host) {\n                            _ctx.next = 18;\n                            break;\n                        }\n                        setCurrentHost(props.host);\n                        setTimeout(function() {\n                            return loadVolumes();\n                        });\n                        return _ctx.abrupt(\"return\");\n                    case 18:\n                        if (activeHostRef) {\n                            setCurrentHost(activeHostRef.current);\n                            setTimeout(function() {\n                                return loadVolumes();\n                            });\n                        }\n                    case 19:\n                    case \"end\":\n                        return _ctx.stop();\n                }\n            }, _callee);\n        }));\n        return _setup.apply(this, arguments);\n    }\n    function loadVolumes() {\n        return _loadVolumes.apply(this, arguments);\n    }\n    function _loadVolumes() {\n        _loadVolumes = _asyncToGenerator(_Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n            var ref, ref10, c1, data;\n            return _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                while(1)switch(_ctx.prev = _ctx.next){\n                    case 0:\n                        ;\n                        c1 = _objectSpread({}, volumes);\n                        if (!(!currentHostRef.current && !((ref = currentHostRef.current) === null || ref === void 0 ? void 0 : ref.id))) {\n                            _ctx.next = 4;\n                            break;\n                        }\n                        return _ctx.abrupt(\"return\");\n                    case 4:\n                        if (!(!volumes || !((ref10 = volumes[currentHostRef.current.id]) === null || ref10 === void 0 ? void 0 : ref10.volumes))) {\n                            _ctx.next = 6;\n                            break;\n                        }\n                        return _ctx.abrupt(\"return\");\n                    case 6:\n                        // console.log('Refreshing containers, host list changed');\n                        c1 = volumes[currentHostRef.current.id].volumes;\n                        data = Object.keys(c1).map(function(key) {\n                            return c1[key];\n                        });\n                        setItems(data);\n                        setIsLoading(false);\n                    case 10:\n                    case \"end\":\n                        return _ctx.stop();\n                }\n            }, _callee);\n        }));\n        return _loadVolumes.apply(this, arguments);\n    }\n    function loadSocket() {\n        return _loadSocket.apply(this, arguments);\n    }\n    function _loadSocket() {\n        _loadSocket = _asyncToGenerator(_Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n            var socket;\n            return _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                while(1)switch(_ctx.prev = _ctx.next){\n                    case 0:\n                        if (!socketLoaded) {\n                            _ctx.next = 2;\n                            break;\n                        }\n                        return _ctx.abrupt(\"return\");\n                    case 2:\n                        setSocketLoaded(true);\n                        _ctx.next = 5;\n                        return services_socket_service__WEBPACK_IMPORTED_MODULE_8__.socketService.getSocket();\n                    case 5:\n                        socket = _ctx.sent;\n                        socket.on('volumes_list', function(results) {\n                            if (results.status === 'success') {\n                                if (results.data) {\n                                    var data = results.data;\n                                    setItems(data);\n                                }\n                            }\n                        });\n                        setSocket(socket);\n                        return _ctx.abrupt(\"return\", socket);\n                    case 9:\n                    case \"end\":\n                        return _ctx.stop();\n                }\n            }, _callee);\n        }));\n        return _loadSocket.apply(this, arguments);\n    }\n    function loadData() {\n        return _loadData.apply(this, arguments);\n    }\n    function _loadData() {\n        _loadData = _asyncToGenerator(_Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n            return _Users_phpfreak_Development_dockermon_sub_dockermon_dockermon_react_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                while(1)switch(_ctx.prev = _ctx.next){\n                    case 0:\n                        // await dispatch(resetImages());\n                        socketRef.current.emit('docker', {\n                            command: 'listVolumes',\n                            callback: 'volumesList',\n                            hostId: currentHostRef.current.id\n                        });\n                        setIsLoading(true);\n                        setTimeout(function() {\n                            setIsLoading(false);\n                        }, 1000);\n                    case 3:\n                    case \"end\":\n                        return _ctx.stop();\n                }\n            }, _callee);\n        }));\n        return _loadData.apply(this, arguments);\n    }\n    var initFilters1 = function() {\n        setFilters1({\n            global: {\n                value: null,\n                matchMode: primereact_api__WEBPACK_IMPORTED_MODULE_14__.FilterMatchMode.CONTAINS\n            },\n            name: {\n                operator: primereact_api__WEBPACK_IMPORTED_MODULE_14__.FilterOperator.AND,\n                constraints: [\n                    {\n                        value: null,\n                        matchMode: primereact_api__WEBPACK_IMPORTED_MODULE_14__.FilterMatchMode.CONTAINS\n                    }\n                ]\n            },\n            project: {\n                operator: primereact_api__WEBPACK_IMPORTED_MODULE_14__.FilterOperator.AND,\n                constraints: [\n                    {\n                        value: null,\n                        matchMode: primereact_api__WEBPACK_IMPORTED_MODULE_14__.FilterMatchMode.CONTAINS\n                    }\n                ]\n            },\n            containerId: {\n                operator: primereact_api__WEBPACK_IMPORTED_MODULE_14__.FilterOperator.AND,\n                constraints: [\n                    {\n                        value: null,\n                        matchMode: primereact_api__WEBPACK_IMPORTED_MODULE_14__.FilterMatchMode.CONTAINS\n                    }\n                ]\n            }\n        });\n    };\n    var onGlobalFilterChange1 = function(e) {\n        var value = e.target.value;\n        var _filters1 = _objectSpread({}, filters1);\n        _filters1.global.value = value;\n        setFilters1(_filters1);\n        setGlobalFilterValue1(value);\n    };\n    // if (isLoading) return <Spinner />;\n    if (error) return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n        children: [\n            \"Failed to load Volumes: \",\n            error\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n        lineNumber: 178,\n        columnNumber: 21\n    }, this));\n    if (!volumes) return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n        children: \"No Volumes.\"\n    }, void 0, false, {\n        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n        lineNumber: 179,\n        columnNumber: 24\n    }, this));\n    if (volumes.length === 0) return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n        children: \"No Volumes.\"\n    }, void 0, false, {\n        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n        lineNumber: 180,\n        columnNumber: 36\n    }, this));\n    var nameTemplate = function(rowData) {\n        return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_3___default()), {\n                href: \"/volumes/[id]\",\n                as: \"/volumes/\".concat(rowData.id),\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"a\", {\n                    className: \"lightblue-color\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"b\", {\n                        children: rowData.name\n                    }, void 0, false, {\n                        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                        lineNumber: 187,\n                        columnNumber: 13\n                    }, _this)\n                }, void 0, false, {\n                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                    lineNumber: 186,\n                    columnNumber: 11\n                }, _this)\n            }, void 0, false, {\n                fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                lineNumber: 185,\n                columnNumber: 9\n            }, _this)\n        }, void 0, false));\n    };\n    var statusTemplate = function(rowData) {\n        var ref;\n        if ((rowData === null || rowData === void 0 ? void 0 : (ref = rowData.containers) === null || ref === void 0 ? void 0 : ref.length) > 0) {\n            return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_3___default()), {\n                    href: \"/volumes/[id]\",\n                    as: \"/volumes/\".concat(rowData.id),\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"a\", {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_badge__WEBPACK_IMPORTED_MODULE_6__.Badge, {\n                            size: \"\",\n                            value: \"In Use\",\n                            severity: \"success\"\n                        }, void 0, false, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 200,\n                            columnNumber: 15\n                        }, _this)\n                    }, void 0, false, {\n                        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                        lineNumber: 199,\n                        columnNumber: 13\n                    }, _this)\n                }, void 0, false, {\n                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                    lineNumber: 198,\n                    columnNumber: 11\n                }, _this)\n            }, void 0, false));\n        } else {\n            return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                children: rowData.containers.length\n            }, void 0, false, {\n                fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                lineNumber: 206,\n                columnNumber: 14\n            }, _this));\n        }\n    };\n    var sizeTemplate = function(rowData) {\n        if (rowData.fileSize) {\n            return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n                children: _helpers_format_bytes__WEBPACK_IMPORTED_MODULE_11__.formatBytes.bytes(Number(rowData.fileSize))\n            }, void 0, false));\n        } else {\n            return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                children: _helpers_format_bytes__WEBPACK_IMPORTED_MODULE_11__.formatBytes.bytes(Number(rowData.fileSize))\n            }, void 0, false, {\n                fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                lineNumber: 214,\n                columnNumber: 14\n            }, _this));\n        }\n    };\n    var actionTemplate = function(rowData) {\n        return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_button__WEBPACK_IMPORTED_MODULE_9__.Button, {\n                label: \"\",\n                onClick: function(e) {\n                    confirm('removeVolume', rowData, 'Remove ' + rowData.name + '?', e);\n                },\n                className: \"p-button-secondary\",\n                icon: \"pi pi-trash\"\n            }, void 0, false, {\n                fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                lineNumber: 221,\n                columnNumber: 9\n            }, _this)\n        }, void 0, false));\n    };\n    var removeVolume = function(volume) {\n        var ref;\n        socketRef.current.emit('docker', {\n            command: 'removeVolume',\n            volumeId: volume.volumeId,\n            hostId: (ref = volume.host) === null || ref === void 0 ? void 0 : ref.id,\n            callback: 'dockerResuls_volumes' + volume.id,\n            hook: 'removeVolume'\n        });\n    };\n    var confirm = function(action, volume, title) {\n        var target = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : null;\n        (0,primereact_confirmdialog__WEBPACK_IMPORTED_MODULE_10__.confirmDialog)({\n            className: 'confirm-dialogs',\n            message: title,\n            target: (target === null || target === void 0 ? void 0 : target.currentTarget) ? target.currentTarget : null,\n            header: 'Confirmation',\n            icon: 'pi pi-exclamation-triangle',\n            accept: function() {\n                switch(action){\n                    case 'removeVolume':\n                        removeVolume(volume);\n                        break;\n                    case 'removeSelected':\n                        removeSelected();\n                        break;\n                    default:\n                        break;\n                }\n            }\n        });\n    };\n    var selectRows = function(e) {\n        setSelectedRows(e.value);\n    };\n    var removeSelected = function() {\n        selectedRowsRef.current.forEach(function(volume) {\n            var ref;\n            // console.log('Volume');\n            if (((ref = volume.containers) === null || ref === void 0 ? void 0 : ref.length) === 0) {\n                removeVolume(volume);\n            }\n        });\n        setSelectedRows(null);\n    };\n    // if (items?.length === 0) return <Spinner />;\n    // const nitems = (itemsRef.current?.length > 0) ? itemsRef.current.slice(0, 100) : [];\n    return(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                    className: \"col-12 p-0 mt-2 pr-1 grid\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                            className: \"col-6\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"h2\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_13__.FontAwesomeIcon, {\n                                        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_16__.faFolder,\n                                        pull: \"left\",\n                                        className: \"fa-1x lightblue-color mt-0 pt-0\",\n                                        swapOpacity: true\n                                    }, void 0, false, {\n                                        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                        lineNumber: 290,\n                                        columnNumber: 15\n                                    }, this),\n                                    \"Docker Volumes\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                lineNumber: 289,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 288,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                            className: \"col-6 text-right pr-0\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"span\", {\n                                    className: \"p-input-icon-left mr-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"i\", {\n                                            className: \"pi pi-search\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                            lineNumber: 296,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__.InputText, {\n                                            value: globalFilterValue1,\n                                            onChange: onGlobalFilterChange1,\n                                            placeholder: \"Keyword Search\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                            lineNumber: 297,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                    lineNumber: 295,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_button__WEBPACK_IMPORTED_MODULE_9__.Button, {\n                                    label: \"Volume\",\n                                    className: \"p-button-secondary mr-2\",\n                                    icon: \"fa fa-plus\",\n                                    onClick: function() {\n                                        return router.push('/volumes/create');\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                    lineNumber: 299,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"button\", {\n                                    className: \"p-button p-component p-button-secondary mt-1 p-2\",\n                                    label: \"\",\n                                    onClick: function() {\n                                        return loadData();\n                                    },\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_13__.FontAwesomeIcon, {\n                                        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_16__.faArrowRotateRight,\n                                        className: \"mt-0 p-1\",\n                                        swapOpacity: true\n                                    }, void 0, false, {\n                                        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                        lineNumber: 301,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                                    lineNumber: 300,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 294,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                    lineNumber: 287,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_datatable__WEBPACK_IMPORTED_MODULE_4__.DataTable, {\n                    value: items,\n                    stripedRows: true,\n                    rowHover: true,\n                    showGridlines: true,\n                    selection: selectedRows,\n                    onSelectionChange: function(e) {\n                        return selectRows(e);\n                    },\n                    paginator: true,\n                    rows: 15,\n                    totalRecords: items === null || items === void 0 ? void 0 : items.length,\n                    dataKey: \"id\",\n                    rowsPerPageOptions: [\n                        10,\n                        15,\n                        20,\n                        50,\n                        100,\n                        200\n                    ],\n                    sortMode: \"single\",\n                    responsiveLayout: \"scroll\",\n                    sortField: \"name\",\n                    sortOrder: 1,\n                    filters: filters1,\n                    filterDisplay: \"menu\",\n                    loading: isLoadingRef.current,\n                    // loading={loading1}\n                    // responsiveLayout=\"scroll\"\n                    globalFilterFields: [\n                        'name',\n                        'imageId',\n                        'tag'\n                    ],\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_column__WEBPACK_IMPORTED_MODULE_5__.Column, {\n                            sortable: true,\n                            field: \"name\",\n                            header: \"Name\",\n                            filter: true,\n                            filterPlaceholder: \"Search by name\",\n                            body: nameTemplate\n                        }, void 0, false, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 330,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_column__WEBPACK_IMPORTED_MODULE_5__.Column, {\n                            sortable: true,\n                            field: \"containers\",\n                            header: \"Status\",\n                            align: \"center\",\n                            body: statusTemplate\n                        }, void 0, false, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 331,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_column__WEBPACK_IMPORTED_MODULE_5__.Column, {\n                            sortable: true,\n                            field: \"fileSize\",\n                            header: \"Size\",\n                            align: \"center\",\n                            body: sizeTemplate\n                        }, void 0, false, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 332,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_column__WEBPACK_IMPORTED_MODULE_5__.Column, {\n                            field: \"id\",\n                            header: \"Actions\",\n                            align: \"center\",\n                            body: actionTemplate\n                        }, void 0, false, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 333,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_column__WEBPACK_IMPORTED_MODULE_5__.Column, {\n                            selectionMode: \"multiple\",\n                            headerStyle: {\n                                width: '3em'\n                            }\n                        }, void 0, false, {\n                            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                            lineNumber: 334,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                    lineNumber: 306,\n                    columnNumber: 9\n                }, this),\n                (selectedRows === null || selectedRows === void 0 ? void 0 : selectedRows.length) > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                    className: \"col-12 text-right pr-2\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(primereact_button__WEBPACK_IMPORTED_MODULE_9__.Button, {\n                        className: \"mt-2 p-button-warning\",\n                        label: \"Remove Selected\",\n                        icon: \"fa fa-trash\",\n                        onClick: function(e) {\n                            return confirm('removeSelected', null, 'Remove Selected Volumes?', e);\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                        lineNumber: 338,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n                    lineNumber: 337,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n            lineNumber: 286,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/phpfreak/Development/dockermon-sub/dockermon/dockermon-react/pages/volumes/index.jsx\",\n        lineNumber: 285,\n        columnNumber: 5\n    }, this));\n};\n_s(VolumeIndex, \"hCx0whreQd/2dwejzjjPA7smqP0=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_12__.useRouter,\n        react_redux__WEBPACK_IMPORTED_MODULE_7__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_7__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_7__.useSelector\n    ];\n});\n_c = VolumeIndex;\nvar _c;\n$RefreshReg$(_c, \"VolumeIndex\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBQyxDQUFROzRCQUFDRCxJQUFJLEVBQUV6RCxjQUFjOzs7Ozs7b0dBQ3RGOUYscURBQU07NEJBQUNtSixRQUFROzRCQUFDQyxLQUFLLEVBQUMsQ0FBVTs0QkFBQ2pDLE1BQU0sRUFBQyxDQUFNOzRCQUFDcUMsS0FBSyxFQUFDLENBQVE7NEJBQUNELElBQUksRUFBRXJELFlBQVk7Ozs7OztvR0FDaEZsRyxxREFBTTs0QkFBQ29KLEtBQUssRUFBQyxDQUFJOzRCQUFDakMsTUFBTSxFQUFDLENBQVM7NEJBQUNxQyxLQUFLLEVBQUMsQ0FBUTs0QkFBQ0QsSUFBSSxFQUFFakQsY0FBYzs7Ozs7O29HQUN0RXRHLHFEQUFNOzRCQUFDeUosYUFBYSxFQUFDLENBQVU7NEJBQUNDLFdBQVcsRUFBRSxDQUFDO2dDQUFDQyxLQUFLLEVBQUUsQ0FBSzs0QkFBQyxDQUFDOzs7Ozs7Ozs7Ozs7aUJBRS9EcEgsWUFBWSxhQUFaQSxZQUFZLEtBQVpBLElBQUksQ0FBSkEsQ0FBb0IsR0FBcEJBLElBQUksQ0FBSkEsQ0FBb0IsR0FBcEJBLFlBQVksQ0FBRStDLE1BQU0sSUFBRyxDQUFDLGdGQUN0QkQsQ0FBRztvQkFBQ08sU0FBUyxFQUFDLENBQXdCOzBHQUNwQ3hGLHFEQUFNO3dCQUFDd0YsU0FBUyxFQUFDLENBQXVCO3dCQUFDVyxLQUFLLEVBQUMsQ0FBaUI7d0JBQUNHLElBQUksRUFBQyxDQUFhO3dCQUFDRixPQUFPLEVBQUUsUUFBUSxDQUFQdEIsQ0FBQzs0QkFBS3VCLE1BQU0sQ0FBTkEsT0FBTyxDQUFDLENBQWdCLGlCQUFFLElBQUksRUFBRSxDQUEwQiwyQkFBRXZCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTTlLLENBQUM7R0F0VXVCcEUsV0FBVzs7UUFDbEJQLG1EQUFTO1FBT1ZMLG9EQUFXO1FBT05BLG9EQUFXO1FBWWRBLG9EQUFXOzs7S0EzQkxZLFdBQVciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vcGFnZXMvdm9sdW1lcy9pbmRleC5qc3g/ZDU0NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgKi9cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluayc7XG5pbXBvcnQgeyBEYXRhVGFibGUgfSBmcm9tICdwcmltZXJlYWN0L2RhdGF0YWJsZSc7XG5pbXBvcnQgeyBDb2x1bW4gfSBmcm9tICdwcmltZXJlYWN0L2NvbHVtbic7XG5pbXBvcnQgeyBCYWRnZSB9IGZyb20gJ3ByaW1lcmVhY3QvYmFkZ2UnO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBzb2NrZXRTZXJ2aWNlIH0gZnJvbSAnc2VydmljZXMvc29ja2V0LnNlcnZpY2UnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAncHJpbWVyZWFjdC9idXR0b24nO1xuaW1wb3J0IHsgY29uZmlybURpYWxvZyB9IGZyb20gJ3ByaW1lcmVhY3QvY29uZmlybWRpYWxvZyc7XG5pbXBvcnQgeyBmb3JtYXRCeXRlcyB9IGZyb20gJy4uLy4uL2hlbHBlcnMvZm9ybWF0LWJ5dGVzJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IEZvbnRBd2Vzb21lSWNvbiB9IGZyb20gJ0Bmb3J0YXdlc29tZS9yZWFjdC1mb250YXdlc29tZSc7XG5pbXBvcnQgeyBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yIH0gZnJvbSAncHJpbWVyZWFjdC9hcGknO1xuaW1wb3J0IHsgSW5wdXRUZXh0IH0gZnJvbSAncHJpbWVyZWFjdC9pbnB1dHRleHQnO1xuaW1wb3J0IHsgZmFBcnJvd1JvdGF0ZVJpZ2h0LCBmYUZvbGRlciB9IGZyb20gJ0Bmb3J0YXdlc29tZS9mcmVlLXNvbGlkLXN2Zy1pY29ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZvbHVtZUluZGV4KHByb3BzKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IGlzTG9hZGluZ1JlZiA9IHVzZVJlZihpc0xvYWRpbmcpO1xuICBpc0xvYWRpbmdSZWYuY3VycmVudCA9IGlzTG9hZGluZztcblxuICBjb25zdCBbZXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgY29uc3QgaG9zdHMgPSB1c2VTZWxlY3Rvcigoc3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuaG9zdHMuaG9zdHM7XG4gIH0pO1xuXG4gIGNvbnN0IGhvc3RzUmVmID0gdXNlUmVmKGhvc3RzKTtcbiAgaG9zdHNSZWYuY3VycmVudCA9IGhvc3RzO1xuXG4gIGNvbnN0IGFjdGl2ZUhvc3QgPSB1c2VTZWxlY3Rvcigoc3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuaG9zdHMuYWN0aXZlSG9zdDtcbiAgfSk7XG5cbiAgY29uc3QgYWN0aXZlSG9zdFJlZiA9IHVzZVJlZihhY3RpdmVIb3N0KTtcbiAgYWN0aXZlSG9zdFJlZi5jdXJyZW50ID0gYWN0aXZlSG9zdDtcblxuXG4gIGNvbnN0IFtjdXJyZW50SG9zdCwgc2V0Q3VycmVudEhvc3RdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IGN1cnJlbnRIb3N0UmVmID0gdXNlUmVmKGN1cnJlbnRIb3N0KTtcbiAgY3VycmVudEhvc3RSZWYuY3VycmVudCA9IGN1cnJlbnRIb3N0O1xuXG4gIGNvbnN0IHZvbHVtZXMgPSB1c2VTZWxlY3Rvcigoc3RhdGUpID0+IHtcbiAgICByZXR1cm4gc3RhdGUudm9sdW1lcztcbiAgfSk7XG5cbiAgY29uc3QgW3NvY2tldCwgc2V0U29ja2V0XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBzb2NrZXRSZWYgPSB1c2VSZWYoc29ja2V0KTtcbiAgc29ja2V0UmVmLmN1cnJlbnQgPSBzb2NrZXQ7XG4gIGNvbnN0IFtzb2NrZXRMb2FkZWQsIHNldFNvY2tldExvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgW2l0ZW1zLCBzZXRJdGVtc10gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgaXRlbXNSZWYgPSB1c2VSZWYoaXRlbXMpO1xuICBpdGVtc1JlZi5jdXJyZW50ID0gaXRlbXM7XG5cbiAgY29uc3QgW3NlbGVjdGVkUm93cywgc2V0U2VsZWN0ZWRSb3dzXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBzZWxlY3RlZFJvd3NSZWYgPSB1c2VSZWYoc2VsZWN0ZWRSb3dzKTtcbiAgc2VsZWN0ZWRSb3dzUmVmLmN1cnJlbnQgPSBzZWxlY3RlZFJvd3M7XG5cbiAgY29uc3QgW2ZpbHRlcnMxLCBzZXRGaWx0ZXJzMV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2dsb2JhbEZpbHRlclZhbHVlMSwgc2V0R2xvYmFsRmlsdGVyVmFsdWUxXSA9IHVzZVN0YXRlKCcnKTtcblxuICB1c2VFZmZlY3QoYXN5bmMgKCkgPT4ge1xuICAgIHNldHVwKCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoYXN5bmMgKCkgPT4ge1xuICAgIHNldHVwKCk7XG4gIH0sIFthY3RpdmVIb3N0LCB2b2x1bWVzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBEbyB1bm1vdW50aW5nIHN0dWZmIGhlcmVcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHNvY2tldFJlZj8uY3VycmVudCkge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5yZW1vdmVMaXN0ZW5lcigndm9sdW1lc19saXN0Jyk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG5cbiAgYXN5bmMgZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgaWYgKCFzb2NrZXRMb2FkZWQpIHtcbiAgICAgIGF3YWl0IGxvYWRTb2NrZXQoKTtcbiAgICB9XG4gICAgLy8gbG9hZERhdGEocm91dGVyLnF1ZXJ5LmlkKTtcbiAgICBpbml0RmlsdGVyczEoKTtcbiAgICBpZiAocm91dGVyLnF1ZXJ5Py5ob3N0SWQpIHtcbiAgICAgIGlmIChob3N0c1JlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IGggPSBob3N0c1JlZltyb3V0ZXIucXVlcnkuaG9zdElkXTtcbiAgICAgICAgc2V0Q3VycmVudEhvc3QoaCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gbG9hZFZvbHVtZXMoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNldEN1cnJlbnRIb3N0KHByb3BzLmhvc3QpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBsb2FkVm9sdW1lcygpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocHJvcHMuaG9zdCkge1xuICAgICAgc2V0Q3VycmVudEhvc3QocHJvcHMuaG9zdCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGxvYWRWb2x1bWVzKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChhY3RpdmVIb3N0UmVmKSB7XG4gICAgICBzZXRDdXJyZW50SG9zdChhY3RpdmVIb3N0UmVmLmN1cnJlbnQpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBsb2FkVm9sdW1lcygpKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBsb2FkVm9sdW1lcygpIHtcbiAgICBsZXQgYzEgPSB7IC4uLnZvbHVtZXMgfTtcbiAgICBpZiAoIWN1cnJlbnRIb3N0UmVmLmN1cnJlbnQgJiYgIWN1cnJlbnRIb3N0UmVmLmN1cnJlbnQ/LmlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdm9sdW1lcyB8fCAhdm9sdW1lc1tjdXJyZW50SG9zdFJlZi5jdXJyZW50LmlkXT8udm9sdW1lcykge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3JldHVybmluZycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnUmVmcmVzaGluZyBjb250YWluZXJzLCBob3N0IGxpc3QgY2hhbmdlZCcpO1xuICAgIGMxID0gdm9sdW1lc1tjdXJyZW50SG9zdFJlZi5jdXJyZW50LmlkXS52b2x1bWVzO1xuICAgIGNvbnN0IGRhdGEgPSBPYmplY3Qua2V5cyhjMSkubWFwKChrZXkpID0+IGMxW2tleV0pO1xuICAgIHNldEl0ZW1zKGRhdGEpO1xuICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBsb2FkU29ja2V0KCkge1xuICAgIGlmIChzb2NrZXRMb2FkZWQpIHJldHVybjtcbiAgICBzZXRTb2NrZXRMb2FkZWQodHJ1ZSk7XG4gICAgLy8gY29uc3Qgc29ja2V0TmFtZSA9ICd2b2x1bWVzX2xpc3QnO1xuICAgIGNvbnN0IHNvY2tldCA9IGF3YWl0IHNvY2tldFNlcnZpY2UuZ2V0U29ja2V0KCk7XG5cbiAgICBzb2NrZXQub24oJ3ZvbHVtZXNfbGlzdCcsIChyZXN1bHRzKSA9PiB7XG4gICAgICBpZiAocmVzdWx0cy5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICBpZiAocmVzdWx0cy5kYXRhKSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3VsdHMuZGF0YTtcbiAgICAgICAgICBzZXRJdGVtcyhkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2V0U29ja2V0KHNvY2tldCk7XG4gICAgcmV0dXJuIHNvY2tldDtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKCkge1xuICAgIC8vIGF3YWl0IGRpc3BhdGNoKHJlc2V0SW1hZ2VzKCkpO1xuICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ2RvY2tlcicsIHtcbiAgICAgIGNvbW1hbmQ6ICdsaXN0Vm9sdW1lcycsXG4gICAgICBjYWxsYmFjazogJ3ZvbHVtZXNMaXN0JyxcbiAgICAgIGhvc3RJZDogY3VycmVudEhvc3RSZWYuY3VycmVudC5pZCxcbiAgICB9KTtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH0sIDEwMDApO1xuICB9XG5cbiAgY29uc3QgaW5pdEZpbHRlcnMxID0gKCkgPT4ge1xuICAgIHNldEZpbHRlcnMxKHtcbiAgICAgIGdsb2JhbDogeyB2YWx1ZTogbnVsbCwgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMgfSxcbiAgICAgIG5hbWU6IHsgb3BlcmF0b3I6IEZpbHRlck9wZXJhdG9yLkFORCwgY29uc3RyYWludHM6IFt7IHZhbHVlOiBudWxsLCBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUyB9XSB9LFxuICAgICAgcHJvamVjdDogeyBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3IuQU5ELCBjb25zdHJhaW50czogW3sgdmFsdWU6IG51bGwsIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TIH1dIH0sXG4gICAgICBjb250YWluZXJJZDogeyBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3IuQU5ELCBjb25zdHJhaW50czogW3sgdmFsdWU6IG51bGwsIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TIH1dIH0sXG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IG9uR2xvYmFsRmlsdGVyQ2hhbmdlMSA9IChlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICBsZXQgX2ZpbHRlcnMxID0geyAuLi5maWx0ZXJzMSB9O1xuICAgIF9maWx0ZXJzMS5nbG9iYWwudmFsdWUgPSB2YWx1ZTtcbiAgICBzZXRGaWx0ZXJzMShfZmlsdGVyczEpO1xuICAgIHNldEdsb2JhbEZpbHRlclZhbHVlMSh2YWx1ZSk7XG4gIH07XG5cbiAgLy8gaWYgKGlzTG9hZGluZykgcmV0dXJuIDxTcGlubmVyIC8+O1xuICBpZiAoZXJyb3IpIHJldHVybiA8ZGl2PkZhaWxlZCB0byBsb2FkIFZvbHVtZXM6IHtlcnJvcn08L2Rpdj47XG4gIGlmICghdm9sdW1lcykgcmV0dXJuIDxkaXY+Tm8gVm9sdW1lcy48L2Rpdj47XG4gIGlmICh2b2x1bWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDxkaXY+Tm8gVm9sdW1lcy48L2Rpdj47XG5cbiAgY29uc3QgbmFtZVRlbXBsYXRlID0gKHJvd0RhdGEpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAgPExpbmsgaHJlZj1cIi92b2x1bWVzL1tpZF1cIiBhcz17YC92b2x1bWVzLyR7cm93RGF0YS5pZH1gfT5cbiAgICAgICAgICA8YSBjbGFzc05hbWU9XCJsaWdodGJsdWUtY29sb3JcIj5cbiAgICAgICAgICAgIDxiPntyb3dEYXRhLm5hbWV9PC9iPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9MaW5rPlxuICAgICAgPC8+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBzdGF0dXNUZW1wbGF0ZSA9IChyb3dEYXRhKSA9PiB7XG4gICAgaWYgKHJvd0RhdGE/LmNvbnRhaW5lcnM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPExpbmsgaHJlZj1cIi92b2x1bWVzL1tpZF1cIiBhcz17YC92b2x1bWVzLyR7cm93RGF0YS5pZH1gfT5cbiAgICAgICAgICAgIDxhPlxuICAgICAgICAgICAgICA8QmFkZ2Ugc2l6ZT1cIlwiIHZhbHVlPVwiSW4gVXNlXCIgc2V2ZXJpdHk9XCJzdWNjZXNzXCI+PC9CYWRnZT5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L0xpbms+XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDxkaXY+e3Jvd0RhdGEuY29udGFpbmVycy5sZW5ndGh9PC9kaXY+O1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaXplVGVtcGxhdGUgPSAocm93RGF0YSkgPT4ge1xuICAgIGlmIChyb3dEYXRhLmZpbGVTaXplKSB7XG4gICAgICByZXR1cm4gPD57Zm9ybWF0Qnl0ZXMuYnl0ZXMoTnVtYmVyKHJvd0RhdGEuZmlsZVNpemUpKX08Lz47XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiA8ZGl2Pntmb3JtYXRCeXRlcy5ieXRlcyhOdW1iZXIocm93RGF0YS5maWxlU2l6ZSkpfTwvZGl2PjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWN0aW9uVGVtcGxhdGUgPSAocm93RGF0YSkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgbGFiZWw9XCJcIlxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBjb25maXJtKCdyZW1vdmVWb2x1bWUnLCByb3dEYXRhLCAnUmVtb3ZlICcgKyByb3dEYXRhLm5hbWUgKyAnPycsIGUpO1xuICAgICAgICAgIH19XG4gICAgICAgICAgY2xhc3NOYW1lPVwicC1idXR0b24tc2Vjb25kYXJ5XCJcbiAgICAgICAgICBpY29uPVwicGkgcGktdHJhc2hcIlxuICAgICAgICAvPlxuICAgICAgPC8+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVWb2x1bWUgPSAodm9sdW1lKSA9PiB7XG4gICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnZG9ja2VyJywge1xuICAgICAgY29tbWFuZDogJ3JlbW92ZVZvbHVtZScsXG4gICAgICB2b2x1bWVJZDogdm9sdW1lLnZvbHVtZUlkLFxuICAgICAgaG9zdElkOiB2b2x1bWUuaG9zdD8uaWQsXG4gICAgICBjYWxsYmFjazogJ2RvY2tlclJlc3Vsc192b2x1bWVzJyArIHZvbHVtZS5pZCxcbiAgICAgIGhvb2s6ICdyZW1vdmVWb2x1bWUnLFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGNvbmZpcm0gPSAoYWN0aW9uLCB2b2x1bWUsIHRpdGxlLCB0YXJnZXQgPSBudWxsKSA9PiB7XG4gICAgY29uZmlybURpYWxvZyh7XG4gICAgICBjbGFzc05hbWU6ICdjb25maXJtLWRpYWxvZ3MnLFxuICAgICAgbWVzc2FnZTogdGl0bGUsXG4gICAgICB0YXJnZXQ6IHRhcmdldD8uY3VycmVudFRhcmdldCA/IHRhcmdldC5jdXJyZW50VGFyZ2V0IDogbnVsbCxcbiAgICAgIGhlYWRlcjogJ0NvbmZpcm1hdGlvbicsXG4gICAgICBpY29uOiAncGkgcGktZXhjbGFtYXRpb24tdHJpYW5nbGUnLFxuICAgICAgYWNjZXB0OiAoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgY2FzZSAncmVtb3ZlVm9sdW1lJzpcbiAgICAgICAgICAgIHJlbW92ZVZvbHVtZSh2b2x1bWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdyZW1vdmVTZWxlY3RlZCc6XG4gICAgICAgICAgICByZW1vdmVTZWxlY3RlZCgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2VsZWN0Um93cyA9IChlKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRSb3dzKGUudmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZVNlbGVjdGVkID0gKCkgPT4ge1xuICAgIHNlbGVjdGVkUm93c1JlZi5jdXJyZW50LmZvckVhY2goKHZvbHVtZSkgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2coJ1ZvbHVtZScpO1xuICAgICAgaWYgKHZvbHVtZS5jb250YWluZXJzPy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVtb3ZlVm9sdW1lKHZvbHVtZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2V0U2VsZWN0ZWRSb3dzKG51bGwpO1xuICB9O1xuXG4gIC8vIGlmIChpdGVtcz8ubGVuZ3RoID09PSAwKSByZXR1cm4gPFNwaW5uZXIgLz47XG4gIC8vIGNvbnN0IG5pdGVtcyA9IChpdGVtc1JlZi5jdXJyZW50Py5sZW5ndGggPiAwKSA/IGl0ZW1zUmVmLmN1cnJlbnQuc2xpY2UoMCwgMTAwKSA6IFtdO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIHAtMCBtdC0yIHByLTEgZ3JpZFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTZcIj5cbiAgICAgICAgICAgIDxoMj5cbiAgICAgICAgICAgICAgPEZvbnRBd2Vzb21lSWNvbiBpY29uPXtmYUZvbGRlcn0gcHVsbD1cImxlZnRcIiBjbGFzc05hbWU9XCJmYS0xeCBsaWdodGJsdWUtY29sb3IgbXQtMCBwdC0wXCIgc3dhcE9wYWNpdHkgLz5cbiAgICAgICAgICAgICAgRG9ja2VyIFZvbHVtZXNcbiAgICAgICAgICAgIDwvaDI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtNiB0ZXh0LXJpZ2h0IHByLTBcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInAtaW5wdXQtaWNvbi1sZWZ0IG1yLTNcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwicGkgcGktc2VhcmNoXCIgLz5cbiAgICAgICAgICAgICAgPElucHV0VGV4dCB2YWx1ZT17Z2xvYmFsRmlsdGVyVmFsdWUxfSBvbkNoYW5nZT17b25HbG9iYWxGaWx0ZXJDaGFuZ2UxfSBwbGFjZWhvbGRlcj1cIktleXdvcmQgU2VhcmNoXCIgLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxCdXR0b24gbGFiZWw9XCJWb2x1bWVcIiBjbGFzc05hbWU9XCJwLWJ1dHRvbi1zZWNvbmRhcnkgbXItMlwiIGljb249XCJmYSBmYS1wbHVzXCIgb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2goJy92b2x1bWVzL2NyZWF0ZScpfT48L0J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicC1idXR0b24gcC1jb21wb25lbnQgcC1idXR0b24tc2Vjb25kYXJ5IG10LTEgcC0yXCIgbGFiZWw9XCJcIiBvbkNsaWNrPXsoKSA9PiBsb2FkRGF0YSgpfT5cbiAgICAgICAgICAgICAgPEZvbnRBd2Vzb21lSWNvbiBpY29uPXtmYUFycm93Um90YXRlUmlnaHR9IGNsYXNzTmFtZT1cIm10LTAgcC0xXCIgc3dhcE9wYWNpdHkgLz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8RGF0YVRhYmxlXG4gICAgICAgICAgdmFsdWU9e2l0ZW1zfVxuICAgICAgICAgIHN0cmlwZWRSb3dzPXt0cnVlfVxuICAgICAgICAgIHJvd0hvdmVyPXt0cnVlfVxuICAgICAgICAgIHNob3dHcmlkbGluZXM9e3RydWV9XG4gICAgICAgICAgc2VsZWN0aW9uPXtzZWxlY3RlZFJvd3N9XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9eyhlKSA9PiBzZWxlY3RSb3dzKGUpfVxuICAgICAgICAgIHBhZ2luYXRvclxuICAgICAgICAgIHJvd3M9ezE1fVxuICAgICAgICAgIHRvdGFsUmVjb3Jkcz17aXRlbXM/Lmxlbmd0aH1cbiAgICAgICAgICBkYXRhS2V5PVwiaWRcIlxuICAgICAgICAgIHJvd3NQZXJQYWdlT3B0aW9ucz17WzEwLCAxNSwgMjAsIDUwLCAxMDAsIDIwMF19XG4gICAgICAgICAgc29ydE1vZGU9XCJzaW5nbGVcIlxuICAgICAgICAgIHJlc3BvbnNpdmVMYXlvdXQ9XCJzY3JvbGxcIlxuICAgICAgICAgIHNvcnRGaWVsZD1cIm5hbWVcIlxuICAgICAgICAgIHNvcnRPcmRlcj17MX1cbiAgICAgICAgICBmaWx0ZXJzPXtmaWx0ZXJzMX1cbiAgICAgICAgICBmaWx0ZXJEaXNwbGF5PVwibWVudVwiXG4gICAgICAgICAgbG9hZGluZz17aXNMb2FkaW5nUmVmLmN1cnJlbnR9XG4gICAgICAgICAgLy8gbG9hZGluZz17bG9hZGluZzF9XG4gICAgICAgICAgLy8gcmVzcG9uc2l2ZUxheW91dD1cInNjcm9sbFwiXG4gICAgICAgICAgZ2xvYmFsRmlsdGVyRmllbGRzPXtbJ25hbWUnLCAnaW1hZ2VJZCcsICd0YWcnXX1cbiAgICAgICAgPlxuICAgICAgICAgIHsvKiA8Q29sdW1uIGZpZWxkPVwiaWRcIiBoZWFkZXI9XCJJZFwiPjwvQ29sdW1uPiAqL31cbiAgICAgICAgICA8Q29sdW1uIHNvcnRhYmxlIGZpZWxkPVwibmFtZVwiIGhlYWRlcj1cIk5hbWVcIiBmaWx0ZXIgZmlsdGVyUGxhY2Vob2xkZXI9XCJTZWFyY2ggYnkgbmFtZVwiIGJvZHk9e25hbWVUZW1wbGF0ZX0+PC9Db2x1bW4+XG4gICAgICAgICAgPENvbHVtbiBzb3J0YWJsZSBmaWVsZD1cImNvbnRhaW5lcnNcIiBoZWFkZXI9XCJTdGF0dXNcIiBhbGlnbj1cImNlbnRlclwiIGJvZHk9e3N0YXR1c1RlbXBsYXRlfT48L0NvbHVtbj5cbiAgICAgICAgICA8Q29sdW1uIHNvcnRhYmxlIGZpZWxkPVwiZmlsZVNpemVcIiBoZWFkZXI9XCJTaXplXCIgYWxpZ249XCJjZW50ZXJcIiBib2R5PXtzaXplVGVtcGxhdGV9PjwvQ29sdW1uPlxuICAgICAgICAgIDxDb2x1bW4gZmllbGQ9XCJpZFwiIGhlYWRlcj1cIkFjdGlvbnNcIiBhbGlnbj1cImNlbnRlclwiIGJvZHk9e2FjdGlvblRlbXBsYXRlfT48L0NvbHVtbj5cbiAgICAgICAgICA8Q29sdW1uIHNlbGVjdGlvbk1vZGU9XCJtdWx0aXBsZVwiIGhlYWRlclN0eWxlPXt7IHdpZHRoOiAnM2VtJyB9fT48L0NvbHVtbj5cbiAgICAgICAgPC9EYXRhVGFibGU+XG4gICAgICAgIHtzZWxlY3RlZFJvd3M/Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIHRleHQtcmlnaHQgcHItMlwiPlxuICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9XCJtdC0yIHAtYnV0dG9uLXdhcm5pbmdcIiBsYWJlbD1cIlJlbW92ZSBTZWxlY3RlZFwiIGljb249XCJmYSBmYS10cmFzaFwiIG9uQ2xpY2s9eyhlKSA9PiBjb25maXJtKCdyZW1vdmVTZWxlY3RlZCcsIG51bGwsICdSZW1vdmUgU2VsZWN0ZWQgVm9sdW1lcz8nLCBlKX0+PC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIkxpbmsiLCJEYXRhVGFibGUiLCJDb2x1bW4iLCJCYWRnZSIsInVzZVNlbGVjdG9yIiwic29ja2V0U2VydmljZSIsIkJ1dHRvbiIsImNvbmZpcm1EaWFsb2ciLCJmb3JtYXRCeXRlcyIsInVzZVJvdXRlciIsIkZvbnRBd2Vzb21lSWNvbiIsIkZpbHRlck1hdGNoTW9kZSIsIkZpbHRlck9wZXJhdG9yIiwiSW5wdXRUZXh0IiwiZmFBcnJvd1JvdGF0ZVJpZ2h0IiwiZmFGb2xkZXIiLCJWb2x1bWVJbmRleCIsInByb3BzIiwicm91dGVyIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiaXNMb2FkaW5nUmVmIiwiY3VycmVudCIsImVycm9yIiwiaG9zdHMiLCJzdGF0ZSIsImhvc3RzUmVmIiwiYWN0aXZlSG9zdCIsImFjdGl2ZUhvc3RSZWYiLCJjdXJyZW50SG9zdCIsInNldEN1cnJlbnRIb3N0IiwiY3VycmVudEhvc3RSZWYiLCJ2b2x1bWVzIiwic29ja2V0Iiwic2V0U29ja2V0Iiwic29ja2V0UmVmIiwic29ja2V0TG9hZGVkIiwic2V0U29ja2V0TG9hZGVkIiwiaXRlbXMiLCJzZXRJdGVtcyIsIml0ZW1zUmVmIiwic2VsZWN0ZWRSb3dzIiwic2V0U2VsZWN0ZWRSb3dzIiwic2VsZWN0ZWRSb3dzUmVmIiwiZmlsdGVyczEiLCJzZXRGaWx0ZXJzMSIsImdsb2JhbEZpbHRlclZhbHVlMSIsInNldEdsb2JhbEZpbHRlclZhbHVlMSIsInNldHVwIiwicmVtb3ZlTGlzdGVuZXIiLCJoIiwibG9hZFNvY2tldCIsImluaXRGaWx0ZXJzMSIsInF1ZXJ5IiwiaG9zdElkIiwic2V0VGltZW91dCIsImxvYWRWb2x1bWVzIiwiaG9zdCIsImMxIiwiZGF0YSIsImlkIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImdldFNvY2tldCIsIm9uIiwicmVzdWx0cyIsInN0YXR1cyIsImxvYWREYXRhIiwiZW1pdCIsImNvbW1hbmQiLCJjYWxsYmFjayIsImdsb2JhbCIsInZhbHVlIiwibWF0Y2hNb2RlIiwiQ09OVEFJTlMiLCJuYW1lIiwib3BlcmF0b3IiLCJBTkQiLCJjb25zdHJhaW50cyIsInByb2plY3QiLCJjb250YWluZXJJZCIsIm9uR2xvYmFsRmlsdGVyQ2hhbmdlMSIsImUiLCJ0YXJnZXQiLCJfZmlsdGVyczEiLCJkaXYiLCJsZW5ndGgiLCJuYW1lVGVtcGxhdGUiLCJyb3dEYXRhIiwiaHJlZiIsImFzIiwiYSIsImNsYXNzTmFtZSIsImIiLCJzdGF0dXNUZW1wbGF0ZSIsImNvbnRhaW5lcnMiLCJzaXplIiwic2V2ZXJpdHkiLCJzaXplVGVtcGxhdGUiLCJmaWxlU2l6ZSIsImJ5dGVzIiwiTnVtYmVyIiwiYWN0aW9uVGVtcGxhdGUiLCJsYWJlbCIsIm9uQ2xpY2siLCJjb25maXJtIiwiaWNvbiIsInJlbW92ZVZvbHVtZSIsInZvbHVtZSIsInZvbHVtZUlkIiwiaG9vayIsImFjdGlvbiIsInRpdGxlIiwibWVzc2FnZSIsImN1cnJlbnRUYXJnZXQiLCJoZWFkZXIiLCJhY2NlcHQiLCJyZW1vdmVTZWxlY3RlZCIsInNlbGVjdFJvd3MiLCJmb3JFYWNoIiwiaDIiLCJwdWxsIiwic3dhcE9wYWNpdHkiLCJzcGFuIiwiaSIsIm9uQ2hhbmdlIiwicGxhY2Vob2xkZXIiLCJwdXNoIiwiYnV0dG9uIiwic3RyaXBlZFJvd3MiLCJyb3dIb3ZlciIsInNob3dHcmlkbGluZXMiLCJzZWxlY3Rpb24iLCJvblNlbGVjdGlvbkNoYW5nZSIsInBhZ2luYXRvciIsInJvd3MiLCJ0b3RhbFJlY29yZHMiLCJkYXRhS2V5Iiwicm93c1BlclBhZ2VPcHRpb25zIiwic29ydE1vZGUiLCJyZXNwb25zaXZlTGF5b3V0Iiwic29ydEZpZWxkIiwic29ydE9yZGVyIiwiZmlsdGVycyIsImZpbHRlckRpc3BsYXkiLCJsb2FkaW5nIiwiZ2xvYmFsRmlsdGVyRmllbGRzIiwic29ydGFibGUiLCJmaWVsZCIsImZpbHRlciIsImZpbHRlclBsYWNlaG9sZGVyIiwiYm9keSIsImFsaWduIiwic2VsZWN0aW9uTW9kZSIsImhlYWRlclN0eWxlIiwid2lkdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/volumes/index.jsx\n");

/***/ }),

/***/ "./node_modules/primereact/column/column.esm.js":
/*!******************************************************!*\
  !*** ./node_modules/primereact/column/column.esm.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Column\": function() { return /* binding */ Column; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar Column = /*#__PURE__*/function (_Component) {\n  _inherits(Column, _Component);\n\n  var _super = _createSuper(Column);\n\n  function Column() {\n    _classCallCheck(this, Column);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(Column);\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(Column, \"defaultProps\", {\n  columnKey: null,\n  field: null,\n  sortField: null,\n  filterField: null,\n  exportField: null,\n  header: null,\n  body: null,\n  footer: null,\n  sortable: false,\n  sortableDisabled: false,\n  sortFunction: null,\n  dataType: 'text',\n  filter: false,\n  filterMatchMode: null,\n  filterPlaceholder: null,\n  filterType: 'text',\n  filterMaxLength: null,\n  filterElement: null,\n  filterFunction: null,\n  filterHeaderStyle: null,\n  filterHeaderClassName: null,\n  showFilterMenu: true,\n  showFilterOperator: true,\n  showClearButton: true,\n  showApplyButton: true,\n  showFilterMatchModes: true,\n  showFilterMenuOptions: true,\n  showAddButton: true,\n  filterMatchModeOptions: null,\n  maxConstraints: 2,\n  filterMenuClassName: null,\n  filterMenuStyle: null,\n  align: null,\n  alignHeader: null,\n  alignFrozen: 'left',\n  hidden: false,\n  onFilterClear: null,\n  onFilterApplyClick: null,\n  onFilterMatchModeChange: null,\n  onFilterOperatorChange: null,\n  onFilterConstraintAdd: null,\n  onFilterConstraintRemove: null,\n  filterClear: null,\n  filterApply: null,\n  filterHeader: null,\n  filterFooter: null,\n  style: null,\n  className: null,\n  headerStyle: null,\n  headerClassName: null,\n  bodyStyle: null,\n  bodyClassName: null,\n  footerStyle: null,\n  footerClassName: null,\n  expander: false,\n  frozen: false,\n  selectionMode: null,\n  colSpan: null,\n  rowSpan: null,\n  editor: null,\n  cellEditValidator: null,\n  cellEditValidatorEvent: 'click',\n  onBeforeCellEditHide: null,\n  onBeforeCellEditShow: null,\n  onCellEditInit: null,\n  onCellEditComplete: null,\n  onCellEditCancel: null,\n  excludeGlobalFilter: false,\n  rowReorder: false,\n  rowReorderIcon: 'pi pi-bars',\n  rowEditor: false,\n  exportable: true,\n  reorderable: true\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJpbWVyZWFjdC9jb2x1bW4vY29sdW1uLmVzbS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0M7O0FBRWxDO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlDQUFpQyw2REFBNkQseUNBQXlDLDhDQUE4QyxpQ0FBaUMsbURBQW1ELDJEQUEyRCxPQUFPLHlDQUF5Qzs7QUFFcFgsdUNBQXVDLHdFQUF3RSwwQ0FBMEMsOENBQThDLE1BQU0sNEVBQTRFLElBQUksZUFBZSxZQUFZO0FBQ3hUO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQyxDQUFDLDRDQUFTOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvcHJpbWVyZWFjdC9jb2x1bW4vY29sdW1uLmVzbS5qcz84MzEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7XG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwge1xuICAgIHdyaXRhYmxlOiBmYWxzZVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgfSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICB9LCBfdHlwZW9mKG9iaik7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICByZXR1cm4gY2FsbDtcbiAgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7XG4gIH1cblxuICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgQ29sdW1uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDb2x1bW4sIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQ29sdW1uKTtcblxuICBmdW5jdGlvbiBDb2x1bW4oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbHVtbik7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKENvbHVtbik7XG59KENvbXBvbmVudCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShDb2x1bW4sIFwiZGVmYXVsdFByb3BzXCIsIHtcbiAgY29sdW1uS2V5OiBudWxsLFxuICBmaWVsZDogbnVsbCxcbiAgc29ydEZpZWxkOiBudWxsLFxuICBmaWx0ZXJGaWVsZDogbnVsbCxcbiAgZXhwb3J0RmllbGQ6IG51bGwsXG4gIGhlYWRlcjogbnVsbCxcbiAgYm9keTogbnVsbCxcbiAgZm9vdGVyOiBudWxsLFxuICBzb3J0YWJsZTogZmFsc2UsXG4gIHNvcnRhYmxlRGlzYWJsZWQ6IGZhbHNlLFxuICBzb3J0RnVuY3Rpb246IG51bGwsXG4gIGRhdGFUeXBlOiAndGV4dCcsXG4gIGZpbHRlcjogZmFsc2UsXG4gIGZpbHRlck1hdGNoTW9kZTogbnVsbCxcbiAgZmlsdGVyUGxhY2Vob2xkZXI6IG51bGwsXG4gIGZpbHRlclR5cGU6ICd0ZXh0JyxcbiAgZmlsdGVyTWF4TGVuZ3RoOiBudWxsLFxuICBmaWx0ZXJFbGVtZW50OiBudWxsLFxuICBmaWx0ZXJGdW5jdGlvbjogbnVsbCxcbiAgZmlsdGVySGVhZGVyU3R5bGU6IG51bGwsXG4gIGZpbHRlckhlYWRlckNsYXNzTmFtZTogbnVsbCxcbiAgc2hvd0ZpbHRlck1lbnU6IHRydWUsXG4gIHNob3dGaWx0ZXJPcGVyYXRvcjogdHJ1ZSxcbiAgc2hvd0NsZWFyQnV0dG9uOiB0cnVlLFxuICBzaG93QXBwbHlCdXR0b246IHRydWUsXG4gIHNob3dGaWx0ZXJNYXRjaE1vZGVzOiB0cnVlLFxuICBzaG93RmlsdGVyTWVudU9wdGlvbnM6IHRydWUsXG4gIHNob3dBZGRCdXR0b246IHRydWUsXG4gIGZpbHRlck1hdGNoTW9kZU9wdGlvbnM6IG51bGwsXG4gIG1heENvbnN0cmFpbnRzOiAyLFxuICBmaWx0ZXJNZW51Q2xhc3NOYW1lOiBudWxsLFxuICBmaWx0ZXJNZW51U3R5bGU6IG51bGwsXG4gIGFsaWduOiBudWxsLFxuICBhbGlnbkhlYWRlcjogbnVsbCxcbiAgYWxpZ25Gcm96ZW46ICdsZWZ0JyxcbiAgaGlkZGVuOiBmYWxzZSxcbiAgb25GaWx0ZXJDbGVhcjogbnVsbCxcbiAgb25GaWx0ZXJBcHBseUNsaWNrOiBudWxsLFxuICBvbkZpbHRlck1hdGNoTW9kZUNoYW5nZTogbnVsbCxcbiAgb25GaWx0ZXJPcGVyYXRvckNoYW5nZTogbnVsbCxcbiAgb25GaWx0ZXJDb25zdHJhaW50QWRkOiBudWxsLFxuICBvbkZpbHRlckNvbnN0cmFpbnRSZW1vdmU6IG51bGwsXG4gIGZpbHRlckNsZWFyOiBudWxsLFxuICBmaWx0ZXJBcHBseTogbnVsbCxcbiAgZmlsdGVySGVhZGVyOiBudWxsLFxuICBmaWx0ZXJGb290ZXI6IG51bGwsXG4gIHN0eWxlOiBudWxsLFxuICBjbGFzc05hbWU6IG51bGwsXG4gIGhlYWRlclN0eWxlOiBudWxsLFxuICBoZWFkZXJDbGFzc05hbWU6IG51bGwsXG4gIGJvZHlTdHlsZTogbnVsbCxcbiAgYm9keUNsYXNzTmFtZTogbnVsbCxcbiAgZm9vdGVyU3R5bGU6IG51bGwsXG4gIGZvb3RlckNsYXNzTmFtZTogbnVsbCxcbiAgZXhwYW5kZXI6IGZhbHNlLFxuICBmcm96ZW46IGZhbHNlLFxuICBzZWxlY3Rpb25Nb2RlOiBudWxsLFxuICBjb2xTcGFuOiBudWxsLFxuICByb3dTcGFuOiBudWxsLFxuICBlZGl0b3I6IG51bGwsXG4gIGNlbGxFZGl0VmFsaWRhdG9yOiBudWxsLFxuICBjZWxsRWRpdFZhbGlkYXRvckV2ZW50OiAnY2xpY2snLFxuICBvbkJlZm9yZUNlbGxFZGl0SGlkZTogbnVsbCxcbiAgb25CZWZvcmVDZWxsRWRpdFNob3c6IG51bGwsXG4gIG9uQ2VsbEVkaXRJbml0OiBudWxsLFxuICBvbkNlbGxFZGl0Q29tcGxldGU6IG51bGwsXG4gIG9uQ2VsbEVkaXRDYW5jZWw6IG51bGwsXG4gIGV4Y2x1ZGVHbG9iYWxGaWx0ZXI6IGZhbHNlLFxuICByb3dSZW9yZGVyOiBmYWxzZSxcbiAgcm93UmVvcmRlckljb246ICdwaSBwaS1iYXJzJyxcbiAgcm93RWRpdG9yOiBmYWxzZSxcbiAgZXhwb3J0YWJsZTogdHJ1ZSxcbiAgcmVvcmRlcmFibGU6IHRydWVcbn0pO1xuXG5leHBvcnQgeyBDb2x1bW4gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/primereact/column/column.esm.js\n");

/***/ }),

/***/ "./node_modules/primereact/datatable/datatable.esm.js":
/*!************************************************************!*\
  !*** ./node_modules/primereact/datatable/datatable.esm.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DataTable\": function() { return /* binding */ DataTable; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var primereact_paginator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! primereact/paginator */ \"./node_modules/primereact/paginator/paginator.esm.js\");\n/* harmony import */ var primereact_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! primereact/utils */ \"./node_modules/primereact/utils/utils.esm.js\");\n/* harmony import */ var primereact_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! primereact/api */ \"./node_modules/primereact/api/api.esm.js\");\n/* harmony import */ var primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! primereact/overlayservice */ \"./node_modules/primereact/overlayservice/overlayservice.esm.js\");\n/* harmony import */ var primereact_ripple__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! primereact/ripple */ \"./node_modules/primereact/ripple/ripple.esm.js\");\n/* harmony import */ var primereact_csstransition__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! primereact/csstransition */ \"./node_modules/primereact/csstransition/csstransition.esm.js\");\n/* harmony import */ var primereact_portal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! primereact/portal */ \"./node_modules/primereact/portal/portal.esm.js\");\n/* harmony import */ var primereact_inputtext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! primereact/inputtext */ \"./node_modules/primereact/inputtext/inputtext.esm.js\");\n/* harmony import */ var primereact_dropdown__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! primereact/dropdown */ \"./node_modules/primereact/dropdown/dropdown.esm.js\");\n/* harmony import */ var primereact_button__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! primereact/button */ \"./node_modules/primereact/button/button.esm.js\");\n/* harmony import */ var primereact_virtualscroller__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! primereact/virtualscroller */ \"./node_modules/primereact/virtualscroller/virtualscroller.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper$c(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$c(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$c() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar RowRadioButton = /*#__PURE__*/function (_Component) {\n  _inherits(RowRadioButton, _Component);\n\n  var _super = _createSuper$c(RowRadioButton);\n\n  function RowRadioButton(props) {\n    var _this;\n\n    _classCallCheck(this, RowRadioButton);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      focused: false\n    };\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.onFocus = _this.onFocus.bind(_assertThisInitialized(_this));\n    _this.onBlur = _this.onBlur.bind(_assertThisInitialized(_this));\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_this));\n    _this.onKeyDown = _this.onKeyDown.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RowRadioButton, [{\n    key: \"onClick\",\n    value: function onClick(event) {\n      if (!this.props.disabled) {\n        this.props.onChange(event);\n        this.input.focus();\n      }\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      this.setState({\n        focused: true\n      });\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur() {\n      this.setState({\n        focused: false\n      });\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(event) {\n      this.onClick(event);\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (event.code === 'Space') {\n        this.onClick(event);\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-radiobutton p-component', {\n        'p-radiobutton-focused': this.state.focused\n      });\n      var boxClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-radiobutton-box p-component', {\n        'p-highlight': this.props.checked,\n        'p-focus': this.state.focused,\n        'p-disabled': this.props.disabled\n      });\n      var name = \"\".concat(this.props.tableSelector, \"_dt_radio\");\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: className\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: \"p-hidden-accessible\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", {\n        name: name,\n        ref: function ref(el) {\n          return _this2.input = el;\n        },\n        type: \"radio\",\n        checked: this.props.checked,\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onChange: this.onChange,\n        onKeyDown: this.onKeyDown\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: boxClassName,\n        onClick: this.onClick,\n        role: \"radio\",\n        \"aria-checked\": this.props.checked\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: \"p-radiobutton-icon\"\n      })));\n    }\n  }]);\n\n  return RowRadioButton;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction _createSuper$b(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$b(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$b() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar RowCheckbox = /*#__PURE__*/function (_Component) {\n  _inherits(RowCheckbox, _Component);\n\n  var _super = _createSuper$b(RowCheckbox);\n\n  function RowCheckbox(props) {\n    var _this;\n\n    _classCallCheck(this, RowCheckbox);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      focused: false\n    };\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.onFocus = _this.onFocus.bind(_assertThisInitialized(_this));\n    _this.onBlur = _this.onBlur.bind(_assertThisInitialized(_this));\n    _this.onKeyDown = _this.onKeyDown.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RowCheckbox, [{\n    key: \"onClick\",\n    value: function onClick(event) {\n      if (!this.props.disabled) {\n        this.setState({\n          focused: true\n        });\n        this.props.onChange(event);\n      }\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      this.setState({\n        focused: true\n      });\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur() {\n      this.setState({\n        focused: false\n      });\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (event.code === 'Space') {\n        this.onClick(event);\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-checkbox p-component', {\n        'p-checkbox-focused': this.state.focused\n      });\n      var boxClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-checkbox-box p-component', {\n        'p-highlight': this.props.checked,\n        'p-disabled': this.props.disabled,\n        'p-focus': this.state.focused\n      });\n      var iconClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-checkbox-icon', {\n        'pi pi-check': this.props.checked\n      });\n      var tabIndex = this.props.disabled ? null : '0';\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: className,\n        onClick: this.onClick\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: boxClassName,\n        role: \"checkbox\",\n        \"aria-checked\": this.props.checked,\n        tabIndex: tabIndex,\n        onKeyDown: this.onKeyDown,\n        onFocus: this.onFocus,\n        onBlur: this.onBlur\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: iconClassName\n      })));\n    }\n  }]);\n\n  return RowCheckbox;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction ownKeys$7(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$7(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$7(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$7(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$a(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$a(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$a() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar BodyCell = /*#__PURE__*/function (_Component) {\n  _inherits(BodyCell, _Component);\n\n  var _super = _createSuper$a(BodyCell);\n\n  function BodyCell(props) {\n    var _this;\n\n    _classCallCheck(this, BodyCell);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      editing: props.editing,\n      editingRowData: props.rowData,\n      styleObject: {}\n    };\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.onMouseDown = _this.onMouseDown.bind(_assertThisInitialized(_this));\n    _this.onMouseUp = _this.onMouseUp.bind(_assertThisInitialized(_this));\n    _this.onKeyDown = _this.onKeyDown.bind(_assertThisInitialized(_this));\n    _this.onBlur = _this.onBlur.bind(_assertThisInitialized(_this));\n    _this.onEditorFocus = _this.onEditorFocus.bind(_assertThisInitialized(_this));\n    _this.onRowToggle = _this.onRowToggle.bind(_assertThisInitialized(_this));\n    _this.onRadioChange = _this.onRadioChange.bind(_assertThisInitialized(_this));\n    _this.onCheckboxChange = _this.onCheckboxChange.bind(_assertThisInitialized(_this));\n    _this.onRowEditSave = _this.onRowEditSave.bind(_assertThisInitialized(_this));\n    _this.onRowEditCancel = _this.onRowEditCancel.bind(_assertThisInitialized(_this));\n    _this.onRowEditInit = _this.onRowEditInit.bind(_assertThisInitialized(_this));\n    _this.editorCallback = _this.editorCallback.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(BodyCell, [{\n    key: \"field\",\n    get: function get() {\n      return this.getColumnProp('field') || \"field_\".concat(this.props.index);\n    }\n  }, {\n    key: \"isEditable\",\n    value: function isEditable() {\n      return this.getColumnProp('editor');\n    }\n  }, {\n    key: \"isSelected\",\n    value: function isSelected() {\n      return this.props.selection ? this.props.selection instanceof Array ? this.findIndex(this.props.selection) > -1 : this.equals(this.props.selection) : false;\n    }\n  }, {\n    key: \"equalsData\",\n    value: function equalsData(data) {\n      return this.props.compareSelectionBy === 'equals' ? data === this.props.rowData : primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(data, this.props.rowData, this.props.dataKey);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(selectedCell) {\n      return (selectedCell.rowIndex === this.props.rowIndex || this.equalsData(selectedCell.rowData)) && (selectedCell.field === this.field || selectedCell.cellIndex === this.props.index);\n    }\n  }, {\n    key: \"isOutsideClicked\",\n    value: function isOutsideClicked(target) {\n      return this.el && !(this.el.isSameNode(target) || this.el.contains(target));\n    }\n  }, {\n    key: \"getColumnProp\",\n    value: function getColumnProp(prop) {\n      return this.props.column ? this.props.column.props[prop] : null;\n    }\n  }, {\n    key: \"getVirtualScrollerOption\",\n    value: function getVirtualScrollerOption(option) {\n      return this.props.virtualScrollerOptions ? this.props.virtualScrollerOptions[option] : null;\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      var bodyStyle = this.getColumnProp('bodyStyle');\n      var columnStyle = this.getColumnProp('style');\n      return this.getColumnProp('frozen') ? Object.assign({}, columnStyle, bodyStyle, this.state.styleObject) : Object.assign({}, columnStyle, bodyStyle);\n    }\n  }, {\n    key: \"getCellParams\",\n    value: function getCellParams() {\n      return {\n        value: this.resolveFieldData(),\n        field: this.field,\n        rowData: this.props.rowData,\n        rowIndex: this.props.rowIndex,\n        cellIndex: this.props.index,\n        selected: this.isSelected(),\n        column: this.props.column,\n        props: this.props\n      };\n    }\n  }, {\n    key: \"getCellCallbackParams\",\n    value: function getCellCallbackParams(event) {\n      var params = this.getCellParams();\n      return _objectSpread$7({\n        originalEvent: event\n      }, params);\n    }\n  }, {\n    key: \"resolveFieldData\",\n    value: function resolveFieldData(data) {\n      return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(data || this.props.rowData, this.field);\n    }\n  }, {\n    key: \"getEditingRowData\",\n    value: function getEditingRowData() {\n      return this.props.editingMeta && this.props.editingMeta[this.props.rowIndex] ? this.props.editingMeta[this.props.rowIndex].data : this.props.rowData;\n    }\n  }, {\n    key: \"getTabIndex\",\n    value: function getTabIndex(cellSelected) {\n      return this.props.allowCellSelection ? cellSelected ? 0 : this.props.rowIndex === 0 && this.props.index === 0 ? this.props.tabIndex : -1 : null;\n    }\n  }, {\n    key: \"findIndex\",\n    value: function findIndex(collection) {\n      var _this2 = this;\n\n      return (collection || []).findIndex(function (data) {\n        return _this2.equals(data);\n      });\n    }\n  }, {\n    key: \"closeCell\",\n    value: function closeCell(event) {\n      var _this3 = this;\n\n      var params = this.getCellCallbackParams(event);\n      var onBeforeCellEditHide = this.getColumnProp('onBeforeCellEditHide');\n\n      if (onBeforeCellEditHide) {\n        onBeforeCellEditHide(params);\n      }\n      /* When using the 'tab' key, the focus event of the next cell is not called in IE. */\n\n\n      setTimeout(function () {\n        _this3.setState({\n          editing: false\n        }, function () {\n          _this3.unbindDocumentEditListener();\n\n          primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__.OverlayService.off('overlay-click', _this3.overlayEventListener);\n          _this3.overlayEventListener = null;\n        });\n      }, 1);\n    }\n  }, {\n    key: \"switchCellToViewMode\",\n    value: function switchCellToViewMode(event, submit) {\n      var callbackParams = this.getCellCallbackParams(event);\n      var newRowData = this.state.editingRowData;\n      var newValue = this.resolveFieldData(newRowData);\n\n      var params = _objectSpread$7(_objectSpread$7({}, callbackParams), {}, {\n        newRowData: newRowData,\n        newValue: newValue\n      });\n\n      var onCellEditCancel = this.getColumnProp('onCellEditCancel');\n      var cellEditValidator = this.getColumnProp('cellEditValidator');\n      var onCellEditComplete = this.getColumnProp('onCellEditComplete');\n\n      if (!submit && onCellEditCancel) {\n        onCellEditCancel(params);\n      }\n\n      var valid = true;\n\n      if (cellEditValidator) {\n        valid = cellEditValidator(params);\n      }\n\n      if (valid) {\n        if (submit && onCellEditComplete) {\n          onCellEditComplete(params);\n        }\n\n        this.closeCell(event);\n      } else {\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"findNextSelectableCell\",\n    value: function findNextSelectableCell(cell) {\n      var nextCell = cell.nextElementSibling;\n      return nextCell ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(nextCell, 'p-selectable-cell') ? nextCell : this.findNextSelectableCell(nextCell) : null;\n    }\n  }, {\n    key: \"findPrevSelectableCell\",\n    value: function findPrevSelectableCell(cell) {\n      var prevCell = cell.previousElementSibling;\n      return prevCell ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(prevCell, 'p-selectable-cell') ? prevCell : this.findPrevSelectableCell(prevCell) : null;\n    }\n  }, {\n    key: \"findDownSelectableCell\",\n    value: function findDownSelectableCell(cell) {\n      var downRow = cell.parentElement.nextElementSibling;\n      var downCell = downRow ? downRow.children[this.props.index] : null;\n      return downRow && downCell ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(downRow, 'p-selectable-row') && primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(downCell, 'p-selectable-cell') ? downCell : this.findDownSelectableCell(downCell) : null;\n    }\n  }, {\n    key: \"findUpSelectableCell\",\n    value: function findUpSelectableCell(cell) {\n      var upRow = cell.parentElement.previousElementSibling;\n      var upCell = upRow ? upRow.children[this.props.index] : null;\n      return upRow && upCell ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(upRow, 'p-selectable-row') && primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(upCell, 'p-selectable-cell') ? upCell : this.findUpSelectableCell(upCell) : null;\n    }\n  }, {\n    key: \"changeTabIndex\",\n    value: function changeTabIndex(currentCell, nextCell) {\n      if (currentCell && nextCell) {\n        currentCell.tabIndex = -1;\n        nextCell.tabIndex = this.props.tabIndex;\n      }\n    }\n  }, {\n    key: \"focusOnElement\",\n    value: function focusOnElement() {\n      var _this4 = this;\n\n      clearTimeout(this.tabindexTimeout);\n      this.tabindexTimeout = setTimeout(function () {\n        if (_this4.state.editing) {\n          var focusableEl = _this4.props.editMode === 'cell' ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getFirstFocusableElement(_this4.el, ':not(.p-cell-editor-key-helper)') : primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.findSingle(_this4.el, '.p-row-editor-save');\n          focusableEl && focusableEl.focus();\n        }\n\n        _this4.keyHelper && (_this4.keyHelper.tabIndex = _this4.state.editing ? -1 : 0);\n      }, 1);\n    }\n  }, {\n    key: \"focusOnInit\",\n    value: function focusOnInit() {\n      var _this5 = this;\n\n      clearTimeout(this.initFocusTimeout);\n      this.initFocusTimeout = setTimeout(function () {\n        var focusableEl = _this5.props.editMode === 'row' ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.findSingle(_this5.el, '.p-row-editor-init') : null;\n        focusableEl && focusableEl.focus();\n      }, 1);\n    }\n  }, {\n    key: \"updateStickyPosition\",\n    value: function updateStickyPosition() {\n      if (this.getColumnProp('frozen')) {\n        var styleObject = _objectSpread$7({}, this.state.styleObject);\n\n        var align = this.getColumnProp('alignFrozen');\n\n        if (align === 'right') {\n          var right = 0;\n          var next = this.el.nextElementSibling;\n\n          if (next) {\n            right = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(next) + parseFloat(next.style.right || 0);\n          }\n\n          styleObject['right'] = right + 'px';\n        } else {\n          var left = 0;\n          var prev = this.el.previousElementSibling;\n\n          if (prev) {\n            left = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(prev) + parseFloat(prev.style.left || 0);\n          }\n\n          styleObject['left'] = left + 'px';\n        }\n\n        var isSameStyle = this.state.styleObject['left'] === styleObject['left'] && this.state.styleObject['right'] === styleObject['right'];\n        !isSameStyle && this.setState({\n          styleObject: styleObject\n        });\n      }\n    }\n  }, {\n    key: \"editorCallback\",\n    value: function editorCallback(val) {\n      var editingRowData = _objectSpread$7({}, this.state.editingRowData);\n\n      editingRowData[this.field] = val;\n      this.setState({\n        editingRowData: editingRowData\n      }); // update editing meta for complete methods on row mode\n\n      this.props.editingMeta[this.props.rowIndex].data[this.field] = val;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(event) {\n      var _this6 = this;\n\n      var params = this.getCellCallbackParams(event);\n\n      if (this.props.editMode !== 'row' && this.isEditable() && !this.state.editing && (this.props.selectOnEdit || !this.props.selectOnEdit && this.props.selected)) {\n        this.selfClick = true;\n        var onBeforeCellEditShow = this.getColumnProp('onBeforeCellEditShow');\n        var onCellEditInit = this.getColumnProp('onCellEditInit');\n        var cellEditValidatorEvent = this.getColumnProp('cellEditValidatorEvent');\n\n        if (onBeforeCellEditShow) {\n          onBeforeCellEditShow(params);\n        } // If the data is sorted using sort icon, it has been added to wait for the sort operation when any cell is wanted to be opened.\n\n\n        setTimeout(function () {\n          _this6.setState({\n            editing: true\n          }, function () {\n            if (onCellEditInit) {\n              onCellEditInit(params);\n            }\n\n            if (cellEditValidatorEvent === 'click') {\n              _this6.bindDocumentEditListener();\n\n              _this6.overlayEventListener = function (e) {\n                if (!_this6.isOutsideClicked(e.target)) {\n                  _this6.selfClick = true;\n                }\n              };\n\n              primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__.OverlayService.on('overlay-click', _this6.overlayEventListener);\n            }\n          });\n        }, 1);\n      }\n\n      if (this.props.allowCellSelection && this.props.onClick) {\n        this.props.onClick(params);\n      }\n    }\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown(event) {\n      var params = this.getCellCallbackParams(event);\n\n      if (this.props.onMouseDown) {\n        this.props.onMouseDown(params);\n      }\n    }\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp(event) {\n      var params = this.getCellCallbackParams(event);\n\n      if (this.props.onMouseUp) {\n        this.props.onMouseUp(params);\n      }\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (this.props.editMode !== 'row') {\n        if (event.which === 13 || event.which === 9) {\n          // tab || enter\n          this.switchCellToViewMode(event, true);\n        }\n\n        if (event.which === 27) {\n          // escape\n          this.switchCellToViewMode(event, false);\n        }\n      }\n\n      if (this.props.allowCellSelection) {\n        var target = event.target,\n            cell = event.currentTarget;\n\n        switch (event.which) {\n          //left arrow\n          case 37:\n            var prevCell = this.findPrevSelectableCell(cell);\n\n            if (prevCell) {\n              this.changeTabIndex(cell, prevCell);\n              prevCell.focus();\n            }\n\n            event.preventDefault();\n            break;\n          //right arrow\n\n          case 39:\n            var nextCell = this.findNextSelectableCell(cell);\n\n            if (nextCell) {\n              this.changeTabIndex(cell, nextCell);\n              nextCell.focus();\n            }\n\n            event.preventDefault();\n            break;\n          //up arrow\n\n          case 38:\n            var upCell = this.findUpSelectableCell(cell);\n\n            if (upCell) {\n              this.changeTabIndex(cell, upCell);\n              upCell.focus();\n            }\n\n            event.preventDefault();\n            break;\n          //down arrow\n\n          case 40:\n            var downCell = this.findDownSelectableCell(cell);\n\n            if (downCell) {\n              this.changeTabIndex(cell, downCell);\n              downCell.focus();\n            }\n\n            event.preventDefault();\n            break;\n          //enter\n\n          case 13:\n            // @deprecated\n            if (!primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.isClickable(target)) {\n              this.onClick(event);\n              event.preventDefault();\n            }\n\n            break;\n          //space\n\n          case 32:\n            if (!primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.isClickable(target) && !target.readOnly) {\n              this.onClick(event);\n              event.preventDefault();\n            }\n\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur(event) {\n      this.selfClick = false;\n\n      if (this.props.editMode !== 'row' && this.state.editing && this.getColumnProp('cellEditValidatorEvent') === 'blur') {\n        this.switchCellToViewMode(event, true);\n      }\n    }\n  }, {\n    key: \"onEditorFocus\",\n    value: function onEditorFocus(event) {\n      this.onClick(event);\n    }\n  }, {\n    key: \"onRadioChange\",\n    value: function onRadioChange(event) {\n      this.props.onRadioChange({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.rowIndex\n      });\n    }\n  }, {\n    key: \"onCheckboxChange\",\n    value: function onCheckboxChange(event) {\n      this.props.onCheckboxChange({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.rowIndex\n      });\n    }\n  }, {\n    key: \"onRowToggle\",\n    value: function onRowToggle(event) {\n      this.props.onRowToggle({\n        originalEvent: event,\n        data: this.props.rowData\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"onRowEditInit\",\n    value: function onRowEditInit(event) {\n      this.props.onRowEditInit({\n        originalEvent: event,\n        data: this.props.rowData,\n        newData: this.getEditingRowData(),\n        field: this.field,\n        index: this.props.rowIndex\n      });\n    }\n  }, {\n    key: \"onRowEditSave\",\n    value: function onRowEditSave(event) {\n      this.props.onRowEditSave({\n        originalEvent: event,\n        data: this.props.rowData,\n        newData: this.getEditingRowData(),\n        field: this.field,\n        index: this.props.rowIndex\n      });\n      this.focusOnInit();\n    }\n  }, {\n    key: \"onRowEditCancel\",\n    value: function onRowEditCancel(event) {\n      this.props.onRowEditCancel({\n        originalEvent: event,\n        data: this.props.rowData,\n        newData: this.getEditingRowData(),\n        field: this.field,\n        index: this.props.rowIndex\n      });\n      this.focusOnInit();\n    }\n  }, {\n    key: \"bindDocumentEditListener\",\n    value: function bindDocumentEditListener() {\n      var _this7 = this;\n\n      if (!this.documentEditListener) {\n        this.documentEditListener = function (e) {\n          if (!_this7.selfClick && _this7.isOutsideClicked(e.target)) {\n            _this7.switchCellToViewMode(e, true);\n          }\n\n          _this7.selfClick = false;\n        };\n\n        document.addEventListener('click', this.documentEditListener, true);\n      }\n    }\n  }, {\n    key: \"unbindDocumentEditListener\",\n    value: function unbindDocumentEditListener() {\n      if (this.documentEditListener) {\n        document.removeEventListener('click', this.documentEditListener, true);\n        this.documentEditListener = null;\n        this.selfClick = false;\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.getColumnProp('frozen')) {\n        this.updateStickyPosition();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.getColumnProp('frozen')) {\n        this.updateStickyPosition();\n      }\n\n      if (this.props.editMode === 'cell' || this.props.editMode === 'row') {\n        this.focusOnElement();\n\n        if (prevProps.editingMeta !== this.props.editingMeta) {\n          this.setState({\n            editingRowData: this.getEditingRowData()\n          });\n        }\n\n        if (prevState.editing !== this.state.editing) {\n          var callbackParams = this.getCellCallbackParams();\n\n          var params = _objectSpread$7(_objectSpread$7({}, callbackParams), {}, {\n            editing: this.state.editing\n          });\n\n          this.props.onEditingMetaChange(params);\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unbindDocumentEditListener();\n\n      if (this.overlayEventListener) {\n        primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__.OverlayService.off('overlay-click', this.overlayEventListener);\n        this.overlayEventListener = null;\n      }\n    }\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      var options = this.getVirtualScrollerOption('getLoaderOptions')(this.props.rowIndex, {\n        cellIndex: this.props.index,\n        cellFirst: this.props.index === 0,\n        cellLast: this.props.index === this.getVirtualScrollerOption('columns').length - 1,\n        cellEven: this.props.index % 2 === 0,\n        cellOdd: this.props.index % 2 !== 0,\n        column: this.props.column,\n        field: this.field\n      });\n      var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getVirtualScrollerOption('loadingTemplate'), options);\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", null, content);\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement() {\n      var _this8 = this;\n\n      var content, editorKeyHelper;\n      var cellSelected = this.props.allowCellSelection && this.isSelected();\n      var isRowEditor = this.props.editMode === 'row';\n      var tabIndex = this.getTabIndex(cellSelected);\n      var selectionMode = this.getColumnProp('selectionMode');\n      var rowReorder = this.getColumnProp('rowReorder');\n      var expander = this.getColumnProp('expander');\n      var rowEditor = this.getColumnProp('rowEditor');\n      var header = this.getColumnProp('header');\n      var body = this.getColumnProp('body');\n      var editor = this.getColumnProp('editor');\n      var frozen = this.getColumnProp('frozen');\n      var align = this.getColumnProp('align');\n      var value = this.resolveFieldData();\n      var cellClassName = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getPropValue(this.props.cellClassName, value, {\n        props: this.props.tableProps,\n        rowData: this.props.rowData,\n        column: this.props.column\n      });\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)(this.getColumnProp('bodyClassName'), this.getColumnProp('className'), cellClassName, _defineProperty({\n        'p-selection-column': selectionMode !== null,\n        'p-editable-column': editor,\n        'p-cell-editing': editor && this.state.editing,\n        'p-frozen-column': frozen,\n        'p-selectable-cell': this.props.allowCellSelection && this.props.isSelectable({\n          data: this.getCellParams(),\n          index: this.props.rowIndex\n        }),\n        'p-highlight': cellSelected\n      }, \"p-align-\".concat(align), !!align));\n      var style = this.getStyle();\n      var title = this.props.responsiveLayout === 'stack' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: \"p-column-title\"\n      }, primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(header, {\n        props: this.props.tableProps\n      }));\n\n      if (selectionMode) {\n        var showSelection = this.props.showSelectionElement ? this.props.showSelectionElement(this.props.rowData, {\n          rowIndex: this.props.rowIndex,\n          props: this.props.tableProps\n        }) : true;\n        content = showSelection && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, selectionMode === 'single' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(RowRadioButton, {\n          checked: this.props.selected,\n          onChange: this.onRadioChange,\n          tabIndex: this.props.tabIndex,\n          tableSelector: this.props.tableSelector\n        }), selectionMode === 'multiple' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(RowCheckbox, {\n          checked: this.props.selected,\n          onChange: this.onCheckboxChange,\n          tabIndex: this.props.tabIndex\n        }));\n      } else if (rowReorder) {\n        var showReorder = this.props.showRowReorderElement ? this.props.showRowReorderElement(this.props.rowData, {\n          rowIndex: this.props.rowIndex,\n          props: this.props.tableProps\n        }) : true;\n        content = showReorder && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"i\", {\n          className: (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-datatable-reorderablerow-handle', this.getColumnProp('rowReorderIcon'))\n        });\n      } else if (expander) {\n        var iconClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-row-toggler-icon', this.props.expanded ? this.props.expandedRowIcon : this.props.collapsedRowIcon);\n        var ariaControls = \"\".concat(this.props.tableSelector, \"_content_\").concat(this.props.rowIndex, \"_expanded\");\n        var expanderProps = {\n          onClick: this.onRowToggle,\n          className: 'p-row-toggler p-link',\n          iconClassName: iconClassName\n        };\n        content = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n          className: expanderProps.className,\n          onClick: expanderProps.onClick,\n          type: \"button\",\n          \"aria-expanded\": this.props.expanded,\n          \"aria-controls\": ariaControls,\n          tabIndex: this.props.tabIndex\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          className: expanderProps.iconClassName\n        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_5__.Ripple, null));\n\n        if (body) {\n          expanderProps['element'] = content;\n          content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(body, this.props.rowData, {\n            column: this.props.column,\n            field: this.field,\n            rowIndex: this.props.rowIndex,\n            frozenRow: this.props.frozenRow,\n            props: this.props.tableProps,\n            expander: expanderProps\n          });\n        }\n      } else if (isRowEditor && rowEditor) {\n        var rowEditorProps = {};\n\n        if (this.state.editing) {\n          rowEditorProps = {\n            editing: true,\n            onSaveClick: this.onRowEditSave,\n            saveClassName: 'p-row-editor-save p-link',\n            saveIconClassName: 'p-row-editor-save-icon pi pi-fw pi-check',\n            onCancelClick: this.onRowEditCancel,\n            cancelClassName: 'p-row-editor-cancel p-link',\n            cancelIconClassName: 'p-row-editor-cancel-icon pi pi-fw pi-times'\n          };\n          content = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n            type: \"button\",\n            onClick: rowEditorProps.onSaveClick,\n            className: rowEditorProps.saveClassName,\n            tabIndex: this.props.tabIndex\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n            className: rowEditorProps.saveIconClassName\n          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_5__.Ripple, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n            type: \"button\",\n            onClick: rowEditorProps.onCancelClick,\n            className: rowEditorProps.cancelClassName,\n            tabIndex: this.props.tabIndex\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n            className: rowEditorProps.cancelIconClassName\n          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_5__.Ripple, null)));\n        } else {\n          rowEditorProps = {\n            editing: false,\n            onInitClick: this.onRowEditInit,\n            initClassName: 'p-row-editor-init p-link',\n            initIconClassName: 'p-row-editor-init-icon pi pi-fw pi-pencil'\n          };\n          content = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n            type: \"button\",\n            onClick: rowEditorProps.onInitClick,\n            className: rowEditorProps.initClassName,\n            tabIndex: this.props.tabIndex\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n            className: rowEditorProps.initIconClassName\n          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_5__.Ripple, null));\n        }\n\n        if (body) {\n          rowEditorProps['element'] = content;\n          content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(body, this.props.rowData, {\n            column: this.props.column,\n            field: this.field,\n            rowIndex: this.props.rowIndex,\n            frozenRow: this.props.frozenRow,\n            props: this.props.tableProps,\n            rowEditor: rowEditorProps\n          });\n        }\n      } else if (body && !this.state.editing) {\n        content = body ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(body, this.props.rowData, {\n          column: this.props.column,\n          field: this.field,\n          rowIndex: this.props.rowIndex,\n          frozenRow: this.props.frozenRow,\n          props: this.props.tableProps\n        }) : value;\n      } else if (editor && this.state.editing) {\n        content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(editor, {\n          rowData: this.state.editingRowData,\n          value: this.resolveFieldData(this.state.editingRowData),\n          column: this.props.column,\n          field: this.field,\n          rowIndex: this.props.rowIndex,\n          frozenRow: this.props.frozenRow,\n          props: this.props.tableProps,\n          editorCallback: this.editorCallback\n        });\n      } else {\n        content = value;\n      }\n\n      if (!isRowEditor && editor) {\n        /* eslint-disable */\n        editorKeyHelper = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"a\", {\n          tabIndex: \"0\",\n          ref: function ref(el) {\n            return _this8.keyHelper = el;\n          },\n          className: \"p-cell-editor-key-helper p-hidden-accessible\",\n          onFocus: this.onEditorFocus\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null));\n        /* eslint-enable */\n      }\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", {\n        ref: function ref(el) {\n          return _this8.el = el;\n        },\n        style: style,\n        className: className,\n        rowSpan: this.props.rowSpan,\n        tabIndex: tabIndex,\n        role: \"cell\",\n        onClick: this.onClick,\n        onKeyDown: this.onKeyDown,\n        onBlur: this.onBlur,\n        onMouseDown: this.onMouseDown,\n        onMouseUp: this.onMouseUp\n      }, editorKeyHelper, title, content);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.getVirtualScrollerOption('loading') ? this.renderLoading() : this.renderElement();\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.editMode === 'row' && nextProps.editing !== prevState.editing) {\n        return {\n          editing: nextProps.editing\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return BodyCell;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$6(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$9(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$9(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$9() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar BodyRow = /*#__PURE__*/function (_Component) {\n  _inherits(BodyRow, _Component);\n\n  var _super = _createSuper$9(BodyRow);\n\n  function BodyRow(props) {\n    var _this;\n\n    _classCallCheck(this, BodyRow);\n\n    _this = _super.call(this, props);\n\n    if (!_this.props.onRowEditChange) {\n      _this.state = {\n        editing: false\n      };\n    }\n\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.onDoubleClick = _this.onDoubleClick.bind(_assertThisInitialized(_this));\n    _this.onRightClick = _this.onRightClick.bind(_assertThisInitialized(_this));\n    _this.onTouchEnd = _this.onTouchEnd.bind(_assertThisInitialized(_this));\n    _this.onKeyDown = _this.onKeyDown.bind(_assertThisInitialized(_this));\n    _this.onMouseDown = _this.onMouseDown.bind(_assertThisInitialized(_this));\n    _this.onMouseUp = _this.onMouseUp.bind(_assertThisInitialized(_this));\n    _this.onDragStart = _this.onDragStart.bind(_assertThisInitialized(_this));\n    _this.onDragEnd = _this.onDragEnd.bind(_assertThisInitialized(_this));\n    _this.onDragOver = _this.onDragOver.bind(_assertThisInitialized(_this));\n    _this.onDragLeave = _this.onDragLeave.bind(_assertThisInitialized(_this));\n    _this.onDrop = _this.onDrop.bind(_assertThisInitialized(_this));\n    _this.onEditInit = _this.onEditInit.bind(_assertThisInitialized(_this));\n    _this.onEditSave = _this.onEditSave.bind(_assertThisInitialized(_this));\n    _this.onEditCancel = _this.onEditCancel.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(BodyRow, [{\n    key: \"isFocusable\",\n    value: function isFocusable() {\n      return this.props.selectionMode && this.props.selectionModeInColumn !== 'single' && this.props.selectionModeInColumn !== 'multiple';\n    }\n  }, {\n    key: \"isGrouped\",\n    value: function isGrouped(column) {\n      if (this.props.groupRowsBy && this.getColumnProp(column, 'field')) {\n        if (Array.isArray(this.props.groupRowsBy)) return this.props.groupRowsBy.indexOf(column.props.field) > -1;else return this.props.groupRowsBy === column.props.field;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(data1, data2) {\n      return this.props.compareSelectionBy === 'equals' ? data1 === data2 : primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(data1, data2, this.props.dataKey);\n    }\n  }, {\n    key: \"getColumnProp\",\n    value: function getColumnProp(col, prop) {\n      return col ? col.props[prop] : null;\n    }\n  }, {\n    key: \"getEditing\",\n    value: function getEditing() {\n      return this.props.onRowEditChange ? this.props.editing : this.state.editing;\n    }\n  }, {\n    key: \"getTabIndex\",\n    value: function getTabIndex() {\n      return this.isFocusable() && !this.props.allowCellSelection ? this.props.index === 0 ? this.props.tabIndex : -1 : null;\n    }\n  }, {\n    key: \"findIndex\",\n    value: function findIndex(collection, rowData) {\n      var _this2 = this;\n\n      return (collection || []).findIndex(function (data) {\n        return _this2.equals(rowData, data);\n      });\n    }\n  }, {\n    key: \"changeTabIndex\",\n    value: function changeTabIndex(currentRow, nextRow) {\n      if (currentRow && nextRow) {\n        currentRow.tabIndex = -1;\n        nextRow.tabIndex = this.props.tabIndex;\n      }\n    }\n  }, {\n    key: \"findNextSelectableRow\",\n    value: function findNextSelectableRow(row) {\n      var nextRow = row.nextElementSibling;\n      return nextRow ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(nextRow, 'p-selectable-row') ? nextRow : this.findNextSelectableRow(nextRow) : null;\n    }\n  }, {\n    key: \"findPrevSelectableRow\",\n    value: function findPrevSelectableRow(row) {\n      var prevRow = row.previousElementSibling;\n      return prevRow ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(prevRow, 'p-selectable-row') ? prevRow : this.findPrevSelectableRow(prevRow) : null;\n    }\n  }, {\n    key: \"shouldRenderBodyCell\",\n    value: function shouldRenderBodyCell(value, column, i) {\n      if (this.getColumnProp(column, 'hidden')) {\n        return false;\n      } else if (this.props.rowGroupMode && this.props.rowGroupMode === 'rowspan' && this.isGrouped(column)) {\n        var prevRowData = value[i - 1];\n\n        if (prevRowData) {\n          var currentRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(value[i], this.getColumnProp(column, 'field'));\n          var previousRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(prevRowData, this.getColumnProp(column, 'field'));\n          return currentRowFieldData !== previousRowFieldData;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"calculateRowGroupSize\",\n    value: function calculateRowGroupSize(value, column, index) {\n      if (this.isGrouped(column)) {\n        var currentRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(value[index], this.getColumnProp(column, 'field'));\n        var nextRowFieldData = currentRowFieldData;\n        var groupRowSpan = 0;\n\n        while (currentRowFieldData === nextRowFieldData) {\n          groupRowSpan++;\n          var nextRowData = value[++index];\n\n          if (nextRowData) {\n            nextRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(nextRowData, this.getColumnProp(column, 'field'));\n          } else {\n            break;\n          }\n        }\n\n        return groupRowSpan === 1 ? null : groupRowSpan;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(event) {\n      this.props.onRowClick({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onDoubleClick\",\n    value: function onDoubleClick(event) {\n      this.props.onRowDoubleClick({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onRightClick\",\n    value: function onRightClick(event) {\n      this.props.onRowRightClick({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd(event) {\n      this.props.onRowTouchEnd(event);\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (this.isFocusable() && !this.props.allowCellSelection) {\n        var target = event.target,\n            row = event.currentTarget;\n\n        switch (event.which) {\n          //down arrow\n          case 40:\n            var nextRow = this.findNextSelectableRow(row);\n\n            if (nextRow) {\n              this.changeTabIndex(row, nextRow);\n              nextRow.focus();\n            }\n\n            event.preventDefault();\n            break;\n          //up arrow\n\n          case 38:\n            var prevRow = this.findPrevSelectableRow(row);\n\n            if (prevRow) {\n              this.changeTabIndex(row, prevRow);\n              prevRow.focus();\n            }\n\n            event.preventDefault();\n            break;\n          //enter\n\n          case 13:\n            // @deprecated\n            if (!primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.isClickable(target)) {\n              this.onClick(event);\n              event.preventDefault();\n            }\n\n            break;\n          //space\n\n          case 32:\n            if (!primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.isClickable(target) && !target.readOnly) {\n              this.onClick(event);\n              event.preventDefault();\n            }\n\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown(event) {\n      this.props.onRowMouseDown({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp(event) {\n      this.props.onRowMouseUp({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function onDragStart(event) {\n      this.props.onRowDragStart({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onDragOver\",\n    value: function onDragOver(event) {\n      this.props.onRowDragOver({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onDragLeave\",\n    value: function onDragLeave(event) {\n      this.props.onRowDragLeave({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onDragEnd\",\n    value: function onDragEnd(event) {\n      this.props.onRowDragEnd({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onDrop\",\n    value: function onDrop(event) {\n      this.props.onRowDrop({\n        originalEvent: event,\n        data: this.props.rowData,\n        index: this.props.index\n      });\n    }\n  }, {\n    key: \"onEditChange\",\n    value: function onEditChange(e, editing) {\n      if (this.props.onRowEditChange) {\n        var editingRows;\n        var dataKey = this.props.dataKey;\n        var originalEvent = e.originalEvent,\n            data = e.data,\n            index = e.index;\n\n        if (dataKey) {\n          var dataKeyValue = String(primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(data, dataKey));\n          editingRows = this.props.editingRows ? _objectSpread$6({}, this.props.editingRows) : {};\n          if (editingRows[dataKeyValue] != null) delete editingRows[dataKeyValue];else editingRows[dataKeyValue] = true;\n        } else {\n          var editingRowIndex = this.findIndex(this.props.editingRows, data);\n          editingRows = this.props.editingRows ? _toConsumableArray(this.props.editingRows) : [];\n          if (editingRowIndex !== -1) editingRows = editingRows.filter(function (val, i) {\n            return i !== editingRowIndex;\n          });else editingRows.push(data);\n        }\n\n        this.props.onRowEditChange({\n          originalEvent: originalEvent,\n          data: editingRows,\n          index: index\n        });\n      } else {\n        this.setState({\n          editing: editing\n        });\n      }\n    }\n  }, {\n    key: \"onEditInit\",\n    value: function onEditInit(e) {\n      var event = e.originalEvent;\n\n      if (this.props.onRowEditInit) {\n        this.props.onRowEditInit({\n          originalEvent: event,\n          data: this.props.rowData,\n          index: this.props.index\n        });\n      }\n\n      this.onEditChange(e, true);\n      event.preventDefault();\n    }\n  }, {\n    key: \"onEditSave\",\n    value: function onEditSave(e) {\n      var event = e.originalEvent;\n      var valid = this.props.rowEditValidator ? this.props.rowEditValidator(this.props.rowData, {\n        props: this.props.tableProps\n      }) : true;\n\n      if (this.props.onRowEditSave) {\n        this.props.onRowEditSave({\n          originalEvent: event,\n          data: this.props.rowData,\n          index: this.props.index,\n          valid: valid\n        });\n      }\n\n      if (valid) {\n        if (this.props.onRowEditComplete) {\n          this.props.onRowEditComplete(e);\n        }\n\n        this.onEditChange(e, false);\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"onEditCancel\",\n    value: function onEditCancel(e) {\n      var event = e.originalEvent;\n\n      if (this.props.onRowEditCancel) {\n        this.props.onRowEditCancel({\n          originalEvent: event,\n          data: this.props.rowData,\n          index: this.props.index\n        });\n      }\n\n      this.onEditChange(e, false);\n      event.preventDefault();\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this3 = this;\n\n      return this.props.columns.map(function (col, i) {\n        if (_this3.shouldRenderBodyCell(_this3.props.value, col, _this3.props.index)) {\n          var key = \"\".concat(_this3.getColumnProp(col, 'columnKey') || _this3.getColumnProp(col, 'field'), \"_\").concat(i);\n          var rowSpan = _this3.props.rowGroupMode === 'rowspan' ? _this3.calculateRowGroupSize(_this3.props.value, col, _this3.props.index) : null;\n\n          var editing = _this3.getEditing();\n\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BodyCell, {\n            key: key,\n            value: _this3.props.value,\n            tableProps: _this3.props.tableProps,\n            tableSelector: _this3.props.tableSelector,\n            column: col,\n            rowData: _this3.props.rowData,\n            rowIndex: _this3.props.index,\n            index: i,\n            rowSpan: rowSpan,\n            dataKey: _this3.props.dataKey,\n            editing: editing,\n            editingMeta: _this3.props.editingMeta,\n            editMode: _this3.props.editMode,\n            onRowEditInit: _this3.onEditInit,\n            onRowEditSave: _this3.onEditSave,\n            onRowEditCancel: _this3.onEditCancel,\n            onEditingMetaChange: _this3.props.onEditingMetaChange,\n            onRowToggle: _this3.props.onRowToggle,\n            selection: _this3.props.selection,\n            allowCellSelection: _this3.props.allowCellSelection,\n            compareSelectionBy: _this3.props.compareSelectionBy,\n            selectOnEdit: _this3.props.selectOnEdit,\n            selected: _this3.props.selected,\n            onClick: _this3.props.onCellClick,\n            onMouseDown: _this3.props.onCellMouseDown,\n            onMouseUp: _this3.props.onCellMouseUp,\n            tabIndex: _this3.props.tabIndex,\n            cellClassName: _this3.props.cellClassName,\n            responsiveLayout: _this3.props.responsiveLayout,\n            frozenRow: _this3.props.frozenRow,\n            isSelectable: _this3.props.isSelectable,\n            showSelectionElement: _this3.props.showSelectionElement,\n            showRowReorderElement: _this3.props.showRowReorderElement,\n            onRadioChange: _this3.props.onRadioChange,\n            onCheckboxChange: _this3.props.onCheckboxChange,\n            expanded: _this3.props.expanded,\n            expandedRowIcon: _this3.props.expandedRowIcon,\n            collapsedRowIcon: _this3.props.collapsedRowIcon,\n            virtualScrollerOptions: _this3.props.virtualScrollerOptions\n          });\n        }\n\n        return null;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var rowClassName = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getPropValue(this.props.rowClassName, this.props.rowData, {\n        props: this.props.tableProps\n      });\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)(rowClassName, {\n        'p-highlight': !this.props.allowCellSelection && this.props.selected,\n        'p-highlight-contextmenu': this.props.contextMenuSelected,\n        'p-selectable-row': this.props.allowRowSelection && this.props.isSelectable({\n          data: this.props.rowData,\n          index: this.props.index\n        }),\n        'p-row-odd': this.props.index % 2 !== 0\n      });\n      var content = this.renderContent();\n      var tabIndex = this.getTabIndex();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n        ref: function ref(el) {\n          return _this4.el = el;\n        },\n        role: \"row\",\n        tabIndex: tabIndex,\n        className: className,\n        onMouseDown: this.onMouseDown,\n        onMouseUp: this.onMouseUp,\n        onClick: this.onClick,\n        onDoubleClick: this.onDoubleClick,\n        onContextMenu: this.onRightClick,\n        onTouchEnd: this.onTouchEnd,\n        onKeyDown: this.onKeyDown,\n        onDragStart: this.onDragStart,\n        onDragOver: this.onDragOver,\n        onDragLeave: this.onDragLeave,\n        onDragEnd: this.onDragEnd,\n        onDrop: this.onDrop\n      }, content);\n    }\n  }]);\n\n  return BodyRow;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction _createSuper$8(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$8(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$8() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar RowTogglerButton = /*#__PURE__*/function (_Component) {\n  _inherits(RowTogglerButton, _Component);\n\n  var _super = _createSuper$8(RowTogglerButton);\n\n  function RowTogglerButton(props) {\n    var _this;\n\n    _classCallCheck(this, RowTogglerButton);\n\n    _this = _super.call(this, props);\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RowTogglerButton, [{\n    key: \"onClick\",\n    value: function onClick(event) {\n      this.props.onClick({\n        originalEvent: event,\n        data: this.props.rowData\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var iconClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-row-toggler-icon', this.props.expanded ? this.props.expandedRowIcon : this.props.collapsedRowIcon);\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n        type: \"button\",\n        onClick: this.onClick,\n        className: \"p-row-toggler p-link\",\n        tabIndex: this.props.tabIndex\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: iconClassName\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_5__.Ripple, null));\n    }\n  }]);\n\n  return RowTogglerButton;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nvar _excluded = [\"originalEvent\"];\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$5(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$7(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$7(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$7() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar TableBody = /*#__PURE__*/function (_Component) {\n  _inherits(TableBody, _Component);\n\n  var _super = _createSuper$7(TableBody);\n\n  function TableBody(props) {\n    var _this;\n\n    _classCallCheck(this, TableBody);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      rowGroupHeaderStyleObject: {}\n    }; // row\n\n    _this.onRowClick = _this.onRowClick.bind(_assertThisInitialized(_this));\n    _this.onRowDoubleClick = _this.onRowDoubleClick.bind(_assertThisInitialized(_this));\n    _this.onRowRightClick = _this.onRowRightClick.bind(_assertThisInitialized(_this));\n    _this.onRowTouchEnd = _this.onRowTouchEnd.bind(_assertThisInitialized(_this));\n    _this.onRowMouseDown = _this.onRowMouseDown.bind(_assertThisInitialized(_this));\n    _this.onRowMouseUp = _this.onRowMouseUp.bind(_assertThisInitialized(_this));\n    _this.onRowToggle = _this.onRowToggle.bind(_assertThisInitialized(_this)); // drag\n\n    _this.onRowDragStart = _this.onRowDragStart.bind(_assertThisInitialized(_this));\n    _this.onRowDragOver = _this.onRowDragOver.bind(_assertThisInitialized(_this));\n    _this.onRowDragLeave = _this.onRowDragLeave.bind(_assertThisInitialized(_this));\n    _this.onRowDragEnd = _this.onRowDragEnd.bind(_assertThisInitialized(_this));\n    _this.onRowDrop = _this.onRowDrop.bind(_assertThisInitialized(_this)); // selection\n\n    _this.onRadioChange = _this.onRadioChange.bind(_assertThisInitialized(_this));\n    _this.onCheckboxChange = _this.onCheckboxChange.bind(_assertThisInitialized(_this));\n    _this.onDragSelectionMouseMove = _this.onDragSelectionMouseMove.bind(_assertThisInitialized(_this));\n    _this.onDragSelectionMouseUp = _this.onDragSelectionMouseUp.bind(_assertThisInitialized(_this));\n    _this.isSelectable = _this.isSelectable.bind(_assertThisInitialized(_this)); // cell\n\n    _this.onCellClick = _this.onCellClick.bind(_assertThisInitialized(_this));\n    _this.onCellMouseDown = _this.onCellMouseDown.bind(_assertThisInitialized(_this));\n    _this.onCellMouseUp = _this.onCellMouseUp.bind(_assertThisInitialized(_this));\n    _this.ref = _this.ref.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TableBody, [{\n    key: \"ref\",\n    value: function ref(el) {\n      this.el = el;\n      this.props.virtualScrollerContentRef && this.props.virtualScrollerContentRef(el);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(data1, data2) {\n      if (this.allowCellSelection()) return (data1.rowIndex === data2.rowIndex || data1.rowData === data2.rowData) && (data1.field === data2.field || data1.cellIndex === data2.cellIndex);else return this.props.compareSelectionBy === 'equals' ? data1 === data2 : primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(data1, data2, this.props.dataKey);\n    }\n  }, {\n    key: \"isSubheaderGrouping\",\n    value: function isSubheaderGrouping() {\n      return this.props.rowGroupMode && this.props.rowGroupMode === 'subheader';\n    }\n  }, {\n    key: \"isSelectionEnabled\",\n    value: function isSelectionEnabled() {\n      return this.props.selectionMode || this.props.selectionModeInColumn !== null || this.props.columns && this.props.columns.some(function (col) {\n        return col && !!col.props.selectionMode;\n      });\n    }\n  }, {\n    key: \"isRadioSelectionMode\",\n    value: function isRadioSelectionMode() {\n      return this.props.selectionMode === 'radiobutton';\n    }\n  }, {\n    key: \"isCheckboxSelectionMode\",\n    value: function isCheckboxSelectionMode() {\n      return this.props.selectionMode === 'checkbox';\n    }\n  }, {\n    key: \"isRadioSelectionModeInColumn\",\n    value: function isRadioSelectionModeInColumn() {\n      return this.props.selectionModeInColumn === 'single';\n    }\n  }, {\n    key: \"isCheckboxSelectionModeInColumn\",\n    value: function isCheckboxSelectionModeInColumn() {\n      return this.props.selectionModeInColumn === 'multiple';\n    }\n  }, {\n    key: \"isSingleSelection\",\n    value: function isSingleSelection() {\n      return this.props.selectionMode === 'single' && !this.isCheckboxSelectionModeInColumn() || !this.isRadioSelectionMode() && this.isRadioSelectionModeInColumn();\n    }\n  }, {\n    key: \"isMultipleSelection\",\n    value: function isMultipleSelection() {\n      return this.props.selectionMode === 'multiple' && !this.isRadioSelectionModeInColumn() || this.isCheckboxSelectionModeInColumn();\n    }\n  }, {\n    key: \"isRadioOnlySelection\",\n    value: function isRadioOnlySelection() {\n      return this.isRadioSelectionMode() && this.isRadioSelectionModeInColumn();\n    }\n  }, {\n    key: \"isCheckboxOnlySelection\",\n    value: function isCheckboxOnlySelection() {\n      return this.isCheckboxSelectionMode() && this.isCheckboxSelectionModeInColumn();\n    }\n  }, {\n    key: \"isSelected\",\n    value: function isSelected(rowData) {\n      if (rowData && this.props.selection) {\n        return this.props.selection instanceof Array ? this.findIndex(this.props.selection, rowData) > -1 : this.equals(rowData, this.props.selection);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isContextMenuSelected\",\n    value: function isContextMenuSelected(rowData) {\n      if (rowData && this.props.contextMenuSelection) {\n        return this.equals(rowData, this.props.contextMenuSelection);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isSelectable\",\n    value: function isSelectable(options) {\n      return this.props.isDataSelectable ? this.props.isDataSelectable(options) : true;\n    }\n  }, {\n    key: \"isRowExpanded\",\n    value: function isRowExpanded(rowData) {\n      if (rowData && this.props.expandedRows) {\n        if (this.isSubheaderGrouping() && this.props.expandableRowGroups) {\n          return this.isRowGroupExpanded(rowData);\n        } else {\n          if (this.props.dataKey) return this.props.expandedRows ? this.props.expandedRows[primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, this.props.dataKey)] !== undefined : false;else return this.findIndex(this.props.expandedRows, rowData) !== -1;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isRowGroupExpanded\",\n    value: function isRowGroupExpanded(rowData) {\n      var _this2 = this;\n\n      if (this.props.dataKey === this.props.groupRowsBy) return Object.keys(this.props.expandedRows).some(function (data) {\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(data, primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, _this2.props.dataKey));\n      });else return this.props.expandedRows.some(function (data) {\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(data, rowData, _this2.props.groupRowsBy);\n      });\n    }\n  }, {\n    key: \"isRowEditing\",\n    value: function isRowEditing(rowData) {\n      if (this.props.editMode === 'row' && rowData && this.props.editingRows) {\n        if (this.props.dataKey) return this.props.editingRows ? this.props.editingRows[primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, this.props.dataKey)] !== undefined : false;else return this.findIndex(this.props.editingRows, rowData) !== -1;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"allowDrag\",\n    value: function allowDrag(event) {\n      return this.props.dragSelection && this.isMultipleSelection() && !event.originalEvent.shiftKey;\n    }\n  }, {\n    key: \"allowRowDrag\",\n    value: function allowRowDrag(event) {\n      return !this.allowCellSelection() && this.allowDrag(event);\n    }\n  }, {\n    key: \"allowCellDrag\",\n    value: function allowCellDrag(event) {\n      return this.allowCellSelection() && this.allowDrag(event);\n    }\n  }, {\n    key: \"allowSelection\",\n    value: function allowSelection(event) {\n      return !primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.isClickable(event.originalEvent.target);\n    }\n  }, {\n    key: \"allowMetaKeySelection\",\n    value: function allowMetaKeySelection(event) {\n      return !this.rowTouched && (!this.props.metaKeySelection || this.props.metaKeySelection && (event.originalEvent.metaKey || event.originalEvent.ctrlKey));\n    }\n  }, {\n    key: \"allowRangeSelection\",\n    value: function allowRangeSelection(event) {\n      return this.isMultipleSelection() && event.originalEvent.shiftKey && this.anchorRowIndex !== null;\n    }\n  }, {\n    key: \"allowRowSelection\",\n    value: function allowRowSelection() {\n      return (this.props.selectionMode || this.props.selectionModeInColumn) && !this.isRadioOnlySelection() && !this.isCheckboxOnlySelection();\n    }\n  }, {\n    key: \"allowCellSelection\",\n    value: function allowCellSelection() {\n      return this.props.cellSelection && !this.isRadioSelectionModeInColumn() && !this.isCheckboxSelectionModeInColumn();\n    }\n  }, {\n    key: \"getColumnsLength\",\n    value: function getColumnsLength() {\n      return this.props.columns ? this.props.columns.length : 0;\n    }\n  }, {\n    key: \"getVirtualScrollerOption\",\n    value: function getVirtualScrollerOption(option, options) {\n      options = options || this.props.virtualScrollerOptions;\n      return options ? options[option] : null;\n    }\n  }, {\n    key: \"findIndex\",\n    value: function findIndex(collection, rowData) {\n      var _this3 = this;\n\n      return (collection || []).findIndex(function (data) {\n        return _this3.equals(rowData, data);\n      });\n    }\n  }, {\n    key: \"rowGroupHeaderStyle\",\n    value: function rowGroupHeaderStyle() {\n      if (this.props.scrollable) {\n        return {\n          top: this.state.rowGroupHeaderStyleObject['top']\n        };\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getRowKey\",\n    value: function getRowKey(rowData, index) {\n      return this.props.dataKey ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, this.props.dataKey) + '_' + index : index;\n    }\n  }, {\n    key: \"shouldRenderRowGroupHeader\",\n    value: function shouldRenderRowGroupHeader(value, rowData, i) {\n      var currentRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, this.props.groupRowsBy);\n      var prevRowData = value[i - 1];\n\n      if (prevRowData) {\n        var previousRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(prevRowData, this.props.groupRowsBy);\n        return currentRowFieldData !== previousRowFieldData;\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"shouldRenderRowGroupFooter\",\n    value: function shouldRenderRowGroupFooter(value, rowData, i, expanded) {\n      if (this.props.expandableRowGroups && !expanded) {\n        return false;\n      } else {\n        var currentRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, this.props.groupRowsBy);\n        var nextRowData = value[i + 1];\n\n        if (nextRowData) {\n          var nextRowFieldData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(nextRowData, this.props.groupRowsBy);\n          return currentRowFieldData !== nextRowFieldData;\n        } else {\n          return true;\n        }\n      }\n    }\n  }, {\n    key: \"updateFrozenRowStickyPosition\",\n    value: function updateFrozenRowStickyPosition() {\n      this.el.style.top = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterHeight(this.el.previousElementSibling) + 'px';\n    }\n  }, {\n    key: \"updateFrozenRowGroupHeaderStickyPosition\",\n    value: function updateFrozenRowGroupHeaderStickyPosition() {\n      var tableHeaderHeight = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterHeight(this.el.previousElementSibling);\n      var top = tableHeaderHeight + 'px';\n\n      if (this.state.rowGroupHeaderStyleObject && this.state.rowGroupHeaderStyleObject.top !== top) {\n        this.setState({\n          rowGroupHeaderStyleObject: {\n            top: top\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateVirtualScrollerPosition\",\n    value: function updateVirtualScrollerPosition() {\n      var tableHeaderHeight = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterHeight(this.el.previousElementSibling);\n      this.el.style.top = (this.el.style.top || 0) + tableHeaderHeight + 'px';\n    }\n  }, {\n    key: \"onSingleSelection\",\n    value: function onSingleSelection(_ref) {\n      var originalEvent = _ref.originalEvent,\n          data = _ref.data,\n          index = _ref.index,\n          toggleable = _ref.toggleable,\n          type = _ref.type;\n\n      if (!this.isSelectable({\n        data: data,\n        index: index\n      })) {\n        return;\n      }\n\n      var selected = this.isSelected(data);\n      var selection = this.props.selection;\n\n      if (selected) {\n        if (toggleable) {\n          selection = null;\n          this.onUnselect({\n            originalEvent: originalEvent,\n            data: data,\n            type: type\n          });\n        }\n      } else {\n        selection = data;\n        this.onSelect({\n          originalEvent: originalEvent,\n          data: data,\n          type: type\n        });\n      }\n\n      this.focusOnElement(originalEvent, true);\n\n      if (this.props.onSelectionChange && selection !== this.props.selection) {\n        this.props.onSelectionChange({\n          originalEvent: originalEvent,\n          value: selection,\n          type: type\n        });\n      }\n    }\n  }, {\n    key: \"onMultipleSelection\",\n    value: function onMultipleSelection(_ref2) {\n      var _this4 = this;\n\n      var originalEvent = _ref2.originalEvent,\n          data = _ref2.data,\n          index = _ref2.index,\n          toggleable = _ref2.toggleable,\n          type = _ref2.type;\n\n      if (!this.isSelectable({\n        data: data,\n        index: index\n      })) {\n        return;\n      }\n\n      var selected = this.isSelected(data);\n      var selection = this.props.selection || [];\n\n      if (selected) {\n        if (toggleable) {\n          var selectionIndex = this.findIndex(selection, data);\n          selection = this.props.selection.filter(function (val, i) {\n            return i !== selectionIndex;\n          });\n          this.onUnselect({\n            originalEvent: originalEvent,\n            data: data,\n            type: type\n          });\n        } else if (selection.length) {\n          this.props.selection.forEach(function (d) {\n            return _this4.onUnselect({\n              originalEvent: originalEvent,\n              data: d,\n              type: type\n            });\n          });\n          selection = [data];\n          this.onSelect({\n            originalEvent: originalEvent,\n            data: data,\n            type: type\n          });\n        }\n      } else {\n        selection = toggleable && this.isMultipleSelection() ? [].concat(_toConsumableArray(selection), [data]) : [data];\n        this.onSelect({\n          originalEvent: originalEvent,\n          data: data,\n          type: type\n        });\n      }\n\n      this.focusOnElement(originalEvent, true);\n\n      if (this.props.onSelectionChange && selection !== this.props.selection) {\n        this.props.onSelectionChange({\n          originalEvent: originalEvent,\n          value: selection,\n          type: type\n        });\n      }\n    }\n  }, {\n    key: \"onRangeSelection\",\n    value: function onRangeSelection(event, type) {\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.clearSelection();\n      this.rangeRowIndex = this.allowCellSelection() ? event.rowIndex : event.index;\n      var selectionInRange = this.selectRange(event);\n      var selection = this.isMultipleSelection() ? _toConsumableArray(new Set([].concat(_toConsumableArray(this.props.selection || []), _toConsumableArray(selectionInRange)))) : selectionInRange;\n\n      if (this.props.onSelectionChange && selection !== this.props.selection) {\n        this.props.onSelectionChange({\n          originalEvent: event.originalEvent,\n          value: selection,\n          type: type\n        });\n      }\n\n      this.anchorRowIndex = this.rangeRowIndex;\n      this.anchorCellIndex = event.cellIndex;\n      this.focusOnElement(event.originalEvent, false);\n    }\n  }, {\n    key: \"selectRange\",\n    value: function selectRange(event) {\n      var rangeStart, rangeEnd;\n\n      if (this.rangeRowIndex > this.anchorRowIndex) {\n        rangeStart = this.anchorRowIndex;\n        rangeEnd = this.rangeRowIndex;\n      } else if (this.rangeRowIndex < this.anchorRowIndex) {\n        rangeStart = this.rangeRowIndex;\n        rangeEnd = this.anchorRowIndex;\n      } else {\n        rangeStart = rangeEnd = this.rangeRowIndex;\n      }\n\n      if (this.props.paginator) {\n        rangeStart = Math.max(rangeStart - this.props.first, 0);\n        rangeEnd -= this.props.first;\n      }\n\n      return this.allowCellSelection() ? this.selectRangeOnCell(event, rangeStart, rangeEnd) : this.selectRangeOnRow(event, rangeStart, rangeEnd);\n    }\n  }, {\n    key: \"selectRangeOnRow\",\n    value: function selectRangeOnRow(event, rowRangeStart, rowRangeEnd) {\n      var value = this.props.value;\n      var selection = [];\n\n      for (var i = rowRangeStart; i <= rowRangeEnd; i++) {\n        var rangeRowData = value[i];\n\n        if (!this.isSelectable({\n          data: rangeRowData,\n          index: i\n        })) {\n          continue;\n        }\n\n        selection.push(rangeRowData);\n        this.onSelect({\n          originalEvent: event.originalEvent,\n          data: rangeRowData,\n          type: 'row'\n        });\n      }\n\n      return selection;\n    }\n  }, {\n    key: \"selectRangeOnCell\",\n    value: function selectRangeOnCell(event, rowRangeStart, rowRangeEnd) {\n      var cellRangeStart,\n          cellRangeEnd,\n          cellIndex = event.cellIndex;\n\n      if (cellIndex > this.anchorCellIndex) {\n        cellRangeStart = this.anchorCellIndex;\n        cellRangeEnd = cellIndex;\n      } else if (cellIndex < this.anchorCellIndex) {\n        cellRangeStart = cellIndex;\n        cellRangeEnd = this.anchorCellIndex;\n      } else {\n        cellRangeStart = cellRangeEnd = cellIndex;\n      }\n\n      var value = this.props.value;\n      var selection = [];\n\n      for (var i = rowRangeStart; i <= rowRangeEnd; i++) {\n        var rowData = value[i];\n        var columns = this.props.columns;\n\n        for (var j = cellRangeStart; j <= cellRangeEnd; j++) {\n          var field = columns[j].props.field;\n\n          var _value = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, field);\n\n          var rangeRowData = {\n            value: _value,\n            field: field,\n            rowData: rowData,\n            rowIndex: i,\n            cellIndex: j,\n            selected: true\n          };\n\n          if (!this.isSelectable({\n            data: rangeRowData,\n            index: i\n          })) {\n            continue;\n          }\n\n          selection.push(rangeRowData);\n          this.onSelect({\n            originalEvent: event.originalEvent,\n            data: rangeRowData,\n            type: 'cell'\n          });\n        }\n      }\n\n      return selection;\n    }\n  }, {\n    key: \"onSelect\",\n    value: function onSelect(event) {\n      if (this.allowCellSelection()) this.props.onCellSelect && this.props.onCellSelect(_objectSpread$5(_objectSpread$5({\n        originalEvent: event.originalEvent\n      }, event.data), {}, {\n        type: event.type\n      }));else this.props.onRowSelect && this.props.onRowSelect(event);\n    }\n  }, {\n    key: \"onUnselect\",\n    value: function onUnselect(event) {\n      if (this.allowCellSelection()) this.props.onCellUnselect && this.props.onCellUnselect(_objectSpread$5(_objectSpread$5({\n        originalEvent: event.originalEvent\n      }, event.data), {}, {\n        type: event.type\n      }));else this.props.onRowUnselect && this.props.onRowUnselect(event);\n    }\n  }, {\n    key: \"enableDragSelection\",\n    value: function enableDragSelection(event) {\n      if (this.props.dragSelection && !this.dragSelectionHelper) {\n        this.dragSelectionHelper = document.createElement('div');\n        primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.addClass(this.dragSelectionHelper, 'p-datatable-drag-selection-helper');\n        this.initialDragPosition = {\n          x: event.clientX,\n          y: event.clientY\n        };\n        this.dragSelectionHelper.style.top = \"\".concat(event.pageY, \"px\");\n        this.dragSelectionHelper.style.left = \"\".concat(event.pageX, \"px\");\n        this.bindDragSelectionEvents();\n      }\n    }\n  }, {\n    key: \"focusOnElement\",\n    value: function focusOnElement(event, isFocused) {\n      var target = event.currentTarget;\n\n      if (!this.allowCellSelection() && this.props.selectionAutoFocus) {\n        if (this.isCheckboxSelectionModeInColumn()) {\n          var checkbox = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.findSingle(target, 'td.p-selection-column .p-checkbox-box');\n          checkbox && checkbox.focus();\n        } else if (this.isRadioSelectionModeInColumn()) {\n          var radio = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.findSingle(target, 'td.p-selection-column input[type=\"radio\"]');\n          radio && radio.focus();\n        }\n      }\n\n      !isFocused && target && target.focus();\n    }\n  }, {\n    key: \"changeTabIndex\",\n    value: function changeTabIndex(event, type) {\n      var target = event.currentTarget;\n      var isSelectable = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(target, type === 'cell' ? 'p-selectable-cell' : 'p-selectable-row');\n\n      if (isSelectable) {\n        var selector = type === 'cell' ? 'tr > td' : 'tr';\n        var tabbableEl = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.findSingle(this.el, \"\".concat(selector, \"[tabindex=\\\"\").concat(this.props.tabIndex, \"\\\"]\"));\n\n        if (tabbableEl && target) {\n          tabbableEl.tabIndex = -1;\n          target.tabIndex = this.props.tabIndex;\n        }\n      }\n    }\n  }, {\n    key: \"onRowClick\",\n    value: function onRowClick(event) {\n      if (this.allowCellSelection() || !this.allowSelection(event)) {\n        return;\n      }\n\n      this.props.onRowClick && this.props.onRowClick(event);\n\n      if (this.allowRowSelection()) {\n        if (this.allowRangeSelection(event)) {\n          this.onRangeSelection(event, 'row');\n        } else {\n          var toggleable = this.isRadioSelectionModeInColumn() || this.isCheckboxSelectionModeInColumn() || this.allowMetaKeySelection(event);\n          this.anchorRowIndex = event.index;\n          this.rangeRowIndex = event.index;\n          this.anchorRowFirst = this.props.first;\n\n          if (this.isSingleSelection()) {\n            this.onSingleSelection(_objectSpread$5(_objectSpread$5({}, event), {}, {\n              toggleable: toggleable,\n              type: 'row'\n            }));\n          } else {\n            this.onMultipleSelection(_objectSpread$5(_objectSpread$5({}, event), {}, {\n              toggleable: toggleable,\n              type: 'row'\n            }));\n          }\n        }\n\n        this.changeTabIndex(event.originalEvent, 'row');\n      } else {\n        this.focusOnElement(event.originalEvent);\n      }\n\n      this.rowTouched = false;\n    }\n  }, {\n    key: \"onRowDoubleClick\",\n    value: function onRowDoubleClick(e) {\n      var event = e.originalEvent;\n\n      if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.isClickable(event.target)) {\n        return;\n      }\n\n      if (this.props.onRowDoubleClick) {\n        this.props.onRowDoubleClick(e);\n      }\n    }\n  }, {\n    key: \"onRowRightClick\",\n    value: function onRowRightClick(event) {\n      if (this.props.onContextMenu || this.props.onContextMenuSelectionChange) {\n        primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.clearSelection();\n\n        if (this.props.onContextMenuSelectionChange) {\n          this.props.onContextMenuSelectionChange({\n            originalEvent: event.originalEvent,\n            value: event.data\n          });\n        }\n\n        if (this.props.onContextMenu) {\n          this.props.onContextMenu({\n            originalEvent: event.originalEvent,\n            data: event.data\n          });\n        }\n\n        event.originalEvent.preventDefault();\n      }\n    }\n  }, {\n    key: \"onRowTouchEnd\",\n    value: function onRowTouchEnd() {\n      this.rowTouched = true;\n    }\n  }, {\n    key: \"onRowMouseDown\",\n    value: function onRowMouseDown(e) {\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.clearSelection();\n      var event = e.originalEvent;\n      if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(event.target, 'p-datatable-reorderablerow-handle')) event.currentTarget.draggable = true;else event.currentTarget.draggable = false;\n\n      if (this.allowRowDrag(e)) {\n        this.enableDragSelection(event, 'row');\n        this.anchorRowIndex = e.index;\n        this.rangeRowIndex = e.index;\n        this.anchorRowFirst = this.props.first;\n      }\n    }\n  }, {\n    key: \"onRowMouseUp\",\n    value: function onRowMouseUp(event) {\n      var isSameRow = event.index === this.anchorRowIndex;\n\n      if (this.allowRowDrag(event) && !isSameRow) {\n        this.onRangeSelection(event, 'row');\n      }\n    }\n  }, {\n    key: \"onRowToggle\",\n    value: function onRowToggle(event) {\n      var expandedRows;\n      var dataKey = this.props.dataKey;\n      var hasDataKey = this.props.groupRowsBy ? dataKey === this.props.groupRowsBy : !!dataKey;\n\n      if (hasDataKey) {\n        var dataKeyValue = String(primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(event.data, dataKey));\n        expandedRows = this.props.expandedRows ? _objectSpread$5({}, this.props.expandedRows) : {};\n\n        if (expandedRows[dataKeyValue] != null) {\n          delete expandedRows[dataKeyValue];\n\n          if (this.props.onRowCollapse) {\n            this.props.onRowCollapse({\n              originalEvent: event,\n              data: event.data\n            });\n          }\n        } else {\n          expandedRows[dataKeyValue] = true;\n\n          if (this.props.onRowExpand) {\n            this.props.onRowExpand({\n              originalEvent: event,\n              data: event.data\n            });\n          }\n        }\n      } else {\n        var expandedRowIndex = this.findIndex(this.props.expandedRows, event.data);\n        expandedRows = this.props.expandedRows ? _toConsumableArray(this.props.expandedRows) : [];\n\n        if (expandedRowIndex !== -1) {\n          expandedRows = expandedRows.filter(function (val, i) {\n            return i !== expandedRowIndex;\n          });\n\n          if (this.props.onRowCollapse) {\n            this.props.onRowCollapse({\n              originalEvent: event,\n              data: event.data\n            });\n          }\n        } else {\n          expandedRows.push(event.data);\n\n          if (this.props.onRowExpand) {\n            this.props.onRowExpand({\n              originalEvent: event,\n              data: event.data\n            });\n          }\n        }\n      }\n\n      if (this.props.onRowToggle) {\n        this.props.onRowToggle({\n          data: expandedRows\n        });\n      }\n    }\n  }, {\n    key: \"onRowDragStart\",\n    value: function onRowDragStart(e) {\n      var event = e.originalEvent,\n          index = e.index;\n      this.rowDragging = true;\n      this.draggedRowIndex = index;\n      event.dataTransfer.setData('text', 'b'); // For firefox\n    }\n  }, {\n    key: \"onRowDragOver\",\n    value: function onRowDragOver(e) {\n      var event = e.originalEvent,\n          index = e.index;\n\n      if (this.rowDragging && this.draggedRowIndex !== index) {\n        var rowElement = event.currentTarget;\n        var rowY = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOffset(rowElement).top + primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getWindowScrollTop();\n        var pageY = event.pageY;\n        var rowMidY = rowY + primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterHeight(rowElement) / 2;\n        var prevRowElement = rowElement.previousElementSibling;\n\n        if (pageY < rowMidY) {\n          primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-bottom');\n          this.droppedRowIndex = index;\n          if (prevRowElement) primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.addClass(prevRowElement, 'p-datatable-dragpoint-bottom');else primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.addClass(rowElement, 'p-datatable-dragpoint-top');\n        } else {\n          if (prevRowElement) primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeClass(prevRowElement, 'p-datatable-dragpoint-bottom');else primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.addClass(rowElement, 'p-datatable-dragpoint-top');\n          this.droppedRowIndex = index + 1;\n          primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.addClass(rowElement, 'p-datatable-dragpoint-bottom');\n        }\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"onRowDragLeave\",\n    value: function onRowDragLeave(e) {\n      var event = e.originalEvent;\n      var rowElement = event.currentTarget;\n      var prevRowElement = rowElement.previousElementSibling;\n\n      if (prevRowElement) {\n        primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeClass(prevRowElement, 'p-datatable-dragpoint-bottom');\n      }\n\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-bottom');\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-top');\n    }\n  }, {\n    key: \"onRowDragEnd\",\n    value: function onRowDragEnd(e) {\n      var event = e.originalEvent;\n      this.rowDragging = false;\n      this.draggedRowIndex = null;\n      this.droppedRowIndex = null;\n      event.currentTarget.draggable = false;\n    }\n  }, {\n    key: \"onRowDrop\",\n    value: function onRowDrop(e) {\n      var event = e.originalEvent;\n\n      if (this.droppedRowIndex != null) {\n        var dropIndex = this.draggedRowIndex > this.droppedRowIndex ? this.droppedRowIndex : this.droppedRowIndex === 0 ? 0 : this.droppedRowIndex - 1;\n\n        var val = _toConsumableArray(this.props.value);\n\n        primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.reorderArray(val, this.draggedRowIndex, dropIndex);\n\n        if (this.props.onRowReorder) {\n          this.props.onRowReorder({\n            originalEvent: event,\n            value: val,\n            dragIndex: this.draggedRowIndex,\n            dropIndex: this.droppedRowIndex\n          });\n        }\n      } //cleanup\n\n\n      this.onRowDragLeave(e);\n      this.onRowDragEnd(e);\n      event.preventDefault();\n    }\n  }, {\n    key: \"onRadioChange\",\n    value: function onRadioChange(event) {\n      this.onSingleSelection(_objectSpread$5(_objectSpread$5({}, event), {}, {\n        toggleable: true,\n        type: 'radio'\n      }));\n    }\n  }, {\n    key: \"onCheckboxChange\",\n    value: function onCheckboxChange(event) {\n      this.onMultipleSelection(_objectSpread$5(_objectSpread$5({}, event), {}, {\n        toggleable: true,\n        type: 'checkbox'\n      }));\n    }\n  }, {\n    key: \"onDragSelectionMouseMove\",\n    value: function onDragSelectionMouseMove(event) {\n      var _this$initialDragPosi = this.initialDragPosition,\n          x = _this$initialDragPosi.x,\n          y = _this$initialDragPosi.y;\n      var dx = event.clientX - x;\n      var dy = event.clientY - y;\n      if (dy < 0) this.dragSelectionHelper.style.top = \"\".concat(event.pageY + 5, \"px\");\n      if (dx < 0) this.dragSelectionHelper.style.left = \"\".concat(event.pageX + 5, \"px\");\n      this.dragSelectionHelper.style.height = \"\".concat(Math.abs(dy), \"px\");\n      this.dragSelectionHelper.style.width = \"\".concat(Math.abs(dx), \"px\");\n      event.preventDefault();\n    }\n  }, {\n    key: \"onDragSelectionMouseUp\",\n    value: function onDragSelectionMouseUp() {\n      if (this.dragSelectionHelper) {\n        this.dragSelectionHelper.remove();\n        this.dragSelectionHelper = null;\n      }\n\n      document.removeEventListener('mousemove', this.onDragSelectionMouseMove);\n      document.removeEventListener('mouseup', this.onDragSelectionMouseUp);\n    }\n  }, {\n    key: \"onCellClick\",\n    value: function onCellClick(event) {\n      if (!this.allowSelection(event)) {\n        return;\n      }\n\n      this.props.onCellClick && this.props.onCellClick(event);\n\n      if (this.allowCellSelection()) {\n        if (this.allowRangeSelection(event)) {\n          this.onRangeSelection(event, 'cell');\n        } else {\n          var toggleable = this.allowMetaKeySelection(event);\n\n          var originalEvent = event.originalEvent,\n              data = _objectWithoutProperties(event, _excluded);\n\n          this.anchorRowIndex = event.rowIndex;\n          this.rangeRowIndex = event.rowIndex;\n          this.anchorRowFirst = this.props.first;\n          this.anchorCellIndex = event.cellIndex;\n\n          if (this.isSingleSelection()) {\n            this.onSingleSelection({\n              originalEvent: originalEvent,\n              data: data,\n              index: event.rowIndex,\n              toggleable: toggleable,\n              type: 'cell'\n            });\n          } else {\n            this.onMultipleSelection({\n              originalEvent: originalEvent,\n              data: data,\n              index: event.rowIndex,\n              toggleable: toggleable,\n              type: 'cell'\n            });\n          }\n        }\n\n        this.changeTabIndex(event.originalEvent, 'cell');\n      }\n\n      this.rowTouched = false;\n    }\n  }, {\n    key: \"onCellMouseDown\",\n    value: function onCellMouseDown(event) {\n      if (this.allowCellDrag(event)) {\n        this.enableDragSelection(event.originalEvent);\n        this.anchorRowIndex = event.rowIndex;\n        this.rangeRowIndex = event.rowIndex;\n        this.anchorRowFirst = this.props.first;\n        this.anchorCellIndex = event.cellIndex;\n      }\n    }\n  }, {\n    key: \"onCellMouseUp\",\n    value: function onCellMouseUp(event) {\n      var isSameCell = event.rowIndex === this.anchorRowIndex && event.cellIndex === this.anchorCellIndex;\n\n      if (this.allowCellDrag(event) && !isSameCell) {\n        this.onRangeSelection(event, 'cell');\n      }\n    }\n  }, {\n    key: \"bindDragSelectionEvents\",\n    value: function bindDragSelectionEvents() {\n      document.addEventListener('mousemove', this.onDragSelectionMouseMove);\n      document.addEventListener('mouseup', this.onDragSelectionMouseUp);\n      document.body.appendChild(this.dragSelectionHelper);\n    }\n  }, {\n    key: \"unbindDragSelectionEvents\",\n    value: function unbindDragSelectionEvents() {\n      this.onDragSelectionMouseUp();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.frozenRow) {\n        this.updateFrozenRowStickyPosition();\n      }\n\n      if (this.props.scrollable && this.props.rowGroupMode === 'subheader') {\n        this.updateFrozenRowGroupHeaderStickyPosition();\n      }\n\n      if (!this.props.isVirtualScrollerDisabled && this.getVirtualScrollerOption('vertical')) {\n        this.updateVirtualScrollerPosition();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.frozenRow) {\n        this.updateFrozenRowStickyPosition();\n      }\n\n      if (this.props.scrollable && this.props.rowGroupMode === 'subheader') {\n        this.updateFrozenRowGroupHeaderStickyPosition();\n      }\n\n      if (!this.props.isVirtualScrollerDisabled && this.getVirtualScrollerOption('vertical') && this.getVirtualScrollerOption('itemSize', prevProps.virtualScrollerOptions) !== this.getVirtualScrollerOption('itemSize')) {\n        this.updateVirtualScrollerPosition();\n      }\n\n      if (this.props.paginator && this.isMultipleSelection() && this.props.first !== prevProps.first) {\n        this.anchorRowIndex = null;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.dragSelection) {\n        this.unbindDragSelectionEvents();\n      }\n    }\n  }, {\n    key: \"renderEmptyContent\",\n    value: function renderEmptyContent() {\n      if (!this.props.loading) {\n        var colSpan = this.getColumnsLength();\n        var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.props.emptyMessage, {\n          props: this.props,\n          frozen: this.props.frozenRow\n        }) || (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('emptyMessage');\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n          className: \"p-datatable-emptymessage\",\n          role: \"row\"\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", {\n          colSpan: colSpan,\n          role: \"cell\"\n        }, content));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderGroupHeader\",\n    value: function renderGroupHeader(rowData, index, expanded, isSubheaderGrouping, colSpan) {\n      if (isSubheaderGrouping && this.shouldRenderRowGroupHeader(this.props.value, rowData, index - this.props.first)) {\n        var style = this.rowGroupHeaderStyle();\n        var toggler = this.props.expandableRowGroups && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(RowTogglerButton, {\n          onClick: this.onRowToggle,\n          rowData: rowData,\n          expanded: expanded,\n          expandedRowIcon: this.props.expandedRowIcon,\n          collapsedRowIcon: this.props.collapsedRowIcon\n        });\n        var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.props.rowGroupHeaderTemplate, rowData, {\n          index: index,\n          props: this.props.tableProps\n        });\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n          className: \"p-rowgroup-header\",\n          style: style,\n          role: \"row\"\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", {\n          colSpan: colSpan\n        }, toggler, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          className: \"p-rowgroup-header-name\"\n        }, content)));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderRow\",\n    value: function renderRow(rowData, index, expanded) {\n      if (!this.props.expandableRowGroups || expanded) {\n        var selected = this.isSelectionEnabled() ? this.isSelected(rowData) : false;\n        var contextMenuSelected = this.isContextMenuSelected(rowData);\n        var allowRowSelection = this.allowRowSelection();\n        var allowCellSelection = this.allowCellSelection();\n        var editing = this.isRowEditing(rowData);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BodyRow, {\n          tableProps: this.props.tableProps,\n          tableSelector: this.props.tableSelector,\n          value: this.props.value,\n          columns: this.props.columns,\n          rowData: rowData,\n          index: index,\n          selected: selected,\n          contextMenuSelected: contextMenuSelected,\n          onRowClick: this.onRowClick,\n          onRowDoubleClick: this.onRowDoubleClick,\n          onRowRightClick: this.onRowRightClick,\n          tabIndex: this.props.tabIndex,\n          isSelectable: this.isSelectable,\n          onRowTouchEnd: this.onRowTouchEnd,\n          onRowMouseDown: this.onRowMouseDown,\n          onRowMouseUp: this.onRowMouseUp,\n          onRowToggle: this.onRowToggle,\n          onRowDragStart: this.onRowDragStart,\n          onRowDragOver: this.onRowDragOver,\n          onRowDragLeave: this.onRowDragLeave,\n          onRowDragEnd: this.onRowDragEnd,\n          onRowDrop: this.onRowDrop,\n          onRadioChange: this.onRadioChange,\n          onCheckboxChange: this.onCheckboxChange,\n          onCellClick: this.onCellClick,\n          onCellMouseDown: this.onCellMouseDown,\n          onCellMouseUp: this.onCellMouseUp,\n          editing: editing,\n          editingRows: this.props.editingRows,\n          editingMeta: this.props.editingMeta,\n          editMode: this.props.editMode,\n          onRowEditChange: this.props.onRowEditChange,\n          onEditingMetaChange: this.props.onEditingMetaChange,\n          groupRowsBy: this.props.groupRowsBy,\n          compareSelectionBy: this.props.compareSelectionBy,\n          dataKey: this.props.dataKey,\n          rowGroupMode: this.props.rowGroupMode,\n          onRowEditInit: this.props.onRowEditInit,\n          rowEditValidator: this.props.rowEditValidator,\n          onRowEditSave: this.props.onRowEditSave,\n          onRowEditComplete: this.props.onRowEditComplete,\n          onRowEditCancel: this.props.onRowEditCancel,\n          selection: this.props.selection,\n          allowRowSelection: allowRowSelection,\n          allowCellSelection: allowCellSelection,\n          selectOnEdit: this.props.selectOnEdit,\n          selectionMode: this.props.selectionMode,\n          selectionModeInColumn: this.props.selectionModeInColumn,\n          cellClassName: this.props.cellClassName,\n          responsiveLayout: this.props.responsiveLayout,\n          frozenRow: this.props.frozenRow,\n          showSelectionElement: this.props.showSelectionElement,\n          showRowReorderElement: this.props.showRowReorderElement,\n          expanded: expanded,\n          expandedRowIcon: this.props.expandedRowIcon,\n          collapsedRowIcon: this.props.collapsedRowIcon,\n          rowClassName: this.props.rowClassName,\n          virtualScrollerOptions: this.props.virtualScrollerOptions\n        });\n      }\n    }\n  }, {\n    key: \"renderExpansion\",\n    value: function renderExpansion(rowData, index, expanded, isSubheaderGrouping, colSpan) {\n      if (expanded && !(isSubheaderGrouping && this.props.expandableRowGroups)) {\n        var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.props.rowExpansionTemplate, rowData, {\n          index: index\n        });\n        var id = \"\".concat(this.props.tableSelector, \"_content_\").concat(index, \"_expanded\");\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n          id: id,\n          className: \"p-datatable-row-expansion\",\n          role: \"row\"\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", {\n          role: \"cell\",\n          colSpan: colSpan\n        }, content));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderGroupFooter\",\n    value: function renderGroupFooter(rowData, index, expanded, isSubheaderGrouping, colSpan) {\n      if (isSubheaderGrouping && this.shouldRenderRowGroupFooter(this.props.value, rowData, index - this.props.first, expanded)) {\n        var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.props.rowGroupFooterTemplate, rowData, {\n          index: index,\n          colSpan: colSpan,\n          props: this.props.tableProps\n        });\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n          className: \"p-rowgroup-footer\",\n          role: \"row\"\n        }, content);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this5 = this;\n\n      return this.props.value.map(function (rowData, i) {\n        var index = _this5.getVirtualScrollerOption('getItemOptions') ? _this5.getVirtualScrollerOption('getItemOptions')(i).index : _this5.props.first + i;\n\n        var key = _this5.getRowKey(rowData, index);\n\n        var expanded = _this5.isRowExpanded(rowData);\n\n        var isSubheaderGrouping = _this5.isSubheaderGrouping();\n\n        var colSpan = _this5.getColumnsLength();\n\n        var groupHeader = _this5.renderGroupHeader(rowData, index, expanded, isSubheaderGrouping, colSpan);\n\n        var row = _this5.renderRow(rowData, index, expanded);\n\n        var expansion = _this5.renderExpansion(rowData, index, expanded, isSubheaderGrouping, colSpan);\n\n        var groupFooter = _this5.renderGroupFooter(rowData, index, expanded, isSubheaderGrouping, colSpan);\n\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {\n          key: key\n        }, groupHeader, row, expansion, groupFooter);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-datatable-tbody', this.props.className);\n      var content = this.props.empty ? this.renderEmptyContent() : this.renderContent();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tbody\", {\n        ref: this.ref,\n        className: className\n      }, content);\n    }\n  }]);\n\n  return TableBody;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$6(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$6(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$6() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar FooterCell = /*#__PURE__*/function (_Component) {\n  _inherits(FooterCell, _Component);\n\n  var _super = _createSuper$6(FooterCell);\n\n  function FooterCell(props) {\n    var _this;\n\n    _classCallCheck(this, FooterCell);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      styleObject: {}\n    };\n    return _this;\n  }\n\n  _createClass(FooterCell, [{\n    key: \"getColumnProp\",\n    value: function getColumnProp(prop) {\n      return this.props.column.props[prop];\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      var footerStyle = this.getColumnProp('footerStyle');\n      var columnStyle = this.getColumnProp('style');\n      return this.getColumnProp('frozen') ? Object.assign({}, columnStyle, footerStyle, this.state.styleObject) : Object.assign({}, columnStyle, footerStyle);\n    }\n  }, {\n    key: \"updateStickyPosition\",\n    value: function updateStickyPosition() {\n      if (this.getColumnProp('frozen')) {\n        var styleObject = _objectSpread$4({}, this.state.styleObject);\n\n        var align = this.getColumnProp('alignFrozen');\n\n        if (align === 'right') {\n          var right = 0;\n          var next = this.el.nextElementSibling;\n\n          if (next) {\n            right = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(next) + parseFloat(next.style.right || 0);\n          }\n\n          styleObject['right'] = right + 'px';\n        } else {\n          var left = 0;\n          var prev = this.el.previousElementSibling;\n\n          if (prev) {\n            left = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(prev) + parseFloat(prev.style.left || 0);\n          }\n\n          styleObject['left'] = left + 'px';\n        }\n\n        this.setState({\n          styleObject: styleObject\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.getColumnProp('frozen')) {\n        this.updateStickyPosition();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.getColumnProp('frozen')) {\n        this.updateStickyPosition();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var style = this.getStyle();\n      var align = this.getColumnProp('align');\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)(this.getColumnProp('footerClassName'), this.getColumnProp('className'), _defineProperty({\n        'p-frozen-column': this.getColumnProp('frozen')\n      }, \"p-align-\".concat(align), !!align));\n      var colSpan = this.getColumnProp('colSpan');\n      var rowSpan = this.getColumnProp('rowSpan');\n      var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getColumnProp('footer'), {\n        props: this.props.tableProps\n      });\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", {\n        ref: function ref(el) {\n          return _this2.el = el;\n        },\n        style: style,\n        className: className,\n        role: \"cell\",\n        colSpan: colSpan,\n        rowSpan: rowSpan\n      }, content);\n    }\n  }]);\n\n  return FooterCell;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction _createSuper$5(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$5(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$5() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar TableFooter = /*#__PURE__*/function (_Component) {\n  _inherits(TableFooter, _Component);\n\n  var _super = _createSuper$5(TableFooter);\n\n  function TableFooter() {\n    _classCallCheck(this, TableFooter);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(TableFooter, [{\n    key: \"hasFooter\",\n    value: function hasFooter() {\n      return this.props.footerColumnGroup ? true : this.props.columns ? this.props.columns.some(function (col) {\n        return col && col.props.footer;\n      }) : false;\n    }\n  }, {\n    key: \"renderGroupFooterCells\",\n    value: function renderGroupFooterCells(row) {\n      var columns = react__WEBPACK_IMPORTED_MODULE_0___default().Children.toArray(row.props.children);\n      return this.renderFooterCells(columns);\n    }\n  }, {\n    key: \"renderFooterCells\",\n    value: function renderFooterCells(columns) {\n      var _this = this;\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default().Children.map(columns, function (col, i) {\n        var isVisible = col ? !col.props.hidden : true;\n        var key = col ? col.props.columnKey || col.props.field || i : i;\n        return isVisible && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FooterCell, {\n          key: key,\n          tableProps: _this.props.tableProps,\n          column: col\n        });\n      });\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this2 = this;\n\n      if (this.props.footerColumnGroup) {\n        var rows = react__WEBPACK_IMPORTED_MODULE_0___default().Children.toArray(this.props.footerColumnGroup.props.children);\n        return rows.map(function (row, i) {\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n            key: i,\n            role: \"row\"\n          }, _this2.renderGroupFooterCells(row));\n        });\n      }\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n        role: \"row\"\n      }, this.renderFooterCells(this.props.columns));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.hasFooter()) {\n        var content = this.renderContent();\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tfoot\", {\n          className: \"p-datatable-tfoot\"\n        }, content);\n      }\n\n      return null;\n    }\n  }]);\n\n  return TableFooter;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction _createSuper$4(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$4(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$4() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar HeaderCheckbox = /*#__PURE__*/function (_Component) {\n  _inherits(HeaderCheckbox, _Component);\n\n  var _super = _createSuper$4(HeaderCheckbox);\n\n  function HeaderCheckbox(props) {\n    var _this;\n\n    _classCallCheck(this, HeaderCheckbox);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      focused: false\n    };\n    _this.onFocus = _this.onFocus.bind(_assertThisInitialized(_this));\n    _this.onBlur = _this.onBlur.bind(_assertThisInitialized(_this));\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.onKeyDown = _this.onKeyDown.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(HeaderCheckbox, [{\n    key: \"onFocus\",\n    value: function onFocus() {\n      this.setState({\n        focused: true\n      });\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur() {\n      this.setState({\n        focused: false\n      });\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(event) {\n      if (!this.props.disabled) {\n        this.setState({\n          focused: true\n        });\n        this.props.onChange({\n          originalEvent: event,\n          checked: !this.props.checked\n        });\n      }\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (event.code === 'Space') {\n        this.onClick(event);\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var boxClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-checkbox-box p-component', {\n        'p-highlight': this.props.checked,\n        'p-disabled': this.props.disabled,\n        'p-focus': this.state.focused\n      });\n      var iconClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-checkbox-icon', {\n        'pi pi-check': this.props.checked\n      });\n      var tabIndex = this.props.disabled ? null : 0;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: \"p-checkbox p-component\",\n        onClick: this.onClick\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: boxClassName,\n        role: \"checkbox\",\n        \"aria-checked\": this.props.checked,\n        tabIndex: tabIndex,\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onKeyDown: this.onKeyDown\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: iconClassName\n      })));\n    }\n  }]);\n\n  return HeaderCheckbox;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar ColumnFilter = /*#__PURE__*/function (_Component) {\n  _inherits(ColumnFilter, _Component);\n\n  var _super = _createSuper$3(ColumnFilter);\n\n  function ColumnFilter(props) {\n    var _this;\n\n    _classCallCheck(this, ColumnFilter);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      overlayVisible: false\n    };\n    _this.overlayRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createRef();\n    _this.filterCallback = _this.filterCallback.bind(_assertThisInitialized(_this));\n    _this.filterApplyCallback = _this.filterApplyCallback.bind(_assertThisInitialized(_this));\n    _this.onOperatorChange = _this.onOperatorChange.bind(_assertThisInitialized(_this));\n    _this.addConstraint = _this.addConstraint.bind(_assertThisInitialized(_this));\n    _this.clearFilter = _this.clearFilter.bind(_assertThisInitialized(_this));\n    _this.applyFilter = _this.applyFilter.bind(_assertThisInitialized(_this));\n    _this.onInputChange = _this.onInputChange.bind(_assertThisInitialized(_this));\n    _this.toggleMenu = _this.toggleMenu.bind(_assertThisInitialized(_this));\n    _this.onOverlayEnter = _this.onOverlayEnter.bind(_assertThisInitialized(_this));\n    _this.onOverlayExit = _this.onOverlayExit.bind(_assertThisInitialized(_this));\n    _this.onOverlayExited = _this.onOverlayExited.bind(_assertThisInitialized(_this));\n    _this.onContentKeyDown = _this.onContentKeyDown.bind(_assertThisInitialized(_this));\n    _this.onContentClick = _this.onContentClick.bind(_assertThisInitialized(_this));\n    _this.onContentMouseDown = _this.onContentMouseDown.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ColumnFilter, [{\n    key: \"field\",\n    get: function get() {\n      return this.getColumnProp('filterField') || this.getColumnProp('field');\n    }\n  }, {\n    key: \"overlay\",\n    get: function get() {\n      return this.overlayRef ? this.overlayRef.current : null;\n    }\n  }, {\n    key: \"filterModel\",\n    get: function get() {\n      return this.props.filters[this.field];\n    }\n  }, {\n    key: \"filterStoreModel\",\n    get: function get() {\n      return this.props.filtersStore[this.field];\n    }\n  }, {\n    key: \"hasFilter\",\n    value: function hasFilter() {\n      if (this.props.filtersStore) {\n        var fieldFilter = this.props.filtersStore[this.field];\n        return fieldFilter && (fieldFilter.operator ? !this.isFilterBlank(fieldFilter.constraints[0].value) : !this.isFilterBlank(fieldFilter.value));\n      }\n\n      return false;\n    }\n  }, {\n    key: \"hasRowFilter\",\n    value: function hasRowFilter() {\n      return this.filterModel && !this.isFilterBlank(this.filterModel.value);\n    }\n  }, {\n    key: \"isFilterBlank\",\n    value: function isFilterBlank(filter) {\n      return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isEmpty(filter);\n    }\n  }, {\n    key: \"isRowMatchModeSelected\",\n    value: function isRowMatchModeSelected(matchMode) {\n      return this.filterModel && this.filterModel.matchMode === matchMode;\n    }\n  }, {\n    key: \"showMenuButton\",\n    value: function showMenuButton() {\n      return this.getColumnProp('showFilterMenu') && (this.props.display === 'row' ? this.getColumnProp('dataType') !== 'boolean' : true);\n    }\n  }, {\n    key: \"matchModes\",\n    value: function matchModes() {\n      return this.getColumnProp('filterMatchModeOptions') || primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].filterMatchModeOptions[this.findDataType()].map(function (key) {\n        return {\n          label: (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)(key),\n          value: key\n        };\n      });\n    }\n  }, {\n    key: \"isShowMatchModes\",\n    value: function isShowMatchModes() {\n      return this.getColumnProp('dataType') !== 'boolean' && this.getColumnProp('showFilterMatchModes') && this.matchModes() && this.getColumnProp('showFilterMenuOptions');\n    }\n  }, {\n    key: \"isShowOperator\",\n    value: function isShowOperator() {\n      return this.getColumnProp('showFilterOperator') && this.filterModel && this.filterModel.operator && this.getColumnProp('showFilterMenuOptions');\n    }\n  }, {\n    key: \"showRemoveIcon\",\n    value: function showRemoveIcon() {\n      return this.fieldConstraints().length > 1;\n    }\n  }, {\n    key: \"isShowAddConstraint\",\n    value: function isShowAddConstraint() {\n      return this.getColumnProp('showAddButton') && this.filterModel && this.filterModel.operator && this.fieldConstraints() && this.fieldConstraints().length < this.getColumnProp('maxConstraints') && this.getColumnProp('showFilterMenuOptions');\n    }\n  }, {\n    key: \"isOutsideClicked\",\n    value: function isOutsideClicked(target) {\n      return !this.isTargetClicked(target) && this.overlayRef && this.overlayRef.current && !(this.overlayRef.current.isSameNode(target) || this.overlayRef.current.contains(target));\n    }\n  }, {\n    key: \"isTargetClicked\",\n    value: function isTargetClicked(target) {\n      return this.icon && (this.icon.isSameNode(target) || this.icon.contains(target));\n    }\n  }, {\n    key: \"getColumnProp\",\n    value: function getColumnProp(prop) {\n      return this.props.column.props[prop];\n    }\n  }, {\n    key: \"getDefaultConstraint\",\n    value: function getDefaultConstraint() {\n      if (this.props.filtersStore && this.filterStoreModel) {\n        if (this.filterStoreModel.operator) {\n          return {\n            matchMode: this.filterStoreModel.constraints[0].matchMode,\n            operator: this.filterStoreModel.operator\n          };\n        } else {\n          return {\n            matchMode: this.filterStoreModel.matchMode\n          };\n        }\n      }\n    }\n  }, {\n    key: \"findDataType\",\n    value: function findDataType() {\n      var dataType = this.getColumnProp('dataType');\n      var matchMode = this.getColumnProp('filterMatchMode');\n\n      var hasMatchMode = function hasMatchMode(key) {\n        return primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].filterMatchModeOptions[key].some(function (mode) {\n          return mode === matchMode;\n        });\n      };\n\n      if (matchMode === 'custom' && !hasMatchMode(dataType)) {\n        primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].filterMatchModeOptions[dataType].push(primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterMatchMode.CUSTOM);\n        return dataType;\n      } else if (matchMode) {\n        return Object.keys(primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].filterMatchModeOptions).find(function (key) {\n          return hasMatchMode(key);\n        }) || dataType;\n      }\n\n      return dataType;\n    }\n  }, {\n    key: \"clearFilter\",\n    value: function clearFilter() {\n      var field = this.field;\n      var filterClearCallback = this.getColumnProp('onFilterClear');\n      var defaultConstraint = this.getDefaultConstraint();\n\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      if (filters[field].operator) {\n        filters[field].constraints.splice(1);\n        filters[field].operator = defaultConstraint.operator;\n        filters[field].constraints[0] = {\n          value: null,\n          matchMode: defaultConstraint.matchMode\n        };\n      } else {\n        filters[field].value = null;\n        filters[field].matchMode = defaultConstraint.matchMode;\n      }\n\n      filterClearCallback && filterClearCallback();\n      this.props.onFilterChange(filters);\n      this.props.onFilterApply();\n      this.hide();\n    }\n  }, {\n    key: \"applyFilter\",\n    value: function applyFilter() {\n      var filterApplyClickCallback = this.getColumnProp('onFilterApplyClick');\n      filterApplyClickCallback && filterApplyClickCallback({\n        field: this.field,\n        constraints: this.filterModel\n      });\n      this.props.onFilterApply();\n      this.hide();\n    }\n  }, {\n    key: \"toggleMenu\",\n    value: function toggleMenu() {\n      this.setState(function (prevState) {\n        return {\n          overlayVisible: !prevState.overlayVisible\n        };\n      });\n    }\n  }, {\n    key: \"onToggleButtonKeyDown\",\n    value: function onToggleButtonKeyDown(event) {\n      switch (event.key) {\n        case 'Escape':\n        case 'Tab':\n          this.hide();\n          break;\n\n        case 'ArrowDown':\n          if (this.state.overlayVisible) {\n            var focusable = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getFirstFocusableElement(this.overlay);\n            focusable && focusable.focus();\n            event.preventDefault();\n          } else if (event.altKey) {\n            this.setState({\n              overlayVisible: true\n            });\n            event.preventDefault();\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: \"onContentKeyDown\",\n    value: function onContentKeyDown(event) {\n      if (event.key === 'Escape') {\n        this.hide();\n        this.icon && this.icon.focus();\n      }\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(event, index) {\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      var value = event.target.value;\n\n      if (this.props.display === 'menu') {\n        filters[this.field].constraints[index].value = value;\n      } else {\n        filters[this.field].value = value;\n      }\n\n      this.props.onFilterChange(filters);\n\n      if (!this.getColumnProp('showApplyButton') || this.props.display === 'row') {\n        this.props.onFilterApply();\n      }\n    }\n  }, {\n    key: \"onRowMatchModeChange\",\n    value: function onRowMatchModeChange(matchMode) {\n      var filterMatchModeChangeCallback = this.getColumnProp('onFilterMatchModeChange');\n\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      filters[this.field].matchMode = matchMode;\n      filterMatchModeChangeCallback && filterMatchModeChangeCallback({\n        field: this.field,\n        matchMode: matchMode\n      });\n      this.props.onFilterChange(filters);\n      this.props.onFilterApply();\n      this.hide();\n    }\n  }, {\n    key: \"onRowMatchModeKeyDown\",\n    value: function onRowMatchModeKeyDown(event, matchMode, clear) {\n      var item = event.target;\n\n      switch (event.key) {\n        case 'ArrowDown':\n          var nextItem = this.findNextItem(item);\n\n          if (nextItem) {\n            item.removeAttribute('tabindex');\n            nextItem.tabIndex = 0;\n            nextItem.focus();\n          }\n\n          event.preventDefault();\n          break;\n\n        case 'ArrowUp':\n          var prevItem = this.findPrevItem(item);\n\n          if (prevItem) {\n            item.removeAttribute('tabindex');\n            prevItem.tabIndex = 0;\n            prevItem.focus();\n          }\n\n          event.preventDefault();\n          break;\n\n        case 'Enter':\n          clear ? this.clearFilter() : this.onRowMatchModeChange(matchMode.value);\n          event.preventDefault();\n          break;\n      }\n    }\n  }, {\n    key: \"onOperatorChange\",\n    value: function onOperatorChange(e) {\n      var filterOperationChangeCallback = this.getColumnProp('onFilterOperatorChange');\n      var value = e.value;\n\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      filters[this.field].operator = value;\n      this.props.onFilterChange(filters);\n      filterOperationChangeCallback && filterOperationChangeCallback({\n        field: this.field,\n        operator: value\n      });\n\n      if (!this.getColumnProp('showApplyButton')) {\n        this.props.onFilterApply();\n      }\n    }\n  }, {\n    key: \"onMenuMatchModeChange\",\n    value: function onMenuMatchModeChange(value, index) {\n      var filterMatchModeChangeCallback = this.getColumnProp('onFilterMatchModeChange');\n\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      filters[this.field].constraints[index].matchMode = value;\n      this.props.onFilterChange(filters);\n      filterMatchModeChangeCallback && filterMatchModeChangeCallback({\n        field: this.field,\n        matchMode: value,\n        index: index\n      });\n\n      if (!this.getColumnProp('showApplyButton')) {\n        this.props.onFilterApply();\n      }\n    }\n  }, {\n    key: \"addConstraint\",\n    value: function addConstraint() {\n      var filterConstraintAddCallback = this.getColumnProp('onFilterConstraintAdd');\n      var defaultConstraint = this.getDefaultConstraint();\n\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      var newConstraint = {\n        value: null,\n        matchMode: defaultConstraint.matchMode\n      };\n      filters[this.field].constraints.push(newConstraint);\n      filterConstraintAddCallback && filterConstraintAddCallback({\n        field: this.field,\n        constraint: newConstraint\n      });\n      this.props.onFilterChange(filters);\n\n      if (!this.getColumnProp('showApplyButton')) {\n        this.props.onFilterApply();\n      }\n    }\n  }, {\n    key: \"removeConstraint\",\n    value: function removeConstraint(index) {\n      var filterConstraintRemoveCallback = this.getColumnProp('onFilterConstraintRemove');\n\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      var removedConstraint = filters[this.field].constraints.splice(index, 1);\n      filterConstraintRemoveCallback && filterConstraintRemoveCallback({\n        field: this.field,\n        constraint: removedConstraint\n      });\n      this.props.onFilterChange(filters);\n\n      if (!this.getColumnProp('showApplyButton')) {\n        this.props.onFilterApply();\n      }\n    }\n  }, {\n    key: \"findNextItem\",\n    value: function findNextItem(item) {\n      var nextItem = item.nextElementSibling;\n      if (nextItem) return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(nextItem, 'p-column-filter-separator') ? this.findNextItem(nextItem) : nextItem;else return item.parentElement.firstElementChild;\n    }\n  }, {\n    key: \"findPrevItem\",\n    value: function findPrevItem(item) {\n      var prevItem = item.previousElementSibling;\n      if (prevItem) return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(prevItem, 'p-column-filter-separator') ? this.findPrevItem(prevItem) : prevItem;else return item.parentElement.lastElementChild;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.setState({\n        overlayVisible: false\n      });\n    }\n  }, {\n    key: \"onContentClick\",\n    value: function onContentClick(event) {\n      this.selfClick = true;\n      primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__.OverlayService.emit('overlay-click', {\n        originalEvent: event,\n        target: this.overlay\n      });\n    }\n  }, {\n    key: \"onContentMouseDown\",\n    value: function onContentMouseDown() {\n      this.selfClick = true;\n    }\n  }, {\n    key: \"onOverlayEnter\",\n    value: function onOverlayEnter() {\n      var _this2 = this;\n\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ZIndexUtils.set('overlay', this.overlay, primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].autoZIndex, primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].zIndex.overlay);\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.alignOverlay(this.overlay, this.icon, primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].appendTo, false);\n      this.bindOutsideClickListener();\n      this.bindScrollListener();\n      this.bindResizeListener();\n\n      this.overlayEventListener = function (e) {\n        if (!_this2.isOutsideClicked(e.target)) {\n          _this2.selfClick = true;\n        }\n      };\n\n      primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__.OverlayService.on('overlay-click', this.overlayEventListener);\n    }\n  }, {\n    key: \"onOverlayExit\",\n    value: function onOverlayExit() {\n      this.onOverlayHide();\n    }\n  }, {\n    key: \"onOverlayExited\",\n    value: function onOverlayExited() {\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ZIndexUtils.clear(this.overlay);\n    }\n  }, {\n    key: \"onOverlayHide\",\n    value: function onOverlayHide() {\n      this.unbindOutsideClickListener();\n      this.unbindResizeListener();\n      this.unbindScrollListener();\n      primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__.OverlayService.off('overlay-click', this.overlayEventListener);\n      this.overlayEventListener = null;\n    }\n  }, {\n    key: \"bindOutsideClickListener\",\n    value: function bindOutsideClickListener() {\n      var _this3 = this;\n\n      if (!this.outsideClickListener) {\n        this.outsideClickListener = function (event) {\n          if (!_this3.selfClick && _this3.isOutsideClicked(event.target)) {\n            _this3.hide();\n          }\n\n          _this3.selfClick = false;\n        };\n\n        document.addEventListener('click', this.outsideClickListener);\n      }\n    }\n  }, {\n    key: \"unbindOutsideClickListener\",\n    value: function unbindOutsideClickListener() {\n      if (this.outsideClickListener) {\n        document.removeEventListener('click', this.outsideClickListener);\n        this.outsideClickListener = null;\n        this.selfClick = false;\n      }\n    }\n  }, {\n    key: \"bindScrollListener\",\n    value: function bindScrollListener() {\n      var _this4 = this;\n\n      if (!this.scrollHandler) {\n        this.scrollHandler = new primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ConnectedOverlayScrollHandler(this.icon, function () {\n          if (_this4.state.overlayVisible) {\n            _this4.hide();\n          }\n        });\n      }\n\n      this.scrollHandler.bindScrollListener();\n    }\n  }, {\n    key: \"unbindScrollListener\",\n    value: function unbindScrollListener() {\n      if (this.scrollHandler) {\n        this.scrollHandler.unbindScrollListener();\n      }\n    }\n  }, {\n    key: \"bindResizeListener\",\n    value: function bindResizeListener() {\n      var _this5 = this;\n\n      if (!this.resizeListener) {\n        this.resizeListener = function () {\n          if (_this5.state.overlayVisible && !primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.isTouchDevice()) {\n            _this5.hide();\n          }\n        };\n\n        window.addEventListener('resize', this.resizeListener);\n      }\n    }\n  }, {\n    key: \"unbindResizeListener\",\n    value: function unbindResizeListener() {\n      if (this.resizeListener) {\n        window.removeEventListener('resize', this.resizeListener);\n        this.resizeListener = null;\n      }\n    }\n  }, {\n    key: \"fieldConstraints\",\n    value: function fieldConstraints() {\n      return this.filterModel ? this.filterModel.constraints || [this.filterModel] : [];\n    }\n  }, {\n    key: \"operator\",\n    value: function operator() {\n      return this.filterModel.operator;\n    }\n  }, {\n    key: \"operatorOptions\",\n    value: function operatorOptions() {\n      return [{\n        label: (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('matchAll'),\n        value: primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterOperator.AND\n      }, {\n        label: (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('matchAny'),\n        value: primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterOperator.OR\n      }];\n    }\n  }, {\n    key: \"noFilterLabel\",\n    value: function noFilterLabel() {\n      return (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('noFilter');\n    }\n  }, {\n    key: \"removeRuleButtonLabel\",\n    value: function removeRuleButtonLabel() {\n      return (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('removeRule');\n    }\n  }, {\n    key: \"addRuleButtonLabel\",\n    value: function addRuleButtonLabel() {\n      return (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('addRule');\n    }\n  }, {\n    key: \"clearButtonLabel\",\n    value: function clearButtonLabel() {\n      return (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('clear');\n    }\n  }, {\n    key: \"applyButtonLabel\",\n    value: function applyButtonLabel() {\n      return (0,primereact_api__WEBPACK_IMPORTED_MODULE_3__.localeOption)('apply');\n    }\n  }, {\n    key: \"filterCallback\",\n    value: function filterCallback(value) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var filters = _objectSpread$3({}, this.props.filters);\n\n      var meta = filters[this.field];\n      this.props.display === 'menu' && meta && meta.operator ? filters[this.field].constraints[index].value = value : filters[this.field].value = value;\n      this.props.onFilterChange(filters);\n    }\n  }, {\n    key: \"filterApplyCallback\",\n    value: function filterApplyCallback() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      args && this.filterCallback(args[0], args[1]);\n      this.props.onFilterApply();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.display === 'menu' && this.state.overlayVisible) {\n        primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.alignOverlay(this.overlay, this.icon, primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].appendTo, false);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.overlayEventListener) {\n        primereact_overlayservice__WEBPACK_IMPORTED_MODULE_4__.OverlayService.off('overlay-click', this.overlayEventListener);\n        this.overlayEventListener = null;\n      }\n\n      if (this.overlay) {\n        primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ZIndexUtils.clear(this.overlay);\n        this.onOverlayHide();\n      }\n    }\n  }, {\n    key: \"renderFilterElement\",\n    value: function renderFilterElement(model, index) {\n      var _this6 = this;\n\n      var value = model ? model.value : null;\n      return this.getColumnProp('filterElement') ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getColumnProp('filterElement'), {\n        field: this.field,\n        index: index,\n        filterModel: model,\n        value: value,\n        filterApplyCallback: this.filterApplyCallback,\n        filterCallback: this.filterCallback\n      }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_inputtext__WEBPACK_IMPORTED_MODULE_8__.InputText, {\n        type: this.getColumnProp('filterType'),\n        value: value || '',\n        onChange: function onChange(e) {\n          return _this6.onInputChange(e, index);\n        },\n        className: \"p-column-filter\",\n        placeholder: this.getColumnProp('filterPlaceholder'),\n        maxLength: this.getColumnProp('filterMaxLength')\n      });\n    }\n  }, {\n    key: \"renderRowFilterElement\",\n    value: function renderRowFilterElement() {\n      if (this.props.display === 'row') {\n        var content = this.renderFilterElement(this.filterModel, 0);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-fluid p-column-filter-element\"\n        }, content);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderMenuFilterElement\",\n    value: function renderMenuFilterElement(fieldConstraint, index) {\n      if (this.props.display === 'menu') {\n        return this.renderFilterElement(fieldConstraint, index);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderMenuButton\",\n    value: function renderMenuButton() {\n      var _this7 = this;\n\n      if (this.showMenuButton()) {\n        var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-column-filter-menu-button p-link', {\n          'p-column-filter-menu-button-open': this.state.overlayVisible,\n          'p-column-filter-menu-button-active': this.hasFilter()\n        });\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n          ref: function ref(el) {\n            return _this7.icon = el;\n          },\n          type: \"button\",\n          className: className,\n          \"aria-haspopup\": true,\n          \"aria-expanded\": this.state.overlayVisible,\n          onClick: this.toggleMenu,\n          onKeyDown: this.onToggleButtonKeyDown\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          className: \"pi pi-filter-icon pi-filter\"\n        }));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderClearButton\",\n    value: function renderClearButton() {\n      if (this.getColumnProp('showClearButton') && this.props.display === 'row') {\n        var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-column-filter-clear-button p-link', {\n          'p-hidden-space': !this.hasRowFilter()\n        });\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n          className: className,\n          type: \"button\",\n          onClick: this.clearFilter\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          className: \"pi pi-filter-slash\"\n        }));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderRowItems\",\n    value: function renderRowItems() {\n      var _this8 = this;\n\n      if (this.isShowMatchModes()) {\n        var matchModes = this.matchModes();\n        var noFilterLabel = this.noFilterLabel();\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"ul\", {\n          className: \"p-column-filter-row-items\"\n        }, matchModes.map(function (matchMode, i) {\n          var value = matchMode.value,\n              label = matchMode.label;\n          var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-column-filter-row-item', {\n            'p-highlight': _this8.isRowMatchModeSelected(value)\n          });\n          var tabIndex = i === 0 ? 0 : null;\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", {\n            className: className,\n            key: label,\n            onClick: function onClick() {\n              return _this8.onRowMatchModeChange(value);\n            },\n            onKeyDown: function onKeyDown(e) {\n              return _this8.onRowMatchModeKeyDown(e, matchMode);\n            },\n            tabIndex: tabIndex\n          }, label);\n        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", {\n          className: \"p-column-filter-separator\"\n        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", {\n          className: \"p-column-filter-row-item\",\n          onClick: this.clearFilter,\n          onKeyDown: function onKeyDown(e) {\n            return _this8.onRowMatchModeKeyDown(e, null, true);\n          }\n        }, noFilterLabel));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderOperator\",\n    value: function renderOperator() {\n      if (this.isShowOperator()) {\n        var options = this.operatorOptions();\n        var value = this.operator();\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-column-filter-operator\"\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_dropdown__WEBPACK_IMPORTED_MODULE_9__.Dropdown, {\n          options: options,\n          value: value,\n          onChange: this.onOperatorChange,\n          className: \"p-column-filter-operator-dropdown\"\n        }));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderMatchModeDropdown\",\n    value: function renderMatchModeDropdown(constraint, index) {\n      var _this9 = this;\n\n      if (this.isShowMatchModes()) {\n        var options = this.matchModes();\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_dropdown__WEBPACK_IMPORTED_MODULE_9__.Dropdown, {\n          options: options,\n          value: constraint.matchMode,\n          onChange: function onChange(e) {\n            return _this9.onMenuMatchModeChange(e.value, index);\n          },\n          className: \"p-column-filter-matchmode-dropdown\"\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderRemoveButton\",\n    value: function renderRemoveButton(index) {\n      var _this10 = this;\n\n      if (this.showRemoveIcon()) {\n        var removeRuleLabel = this.removeRuleButtonLabel();\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_button__WEBPACK_IMPORTED_MODULE_10__.Button, {\n          type: \"button\",\n          icon: \"pi pi-trash\",\n          className: \"p-column-filter-remove-button p-button-text p-button-danger p-button-sm\",\n          onClick: function onClick() {\n            return _this10.removeConstraint(index);\n          },\n          label: removeRuleLabel\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderConstraints\",\n    value: function renderConstraints() {\n      var _this11 = this;\n\n      var fieldConstraints = this.fieldConstraints();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: \"p-column-filter-constraints\"\n      }, fieldConstraints.map(function (fieldConstraint, i) {\n        var matchModeDropdown = _this11.renderMatchModeDropdown(fieldConstraint, i);\n\n        var menuFilterElement = _this11.renderMenuFilterElement(fieldConstraint, i);\n\n        var removeButton = _this11.renderRemoveButton(i);\n\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          key: i,\n          className: \"p-column-filter-constraint\"\n        }, matchModeDropdown, menuFilterElement, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, removeButton));\n      }));\n    }\n  }, {\n    key: \"renderAddRule\",\n    value: function renderAddRule() {\n      if (this.isShowAddConstraint()) {\n        var addRuleLabel = this.addRuleButtonLabel();\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-column-filter-add-rule\"\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_button__WEBPACK_IMPORTED_MODULE_10__.Button, {\n          type: \"button\",\n          label: addRuleLabel,\n          icon: \"pi pi-plus\",\n          className: \"p-column-filter-add-button p-button-text p-button-sm\",\n          onClick: this.addConstraint\n        }));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderFilterClearButton\",\n    value: function renderFilterClearButton() {\n      if (this.getColumnProp('showClearButton')) {\n        if (!this.getColumnProp('filterClear')) {\n          var clearLabel = this.clearButtonLabel();\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_button__WEBPACK_IMPORTED_MODULE_10__.Button, {\n            type: \"button\",\n            className: \"p-button-outlined p-button-sm\",\n            onClick: this.clearFilter,\n            label: clearLabel\n          });\n        }\n\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getColumnProp('filterClear'), {\n          field: this.field,\n          filterModel: this.filterModel,\n          filterClearCallback: this.clearFilter\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderFilterApplyButton\",\n    value: function renderFilterApplyButton() {\n      if (this.getColumnProp('showApplyButton')) {\n        if (!this.getColumnProp('filterApply')) {\n          var applyLabel = this.applyButtonLabel();\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_button__WEBPACK_IMPORTED_MODULE_10__.Button, {\n            type: \"button\",\n            className: \"p-button-sm\",\n            onClick: this.applyFilter,\n            label: applyLabel\n          });\n        }\n\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getColumnProp('filterApply'), {\n          field: this.field,\n          filterModel: this.filterModel,\n          filterApplyCallback: this.applyFilter\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderButtonBar\",\n    value: function renderButtonBar() {\n      var clearButton = this.renderFilterClearButton();\n      var applyButton = this.renderFilterApplyButton();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: \"p-column-filter-buttonbar\"\n      }, clearButton, applyButton);\n    }\n  }, {\n    key: \"renderItems\",\n    value: function renderItems() {\n      var operator = this.renderOperator();\n      var constraints = this.renderConstraints();\n      var addRule = this.renderAddRule();\n      var buttonBar = this.renderButtonBar();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, operator, constraints, addRule, buttonBar);\n    }\n  }, {\n    key: \"renderOverlay\",\n    value: function renderOverlay() {\n      var style = this.getColumnProp('filterMenuStyle');\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-column-filter-overlay p-component p-fluid', this.getColumnProp('filterMenuClassName'), {\n        'p-column-filter-overlay-menu': this.props.display === 'menu',\n        'p-input-filled': primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inputStyle === 'filled',\n        'p-ripple-disabled': primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ripple === false\n      });\n      var filterHeader = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getColumnProp('filterHeader'), {\n        field: this.field,\n        filterModel: this.filterModel,\n        filterApplyCallback: this.filterApplyCallback\n      });\n      var filterFooter = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getColumnProp('filterFooter'), {\n        field: this.field,\n        filterModel: this.filterModel,\n        filterApplyCallback: this.filterApplyCallback\n      });\n      var items = this.props.display === 'row' ? this.renderRowItems() : this.renderItems();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_portal__WEBPACK_IMPORTED_MODULE_7__.Portal, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_csstransition__WEBPACK_IMPORTED_MODULE_6__.CSSTransition, {\n        nodeRef: this.overlayRef,\n        classNames: \"p-connected-overlay\",\n        \"in\": this.state.overlayVisible,\n        timeout: {\n          enter: 120,\n          exit: 100\n        },\n        unmountOnExit: true,\n        onEnter: this.onOverlayEnter,\n        onExit: this.onOverlayExit,\n        onExited: this.onOverlayExited\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        ref: this.overlayRef,\n        style: style,\n        className: className,\n        onKeyDown: this.onContentKeyDown,\n        onClick: this.onContentClick,\n        onMouseDown: this.onContentMouseDown\n      }, filterHeader, items, filterFooter)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-column-filter p-fluid', {\n        'p-column-filter-row': this.props.display === 'row',\n        'p-column-filter-menu': this.props.display === 'menu'\n      });\n      var rowFilterElement = this.renderRowFilterElement();\n      var menuButton = this.renderMenuButton();\n      var clearButton = this.renderClearButton();\n      var overlay = this.renderOverlay();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: className\n      }, rowFilterElement, menuButton, clearButton, overlay);\n    }\n  }]);\n\n  return ColumnFilter;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar HeaderCell = /*#__PURE__*/function (_Component) {\n  _inherits(HeaderCell, _Component);\n\n  var _super = _createSuper$2(HeaderCell);\n\n  function HeaderCell(props) {\n    var _this;\n\n    _classCallCheck(this, HeaderCell);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      styleObject: {}\n    };\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.onMouseDown = _this.onMouseDown.bind(_assertThisInitialized(_this));\n    _this.onKeyDown = _this.onKeyDown.bind(_assertThisInitialized(_this)); // drag\n\n    _this.onDragStart = _this.onDragStart.bind(_assertThisInitialized(_this));\n    _this.onDragOver = _this.onDragOver.bind(_assertThisInitialized(_this));\n    _this.onDragLeave = _this.onDragLeave.bind(_assertThisInitialized(_this));\n    _this.onDrop = _this.onDrop.bind(_assertThisInitialized(_this)); // resize\n\n    _this.onResizerMouseDown = _this.onResizerMouseDown.bind(_assertThisInitialized(_this));\n    _this.onResizerClick = _this.onResizerClick.bind(_assertThisInitialized(_this));\n    _this.onResizerDoubleClick = _this.onResizerDoubleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(HeaderCell, [{\n    key: \"isBadgeVisible\",\n    value: function isBadgeVisible() {\n      return this.props.multiSortMeta && this.props.multiSortMeta.length > 1;\n    }\n  }, {\n    key: \"isSortableDisabled\",\n    value: function isSortableDisabled() {\n      return !this.getColumnProp('sortable') || this.getColumnProp('sortable') && (this.props.allSortableDisabled || this.getColumnProp('sortableDisabled'));\n    }\n  }, {\n    key: \"getColumnProp\",\n    value: function getColumnProp() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.props.column ? typeof args[0] === 'string' ? this.props.column.props[args[0]] : (args[0] || this.props.column).props[args[1]] : null;\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      var headerStyle = this.getColumnProp('headerStyle');\n      var columnStyle = this.getColumnProp('style');\n      return this.getColumnProp('frozen') ? Object.assign({}, columnStyle, headerStyle, this.state.styleObject) : Object.assign({}, columnStyle, headerStyle);\n    }\n  }, {\n    key: \"getMultiSortMetaIndex\",\n    value: function getMultiSortMetaIndex() {\n      var _this2 = this;\n\n      return this.props.multiSortMeta.findIndex(function (meta) {\n        return meta.field === _this2.getColumnProp('field') || meta.field === _this2.getColumnProp('sortField');\n      });\n    }\n  }, {\n    key: \"getSortMeta\",\n    value: function getSortMeta() {\n      var sorted = false;\n      var sortOrder = 0;\n      var metaIndex = -1;\n\n      if (this.props.sortMode === 'single') {\n        sorted = this.props.sortField && (this.props.sortField === this.getColumnProp('field') || this.props.sortField === this.getColumnProp('sortField'));\n        sortOrder = sorted ? this.props.sortOrder : 0;\n      } else if (this.props.sortMode === 'multiple') {\n        metaIndex = this.getMultiSortMetaIndex();\n\n        if (metaIndex > -1) {\n          sorted = true;\n          sortOrder = this.props.multiSortMeta[metaIndex].order;\n        }\n      }\n\n      return {\n        sorted: sorted,\n        sortOrder: sortOrder,\n        metaIndex: metaIndex\n      };\n    }\n  }, {\n    key: \"getAriaSort\",\n    value: function getAriaSort(_ref) {\n      var sorted = _ref.sorted,\n          sortOrder = _ref.sortOrder;\n\n      if (this.getColumnProp('sortable')) {\n        var sortIcon = sorted ? sortOrder < 0 ? 'pi-sort-amount-down' : 'pi-sort-amount-up-alt' : 'pi-sort-alt';\n        if (sortIcon === 'pi-sort-amount-down') return 'descending';else if (sortIcon === 'pi-sort-amount-up-alt') return 'ascending';else return 'none';\n      }\n\n      return null;\n    }\n  }, {\n    key: \"updateStickyPosition\",\n    value: function updateStickyPosition() {\n      if (this.getColumnProp('frozen')) {\n        var styleObject = _objectSpread$2({}, this.state.styleObject);\n\n        var align = this.getColumnProp('alignFrozen');\n\n        if (align === 'right') {\n          var right = 0;\n          var next = this.el.nextElementSibling;\n\n          if (next) {\n            right = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(next) + parseFloat(next.style.right || 0);\n          }\n\n          styleObject['right'] = right + 'px';\n        } else {\n          var left = 0;\n          var prev = this.el.previousElementSibling;\n\n          if (prev) {\n            left = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(prev) + parseFloat(prev.style.left || 0);\n          }\n\n          styleObject['left'] = left + 'px';\n        }\n\n        var filterRow = this.el.parentElement.nextElementSibling;\n\n        if (filterRow) {\n          var index = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.index(this.el);\n          filterRow.children[index].style.left = styleObject['left'];\n          filterRow.children[index].style.right = styleObject['right'];\n        }\n\n        var isSameStyle = this.state.styleObject['left'] === styleObject['left'] && this.state.styleObject['right'] === styleObject['right'];\n        !isSameStyle && this.setState({\n          styleObject: styleObject\n        });\n      }\n    }\n  }, {\n    key: \"updateSortableDisabled\",\n    value: function updateSortableDisabled(prevColumn) {\n      if (this.getColumnProp(prevColumn, 'sortableDisabled') !== this.getColumnProp('sortableDisabled') || this.getColumnProp(prevColumn, 'sortable') !== this.getColumnProp('sortable')) {\n        this.props.onSortableChange();\n      }\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(event) {\n      if (!this.isSortableDisabled()) {\n        var targetNode = event.target;\n\n        if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(targetNode, 'p-sortable-column') || primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(targetNode, 'p-column-title') || primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(targetNode, 'p-column-header-content') || primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(targetNode, 'p-sortable-column-icon') || primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(targetNode.parentElement, 'p-sortable-column-icon')) {\n          primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.clearSelection();\n          this.props.onSortChange({\n            originalEvent: event,\n            column: this.props.column,\n            sortableDisabledFields: this.props.sortableDisabledFields\n          });\n        }\n      }\n    }\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown(event) {\n      this.props.onColumnMouseDown({\n        originalEvent: event,\n        column: this.props.column\n      });\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (event.key === 'Enter' && event.currentTarget === this.el && primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(event.currentTarget, 'p-sortable-column')) {\n        this.onClick(event);\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function onDragStart(event) {\n      this.props.onColumnDragStart({\n        originalEvent: event,\n        column: this.props.column\n      });\n    }\n  }, {\n    key: \"onDragOver\",\n    value: function onDragOver(event) {\n      this.props.onColumnDragOver({\n        originalEvent: event,\n        column: this.props.column\n      });\n    }\n  }, {\n    key: \"onDragLeave\",\n    value: function onDragLeave(event) {\n      this.props.onColumnDragLeave({\n        originalEvent: event,\n        column: this.props.column\n      });\n    }\n  }, {\n    key: \"onDrop\",\n    value: function onDrop(event) {\n      this.props.onColumnDrop({\n        originalEvent: event,\n        column: this.props.column\n      });\n    }\n  }, {\n    key: \"onResizerMouseDown\",\n    value: function onResizerMouseDown(event) {\n      this.props.onColumnResizeStart({\n        originalEvent: event,\n        column: this.props.column\n      });\n    }\n  }, {\n    key: \"onResizerClick\",\n    value: function onResizerClick(event) {\n      if (this.props.onColumnResizerClick) {\n        this.props.onColumnResizerClick({\n          originalEvent: event,\n          element: event.currentTarget.parentElement,\n          column: this.props.column\n        });\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"onResizerDoubleClick\",\n    value: function onResizerDoubleClick(event) {\n      if (this.props.onColumnResizerDoubleClick) {\n        this.props.onColumnResizerDoubleClick({\n          originalEvent: event,\n          element: event.currentTarget.parentElement,\n          column: this.props.column\n        });\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.getColumnProp('frozen')) {\n        this.updateStickyPosition();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.getColumnProp('frozen')) {\n        this.updateStickyPosition();\n      }\n\n      this.updateSortableDisabled(prevProps.column);\n    }\n  }, {\n    key: \"renderResizer\",\n    value: function renderResizer() {\n      if (this.props.resizableColumns && !this.getColumnProp('frozen')) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          className: \"p-column-resizer\",\n          onMouseDown: this.onResizerMouseDown,\n          onClick: this.onResizerClick,\n          onDoubleClick: this.onResizerDoubleClick\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderTitle\",\n    value: function renderTitle() {\n      var title = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.getColumnProp('header'), {\n        props: this.props.tableProps\n      });\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: \"p-column-title\"\n      }, title);\n    }\n  }, {\n    key: \"renderSortIcon\",\n    value: function renderSortIcon(_ref2) {\n      var sorted = _ref2.sorted,\n          sortOrder = _ref2.sortOrder;\n\n      if (this.getColumnProp('sortable')) {\n        var sortIcon = sorted ? sortOrder < 0 ? 'pi-sort-amount-down' : 'pi-sort-amount-up-alt' : 'pi-sort-alt';\n        var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-sortable-column-icon pi pi-fw', sortIcon);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          className: className\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderBadge\",\n    value: function renderBadge(_ref3) {\n      var metaIndex = _ref3.metaIndex;\n\n      if (metaIndex !== -1 && this.isBadgeVisible()) {\n        var value = this.props.groupRowsBy && this.props.groupRowsBy === this.props.groupRowSortField ? metaIndex : metaIndex + 1;\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          className: \"p-sortable-column-badge\"\n        }, value);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderCheckbox\",\n    value: function renderCheckbox() {\n      if (this.props.showSelectAll && this.getColumnProp('selectionMode') === 'multiple' && this.props.filterDisplay !== 'row') {\n        var allRowsSelected = this.props.allRowsSelected(this.props.value);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HeaderCheckbox, {\n          checked: allRowsSelected,\n          onChange: this.props.onColumnCheckboxChange,\n          disabled: this.props.empty\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderFilter\",\n    value: function renderFilter() {\n      if (this.props.filterDisplay === 'menu' && this.getColumnProp('filter')) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ColumnFilter, {\n          display: \"menu\",\n          column: this.props.column,\n          filters: this.props.filters,\n          onFilterChange: this.props.onFilterChange,\n          onFilterApply: this.props.onFilterApply,\n          filtersStore: this.props.filtersStore\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader(sortMeta) {\n      var title = this.renderTitle();\n      var sortIcon = this.renderSortIcon(sortMeta);\n      var badge = this.renderBadge(sortMeta);\n      var checkbox = this.renderCheckbox();\n      var filter = this.renderFilter();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: \"p-column-header-content\"\n      }, title, sortIcon, badge, checkbox, filter);\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement() {\n      var _this3 = this;\n\n      var isSortableDisabled = this.isSortableDisabled();\n      var sortMeta = this.getSortMeta();\n      var style = this.getStyle();\n      var align = this.getColumnProp('alignHeader') || this.getColumnProp('align');\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)(this.getColumnProp('headerClassName'), this.getColumnProp('className'), _defineProperty({\n        'p-sortable-column': this.getColumnProp('sortable'),\n        'p-resizable-column': this.props.resizableColumns,\n        'p-highlight': sortMeta.sorted,\n        'p-frozen-column': this.getColumnProp('frozen'),\n        'p-selection-column': this.getColumnProp('selectionMode'),\n        'p-sortable-disabled': this.getColumnProp('sortable') && isSortableDisabled,\n        'p-reorderable-column': this.props.reorderableColumns && this.getColumnProp('reorderable')\n      }, \"p-align-\".concat(align), !!align));\n      var tabIndex = this.getColumnProp('sortable') && !isSortableDisabled ? this.props.tabIndex : null;\n      var colSpan = this.getColumnProp('colSpan');\n      var rowSpan = this.getColumnProp('rowSpan');\n      var ariaSort = this.getAriaSort(sortMeta);\n      var resizer = this.renderResizer();\n      var header = this.renderHeader(sortMeta);\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"th\", {\n        ref: function ref(el) {\n          return _this3.el = el;\n        },\n        style: style,\n        className: className,\n        tabIndex: tabIndex,\n        role: \"columnheader\",\n        onClick: this.onClick,\n        onKeyDown: this.onKeyDown,\n        onMouseDown: this.onMouseDown,\n        onDragStart: this.onDragStart,\n        onDragOver: this.onDragOver,\n        onDragLeave: this.onDragLeave,\n        onDrop: this.onDrop,\n        colSpan: colSpan,\n        rowSpan: rowSpan,\n        \"aria-sort\": ariaSort\n      }, resizer, header);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.renderElement();\n    }\n  }]);\n\n  return HeaderCell;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar TableHeader = /*#__PURE__*/function (_Component) {\n  _inherits(TableHeader, _Component);\n\n  var _super = _createSuper$1(TableHeader);\n\n  function TableHeader(props) {\n    var _this;\n\n    _classCallCheck(this, TableHeader);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      sortableDisabledFields: [],\n      allSortableDisabled: false,\n      styleObject: {}\n    };\n    _this.onSortableChange = _this.onSortableChange.bind(_assertThisInitialized(_this));\n    _this.onCheckboxChange = _this.onCheckboxChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TableHeader, [{\n    key: \"isSingleSort\",\n    value: function isSingleSort() {\n      return this.props.sortMode === 'single';\n    }\n  }, {\n    key: \"isMultipleSort\",\n    value: function isMultipleSort() {\n      return this.props.sortMode === 'multiple';\n    }\n  }, {\n    key: \"isAllSortableDisabled\",\n    value: function isAllSortableDisabled() {\n      return this.isSingleSort() && this.state.allSortableDisabled;\n    }\n  }, {\n    key: \"isColumnSorted\",\n    value: function isColumnSorted(column) {\n      return this.props.sortField !== null ? column.props.field === this.props.sortField || column.props.sortField === this.props.sortField : false;\n    }\n  }, {\n    key: \"updateSortableDisabled\",\n    value: function updateSortableDisabled() {\n      var _this2 = this;\n\n      if (this.isSingleSort() || this.isMultipleSort() && this.props.onSortChange) {\n        var sortableDisabledFields = [];\n        var allSortableDisabled = false;\n        this.props.columns.forEach(function (column) {\n          if (column.props.sortableDisabled) {\n            sortableDisabledFields.push(column.props.sortField || column.props.field);\n\n            if (!allSortableDisabled && _this2.isColumnSorted(column)) {\n              allSortableDisabled = true;\n            }\n          }\n        });\n        this.setState({\n          sortableDisabledFields: sortableDisabledFields,\n          allSortableDisabled: allSortableDisabled\n        });\n      }\n    }\n  }, {\n    key: \"onSortableChange\",\n    value: function onSortableChange() {\n      this.updateSortableDisabled();\n    }\n  }, {\n    key: \"onCheckboxChange\",\n    value: function onCheckboxChange(e) {\n      this.props.onColumnCheckboxChange(e, this.props.value);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateSortableDisabled();\n    }\n  }, {\n    key: \"renderGroupHeaderCells\",\n    value: function renderGroupHeaderCells(row) {\n      var columns = react__WEBPACK_IMPORTED_MODULE_0___default().Children.toArray(row.props.children);\n      return this.renderHeaderCells(columns);\n    }\n  }, {\n    key: \"renderHeaderCells\",\n    value: function renderHeaderCells(columns) {\n      var _this3 = this;\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default().Children.map(columns, function (col, i) {\n        var isVisible = col ? !col.props.hidden : true;\n        var key = col ? col.props.columnKey || col.props.field || i : i;\n        return isVisible && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HeaderCell, {\n          key: key,\n          value: _this3.props.value,\n          tableProps: _this3.props.tableProps,\n          column: col,\n          tabIndex: _this3.props.tabIndex,\n          empty: _this3.props.empty,\n          resizableColumns: _this3.props.resizableColumns,\n          groupRowsBy: _this3.props.groupRowsBy,\n          groupRowSortField: _this3.props.groupRowSortField,\n          sortMode: _this3.props.sortMode,\n          sortField: _this3.props.sortField,\n          sortOrder: _this3.props.sortOrder,\n          multiSortMeta: _this3.props.multiSortMeta,\n          allSortableDisabled: _this3.isAllSortableDisabled(),\n          onSortableChange: _this3.onSortableChange,\n          sortableDisabledFields: _this3.state.sortableDisabledFields,\n          filterDisplay: _this3.props.filterDisplay,\n          filters: _this3.props.filters,\n          filtersStore: _this3.props.filtersStore,\n          onFilterChange: _this3.props.onFilterChange,\n          onFilterApply: _this3.props.onFilterApply,\n          onColumnMouseDown: _this3.props.onColumnMouseDown,\n          onColumnDragStart: _this3.props.onColumnDragStart,\n          onColumnDragOver: _this3.props.onColumnDragOver,\n          onColumnDragLeave: _this3.props.onColumnDragLeave,\n          onColumnDrop: _this3.props.onColumnDrop,\n          onColumnResizeStart: _this3.props.onColumnResizeStart,\n          onColumnResizerClick: _this3.props.onColumnResizerClick,\n          onColumnResizerDoubleClick: _this3.props.onColumnResizerDoubleClick,\n          showSelectAll: _this3.props.showSelectAll,\n          allRowsSelected: _this3.props.allRowsSelected,\n          onColumnCheckboxChange: _this3.onCheckboxChange,\n          reorderableColumns: _this3.props.reorderableColumns,\n          onSortChange: _this3.props.onSortChange\n        });\n      });\n    }\n  }, {\n    key: \"renderCheckbox\",\n    value: function renderCheckbox(selectionMode) {\n      if (this.props.showSelectAll && selectionMode === 'multiple') {\n        var allRowsSelected = this.props.allRowsSelected(this.props.value);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HeaderCheckbox, {\n          checked: allRowsSelected,\n          onChange: this.onCheckboxChange,\n          disabled: this.props.empty\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderFilter\",\n    value: function renderFilter(column, filter) {\n      if (filter) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ColumnFilter, {\n          display: \"row\",\n          column: column,\n          filters: this.props.filters,\n          filtersStore: this.props.filtersStore,\n          onFilterChange: this.props.onFilterChange,\n          onFilterApply: this.props.onFilterApply\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderFilterCells\",\n    value: function renderFilterCells() {\n      var _this4 = this;\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default().Children.map(this.props.columns, function (col, i) {\n        var isVisible = !col.props.hidden;\n\n        if (isVisible) {\n          var _col$props = col.props,\n              filterHeaderStyle = _col$props.filterHeaderStyle,\n              style = _col$props.style,\n              filterHeaderClassName = _col$props.filterHeaderClassName,\n              className = _col$props.className,\n              frozen = _col$props.frozen,\n              columnKey = _col$props.columnKey,\n              field = _col$props.field,\n              selectionMode = _col$props.selectionMode,\n              filter = _col$props.filter;\n\n          var colStyle = _objectSpread$1(_objectSpread$1({}, filterHeaderStyle || {}), style || {});\n\n          var colClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-filter-column', filterHeaderClassName, className, {\n            'p-frozen-column': frozen\n          });\n          var colKey = columnKey || field || i;\n\n          var checkbox = _this4.renderCheckbox(selectionMode);\n\n          var filterRow = _this4.renderFilter(col, filter);\n\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"th\", {\n            key: colKey,\n            style: colStyle,\n            className: colClassName\n          }, checkbox, filterRow);\n        }\n\n        return null;\n      });\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this5 = this;\n\n      if (this.props.headerColumnGroup) {\n        var rows = react__WEBPACK_IMPORTED_MODULE_0___default().Children.toArray(this.props.headerColumnGroup.props.children);\n        return rows.map(function (row, i) {\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n            key: i,\n            role: \"row\"\n          }, _this5.renderGroupHeaderCells(row));\n        });\n      } else {\n        var headerRow = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n          role: \"row\"\n        }, this.renderHeaderCells(this.props.columns));\n        var filterRow = this.props.filterDisplay === 'row' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", {\n          role: \"row\"\n        }, this.renderFilterCells());\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, headerRow, filterRow);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var content = this.renderContent();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"thead\", {\n        className: \"p-datatable-thead\"\n      }, content);\n    }\n  }]);\n\n  return TableHeader;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar DataTable = /*#__PURE__*/function (_Component) {\n  _inherits(DataTable, _Component);\n\n  var _super = _createSuper(DataTable);\n\n  function DataTable(props) {\n    var _this;\n\n    _classCallCheck(this, DataTable);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      d_rows: props.rows,\n      columnOrder: [],\n      groupRowsSortMeta: null,\n      editingMeta: {},\n      attributeSelector: null\n    };\n\n    if (!_this.props.onPage) {\n      _this.state.first = props.first;\n      _this.state.rows = props.rows;\n    }\n\n    if (!_this.props.onSort) {\n      _this.state.sortField = props.sortField;\n      _this.state.sortOrder = props.sortOrder;\n      _this.state.multiSortMeta = props.multiSortMeta;\n    }\n\n    _this.state.d_filters = _this.cloneFilters(props.filters);\n\n    if (!_this.props.onFilter) {\n      _this.state.filters = props.filters;\n    } // header\n\n\n    _this.onSortChange = _this.onSortChange.bind(_assertThisInitialized(_this));\n    _this.onFilterChange = _this.onFilterChange.bind(_assertThisInitialized(_this));\n    _this.onFilterApply = _this.onFilterApply.bind(_assertThisInitialized(_this));\n    _this.onColumnHeaderMouseDown = _this.onColumnHeaderMouseDown.bind(_assertThisInitialized(_this));\n    _this.onColumnHeaderDragStart = _this.onColumnHeaderDragStart.bind(_assertThisInitialized(_this));\n    _this.onColumnHeaderDragOver = _this.onColumnHeaderDragOver.bind(_assertThisInitialized(_this));\n    _this.onColumnHeaderDragLeave = _this.onColumnHeaderDragLeave.bind(_assertThisInitialized(_this));\n    _this.onColumnHeaderDrop = _this.onColumnHeaderDrop.bind(_assertThisInitialized(_this));\n    _this.onColumnResizeStart = _this.onColumnResizeStart.bind(_assertThisInitialized(_this));\n    _this.onColumnHeaderCheckboxChange = _this.onColumnHeaderCheckboxChange.bind(_assertThisInitialized(_this));\n    _this.allRowsSelected = _this.allRowsSelected.bind(_assertThisInitialized(_this)); // body\n\n    _this.onEditingMetaChange = _this.onEditingMetaChange.bind(_assertThisInitialized(_this)); //paginator\n\n    _this.onPageChange = _this.onPageChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(DataTable, [{\n    key: \"isCustomStateStorage\",\n    value: function isCustomStateStorage() {\n      return this.props.stateStorage === 'custom';\n    }\n  }, {\n    key: \"isStateful\",\n    value: function isStateful() {\n      return this.props.stateKey != null || this.isCustomStateStorage();\n    }\n  }, {\n    key: \"isVirtualScrollerDisabled\",\n    value: function isVirtualScrollerDisabled() {\n      return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isEmpty(this.props.virtualScrollerOptions) || !this.props.scrollable;\n    }\n  }, {\n    key: \"isEquals\",\n    value: function isEquals(data1, data2) {\n      return this.props.compareSelectionBy === 'equals' ? data1 === data2 : primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(data1, data2, this.props.dataKey);\n    }\n  }, {\n    key: \"hasFilter\",\n    value: function hasFilter() {\n      return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(this.getFilters()) || this.props.globalFilter;\n    }\n  }, {\n    key: \"getFirst\",\n    value: function getFirst() {\n      return this.props.onPage ? this.props.first : this.state.first;\n    }\n  }, {\n    key: \"getRows\",\n    value: function getRows() {\n      return this.props.onPage ? this.props.rows : this.state.rows;\n    }\n  }, {\n    key: \"getSortField\",\n    value: function getSortField() {\n      return this.props.onSort ? this.props.sortField : this.state.sortField;\n    }\n  }, {\n    key: \"getSortOrder\",\n    value: function getSortOrder() {\n      return this.props.onSort ? this.props.sortOrder : this.state.sortOrder;\n    }\n  }, {\n    key: \"getMultiSortMeta\",\n    value: function getMultiSortMeta() {\n      return (this.props.onSort ? this.props.multiSortMeta : this.state.multiSortMeta) || [];\n    }\n  }, {\n    key: \"getFilters\",\n    value: function getFilters() {\n      return this.props.onFilter ? this.props.filters : this.state.filters;\n    }\n  }, {\n    key: \"getColumnProp\",\n    value: function getColumnProp(col, prop) {\n      return col.props[prop];\n    }\n  }, {\n    key: \"getColumns\",\n    value: function getColumns(ignoreReorderable) {\n      var _this2 = this;\n\n      var columns = react__WEBPACK_IMPORTED_MODULE_0___default().Children.toArray(this.props.children);\n\n      if (!columns) {\n        return null;\n      }\n\n      if (!ignoreReorderable && this.props.reorderableColumns && this.state.columnOrder) {\n        var orderedColumns = this.state.columnOrder.reduce(function (arr, columnKey) {\n          var column = _this2.findColumnByKey(columns, columnKey);\n\n          column && arr.push(column);\n          return arr;\n        }, []);\n        return [].concat(_toConsumableArray(orderedColumns), _toConsumableArray(columns.filter(function (col) {\n          return orderedColumns.indexOf(col) < 0;\n        })));\n      }\n\n      return columns;\n    }\n  }, {\n    key: \"getStorage\",\n    value: function getStorage() {\n      switch (this.props.stateStorage) {\n        case 'local':\n          return window.localStorage;\n\n        case 'session':\n          return window.sessionStorage;\n\n        case 'custom':\n          return null;\n\n        default:\n          throw new Error(this.props.stateStorage + ' is not a valid value for the state storage, supported values are \"local\", \"session\" and \"custom\".');\n      }\n    }\n  }, {\n    key: \"saveState\",\n    value: function saveState() {\n      var state = {};\n\n      if (this.props.paginator) {\n        state.first = this.getFirst();\n        state.rows = this.getRows();\n      }\n\n      var sortField = this.getSortField();\n\n      if (sortField) {\n        state.sortField = sortField;\n        state.sortOrder = this.getSortOrder();\n      }\n\n      var multiSortMeta = this.getMultiSortMeta();\n\n      if (multiSortMeta) {\n        state.multiSortMeta = multiSortMeta;\n      }\n\n      if (this.hasFilter()) {\n        state.filters = this.getFilters();\n      }\n\n      if (this.props.resizableColumns) {\n        this.saveColumnWidths(state);\n      }\n\n      if (this.props.reorderableColumns) {\n        state.columnOrder = this.state.columnOrder;\n      }\n\n      if (this.props.expandedRows) {\n        state.expandedRows = this.props.expandedRows;\n      }\n\n      if (this.props.selection && this.props.onSelectionChange) {\n        state.selection = this.props.selection;\n      }\n\n      if (this.isCustomStateStorage()) {\n        if (this.props.customSaveState) {\n          this.props.customSaveState(state);\n        }\n      } else {\n        var storage = this.getStorage();\n\n        if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(state)) {\n          storage.setItem(this.props.stateKey, JSON.stringify(state));\n        }\n      }\n\n      if (this.props.onStateSave) {\n        this.props.onStateSave(state);\n      }\n    }\n  }, {\n    key: \"clearState\",\n    value: function clearState() {\n      var storage = this.getStorage();\n\n      if (storage && this.props.stateKey) {\n        storage.removeItem(this.props.stateKey);\n      }\n    }\n  }, {\n    key: \"restoreState\",\n    value: function restoreState(state) {\n      var restoredState = {};\n\n      if (this.isCustomStateStorage()) {\n        if (this.props.customRestoreState) {\n          restoredState = this.props.customRestoreState();\n        }\n      } else {\n        var storage = this.getStorage();\n        var stateString = storage.getItem(this.props.stateKey);\n        var dateFormat = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/;\n\n        var reviver = function reviver(key, value) {\n          return typeof value === \"string\" && dateFormat.test(value) ? new Date(value) : value;\n        };\n\n        if (stateString) {\n          restoredState = JSON.parse(stateString, reviver);\n        }\n      }\n\n      this._restoreState(restoredState, state);\n    }\n  }, {\n    key: \"restoreTableState\",\n    value: function restoreTableState(restoredState) {\n      var state = this._restoreState(restoredState);\n\n      if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(state)) {\n        this.setState(state);\n      }\n    }\n  }, {\n    key: \"_restoreState\",\n    value: function _restoreState(restoredState) {\n      var _this3 = this;\n\n      var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(restoredState)) {\n        if (this.props.paginator) {\n          if (this.props.onPage) {\n            var getOnPageParams = function getOnPageParams(first, rows) {\n              var totalRecords = _this3.getTotalRecords(_this3.processedData());\n\n              var pageCount = Math.ceil(totalRecords / rows) || 1;\n              var page = Math.floor(first / rows);\n              return {\n                first: first,\n                rows: rows,\n                page: page,\n                pageCount: pageCount\n              };\n            };\n\n            this.props.onPage(this.createEvent(getOnPageParams(restoredState.first, restoredState.rows)));\n          } else {\n            state.first = restoredState.first;\n            state.rows = restoredState.rows;\n          }\n        }\n\n        if (restoredState.sortField) {\n          if (this.props.onSort) {\n            this.props.onSort(this.createEvent({\n              sortField: restoredState.sortField,\n              sortOrder: restoredState.sortOrder\n            }));\n          } else {\n            state.sortField = restoredState.sortField;\n            state.sortOrder = restoredState.sortOrder;\n          }\n        }\n\n        if (restoredState.multiSortMeta) {\n          if (this.props.onSort) {\n            this.props.onSort(this.createEvent({\n              multiSortMeta: restoredState.multiSortMeta\n            }));\n          } else {\n            state.multiSortMeta = restoredState.multiSortMeta;\n          }\n        }\n\n        if (restoredState.filters) {\n          state.d_filters = this.cloneFilters(restoredState.filters);\n\n          if (this.props.onFilter) {\n            this.props.onFilter(this.createEvent({\n              filters: restoredState.filters\n            }));\n          } else {\n            state.filters = this.cloneFilters(restoredState.filters);\n          }\n        }\n\n        if (this.props.resizableColumns) {\n          this.columnWidthsState = restoredState.columnWidths;\n          this.tableWidthState = restoredState.tableWidth;\n        }\n\n        if (this.props.reorderableColumns) {\n          state.columnOrder = restoredState.columnOrder;\n        }\n\n        if (restoredState.expandedRows && this.props.onRowToggle) {\n          this.props.onRowToggle({\n            data: restoredState.expandedRows\n          });\n        }\n\n        if (restoredState.selection && this.props.onSelectionChange) {\n          this.props.onSelectionChange({\n            value: restoredState.selection\n          });\n        }\n\n        if (this.props.onStateRestore) {\n          this.props.onStateRestore(restoredState);\n        }\n      }\n\n      return state;\n    }\n  }, {\n    key: \"saveColumnWidths\",\n    value: function saveColumnWidths(state) {\n      var widths = [];\n      var headers = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.find(this.el, '.p-datatable-thead > tr > th');\n      headers.forEach(function (header) {\n        return widths.push(primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(header));\n      });\n      state.columnWidths = widths.join(',');\n\n      if (this.props.columnResizeMode === 'expand') {\n        state.tableWidth = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(this.table) + 'px';\n      }\n    }\n  }, {\n    key: \"restoreColumnWidths\",\n    value: function restoreColumnWidths() {\n      var _this4 = this;\n\n      if (this.columnWidthsState) {\n        var widths = this.columnWidthsState.split(',');\n\n        if (this.props.columnResizeMode === 'expand' && this.tableWidthState) {\n          this.table.style.width = this.tableWidthState;\n          this.table.style.minWidth = this.tableWidthState;\n          this.el.style.width = this.tableWidthState;\n        }\n\n        if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(widths)) {\n          this.createStyleElement();\n          var innerHTML = '';\n          widths.forEach(function (width, index) {\n            var style = _this4.props.scrollable ? \"flex: 1 1 \".concat(width, \"px !important\") : \"width: \".concat(width, \"px !important\");\n            innerHTML += \"\\n                        .p-datatable[\".concat(_this4.state.attributeSelector, \"] .p-datatable-thead > tr > th:nth-child(\").concat(index + 1, \"),\\n                        .p-datatable[\").concat(_this4.state.attributeSelector, \"] .p-datatable-tbody > tr > td:nth-child(\").concat(index + 1, \"),\\n                        .p-datatable[\").concat(_this4.state.attributeSelector, \"] .p-datatable-tfoot > tr > td:nth-child(\").concat(index + 1, \") {\\n                            \").concat(style, \"\\n                        }\\n                    \");\n          });\n          this.styleElement.innerHTML = innerHTML;\n        }\n      }\n    }\n  }, {\n    key: \"findParentHeader\",\n    value: function findParentHeader(element) {\n      if (element.nodeName === 'TH') {\n        return element;\n      } else {\n        var parent = element.parentElement;\n\n        while (parent.nodeName !== 'TH') {\n          parent = parent.parentElement;\n          if (!parent) break;\n        }\n\n        return parent;\n      }\n    }\n  }, {\n    key: \"getGroupRowSortField\",\n    value: function getGroupRowSortField() {\n      return this.props.sortMode === 'single' ? this.props.sortField : this.state.groupRowsSortMeta ? this.state.groupRowsSortMeta.field : null;\n    }\n  }, {\n    key: \"getSelectableData\",\n    value: function getSelectableData(val) {\n      var _this5 = this;\n\n      if (this.props.showSelectionElement || this.props.isDataSelectable) {\n        return val.filter(function (data, index) {\n          var isSelectable = true;\n          if (_this5.props.showSelectionElement) isSelectable = _this5.props.showSelectionElement({\n            rowIndex: index,\n            props: _this5.props\n          });\n          if (_this5.props.isDataSelectable && isSelectable) isSelectable = _this5.props.isDataSelectable({\n            data: data,\n            index: index\n          });\n          return isSelectable;\n        });\n      }\n\n      return val;\n    }\n  }, {\n    key: \"allRowsSelected\",\n    value: function allRowsSelected(processedData) {\n      var _this6 = this;\n\n      if (this.props.onSelectAllChange) {\n        return this.props.selectAll;\n      } else {\n        var data = this.props.selectionPageOnly ? this.dataToRender(processedData) : processedData;\n        var val = this.props.frozenValue ? [].concat(_toConsumableArray(this.props.frozenValue), _toConsumableArray(data)) : data;\n        var selectableVal = this.getSelectableData(val);\n        return selectableVal && this.props.selection && selectableVal.every(function (sv) {\n          return _this6.props.selection.some(function (s) {\n            return _this6.isEquals(s, sv);\n          });\n        });\n      }\n    }\n  }, {\n    key: \"getSelectionModeInColumn\",\n    value: function getSelectionModeInColumn(columns) {\n      if (columns) {\n        var col = columns.find(function (c) {\n          return !!c.props.selectionMode;\n        });\n        return col ? col.props.selectionMode : null;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"findColumnByKey\",\n    value: function findColumnByKey(columns, key) {\n      return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(columns) ? columns.find(function (col) {\n        return col.props.columnKey === key || col.props.field === key;\n      }) : null;\n    }\n  }, {\n    key: \"getTotalRecords\",\n    value: function getTotalRecords(data) {\n      return this.props.lazy ? this.props.totalRecords : data ? data.length : 0;\n    }\n  }, {\n    key: \"onEditingMetaChange\",\n    value: function onEditingMetaChange(e) {\n      var rowData = e.rowData,\n          field = e.field,\n          rowIndex = e.rowIndex,\n          editing = e.editing;\n\n      var editingMeta = _objectSpread({}, this.state.editingMeta);\n\n      var meta = editingMeta[rowIndex];\n\n      if (editing) {\n        !meta && (meta = editingMeta[rowIndex] = {\n          data: _objectSpread({}, rowData),\n          fields: []\n        });\n        meta['fields'].push(field);\n      } else if (meta) {\n        var fields = meta['fields'].filter(function (f) {\n          return f !== field;\n        });\n        !fields.length ? delete editingMeta[rowIndex] : meta['fields'] = fields;\n      }\n\n      this.setState({\n        editingMeta: editingMeta\n      });\n    }\n  }, {\n    key: \"clearEditingMetaData\",\n    value: function clearEditingMetaData() {\n      if (this.props.editMode && primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(this.state.editingMeta)) {\n        this.setState({\n          editingMeta: {}\n        });\n      }\n    }\n  }, {\n    key: \"onColumnResizeStart\",\n    value: function onColumnResizeStart(e) {\n      var event = e.originalEvent,\n          column = e.column;\n      var containerLeft = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOffset(this.el).left;\n      this.resizeColumn = column;\n      this.resizeColumnElement = event.currentTarget.parentElement;\n      this.columnResizing = true;\n      this.lastResizeHelperX = event.pageX - containerLeft + this.el.scrollLeft;\n      this.bindColumnResizeEvents();\n    }\n  }, {\n    key: \"onColumnResize\",\n    value: function onColumnResize(event) {\n      var containerLeft = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOffset(this.el).left;\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.addClass(this.el, 'p-unselectable-text');\n      this.resizeHelper.style.height = this.el.offsetHeight + 'px';\n      this.resizeHelper.style.top = 0 + 'px';\n      this.resizeHelper.style.left = event.pageX - containerLeft + this.el.scrollLeft + 'px';\n      this.resizeHelper.style.display = 'block';\n    }\n  }, {\n    key: \"onColumnResizeEnd\",\n    value: function onColumnResizeEnd() {\n      var delta = this.resizeHelper.offsetLeft - this.lastResizeHelperX;\n      var columnWidth = this.resizeColumnElement.offsetWidth;\n      var newColumnWidth = columnWidth + delta;\n      var minWidth = this.resizeColumnElement.style.minWidth || 15;\n\n      if (columnWidth + delta > parseInt(minWidth, 10)) {\n        if (this.props.columnResizeMode === 'fit') {\n          var nextColumn = this.resizeColumnElement.nextElementSibling;\n          var nextColumnWidth = nextColumn.offsetWidth - delta;\n\n          if (newColumnWidth > 15 && nextColumnWidth > 15) {\n            this.resizeTableCells(newColumnWidth, nextColumnWidth);\n          }\n        } else if (this.props.columnResizeMode === 'expand') {\n          var tableWidth = this.table.offsetWidth + delta + 'px';\n          this.table.style.width = tableWidth;\n          this.table.style.minWidth = tableWidth;\n          this.resizeTableCells(newColumnWidth);\n        }\n\n        if (this.props.onColumnResizeEnd) {\n          this.props.onColumnResizeEnd({\n            element: this.resizeColumnElement,\n            column: this.resizeColumn,\n            delta: delta\n          });\n        }\n\n        if (this.isStateful()) {\n          this.saveState();\n        }\n      }\n\n      this.resizeHelper.style.display = 'none';\n      this.resizeColumn = null;\n      this.resizeColumnElement = null;\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeClass(this.el, 'p-unselectable-text');\n      this.unbindColumnResizeEvents();\n    }\n  }, {\n    key: \"resizeTableCells\",\n    value: function resizeTableCells(newColumnWidth, nextColumnWidth) {\n      var _this7 = this;\n\n      var widths = [];\n      var colIndex = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.index(this.resizeColumnElement);\n      var headers = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.find(this.table, '.p-datatable-thead > tr > th');\n      headers.forEach(function (header) {\n        return widths.push(primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOuterWidth(header));\n      });\n      this.destroyStyleElement();\n      this.createStyleElement();\n      var innerHTML = '';\n      widths.forEach(function (width, index) {\n        var colWidth = index === colIndex ? newColumnWidth : nextColumnWidth && index === colIndex + 1 ? nextColumnWidth : width;\n        var style = _this7.props.scrollable ? \"flex: 1 1 \".concat(colWidth, \"px !important\") : \"width: \".concat(colWidth, \"px !important\");\n        innerHTML += \"\\n                .p-datatable[\".concat(_this7.state.attributeSelector, \"] .p-datatable-thead > tr > th:nth-child(\").concat(index + 1, \"),\\n                .p-datatable[\").concat(_this7.state.attributeSelector, \"] .p-datatable-tbody > tr > td:nth-child(\").concat(index + 1, \"),\\n                .p-datatable[\").concat(_this7.state.attributeSelector, \"] .p-datatable-tfoot > tr > td:nth-child(\").concat(index + 1, \") {\\n                    \").concat(style, \"\\n                }\\n            \");\n      });\n      this.styleElement.innerHTML = innerHTML;\n    }\n  }, {\n    key: \"bindColumnResizeEvents\",\n    value: function bindColumnResizeEvents() {\n      var _this8 = this;\n\n      if (!this.documentColumnResizeListener) {\n        this.documentColumnResizeListener = document.addEventListener('mousemove', function (event) {\n          if (_this8.columnResizing) {\n            _this8.onColumnResize(event);\n          }\n        });\n      }\n\n      if (!this.documentColumnResizeEndListener) {\n        this.documentColumnResizeEndListener = document.addEventListener('mouseup', function () {\n          if (_this8.columnResizing) {\n            _this8.columnResizing = false;\n\n            _this8.onColumnResizeEnd();\n          }\n        });\n      }\n    }\n  }, {\n    key: \"unbindColumnResizeEvents\",\n    value: function unbindColumnResizeEvents() {\n      if (this.documentColumnResizeListener) {\n        document.removeEventListener('document', this.documentColumnResizeListener);\n        this.documentColumnResizeListener = null;\n      }\n\n      if (this.documentColumnResizeEndListener) {\n        document.removeEventListener('document', this.documentColumnResizeEndListener);\n        this.documentColumnResizeEndListener = null;\n      }\n    }\n  }, {\n    key: \"onColumnHeaderMouseDown\",\n    value: function onColumnHeaderMouseDown(e) {\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.clearSelection();\n      var event = e.originalEvent,\n          column = e.column;\n\n      if (this.props.reorderableColumns && this.getColumnProp(column, 'reorderable') !== false) {\n        if (event.target.nodeName === 'INPUT' || event.target.nodeName === 'TEXTAREA' || primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.hasClass(event.target, 'p-column-resizer')) event.currentTarget.draggable = false;else event.currentTarget.draggable = true;\n      }\n    }\n  }, {\n    key: \"onColumnHeaderCheckboxChange\",\n    value: function onColumnHeaderCheckboxChange(e, processedData) {\n      var _this9 = this;\n\n      if (this.props.onSelectAllChange) {\n        this.props.onSelectAllChange(e);\n      } else {\n        var originalEvent = e.originalEvent,\n            checked = e.checked;\n        var data = this.props.selectionPageOnly ? this.dataToRender(processedData) : processedData;\n        var selection = this.props.selectionPageOnly && this.props.selection ? this.props.selection.filter(function (s) {\n          return !data.some(function (d) {\n            return _this9.isEquals(s, d);\n          });\n        }) : [];\n\n        if (checked) {\n          selection = this.props.frozenValue ? [].concat(_toConsumableArray(selection), _toConsumableArray(this.props.frozenValue), _toConsumableArray(data)) : [].concat(_toConsumableArray(selection), _toConsumableArray(data));\n          selection = this.getSelectableData(selection);\n          this.props.onAllRowsSelect && this.props.onAllRowsSelect({\n            originalEvent: originalEvent,\n            data: selection,\n            type: 'all'\n          });\n        } else {\n          this.props.onAllRowsUnselect && this.props.onAllRowsUnselect({\n            originalEvent: originalEvent,\n            data: selection,\n            type: 'all'\n          });\n        }\n\n        if (this.props.onSelectionChange) {\n          this.props.onSelectionChange({\n            originalEvent: originalEvent,\n            value: selection,\n            type: 'all'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"onColumnHeaderDragStart\",\n    value: function onColumnHeaderDragStart(e) {\n      var event = e.originalEvent,\n          column = e.column;\n\n      if (this.columnResizing) {\n        event.preventDefault();\n        return;\n      }\n\n      this.colReorderIconWidth = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getHiddenElementOuterWidth(this.reorderIndicatorUp);\n      this.colReorderIconHeight = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getHiddenElementOuterHeight(this.reorderIndicatorUp);\n      this.draggedColumn = column;\n      this.draggedColumnElement = this.findParentHeader(event.currentTarget);\n      event.dataTransfer.setData('text', 'b'); // Firefox requires this to make dragging possible\n    }\n  }, {\n    key: \"onColumnHeaderDragOver\",\n    value: function onColumnHeaderDragOver(e) {\n      var event = e.originalEvent;\n      var dropHeader = this.findParentHeader(event.currentTarget);\n\n      if (this.props.reorderableColumns && this.draggedColumnElement && dropHeader) {\n        event.preventDefault();\n\n        if (this.draggedColumnElement !== dropHeader) {\n          var containerOffset = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOffset(this.el);\n          var dropHeaderOffset = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.getOffset(dropHeader);\n          var targetLeft = dropHeaderOffset.left - containerOffset.left;\n          var columnCenter = dropHeaderOffset.left + dropHeader.offsetWidth / 2;\n          this.reorderIndicatorUp.style.top = dropHeaderOffset.top - containerOffset.top - (this.colReorderIconHeight - 1) + 'px';\n          this.reorderIndicatorDown.style.top = dropHeaderOffset.top - containerOffset.top + dropHeader.offsetHeight + 'px';\n\n          if (event.pageX > columnCenter) {\n            this.reorderIndicatorUp.style.left = targetLeft + dropHeader.offsetWidth - Math.ceil(this.colReorderIconWidth / 2) + 'px';\n            this.reorderIndicatorDown.style.left = targetLeft + dropHeader.offsetWidth - Math.ceil(this.colReorderIconWidth / 2) + 'px';\n            this.dropPosition = 1;\n          } else {\n            this.reorderIndicatorUp.style.left = targetLeft - Math.ceil(this.colReorderIconWidth / 2) + 'px';\n            this.reorderIndicatorDown.style.left = targetLeft - Math.ceil(this.colReorderIconWidth / 2) + 'px';\n            this.dropPosition = -1;\n          }\n\n          this.reorderIndicatorUp.style.display = 'block';\n          this.reorderIndicatorDown.style.display = 'block';\n        }\n      }\n    }\n  }, {\n    key: \"onColumnHeaderDragLeave\",\n    value: function onColumnHeaderDragLeave(e) {\n      var event = e.originalEvent;\n\n      if (this.props.reorderableColumns && this.draggedColumnElement) {\n        event.preventDefault();\n        this.reorderIndicatorUp.style.display = 'none';\n        this.reorderIndicatorDown.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"onColumnHeaderDrop\",\n    value: function onColumnHeaderDrop(e) {\n      var _this10 = this;\n\n      var event = e.originalEvent,\n          column = e.column;\n      event.preventDefault();\n\n      if (this.draggedColumnElement) {\n        var dragIndex = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.index(this.draggedColumnElement);\n        var dropIndex = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.index(this.findParentHeader(event.currentTarget));\n        var allowDrop = dragIndex !== dropIndex;\n\n        if (allowDrop && (dropIndex - dragIndex === 1 && this.dropPosition === -1 || dragIndex - dropIndex === 1 && this.dropPosition === 1)) {\n          allowDrop = false;\n        }\n\n        if (allowDrop) {\n          var columns = this.getColumns();\n\n          var isSameColumn = function isSameColumn(col1, col2) {\n            return col1.props.columnKey || col2.props.columnKey ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(col1.props, col2.props, 'columnKey') : primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.equals(col1.props, col2.props, 'field');\n          };\n\n          var dragColIndex = columns.findIndex(function (child) {\n            return isSameColumn(child, _this10.draggedColumn);\n          });\n          var dropColIndex = columns.findIndex(function (child) {\n            return isSameColumn(child, column);\n          });\n\n          if (dropColIndex < dragColIndex && this.dropPosition === 1) {\n            dropColIndex++;\n          }\n\n          if (dropColIndex > dragColIndex && this.dropPosition === -1) {\n            dropColIndex--;\n          }\n\n          primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.reorderArray(columns, dragColIndex, dropColIndex);\n          var columnOrder = columns.reduce(function (orders, col) {\n            orders.push(col.props.columnKey || col.props.field);\n            return orders;\n          }, []);\n          this.setState({\n            columnOrder: columnOrder\n          });\n\n          if (this.props.onColReorder) {\n            this.props.onColReorder({\n              originalEvent: event,\n              dragIndex: dragColIndex,\n              dropIndex: dropColIndex,\n              columns: columns\n            });\n          }\n        }\n\n        this.reorderIndicatorUp.style.display = 'none';\n        this.reorderIndicatorDown.style.display = 'none';\n        this.draggedColumnElement.draggable = false;\n        this.draggedColumnElement = null;\n        this.draggedColumn = null;\n        this.dropPosition = null;\n      }\n    }\n  }, {\n    key: \"createStyleElement\",\n    value: function createStyleElement() {\n      this.styleElement = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.createInlineStyle(primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].nonce);\n    }\n  }, {\n    key: \"createResponsiveStyle\",\n    value: function createResponsiveStyle() {\n      if (!this.responsiveStyleElement) {\n        this.responsiveStyleElement = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.createInlineStyle(primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].nonce);\n        var innerHTML = \"\\n@media screen and (max-width: \".concat(this.props.breakpoint, \") {\\n    .p-datatable[\").concat(this.state.attributeSelector, \"] .p-datatable-thead > tr > th,\\n    .p-datatable[\").concat(this.state.attributeSelector, \"] .p-datatable-tfoot > tr > td {\\n        display: none !important;\\n    }\\n\\n    .p-datatable[\").concat(this.state.attributeSelector, \"] .p-datatable-tbody > tr > td {\\n        display: flex;\\n        width: 100% !important;\\n        align-items: center;\\n        justify-content: space-between;\\n    }\\n\\n    .p-datatable[\").concat(this.state.attributeSelector, \"] .p-datatable-tbody > tr > td:not(:last-child) {\\n        border: 0 none;\\n    }\\n\\n    .p-datatable[\").concat(this.state.attributeSelector, \"].p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\\n        border-top: 0;\\n        border-right: 0;\\n        border-left: 0;\\n    }\\n\\n    .p-datatable[\").concat(this.state.attributeSelector, \"] .p-datatable-tbody > tr > td > .p-column-title {\\n        display: block;\\n    }\\n}\\n\");\n        this.responsiveStyleElement.innerHTML = innerHTML;\n      }\n    }\n  }, {\n    key: \"destroyResponsiveStyle\",\n    value: function destroyResponsiveStyle() {\n      this.responsiveStyleElement = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeInlineStyle(this.responsiveStyleElement);\n    }\n  }, {\n    key: \"destroyStyleElement\",\n    value: function destroyStyleElement() {\n      this.styleElement = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.removeInlineStyle(this.styleElement);\n    }\n  }, {\n    key: \"onPageChange\",\n    value: function onPageChange(e) {\n      this.clearEditingMetaData();\n      if (this.props.onPage) this.props.onPage(this.createEvent(e));else this.setState({\n        first: e.first,\n        rows: e.rows\n      });\n\n      if (this.props.onValueChange) {\n        this.props.onValueChange(this.processedData());\n      }\n    }\n  }, {\n    key: \"onSortChange\",\n    value: function onSortChange(e) {\n      this.clearEditingMetaData();\n      var event = e.originalEvent,\n          column = e.column,\n          sortableDisabledFields = e.sortableDisabledFields;\n      var sortField = column.props.sortField || column.props.field;\n      var sortOrder = this.props.defaultSortOrder;\n      var multiSortMeta;\n      var eventMeta;\n      this.columnSortable = column.props.sortable;\n      this.columnSortFunction = column.props.sortFunction;\n      this.columnField = column.props.sortField;\n\n      if (this.props.sortMode === 'multiple') {\n        var metaKey = event.metaKey || event.ctrlKey;\n        multiSortMeta = _toConsumableArray(this.getMultiSortMeta());\n        var sortMeta = multiSortMeta.find(function (sortMeta) {\n          return sortMeta.field === sortField;\n        });\n        sortOrder = sortMeta ? this.getCalculatedSortOrder(sortMeta.order) : sortOrder;\n        var newMetaData = {\n          field: sortField,\n          order: sortOrder\n        };\n\n        if (sortOrder) {\n          multiSortMeta = metaKey ? multiSortMeta : multiSortMeta.filter(function (meta) {\n            return sortableDisabledFields.some(function (field) {\n              return field === meta.field;\n            });\n          });\n          this.addSortMeta(newMetaData, multiSortMeta);\n        } else if (this.props.removableSort) {\n          this.removeSortMeta(newMetaData, multiSortMeta);\n        }\n\n        eventMeta = {\n          multiSortMeta: multiSortMeta\n        };\n      } else {\n        sortOrder = this.getSortField() === sortField ? this.getCalculatedSortOrder(this.getSortOrder()) : sortOrder;\n\n        if (this.props.removableSort) {\n          sortField = sortOrder ? sortField : null;\n        }\n\n        eventMeta = {\n          sortField: sortField,\n          sortOrder: sortOrder\n        };\n      }\n\n      if (this.props.onSort) {\n        this.props.onSort(this.createEvent(eventMeta));\n      } else {\n        eventMeta.first = 0;\n        this.setState(eventMeta);\n      }\n\n      if (this.props.onValueChange) {\n        this.props.onValueChange(this.processedData({\n          sortField: sortField,\n          sortOrder: sortOrder,\n          multiSortMeta: multiSortMeta\n        }));\n      }\n    }\n  }, {\n    key: \"getCalculatedSortOrder\",\n    value: function getCalculatedSortOrder(currentOrder) {\n      return this.props.removableSort ? this.props.defaultSortOrder === currentOrder ? currentOrder * -1 : 0 : currentOrder * -1;\n    }\n  }, {\n    key: \"compareValuesOnSort\",\n    value: function compareValuesOnSort(value1, value2) {\n      return primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.sort(value1, value2, 1, primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].locale);\n    }\n  }, {\n    key: \"addSortMeta\",\n    value: function addSortMeta(meta, multiSortMeta) {\n      var index = multiSortMeta.findIndex(function (sortMeta) {\n        return sortMeta.field === meta.field;\n      });\n      if (index >= 0) multiSortMeta[index] = meta;else multiSortMeta.push(meta);\n    }\n  }, {\n    key: \"removeSortMeta\",\n    value: function removeSortMeta(meta, multiSortMeta) {\n      var index = multiSortMeta.findIndex(function (sortMeta) {\n        return sortMeta.field === meta.field;\n      });\n\n      if (index >= 0) {\n        multiSortMeta.splice(index, 1);\n      }\n\n      multiSortMeta = multiSortMeta.length > 0 ? multiSortMeta : null;\n    }\n  }, {\n    key: \"sortSingle\",\n    value: function sortSingle(data, field, order) {\n      var _this11 = this;\n\n      if (this.props.groupRowsBy && this.props.groupRowsBy === this.props.sortField) {\n        var multiSortMeta = [{\n          field: this.props.sortField,\n          order: this.props.sortOrder || this.props.defaultSortOrder\n        }];\n        this.props.sortField !== field && multiSortMeta.push({\n          field: field,\n          order: order\n        });\n        return this.sortMultiple(data, multiSortMeta);\n      }\n\n      var value = _toConsumableArray(data);\n\n      if (this.columnSortable && this.columnSortFunction) {\n        value = this.columnSortFunction({\n          field: field,\n          order: order\n        });\n      } else {\n        value.sort(function (data1, data2) {\n          var value1 = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(data1, field);\n          var value2 = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(data2, field);\n\n          var result = _this11.compareValuesOnSort(value1, value2);\n\n          return order * result;\n        });\n      }\n\n      return value;\n    }\n  }, {\n    key: \"sortMultiple\",\n    value: function sortMultiple(data) {\n      var _this12 = this;\n\n      var multiSortMeta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (this.props.groupRowsBy && (this.groupRowsSortMeta || multiSortMeta.length && this.props.groupRowsBy === multiSortMeta[0].field)) {\n        var firstSortMeta = multiSortMeta[0];\n        !this.groupRowsSortMeta && (this.groupRowsSortMeta = firstSortMeta);\n\n        if (firstSortMeta.field !== this.groupRowsSortMeta.field) {\n          multiSortMeta = [this.groupRowsSortMeta].concat(_toConsumableArray(multiSortMeta));\n        }\n      }\n\n      var value = _toConsumableArray(data);\n\n      if (this.columnSortable && this.columnSortFunction) {\n        var meta = multiSortMeta.find(function (meta) {\n          return meta.field === _this12.columnField;\n        });\n        var field = this.columnField;\n        var order = meta ? meta.order : this.defaultSortOrder;\n        value = this.columnSortFunction({\n          field: field,\n          order: order\n        });\n      } else {\n        value.sort(function (data1, data2) {\n          return _this12.multisortField(data1, data2, multiSortMeta, 0);\n        });\n      }\n\n      return value;\n    }\n  }, {\n    key: \"multisortField\",\n    value: function multisortField(data1, data2, multiSortMeta, index) {\n      var value1 = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(data1, multiSortMeta[index].field);\n      var value2 = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(data2, multiSortMeta[index].field);\n\n      if (value1 === value2) {\n        return multiSortMeta.length - 1 > index ? this.multisortField(data1, data2, multiSortMeta, index + 1) : 0;\n      }\n\n      var result = this.compareValuesOnSort(value1, value2);\n      return multiSortMeta[index].order * result;\n    }\n  }, {\n    key: \"onFilterChange\",\n    value: function onFilterChange(filters) {\n      this.clearEditingMetaData();\n      this.setState({\n        d_filters: filters\n      });\n    }\n  }, {\n    key: \"onFilterApply\",\n    value: function onFilterApply() {\n      var _this13 = this;\n\n      clearTimeout(this.filterTimeout);\n      this.filterTimeout = setTimeout(function () {\n        var filters = _this13.cloneFilters(_this13.state.d_filters);\n\n        if (_this13.props.onFilter) {\n          _this13.props.onFilter(_this13.createEvent({\n            filters: filters\n          }));\n        } else {\n          _this13.setState({\n            first: 0,\n            filters: filters\n          });\n        }\n\n        if (_this13.props.onValueChange) {\n          _this13.props.onValueChange(_this13.processedData({\n            filters: filters\n          }));\n        }\n      }, this.props.filterDelay);\n    }\n  }, {\n    key: \"filterLocal\",\n    value: function filterLocal(data, filters) {\n      if (!data) return;\n      filters = filters || {};\n      var columns = this.getColumns();\n      var filteredValue = [];\n      var isGlobalFilter = filters['global'] || this.props.globalFilter;\n      var globalFilterFieldsArray;\n\n      if (isGlobalFilter) {\n        globalFilterFieldsArray = this.props.globalFilterFields || columns.filter(function (col) {\n          return !col.props.excludeGlobalFilter;\n        }).map(function (col) {\n          return col.props.filterField || col.props.field;\n        });\n      }\n\n      for (var i = 0; i < data.length; i++) {\n        var localMatch = true;\n        var globalMatch = false;\n        var localFiltered = false;\n\n        for (var prop in filters) {\n          if (Object.prototype.hasOwnProperty.call(filters, prop) && prop !== 'global') {\n            localFiltered = true;\n            var filterField = prop;\n            var filterMeta = filters[filterField];\n\n            if (filterMeta.operator) {\n              for (var j = 0; j < filterMeta.constraints.length; j++) {\n                var filterConstraint = filterMeta.constraints[j];\n                localMatch = this.executeLocalFilter(filterField, data[i], filterConstraint, j);\n\n                if (filterMeta.operator === primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterOperator.OR && localMatch || filterMeta.operator === primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterOperator.AND && !localMatch) {\n                  break;\n                }\n              }\n            } else {\n              localMatch = this.executeLocalFilter(filterField, data[i], filterMeta, 0);\n            }\n\n            if (!localMatch) {\n              break;\n            }\n          }\n        }\n\n        if (isGlobalFilter && !globalMatch && globalFilterFieldsArray) {\n          for (var _j = 0; _j < globalFilterFieldsArray.length; _j++) {\n            var globalFilterField = globalFilterFieldsArray[_j];\n            var matchMode = filters['global'] ? filters['global'].matchMode : primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterMatchMode.CONTAINS;\n            var value = filters['global'] ? filters['global'].value : this.props.globalFilter;\n            globalMatch = primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterService.filters[matchMode](primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(data[i], globalFilterField), value, this.props.filterLocale);\n\n            if (globalMatch) {\n              break;\n            }\n          }\n        }\n\n        var matches = void 0;\n\n        if (isGlobalFilter) {\n          matches = localFiltered ? localFiltered && localMatch && globalMatch : globalMatch;\n        } else {\n          matches = localFiltered && localMatch;\n        }\n\n        if (matches) {\n          filteredValue.push(data[i]);\n        }\n      }\n\n      if (filteredValue.length === this.props.value.length) {\n        filteredValue = data;\n      }\n\n      return filteredValue;\n    }\n  }, {\n    key: \"executeLocalFilter\",\n    value: function executeLocalFilter(field, rowData, filterMeta, index) {\n      var filterValue = filterMeta.value;\n      var filterMatchMode = filterMeta.matchMode === 'custom' ? \"custom_\".concat(field) : filterMeta.matchMode || primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterMatchMode.STARTS_WITH;\n      var dataFieldValue = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(rowData, field);\n      var filterConstraint = primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterService.filters[filterMatchMode];\n      return filterConstraint(dataFieldValue, filterValue, this.props.filterLocale, index);\n    }\n  }, {\n    key: \"cloneFilters\",\n    value: function cloneFilters(filters) {\n      var _this14 = this;\n\n      filters = filters || this.props.filters;\n      var cloned = {};\n\n      if (filters) {\n        Object.entries(filters).forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              prop = _ref2[0],\n              value = _ref2[1];\n\n          cloned[prop] = value.operator ? {\n            operator: value.operator,\n            constraints: value.constraints.map(function (constraint) {\n              return _objectSpread({}, constraint);\n            })\n          } : _objectSpread({}, value);\n        });\n      } else {\n        var columns = this.getColumns();\n        cloned = columns.reduce(function (_filters, col) {\n          var field = col.props.filterField || col.props.field;\n          var filterFunction = col.props.filterFunction;\n          var dataType = col.props.dataType;\n          var matchMode = col.props.filterMatchMode || (primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].filterMatchModeOptions[dataType] ? primereact_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"].filterMatchModeOptions[dataType][0] : primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterMatchMode.STARTS_WITH);\n          var constraint = {\n            value: null,\n            matchMode: matchMode\n          };\n\n          if (filterFunction) {\n            primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterService.register(\"custom_\".concat(field), function () {\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n\n              return filterFunction.apply(void 0, args.concat([{\n                column: col\n              }]));\n            });\n          }\n\n          _filters[field] = _this14.props.filterDisplay === 'menu' ? {\n            operator: primereact_api__WEBPACK_IMPORTED_MODULE_3__.FilterOperator.AND,\n            constraints: [constraint]\n          } : constraint;\n          return _filters;\n        }, {});\n      }\n\n      return cloned;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(value, field, matchMode) {\n      var index = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n      var filters = _objectSpread({}, this.state.d_filters);\n\n      var meta = filters[field];\n      var constraint = meta && meta.operator ? meta.constraints[index] : meta;\n      constraint = meta ? {\n        value: value,\n        matchMode: matchMode || constraint.matchMode\n      } : {\n        value: value,\n        matchMode: matchMode\n      };\n      this.props.filterDisplay === 'menu' && meta && meta.operator ? filters[field].constraints[index] = constraint : filters[field] = constraint;\n      this.setState({\n        d_filters: filters\n      }, this.onFilterApply);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      var state = {\n        d_rows: this.props.rows,\n        d_filters: this.cloneFilters(this.props.filters),\n        groupRowsSortMeta: null,\n        editingMeta: {}\n      };\n\n      if (!this.props.onPage) {\n        state.first = this.props.first;\n        state.rows = this.props.rows;\n      }\n\n      if (!this.props.onSort) {\n        state.sortField = this.props.sortField;\n        state.sortOrder = this.props.sortOrder;\n        state.multiSortMeta = this.props.multiSortMeta;\n      }\n\n      if (!this.props.onFilter) {\n        state.filters = this.props.filters;\n      }\n\n      this.resetColumnOrder();\n      this.setState(state);\n    }\n  }, {\n    key: \"resetScroll\",\n    value: function resetScroll() {\n      if (this.wrapper) {\n        var scrollableContainer = !this.isVirtualScrollerDisabled() ? primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.findSingle(this.wrapper, '.p-virtualscroller') : this.wrapper;\n        scrollableContainer.scrollTo(0, 0);\n      }\n    }\n  }, {\n    key: \"resetColumnOrder\",\n    value: function resetColumnOrder() {\n      var columns = this.getColumns(true);\n      var columnOrder = [];\n\n      if (columns) {\n        columnOrder = columns.reduce(function (orders, col) {\n          orders.push(col.props.columnKey || col.props.field);\n          return orders;\n        }, []);\n      }\n\n      this.setState({\n        columnOrder: columnOrder\n      });\n    }\n  }, {\n    key: \"exportCSV\",\n    value: function exportCSV(options) {\n      var _this15 = this;\n\n      var data;\n      var csv = \"\\uFEFF\";\n      var columns = this.getColumns();\n\n      if (options && options.selectionOnly) {\n        data = this.props.selection || [];\n      } else {\n        data = [].concat(_toConsumableArray(this.props.frozenValue || []), _toConsumableArray(this.processedData() || []));\n      } //headers\n\n\n      columns.forEach(function (column, i) {\n        var _column$props = column.props,\n            field = _column$props.field,\n            header = _column$props.header,\n            exportable = _column$props.exportable;\n\n        if (exportable && field) {\n          csv += '\"' + (header || field) + '\"';\n\n          if (i < columns.length - 1) {\n            csv += _this15.props.csvSeparator;\n          }\n        }\n      }); //body\n\n      data.forEach(function (record) {\n        csv += '\\n';\n        columns.forEach(function (column, i) {\n          var _column$props2 = column.props,\n              columnField = _column$props2.field,\n              exportField = _column$props2.exportField,\n              exportable = _column$props2.exportable;\n          var field = exportField || columnField;\n\n          if (exportable && field) {\n            var cellData = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.resolveFieldData(record, field);\n\n            if (cellData != null) {\n              cellData = _this15.props.exportFunction ? _this15.props.exportFunction({\n                data: cellData,\n                field: field,\n                rowData: record,\n                column: column\n              }) : String(cellData).replace(/\"/g, '\"\"');\n            } else cellData = '';\n\n            csv += '\"' + cellData + '\"';\n\n            if (i < columns.length - 1) {\n              csv += _this15.props.csvSeparator;\n            }\n          }\n        });\n      });\n      primereact_utils__WEBPACK_IMPORTED_MODULE_2__.DomHandler.exportCSV(csv, this.props.exportFilename);\n    }\n  }, {\n    key: \"closeEditingCell\",\n    value: function closeEditingCell() {\n      if (this.props.editMode !== \"row\") {\n        document.body.click();\n      }\n    }\n  }, {\n    key: \"createEvent\",\n    value: function createEvent(event) {\n      return _objectSpread({\n        first: this.getFirst(),\n        rows: this.getRows(),\n        sortField: this.getSortField(),\n        sortOrder: this.getSortOrder(),\n        multiSortMeta: this.getMultiSortMeta(),\n        filters: this.getFilters()\n      }, event);\n    }\n  }, {\n    key: \"processedData\",\n    value: function processedData(localState) {\n      var data = this.props.value || [];\n\n      if (!this.props.lazy) {\n        if (data && data.length) {\n          var filters = localState && localState.filters || this.getFilters();\n          var sortField = localState && localState.sortField || this.getSortField();\n          var sortOrder = localState && localState.sortOrder || this.getSortOrder();\n          var multiSortMeta = localState && localState.multiSortMeta || this.getMultiSortMeta();\n\n          if (primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(filters) || this.props.globalFilter) {\n            data = this.filterLocal(data, filters);\n          }\n\n          if (sortField || primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isNotEmpty(multiSortMeta)) {\n            if (this.props.sortMode === 'single') data = this.sortSingle(data, sortField, sortOrder);else if (this.props.sortMode === 'multiple') data = this.sortMultiple(data, multiSortMeta);\n          }\n        }\n      }\n\n      return data;\n    }\n  }, {\n    key: \"dataToRender\",\n    value: function dataToRender(data) {\n      if (data && this.props.paginator) {\n        var first = this.props.lazy ? 0 : this.getFirst();\n        return data.slice(first, first + this.getRows());\n      }\n\n      return data;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this16 = this;\n\n      this.setState({\n        attributeSelector: (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.UniqueComponentId)()\n      }, function () {\n        _this16.el.setAttribute(_this16.state.attributeSelector, '');\n\n        if (_this16.props.responsiveLayout === 'stack' && !_this16.props.scrollable) {\n          _this16.createResponsiveStyle();\n        }\n      });\n\n      if (this.isStateful()) {\n        this.setState(this.restoreState(this.state));\n\n        if (this.props.resizableColumns) {\n          this.restoreColumnWidths();\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.isStateful()) {\n        this.saveState();\n      }\n\n      if (prevProps.responsiveLayout !== this.props.responsiveLayout) {\n        this.destroyResponsiveStyle();\n\n        if (this.props.responsiveLayout === 'stack' && !this.props.scrollable) {\n          this.createResponsiveStyle();\n        }\n      }\n\n      if (prevProps.filters !== this.props.filters) {\n        this.setState({\n          filters: this.cloneFilters(this.props.filters),\n          d_filters: this.cloneFilters(this.props.filters)\n        });\n      }\n\n      if (prevProps.globalFilter !== this.props.globalFilter) {\n        this.filter(this.props.globalFilter, 'global', 'contains');\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unbindColumnResizeEvents();\n      this.destroyStyleElement();\n      this.destroyResponsiveStyle();\n    }\n  }, {\n    key: \"renderLoader\",\n    value: function renderLoader() {\n      if (this.props.loading) {\n        var iconClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-datatable-loading-icon pi-spin', this.props.loadingIcon);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-datatable-loading-overlay p-component-overlay\"\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"i\", {\n          className: iconClassName\n        }));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      if (this.props.header) {\n        var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.props.header, {\n          props: this.props\n        });\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-datatable-header\"\n        }, content);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderTableHeader\",\n    value: function renderTableHeader(options, empty) {\n      var sortField = this.getSortField();\n      var sortOrder = this.getSortOrder();\n\n      var multiSortMeta = _toConsumableArray(this.getMultiSortMeta());\n\n      var groupRowSortField = this.getGroupRowSortField();\n      var filters = this.state.d_filters;\n      var filtersStore = this.getFilters();\n      var processedData = options.items,\n          columns = options.columns;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TableHeader, {\n        value: processedData,\n        tableProps: this.props,\n        columns: columns,\n        tabIndex: this.props.tabIndex,\n        empty: empty,\n        headerColumnGroup: this.props.headerColumnGroup,\n        resizableColumns: this.props.resizableColumns,\n        onColumnResizeStart: this.onColumnResizeStart,\n        onColumnResizerClick: this.props.onColumnResizerClick,\n        onColumnResizerDoubleClick: this.props.onColumnResizerDoubleClick,\n        sortMode: this.props.sortMode,\n        sortField: sortField,\n        sortOrder: sortOrder,\n        multiSortMeta: multiSortMeta,\n        groupRowsBy: this.props.groupRowsBy,\n        groupRowSortField: groupRowSortField,\n        onSortChange: this.onSortChange,\n        filterDisplay: this.props.filterDisplay,\n        filters: filters,\n        filtersStore: filtersStore,\n        onFilterChange: this.onFilterChange,\n        onFilterApply: this.onFilterApply,\n        showSelectAll: this.props.showSelectAll,\n        allRowsSelected: this.allRowsSelected,\n        onColumnCheckboxChange: this.onColumnHeaderCheckboxChange,\n        onColumnMouseDown: this.onColumnHeaderMouseDown,\n        onColumnDragStart: this.onColumnHeaderDragStart,\n        onColumnDragOver: this.onColumnHeaderDragOver,\n        onColumnDragLeave: this.onColumnHeaderDragLeave,\n        onColumnDrop: this.onColumnHeaderDrop,\n        rowGroupMode: this.props.rowGroupMode,\n        reorderableColumns: this.props.reorderableColumns\n      });\n    }\n  }, {\n    key: \"renderTableBody\",\n    value: function renderTableBody(options, selectionModeInColumn, empty, isVirtualScrollerDisabled) {\n      var tableSelector = this.state.attributeSelector;\n      var first = this.getFirst();\n      var editingMeta = this.state.editingMeta;\n      var rows = options.rows,\n          columns = options.columns,\n          contentRef = options.contentRef,\n          className = options.className;\n      var frozenBody = this.props.frozenValue && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TableBody, {\n        value: this.props.frozenValue,\n        className: \"p-datatable-frozen-tbody\",\n        frozenRow: true,\n        tableProps: this.props,\n        tableSelector: tableSelector,\n        columns: columns,\n        selectionModeInColumn: selectionModeInColumn,\n        first: first,\n        editingMeta: editingMeta,\n        onEditingMetaChange: this.onEditingMetaChange,\n        tabIndex: this.props.tabIndex,\n        onRowClick: this.props.onRowClick,\n        onRowDoubleClick: this.props.onRowDoubleClick,\n        onCellClick: this.props.onCellClick,\n        selection: this.props.selection,\n        onSelectionChange: this.props.onSelectionChange,\n        lazy: this.props.lazy,\n        paginator: this.props.paginator,\n        onCellSelect: this.props.onCellSelect,\n        onCellUnselect: this.props.onCellUnselect,\n        onRowSelect: this.props.onRowSelect,\n        onRowUnselect: this.props.onRowUnselect,\n        dragSelection: this.props.dragSelection,\n        onContextMenu: this.props.onContextMenu,\n        onContextMenuSelectionChange: this.props.onContextMenuSelectionChange,\n        metaKeySelection: this.props.metaKeySelection,\n        selectionMode: this.props.selectionMode,\n        cellSelection: this.props.cellSelection,\n        contextMenuSelection: this.props.contextMenuSelection,\n        dataKey: this.props.dataKey,\n        expandedRows: this.props.expandedRows,\n        onRowCollapse: this.props.onRowCollapse,\n        onRowExpand: this.props.onRowExpand,\n        onRowToggle: this.props.onRowToggle,\n        editMode: this.props.editMode,\n        editingRows: this.props.editingRows,\n        onRowReorder: this.props.onRowReorder,\n        scrollable: this.props.scrollable,\n        rowGroupMode: this.props.rowGroupMode,\n        groupRowsBy: this.props.groupRowsBy,\n        expandableRowGroups: this.props.expandableRowGroups,\n        loading: this.props.loading,\n        emptyMessage: this.props.emptyMessage,\n        rowGroupHeaderTemplate: this.props.rowGroupHeaderTemplate,\n        rowExpansionTemplate: this.props.rowExpansionTemplate,\n        rowGroupFooterTemplate: this.props.rowGroupFooterTemplate,\n        onRowEditChange: this.props.onRowEditChange,\n        compareSelectionBy: this.props.compareSelectionBy,\n        selectOnEdit: this.props.selectOnEdit,\n        onRowEditInit: this.props.onRowEditInit,\n        rowEditValidator: this.props.rowEditValidator,\n        onRowEditSave: this.props.onRowEditSave,\n        onRowEditComplete: this.props.onRowEditComplete,\n        onRowEditCancel: this.props.onRowEditCancel,\n        cellClassName: this.props.cellClassName,\n        responsiveLayout: this.props.responsiveLayout,\n        selectionAutoFocus: this.props.selectionAutoFocus,\n        isDataSelectable: this.props.isDataSelectable,\n        showSelectionElement: this.props.showSelectionElement,\n        showRowReorderElement: this.props.showRowReorderElement,\n        expandedRowIcon: this.props.expandedRowIcon,\n        collapsedRowIcon: this.props.collapsedRowIcon,\n        rowClassName: this.props.rowClassName,\n        isVirtualScrollerDisabled: true\n      });\n      var body = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TableBody, {\n        value: this.dataToRender(rows),\n        className: className,\n        empty: empty,\n        frozenRow: false,\n        tableProps: this.props,\n        tableSelector: tableSelector,\n        columns: columns,\n        selectionModeInColumn: selectionModeInColumn,\n        first: first,\n        editingMeta: editingMeta,\n        onEditingMetaChange: this.onEditingMetaChange,\n        tabIndex: this.props.tabIndex,\n        onRowClick: this.props.onRowClick,\n        onRowDoubleClick: this.props.onRowDoubleClick,\n        onCellClick: this.props.onCellClick,\n        selection: this.props.selection,\n        onSelectionChange: this.props.onSelectionChange,\n        lazy: this.props.lazy,\n        paginator: this.props.paginator,\n        onCellSelect: this.props.onCellSelect,\n        onCellUnselect: this.props.onCellUnselect,\n        onRowSelect: this.props.onRowSelect,\n        onRowUnselect: this.props.onRowUnselect,\n        dragSelection: this.props.dragSelection,\n        onContextMenu: this.props.onContextMenu,\n        onContextMenuSelectionChange: this.props.onContextMenuSelectionChange,\n        metaKeySelection: this.props.metaKeySelection,\n        selectionMode: this.props.selectionMode,\n        cellSelection: this.props.cellSelection,\n        contextMenuSelection: this.props.contextMenuSelection,\n        dataKey: this.props.dataKey,\n        expandedRows: this.props.expandedRows,\n        onRowCollapse: this.props.onRowCollapse,\n        onRowExpand: this.props.onRowExpand,\n        onRowToggle: this.props.onRowToggle,\n        editMode: this.props.editMode,\n        editingRows: this.props.editingRows,\n        onRowReorder: this.props.onRowReorder,\n        scrollable: this.props.scrollable,\n        rowGroupMode: this.props.rowGroupMode,\n        groupRowsBy: this.props.groupRowsBy,\n        expandableRowGroups: this.props.expandableRowGroups,\n        loading: this.props.loading,\n        emptyMessage: this.props.emptyMessage,\n        rowGroupHeaderTemplate: this.props.rowGroupHeaderTemplate,\n        rowExpansionTemplate: this.props.rowExpansionTemplate,\n        rowGroupFooterTemplate: this.props.rowGroupFooterTemplate,\n        onRowEditChange: this.props.onRowEditChange,\n        compareSelectionBy: this.props.compareSelectionBy,\n        selectOnEdit: this.props.selectOnEdit,\n        onRowEditInit: this.props.onRowEditInit,\n        rowEditValidator: this.props.rowEditValidator,\n        onRowEditSave: this.props.onRowEditSave,\n        onRowEditComplete: this.props.onRowEditComplete,\n        onRowEditCancel: this.props.onRowEditCancel,\n        cellClassName: this.props.cellClassName,\n        responsiveLayout: this.props.responsiveLayout,\n        selectionAutoFocus: this.props.selectionAutoFocus,\n        isDataSelectable: this.props.isDataSelectable,\n        showSelectionElement: this.props.showSelectionElement,\n        showRowReorderElement: this.props.showRowReorderElement,\n        expandedRowIcon: this.props.expandedRowIcon,\n        collapsedRowIcon: this.props.collapsedRowIcon,\n        rowClassName: this.props.rowClassName,\n        virtualScrollerContentRef: contentRef,\n        virtualScrollerOptions: options,\n        isVirtualScrollerDisabled: isVirtualScrollerDisabled\n      });\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, frozenBody, body);\n    }\n  }, {\n    key: \"renderTableFooter\",\n    value: function renderTableFooter(options) {\n      var columns = options.columns;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TableFooter, {\n        tableProps: this.props,\n        columns: columns,\n        footerColumnGroup: this.props.footerColumnGroup\n      });\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(processedData, columns, selectionModeInColumn, empty) {\n      var _this17 = this;\n\n      if (!columns) return;\n      var isVirtualScrollerDisabled = this.isVirtualScrollerDisabled();\n      var virtualScrollerOptions = this.props.virtualScrollerOptions || {};\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        ref: function ref(el) {\n          return _this17.wrapper = el;\n        },\n        className: \"p-datatable-wrapper\",\n        style: {\n          maxHeight: isVirtualScrollerDisabled ? this.props.scrollHeight : null\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_virtualscroller__WEBPACK_IMPORTED_MODULE_11__.VirtualScroller, _extends({}, virtualScrollerOptions, {\n        items: processedData,\n        columns: columns,\n        scrollHeight: this.props.scrollHeight,\n        disabled: isVirtualScrollerDisabled,\n        loaderDisabled: true,\n        showSpacer: false,\n        contentTemplate: function contentTemplate(options) {\n          var ref = function ref(el) {\n            _this17.table = el;\n            options.spacerRef && options.spacerRef(el);\n          };\n\n          var tableClassName = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-datatable-table', _this17.props.tableClassName);\n\n          var tableHeader = _this17.renderTableHeader(options, empty);\n\n          var tableBody = _this17.renderTableBody(options, selectionModeInColumn, empty, isVirtualScrollerDisabled);\n\n          var tableFooter = _this17.renderTableFooter(options);\n\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"table\", {\n            ref: ref,\n            style: _this17.props.tableStyle,\n            className: tableClassName,\n            role: \"table\"\n          }, tableHeader, tableBody, tableFooter);\n        }\n      })));\n    }\n  }, {\n    key: \"renderFooter\",\n    value: function renderFooter() {\n      if (this.props.footer) {\n        var content = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.getJSXElement(this.props.footer, {\n          props: this.props\n        });\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-datatable-footer\"\n        }, content);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderPaginator\",\n    value: function renderPaginator(position, totalRecords) {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-paginator-' + position, this.props.paginatorClassName);\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_paginator__WEBPACK_IMPORTED_MODULE_1__.Paginator, {\n        first: this.getFirst(),\n        rows: this.getRows(),\n        pageLinkSize: this.props.pageLinkSize,\n        className: className,\n        onPageChange: this.onPageChange,\n        template: this.props.paginatorTemplate,\n        totalRecords: totalRecords,\n        rowsPerPageOptions: this.props.rowsPerPageOptions,\n        currentPageReportTemplate: this.props.currentPageReportTemplate,\n        leftContent: this.props.paginatorLeft,\n        rightContent: this.props.paginatorRight,\n        alwaysShow: this.props.alwaysShowPaginator,\n        dropdownAppendTo: this.props.paginatorDropdownAppendTo\n      });\n    }\n  }, {\n    key: \"renderPaginatorTop\",\n    value: function renderPaginatorTop(totalRecords) {\n      if (this.props.paginator && this.props.paginatorPosition !== 'bottom') {\n        return this.renderPaginator('top', totalRecords);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderPaginatorBottom\",\n    value: function renderPaginatorBottom(totalRecords) {\n      if (this.props.paginator && this.props.paginatorPosition !== 'top') {\n        return this.renderPaginator('bottom', totalRecords);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderResizeHelper\",\n    value: function renderResizeHelper() {\n      var _this18 = this;\n\n      if (this.props.resizableColumns) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          ref: function ref(el) {\n            return _this18.resizeHelper = el;\n          },\n          className: \"p-column-resizer-helper\",\n          style: {\n            display: 'none'\n          }\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderReorderIndicators\",\n    value: function renderReorderIndicators() {\n      var _this19 = this;\n\n      if (this.props.reorderableColumns) {\n        var style = {\n          position: 'absolute',\n          display: 'none'\n        };\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          ref: function ref(el) {\n            return _this19.reorderIndicatorUp = el;\n          },\n          className: \"pi pi-arrow-down p-datatable-reorder-indicator-up\",\n          style: style\n        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n          ref: function ref(el) {\n            return _this19.reorderIndicatorDown = el;\n          },\n          className: \"pi pi-arrow-up p-datatable-reorder-indicator-down\",\n          style: style\n        }));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this20 = this;\n\n      var processedData = this.processedData();\n      var columns = this.getColumns();\n      var totalRecords = this.getTotalRecords(processedData);\n      var empty = primereact_utils__WEBPACK_IMPORTED_MODULE_2__.ObjectUtils.isEmpty(processedData);\n      var selectionModeInColumn = this.getSelectionModeInColumn(columns);\n      var selectable = this.props.selectionMode || selectionModeInColumn;\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_2__.classNames)('p-datatable p-component', {\n        'p-datatable-hoverable-rows': this.props.rowHover,\n        'p-datatable-selectable': selectable && !this.props.cellSelection,\n        'p-datatable-selectable-cell': selectable && this.props.cellSelection,\n        'p-datatable-auto-layout': this.props.autoLayout,\n        'p-datatable-resizable': this.props.resizableColumns,\n        'p-datatable-resizable-fit': this.props.resizableColumns && this.props.columnResizeMode === 'fit',\n        'p-datatable-scrollable': this.props.scrollable,\n        'p-datatable-scrollable-vertical': this.props.scrollable && this.props.scrollDirection === 'vertical',\n        'p-datatable-scrollable-horizontal': this.props.scrollable && this.props.scrollDirection === 'horizontal',\n        'p-datatable-scrollable-both': this.props.scrollable && this.props.scrollDirection === 'both',\n        'p-datatable-flex-scrollable': this.props.scrollable && this.props.scrollHeight === 'flex',\n        'p-datatable-responsive-stack': this.props.responsiveLayout === 'stack',\n        'p-datatable-responsive-scroll': this.props.responsiveLayout === 'scroll',\n        'p-datatable-striped': this.props.stripedRows,\n        'p-datatable-gridlines': this.props.showGridlines,\n        'p-datatable-grouped-header': this.props.headerColumnGroup != null,\n        'p-datatable-grouped-footer': this.props.footerColumnGroup != null,\n        'p-datatable-sm': this.props.size === 'small',\n        'p-datatable-lg': this.props.size === 'large'\n      }, this.props.className);\n      var loader = this.renderLoader();\n      var header = this.renderHeader();\n      var paginatorTop = this.renderPaginatorTop(totalRecords);\n      var content = this.renderContent(processedData, columns, selectionModeInColumn, empty);\n      var paginatorBottom = this.renderPaginatorBottom(totalRecords);\n      var footer = this.renderFooter();\n      var resizeHelper = this.renderResizeHelper();\n      var reorderIndicators = this.renderReorderIndicators();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        ref: function ref(el) {\n          return _this20.el = el;\n        },\n        id: this.props.id,\n        className: className,\n        style: this.props.style,\n        \"data-scrollselectors\": \".p-datatable-wrapper\"\n      }, loader, header, paginatorTop, content, paginatorBottom, footer, resizeHelper, reorderIndicators);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.rows !== prevState.d_rows && !nextProps.onPage) {\n        return {\n          rows: nextProps.rows,\n          d_rows: nextProps.rows\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return DataTable;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(DataTable, \"defaultProps\", {\n  id: null,\n  value: null,\n  header: null,\n  footer: null,\n  style: null,\n  className: null,\n  tableStyle: null,\n  tableClassName: null,\n  paginator: false,\n  paginatorPosition: 'bottom',\n  alwaysShowPaginator: true,\n  paginatorClassName: null,\n  paginatorTemplate: 'FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown',\n  paginatorLeft: null,\n  paginatorRight: null,\n  paginatorDropdownAppendTo: null,\n  pageLinkSize: 5,\n  rowsPerPageOptions: null,\n  currentPageReportTemplate: '({currentPage} of {totalPages})',\n  first: 0,\n  rows: null,\n  totalRecords: null,\n  lazy: false,\n  sortField: null,\n  sortOrder: null,\n  multiSortMeta: null,\n  sortMode: 'single',\n  defaultSortOrder: 1,\n  removableSort: false,\n  emptyMessage: null,\n  selectionMode: null,\n  dragSelection: false,\n  cellSelection: false,\n  selection: null,\n  onSelectionChange: null,\n  contextMenuSelection: null,\n  onContextMenuSelectionChange: null,\n  compareSelectionBy: 'deepEquals',\n  dataKey: null,\n  metaKeySelection: true,\n  selectOnEdit: true,\n  selectionPageOnly: false,\n  selectionAutoFocus: true,\n  showSelectAll: true,\n  selectAll: false,\n  onSelectAllChange: null,\n  headerColumnGroup: null,\n  footerColumnGroup: null,\n  rowExpansionTemplate: null,\n  expandedRows: null,\n  onRowToggle: null,\n  resizableColumns: false,\n  columnResizeMode: 'fit',\n  reorderableColumns: false,\n  filters: null,\n  globalFilter: null,\n  filterDelay: 300,\n  filterLocale: undefined,\n  scrollable: false,\n  scrollHeight: null,\n  scrollDirection: 'vertical',\n  virtualScrollerOptions: null,\n  frozenWidth: null,\n  frozenValue: null,\n  csvSeparator: ',',\n  exportFilename: 'download',\n  rowGroupMode: null,\n  autoLayout: false,\n  rowClassName: null,\n  cellClassName: null,\n  rowGroupHeaderTemplate: null,\n  rowGroupFooterTemplate: null,\n  loading: false,\n  loadingIcon: 'pi pi-spinner',\n  tabIndex: 0,\n  stateKey: null,\n  stateStorage: 'session',\n  groupRowsBy: null,\n  editMode: 'cell',\n  editingRows: null,\n  expandableRowGroups: false,\n  rowHover: false,\n  showGridlines: false,\n  stripedRows: false,\n  size: 'normal',\n  responsiveLayout: 'stack',\n  breakpoint: '960px',\n  filterDisplay: 'menu',\n  expandedRowIcon: 'pi pi-chevron-down',\n  collapsedRowIcon: 'pi pi-chevron-right',\n  onRowEditComplete: null,\n  globalFilterFields: null,\n  showSelectionElement: null,\n  showRowReorderElement: null,\n  isDataSelectable: null,\n  onColumnResizeEnd: null,\n  onColumnResizerClick: null,\n  onColumnResizerDoubleClick: null,\n  onSort: null,\n  onPage: null,\n  onFilter: null,\n  onAllRowsSelect: null,\n  onAllRowsUnselect: null,\n  onRowClick: null,\n  onRowDoubleClick: null,\n  onRowSelect: null,\n  onRowUnselect: null,\n  onRowExpand: null,\n  onRowCollapse: null,\n  onContextMenu: null,\n  onColReorder: null,\n  onCellClick: null,\n  onCellSelect: null,\n  onCellUnselect: null,\n  onRowReorder: null,\n  onValueChange: null,\n  rowEditValidator: null,\n  onRowEditInit: null,\n  onRowEditSave: null,\n  onRowEditCancel: null,\n  onRowEditChange: null,\n  exportFunction: null,\n  customSaveState: null,\n  customRestoreState: null,\n  onStateSave: null,\n  onStateRestore: null\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJpbWVyZWFjdC9kYXRhdGFibGUvZGF0YXRhYmxlLmVzbS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QztBQUNRO0FBQ3FGO0FBQzVCO0FBQy9DO0FBQ2hCO0FBQ2M7QUFDZDtBQUNNO0FBQ0Y7QUFDSjtBQUNrQjs7QUFFN0Q7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDRCQUE0QiwrQkFBK0I7QUFDM0Q7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsU0FBUztBQUNsRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVvQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvcHJpbWVyZWFjdC9kYXRhdGFibGUvZGF0YXRhYmxlLmVzbS5qcz84MzlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQYWdpbmF0b3IgfSBmcm9tICdwcmltZXJlYWN0L3BhZ2luYXRvcic7XG5pbXBvcnQgeyBjbGFzc05hbWVzLCBPYmplY3RVdGlscywgRG9tSGFuZGxlciwgWkluZGV4VXRpbHMsIENvbm5lY3RlZE92ZXJsYXlTY3JvbGxIYW5kbGVyLCBVbmlxdWVDb21wb25lbnRJZCB9IGZyb20gJ3ByaW1lcmVhY3QvdXRpbHMnO1xuaW1wb3J0IFByaW1lUmVhY3QsIHsgbG9jYWxlT3B0aW9uLCBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yLCBGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAncHJpbWVyZWFjdC9hcGknO1xuaW1wb3J0IHsgT3ZlcmxheVNlcnZpY2UgfSBmcm9tICdwcmltZXJlYWN0L292ZXJsYXlzZXJ2aWNlJztcbmltcG9ydCB7IFJpcHBsZSB9IGZyb20gJ3ByaW1lcmVhY3QvcmlwcGxlJztcbmltcG9ydCB7IENTU1RyYW5zaXRpb24gfSBmcm9tICdwcmltZXJlYWN0L2Nzc3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgUG9ydGFsIH0gZnJvbSAncHJpbWVyZWFjdC9wb3J0YWwnO1xuaW1wb3J0IHsgSW5wdXRUZXh0IH0gZnJvbSAncHJpbWVyZWFjdC9pbnB1dHRleHQnO1xuaW1wb3J0IHsgRHJvcGRvd24gfSBmcm9tICdwcmltZXJlYWN0L2Ryb3Bkb3duJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ3ByaW1lcmVhY3QvYnV0dG9uJztcbmltcG9ydCB7IFZpcnR1YWxTY3JvbGxlciB9IGZyb20gJ3ByaW1lcmVhY3QvdmlydHVhbHNjcm9sbGVyJztcblxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7XG4gIHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXTtcblxuICBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuO1xuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcblxuICB2YXIgX3MsIF9lO1xuXG4gIHRyeSB7XG4gICAgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykge1xuICAgIGFycjJbaV0gPSBhcnJbaV07XG4gIH1cblxuICByZXR1cm4gYXJyMjtcbn1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcbiAgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTtcbn1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IGl0ZXJbXCJAQGl0ZXJhdG9yXCJdICE9IG51bGwpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwge1xuICAgIHdyaXRhYmxlOiBmYWxzZVxuICB9KTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHtcbiAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBzZWxmO1xufVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgfSwgX3R5cGVvZihvYmopO1xufVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7XG59XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkYyhEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCRjKCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCRjKCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBSb3dSYWRpb0J1dHRvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUm93UmFkaW9CdXR0b24sIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkYyhSb3dSYWRpb0J1dHRvbik7XG5cbiAgZnVuY3Rpb24gUm93UmFkaW9CdXR0b24ocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm93UmFkaW9CdXR0b24pO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBmb2N1c2VkOiBmYWxzZVxuICAgIH07XG4gICAgX3RoaXMub25DbGljayA9IF90aGlzLm9uQ2xpY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Gb2N1cyA9IF90aGlzLm9uRm9jdXMuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25CbHVyID0gX3RoaXMub25CbHVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQ2hhbmdlID0gX3RoaXMub25DaGFuZ2UuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25LZXlEb3duID0gX3RoaXMub25LZXlEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSb3dSYWRpb0J1dHRvbiwgW3tcbiAgICBrZXk6IFwib25DbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICAgIHRoaXMuaW5wdXQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Gb2N1c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGZvY3VzZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkJsdXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGZvY3VzZWQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DaGFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHtcbiAgICAgIHRoaXMub25DbGljayhldmVudCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uS2V5RG93blwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICAgIHRoaXMub25DbGljayhldmVudCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtcmFkaW9idXR0b24gcC1jb21wb25lbnQnLCB7XG4gICAgICAgICdwLXJhZGlvYnV0dG9uLWZvY3VzZWQnOiB0aGlzLnN0YXRlLmZvY3VzZWRcbiAgICAgIH0pO1xuICAgICAgdmFyIGJveENsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtcmFkaW9idXR0b24tYm94IHAtY29tcG9uZW50Jywge1xuICAgICAgICAncC1oaWdobGlnaHQnOiB0aGlzLnByb3BzLmNoZWNrZWQsXG4gICAgICAgICdwLWZvY3VzJzogdGhpcy5zdGF0ZS5mb2N1c2VkLFxuICAgICAgICAncC1kaXNhYmxlZCc6IHRoaXMucHJvcHMuZGlzYWJsZWRcbiAgICAgIH0pO1xuICAgICAgdmFyIG5hbWUgPSBcIlwiLmNvbmNhdCh0aGlzLnByb3BzLnRhYmxlU2VsZWN0b3IsIFwiX2R0X3JhZGlvXCIpO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInAtaGlkZGVuLWFjY2Vzc2libGVcIlxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5pbnB1dCA9IGVsO1xuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBcInJhZGlvXCIsXG4gICAgICAgIGNoZWNrZWQ6IHRoaXMucHJvcHMuY2hlY2tlZCxcbiAgICAgICAgb25Gb2N1czogdGhpcy5vbkZvY3VzLFxuICAgICAgICBvbkJsdXI6IHRoaXMub25CbHVyLFxuICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZSxcbiAgICAgICAgb25LZXlEb3duOiB0aGlzLm9uS2V5RG93blxuICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogYm94Q2xhc3NOYW1lLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLm9uQ2xpY2ssXG4gICAgICAgIHJvbGU6IFwicmFkaW9cIixcbiAgICAgICAgXCJhcmlhLWNoZWNrZWRcIjogdGhpcy5wcm9wcy5jaGVja2VkXG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJwLXJhZGlvYnV0dG9uLWljb25cIlxuICAgICAgfSkpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUm93UmFkaW9CdXR0b247XG59KENvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlciRiKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JGIoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JGIoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxudmFyIFJvd0NoZWNrYm94ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSb3dDaGVja2JveCwgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlciRiKFJvd0NoZWNrYm94KTtcblxuICBmdW5jdGlvbiBSb3dDaGVja2JveChwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3dDaGVja2JveCk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGZvY3VzZWQ6IGZhbHNlXG4gICAgfTtcbiAgICBfdGhpcy5vbkNsaWNrID0gX3RoaXMub25DbGljay5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkZvY3VzID0gX3RoaXMub25Gb2N1cy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkJsdXIgPSBfdGhpcy5vbkJsdXIuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25LZXlEb3duID0gX3RoaXMub25LZXlEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSb3dDaGVja2JveCwgW3tcbiAgICBrZXk6IFwib25DbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgZm9jdXNlZDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRm9jdXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmb2N1c2VkOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25CbHVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmb2N1c2VkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uS2V5RG93blwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICAgIHRoaXMub25DbGljayhldmVudCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1jaGVja2JveCBwLWNvbXBvbmVudCcsIHtcbiAgICAgICAgJ3AtY2hlY2tib3gtZm9jdXNlZCc6IHRoaXMuc3RhdGUuZm9jdXNlZFxuICAgICAgfSk7XG4gICAgICB2YXIgYm94Q2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1jaGVja2JveC1ib3ggcC1jb21wb25lbnQnLCB7XG4gICAgICAgICdwLWhpZ2hsaWdodCc6IHRoaXMucHJvcHMuY2hlY2tlZCxcbiAgICAgICAgJ3AtZGlzYWJsZWQnOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAncC1mb2N1cyc6IHRoaXMuc3RhdGUuZm9jdXNlZFxuICAgICAgfSk7XG4gICAgICB2YXIgaWNvbkNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtY2hlY2tib3gtaWNvbicsIHtcbiAgICAgICAgJ3BpIHBpLWNoZWNrJzogdGhpcy5wcm9wcy5jaGVja2VkXG4gICAgICB9KTtcbiAgICAgIHZhciB0YWJJbmRleCA9IHRoaXMucHJvcHMuZGlzYWJsZWQgPyBudWxsIDogJzAnO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGlja1xuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGJveENsYXNzTmFtZSxcbiAgICAgICAgcm9sZTogXCJjaGVja2JveFwiLFxuICAgICAgICBcImFyaWEtY2hlY2tlZFwiOiB0aGlzLnByb3BzLmNoZWNrZWQsXG4gICAgICAgIHRhYkluZGV4OiB0YWJJbmRleCxcbiAgICAgICAgb25LZXlEb3duOiB0aGlzLm9uS2V5RG93bixcbiAgICAgICAgb25Gb2N1czogdGhpcy5vbkZvY3VzLFxuICAgICAgICBvbkJsdXI6IHRoaXMub25CbHVyXG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IGljb25DbGFzc05hbWVcbiAgICAgIH0pKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJvd0NoZWNrYm94O1xufShDb21wb25lbnQpO1xuXG5mdW5jdGlvbiBvd25LZXlzJDcob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQkNyh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyQ3KE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMkNyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlciRhKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JGEoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JGEoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxudmFyIEJvZHlDZWxsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhCb2R5Q2VsbCwgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlciRhKEJvZHlDZWxsKTtcblxuICBmdW5jdGlvbiBCb2R5Q2VsbChwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCb2R5Q2VsbCk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGVkaXRpbmc6IHByb3BzLmVkaXRpbmcsXG4gICAgICBlZGl0aW5nUm93RGF0YTogcHJvcHMucm93RGF0YSxcbiAgICAgIHN0eWxlT2JqZWN0OiB7fVxuICAgIH07XG4gICAgX3RoaXMub25DbGljayA9IF90aGlzLm9uQ2xpY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Nb3VzZURvd24gPSBfdGhpcy5vbk1vdXNlRG93bi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbk1vdXNlVXAgPSBfdGhpcy5vbk1vdXNlVXAuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25LZXlEb3duID0gX3RoaXMub25LZXlEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQmx1ciA9IF90aGlzLm9uQmx1ci5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkVkaXRvckZvY3VzID0gX3RoaXMub25FZGl0b3JGb2N1cy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vblJvd1RvZ2dsZSA9IF90aGlzLm9uUm93VG9nZ2xlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUmFkaW9DaGFuZ2UgPSBfdGhpcy5vblJhZGlvQ2hhbmdlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQ2hlY2tib3hDaGFuZ2UgPSBfdGhpcy5vbkNoZWNrYm94Q2hhbmdlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93RWRpdFNhdmUgPSBfdGhpcy5vblJvd0VkaXRTYXZlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93RWRpdENhbmNlbCA9IF90aGlzLm9uUm93RWRpdENhbmNlbC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vblJvd0VkaXRJbml0ID0gX3RoaXMub25Sb3dFZGl0SW5pdC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5lZGl0b3JDYWxsYmFjayA9IF90aGlzLmVkaXRvckNhbGxiYWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhCb2R5Q2VsbCwgW3tcbiAgICBrZXk6IFwiZmllbGRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbHVtblByb3AoJ2ZpZWxkJykgfHwgXCJmaWVsZF9cIi5jb25jYXQodGhpcy5wcm9wcy5pbmRleCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzRWRpdGFibGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNFZGl0YWJsZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbHVtblByb3AoJ2VkaXRvcicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1NlbGVjdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2VsZWN0ZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3Rpb24gPyB0aGlzLnByb3BzLnNlbGVjdGlvbiBpbnN0YW5jZW9mIEFycmF5ID8gdGhpcy5maW5kSW5kZXgodGhpcy5wcm9wcy5zZWxlY3Rpb24pID4gLTEgOiB0aGlzLmVxdWFscyh0aGlzLnByb3BzLnNlbGVjdGlvbikgOiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZXF1YWxzRGF0YVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlcXVhbHNEYXRhKGRhdGEpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmNvbXBhcmVTZWxlY3Rpb25CeSA9PT0gJ2VxdWFscycgPyBkYXRhID09PSB0aGlzLnByb3BzLnJvd0RhdGEgOiBPYmplY3RVdGlscy5lcXVhbHMoZGF0YSwgdGhpcy5wcm9wcy5yb3dEYXRhLCB0aGlzLnByb3BzLmRhdGFLZXkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlcXVhbHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXF1YWxzKHNlbGVjdGVkQ2VsbCkge1xuICAgICAgcmV0dXJuIChzZWxlY3RlZENlbGwucm93SW5kZXggPT09IHRoaXMucHJvcHMucm93SW5kZXggfHwgdGhpcy5lcXVhbHNEYXRhKHNlbGVjdGVkQ2VsbC5yb3dEYXRhKSkgJiYgKHNlbGVjdGVkQ2VsbC5maWVsZCA9PT0gdGhpcy5maWVsZCB8fCBzZWxlY3RlZENlbGwuY2VsbEluZGV4ID09PSB0aGlzLnByb3BzLmluZGV4KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNPdXRzaWRlQ2xpY2tlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc091dHNpZGVDbGlja2VkKHRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWwgJiYgISh0aGlzLmVsLmlzU2FtZU5vZGUodGFyZ2V0KSB8fCB0aGlzLmVsLmNvbnRhaW5zKHRhcmdldCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDb2x1bW5Qcm9wXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbHVtblByb3AocHJvcCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY29sdW1uID8gdGhpcy5wcm9wcy5jb2x1bW4ucHJvcHNbcHJvcF0gOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRWaXJ0dWFsU2Nyb2xsZXJPcHRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmlydHVhbFNjcm9sbGVyT3B0aW9uKG9wdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudmlydHVhbFNjcm9sbGVyT3B0aW9ucyA/IHRoaXMucHJvcHMudmlydHVhbFNjcm9sbGVyT3B0aW9uc1tvcHRpb25dIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U3R5bGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3R5bGUoKSB7XG4gICAgICB2YXIgYm9keVN0eWxlID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdib2R5U3R5bGUnKTtcbiAgICAgIHZhciBjb2x1bW5TdHlsZSA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnc3R5bGUnKTtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbHVtblByb3AoJ2Zyb3plbicpID8gT2JqZWN0LmFzc2lnbih7fSwgY29sdW1uU3R5bGUsIGJvZHlTdHlsZSwgdGhpcy5zdGF0ZS5zdHlsZU9iamVjdCkgOiBPYmplY3QuYXNzaWduKHt9LCBjb2x1bW5TdHlsZSwgYm9keVN0eWxlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Q2VsbFBhcmFtc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDZWxsUGFyYW1zKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHRoaXMucmVzb2x2ZUZpZWxkRGF0YSgpLFxuICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgcm93RGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICByb3dJbmRleDogdGhpcy5wcm9wcy5yb3dJbmRleCxcbiAgICAgICAgY2VsbEluZGV4OiB0aGlzLnByb3BzLmluZGV4LFxuICAgICAgICBzZWxlY3RlZDogdGhpcy5pc1NlbGVjdGVkKCksXG4gICAgICAgIGNvbHVtbjogdGhpcy5wcm9wcy5jb2x1bW4sXG4gICAgICAgIHByb3BzOiB0aGlzLnByb3BzXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDZWxsQ2FsbGJhY2tQYXJhbXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2VsbENhbGxiYWNrUGFyYW1zKGV2ZW50KSB7XG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5nZXRDZWxsUGFyYW1zKCk7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZCQ3KHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnRcbiAgICAgIH0sIHBhcmFtcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc29sdmVGaWVsZERhdGFcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZUZpZWxkRGF0YShkYXRhKSB7XG4gICAgICByZXR1cm4gT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShkYXRhIHx8IHRoaXMucHJvcHMucm93RGF0YSwgdGhpcy5maWVsZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEVkaXRpbmdSb3dEYXRhXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEVkaXRpbmdSb3dEYXRhKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZWRpdGluZ01ldGEgJiYgdGhpcy5wcm9wcy5lZGl0aW5nTWV0YVt0aGlzLnByb3BzLnJvd0luZGV4XSA/IHRoaXMucHJvcHMuZWRpdGluZ01ldGFbdGhpcy5wcm9wcy5yb3dJbmRleF0uZGF0YSA6IHRoaXMucHJvcHMucm93RGF0YTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VGFiSW5kZXhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFiSW5kZXgoY2VsbFNlbGVjdGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5hbGxvd0NlbGxTZWxlY3Rpb24gPyBjZWxsU2VsZWN0ZWQgPyAwIDogdGhpcy5wcm9wcy5yb3dJbmRleCA9PT0gMCAmJiB0aGlzLnByb3BzLmluZGV4ID09PSAwID8gdGhpcy5wcm9wcy50YWJJbmRleCA6IC0xIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZEluZGV4XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRJbmRleChjb2xsZWN0aW9uKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgcmV0dXJuIChjb2xsZWN0aW9uIHx8IFtdKS5maW5kSW5kZXgoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5lcXVhbHMoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xvc2VDZWxsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlQ2VsbChldmVudCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLmdldENlbGxDYWxsYmFja1BhcmFtcyhldmVudCk7XG4gICAgICB2YXIgb25CZWZvcmVDZWxsRWRpdEhpZGUgPSB0aGlzLmdldENvbHVtblByb3AoJ29uQmVmb3JlQ2VsbEVkaXRIaWRlJyk7XG5cbiAgICAgIGlmIChvbkJlZm9yZUNlbGxFZGl0SGlkZSkge1xuICAgICAgICBvbkJlZm9yZUNlbGxFZGl0SGlkZShwYXJhbXMpO1xuICAgICAgfVxuICAgICAgLyogV2hlbiB1c2luZyB0aGUgJ3RhYicga2V5LCB0aGUgZm9jdXMgZXZlbnQgb2YgdGhlIG5leHQgY2VsbCBpcyBub3QgY2FsbGVkIGluIElFLiAqL1xuXG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMuc2V0U3RhdGUoe1xuICAgICAgICAgIGVkaXRpbmc6IGZhbHNlXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMudW5iaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXIoKTtcblxuICAgICAgICAgIE92ZXJsYXlTZXJ2aWNlLm9mZignb3ZlcmxheS1jbGljaycsIF90aGlzMy5vdmVybGF5RXZlbnRMaXN0ZW5lcik7XG4gICAgICAgICAgX3RoaXMzLm92ZXJsYXlFdmVudExpc3RlbmVyID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICB9LCAxKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3dpdGNoQ2VsbFRvVmlld01vZGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3dpdGNoQ2VsbFRvVmlld01vZGUoZXZlbnQsIHN1Ym1pdCkge1xuICAgICAgdmFyIGNhbGxiYWNrUGFyYW1zID0gdGhpcy5nZXRDZWxsQ2FsbGJhY2tQYXJhbXMoZXZlbnQpO1xuICAgICAgdmFyIG5ld1Jvd0RhdGEgPSB0aGlzLnN0YXRlLmVkaXRpbmdSb3dEYXRhO1xuICAgICAgdmFyIG5ld1ZhbHVlID0gdGhpcy5yZXNvbHZlRmllbGREYXRhKG5ld1Jvd0RhdGEpO1xuXG4gICAgICB2YXIgcGFyYW1zID0gX29iamVjdFNwcmVhZCQ3KF9vYmplY3RTcHJlYWQkNyh7fSwgY2FsbGJhY2tQYXJhbXMpLCB7fSwge1xuICAgICAgICBuZXdSb3dEYXRhOiBuZXdSb3dEYXRhLFxuICAgICAgICBuZXdWYWx1ZTogbmV3VmFsdWVcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgb25DZWxsRWRpdENhbmNlbCA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnb25DZWxsRWRpdENhbmNlbCcpO1xuICAgICAgdmFyIGNlbGxFZGl0VmFsaWRhdG9yID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdjZWxsRWRpdFZhbGlkYXRvcicpO1xuICAgICAgdmFyIG9uQ2VsbEVkaXRDb21wbGV0ZSA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnb25DZWxsRWRpdENvbXBsZXRlJyk7XG5cbiAgICAgIGlmICghc3VibWl0ICYmIG9uQ2VsbEVkaXRDYW5jZWwpIHtcbiAgICAgICAgb25DZWxsRWRpdENhbmNlbChwYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuXG4gICAgICBpZiAoY2VsbEVkaXRWYWxpZGF0b3IpIHtcbiAgICAgICAgdmFsaWQgPSBjZWxsRWRpdFZhbGlkYXRvcihwYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgaWYgKHN1Ym1pdCAmJiBvbkNlbGxFZGl0Q29tcGxldGUpIHtcbiAgICAgICAgICBvbkNlbGxFZGl0Q29tcGxldGUocGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2xvc2VDZWxsKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbmROZXh0U2VsZWN0YWJsZUNlbGxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZE5leHRTZWxlY3RhYmxlQ2VsbChjZWxsKSB7XG4gICAgICB2YXIgbmV4dENlbGwgPSBjZWxsLm5leHRFbGVtZW50U2libGluZztcbiAgICAgIHJldHVybiBuZXh0Q2VsbCA/IERvbUhhbmRsZXIuaGFzQ2xhc3MobmV4dENlbGwsICdwLXNlbGVjdGFibGUtY2VsbCcpID8gbmV4dENlbGwgOiB0aGlzLmZpbmROZXh0U2VsZWN0YWJsZUNlbGwobmV4dENlbGwpIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZFByZXZTZWxlY3RhYmxlQ2VsbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kUHJldlNlbGVjdGFibGVDZWxsKGNlbGwpIHtcbiAgICAgIHZhciBwcmV2Q2VsbCA9IGNlbGwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgIHJldHVybiBwcmV2Q2VsbCA/IERvbUhhbmRsZXIuaGFzQ2xhc3MocHJldkNlbGwsICdwLXNlbGVjdGFibGUtY2VsbCcpID8gcHJldkNlbGwgOiB0aGlzLmZpbmRQcmV2U2VsZWN0YWJsZUNlbGwocHJldkNlbGwpIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZERvd25TZWxlY3RhYmxlQ2VsbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kRG93blNlbGVjdGFibGVDZWxsKGNlbGwpIHtcbiAgICAgIHZhciBkb3duUm93ID0gY2VsbC5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgIHZhciBkb3duQ2VsbCA9IGRvd25Sb3cgPyBkb3duUm93LmNoaWxkcmVuW3RoaXMucHJvcHMuaW5kZXhdIDogbnVsbDtcbiAgICAgIHJldHVybiBkb3duUm93ICYmIGRvd25DZWxsID8gRG9tSGFuZGxlci5oYXNDbGFzcyhkb3duUm93LCAncC1zZWxlY3RhYmxlLXJvdycpICYmIERvbUhhbmRsZXIuaGFzQ2xhc3MoZG93bkNlbGwsICdwLXNlbGVjdGFibGUtY2VsbCcpID8gZG93bkNlbGwgOiB0aGlzLmZpbmREb3duU2VsZWN0YWJsZUNlbGwoZG93bkNlbGwpIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZFVwU2VsZWN0YWJsZUNlbGxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZFVwU2VsZWN0YWJsZUNlbGwoY2VsbCkge1xuICAgICAgdmFyIHVwUm93ID0gY2VsbC5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICB2YXIgdXBDZWxsID0gdXBSb3cgPyB1cFJvdy5jaGlsZHJlblt0aGlzLnByb3BzLmluZGV4XSA6IG51bGw7XG4gICAgICByZXR1cm4gdXBSb3cgJiYgdXBDZWxsID8gRG9tSGFuZGxlci5oYXNDbGFzcyh1cFJvdywgJ3Atc2VsZWN0YWJsZS1yb3cnKSAmJiBEb21IYW5kbGVyLmhhc0NsYXNzKHVwQ2VsbCwgJ3Atc2VsZWN0YWJsZS1jZWxsJykgPyB1cENlbGwgOiB0aGlzLmZpbmRVcFNlbGVjdGFibGVDZWxsKHVwQ2VsbCkgOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjaGFuZ2VUYWJJbmRleFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VUYWJJbmRleChjdXJyZW50Q2VsbCwgbmV4dENlbGwpIHtcbiAgICAgIGlmIChjdXJyZW50Q2VsbCAmJiBuZXh0Q2VsbCkge1xuICAgICAgICBjdXJyZW50Q2VsbC50YWJJbmRleCA9IC0xO1xuICAgICAgICBuZXh0Q2VsbC50YWJJbmRleCA9IHRoaXMucHJvcHMudGFiSW5kZXg7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZvY3VzT25FbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZvY3VzT25FbGVtZW50KCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRhYmluZGV4VGltZW91dCk7XG4gICAgICB0aGlzLnRhYmluZGV4VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXM0LnN0YXRlLmVkaXRpbmcpIHtcbiAgICAgICAgICB2YXIgZm9jdXNhYmxlRWwgPSBfdGhpczQucHJvcHMuZWRpdE1vZGUgPT09ICdjZWxsJyA/IERvbUhhbmRsZXIuZ2V0Rmlyc3RGb2N1c2FibGVFbGVtZW50KF90aGlzNC5lbCwgJzpub3QoLnAtY2VsbC1lZGl0b3Ita2V5LWhlbHBlciknKSA6IERvbUhhbmRsZXIuZmluZFNpbmdsZShfdGhpczQuZWwsICcucC1yb3ctZWRpdG9yLXNhdmUnKTtcbiAgICAgICAgICBmb2N1c2FibGVFbCAmJiBmb2N1c2FibGVFbC5mb2N1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXM0LmtleUhlbHBlciAmJiAoX3RoaXM0LmtleUhlbHBlci50YWJJbmRleCA9IF90aGlzNC5zdGF0ZS5lZGl0aW5nID8gLTEgOiAwKTtcbiAgICAgIH0sIDEpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmb2N1c09uSW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmb2N1c09uSW5pdCgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5pbml0Rm9jdXNUaW1lb3V0KTtcbiAgICAgIHRoaXMuaW5pdEZvY3VzVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm9jdXNhYmxlRWwgPSBfdGhpczUucHJvcHMuZWRpdE1vZGUgPT09ICdyb3cnID8gRG9tSGFuZGxlci5maW5kU2luZ2xlKF90aGlzNS5lbCwgJy5wLXJvdy1lZGl0b3ItaW5pdCcpIDogbnVsbDtcbiAgICAgICAgZm9jdXNhYmxlRWwgJiYgZm9jdXNhYmxlRWwuZm9jdXMoKTtcbiAgICAgIH0sIDEpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVTdGlja3lQb3NpdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTdGlja3lQb3NpdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmdldENvbHVtblByb3AoJ2Zyb3plbicpKSB7XG4gICAgICAgIHZhciBzdHlsZU9iamVjdCA9IF9vYmplY3RTcHJlYWQkNyh7fSwgdGhpcy5zdGF0ZS5zdHlsZU9iamVjdCk7XG5cbiAgICAgICAgdmFyIGFsaWduID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdhbGlnbkZyb3plbicpO1xuXG4gICAgICAgIGlmIChhbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIHZhciByaWdodCA9IDA7XG4gICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICByaWdodCA9IERvbUhhbmRsZXIuZ2V0T3V0ZXJXaWR0aChuZXh0KSArIHBhcnNlRmxvYXQobmV4dC5zdHlsZS5yaWdodCB8fCAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdHlsZU9iamVjdFsncmlnaHQnXSA9IHJpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgbGVmdCA9IDA7XG4gICAgICAgICAgdmFyIHByZXYgPSB0aGlzLmVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgICBpZiAocHJldikge1xuICAgICAgICAgICAgbGVmdCA9IERvbUhhbmRsZXIuZ2V0T3V0ZXJXaWR0aChwcmV2KSArIHBhcnNlRmxvYXQocHJldi5zdHlsZS5sZWZ0IHx8IDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0eWxlT2JqZWN0WydsZWZ0J10gPSBsZWZ0ICsgJ3B4JztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc1NhbWVTdHlsZSA9IHRoaXMuc3RhdGUuc3R5bGVPYmplY3RbJ2xlZnQnXSA9PT0gc3R5bGVPYmplY3RbJ2xlZnQnXSAmJiB0aGlzLnN0YXRlLnN0eWxlT2JqZWN0WydyaWdodCddID09PSBzdHlsZU9iamVjdFsncmlnaHQnXTtcbiAgICAgICAgIWlzU2FtZVN0eWxlICYmIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHN0eWxlT2JqZWN0OiBzdHlsZU9iamVjdFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZWRpdG9yQ2FsbGJhY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZWRpdG9yQ2FsbGJhY2sodmFsKSB7XG4gICAgICB2YXIgZWRpdGluZ1Jvd0RhdGEgPSBfb2JqZWN0U3ByZWFkJDcoe30sIHRoaXMuc3RhdGUuZWRpdGluZ1Jvd0RhdGEpO1xuXG4gICAgICBlZGl0aW5nUm93RGF0YVt0aGlzLmZpZWxkXSA9IHZhbDtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBlZGl0aW5nUm93RGF0YTogZWRpdGluZ1Jvd0RhdGFcbiAgICAgIH0pOyAvLyB1cGRhdGUgZWRpdGluZyBtZXRhIGZvciBjb21wbGV0ZSBtZXRob2RzIG9uIHJvdyBtb2RlXG5cbiAgICAgIHRoaXMucHJvcHMuZWRpdGluZ01ldGFbdGhpcy5wcm9wcy5yb3dJbmRleF0uZGF0YVt0aGlzLmZpZWxkXSA9IHZhbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMuZ2V0Q2VsbENhbGxiYWNrUGFyYW1zKGV2ZW50KTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMuZWRpdE1vZGUgIT09ICdyb3cnICYmIHRoaXMuaXNFZGl0YWJsZSgpICYmICF0aGlzLnN0YXRlLmVkaXRpbmcgJiYgKHRoaXMucHJvcHMuc2VsZWN0T25FZGl0IHx8ICF0aGlzLnByb3BzLnNlbGVjdE9uRWRpdCAmJiB0aGlzLnByb3BzLnNlbGVjdGVkKSkge1xuICAgICAgICB0aGlzLnNlbGZDbGljayA9IHRydWU7XG4gICAgICAgIHZhciBvbkJlZm9yZUNlbGxFZGl0U2hvdyA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnb25CZWZvcmVDZWxsRWRpdFNob3cnKTtcbiAgICAgICAgdmFyIG9uQ2VsbEVkaXRJbml0ID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdvbkNlbGxFZGl0SW5pdCcpO1xuICAgICAgICB2YXIgY2VsbEVkaXRWYWxpZGF0b3JFdmVudCA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnY2VsbEVkaXRWYWxpZGF0b3JFdmVudCcpO1xuXG4gICAgICAgIGlmIChvbkJlZm9yZUNlbGxFZGl0U2hvdykge1xuICAgICAgICAgIG9uQmVmb3JlQ2VsbEVkaXRTaG93KHBhcmFtcyk7XG4gICAgICAgIH0gLy8gSWYgdGhlIGRhdGEgaXMgc29ydGVkIHVzaW5nIHNvcnQgaWNvbiwgaXQgaGFzIGJlZW4gYWRkZWQgdG8gd2FpdCBmb3IgdGhlIHNvcnQgb3BlcmF0aW9uIHdoZW4gYW55IGNlbGwgaXMgd2FudGVkIHRvIGJlIG9wZW5lZC5cblxuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzNi5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBlZGl0aW5nOiB0cnVlXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG9uQ2VsbEVkaXRJbml0KSB7XG4gICAgICAgICAgICAgIG9uQ2VsbEVkaXRJbml0KHBhcmFtcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjZWxsRWRpdFZhbGlkYXRvckV2ZW50ID09PSAnY2xpY2snKSB7XG4gICAgICAgICAgICAgIF90aGlzNi5iaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXIoKTtcblxuICAgICAgICAgICAgICBfdGhpczYub3ZlcmxheUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXM2LmlzT3V0c2lkZUNsaWNrZWQoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICBfdGhpczYuc2VsZkNsaWNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgT3ZlcmxheVNlcnZpY2Uub24oJ292ZXJsYXktY2xpY2snLCBfdGhpczYub3ZlcmxheUV2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMuYWxsb3dDZWxsU2VsZWN0aW9uICYmIHRoaXMucHJvcHMub25DbGljaykge1xuICAgICAgICB0aGlzLnByb3BzLm9uQ2xpY2socGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Nb3VzZURvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLmdldENlbGxDYWxsYmFja1BhcmFtcyhldmVudCk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uTW91c2VEb3duKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Nb3VzZURvd24ocGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Nb3VzZVVwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uTW91c2VVcChldmVudCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMuZ2V0Q2VsbENhbGxiYWNrUGFyYW1zKGV2ZW50KTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMub25Nb3VzZVVwKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Nb3VzZVVwKHBhcmFtcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uS2V5RG93blwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRNb2RlICE9PSAncm93Jykge1xuICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzIHx8IGV2ZW50LndoaWNoID09PSA5KSB7XG4gICAgICAgICAgLy8gdGFiIHx8IGVudGVyXG4gICAgICAgICAgdGhpcy5zd2l0Y2hDZWxsVG9WaWV3TW9kZShldmVudCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDI3KSB7XG4gICAgICAgICAgLy8gZXNjYXBlXG4gICAgICAgICAgdGhpcy5zd2l0Y2hDZWxsVG9WaWV3TW9kZShldmVudCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmFsbG93Q2VsbFNlbGVjdGlvbikge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgY2VsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAgICAgc3dpdGNoIChldmVudC53aGljaCkge1xuICAgICAgICAgIC8vbGVmdCBhcnJvd1xuICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICB2YXIgcHJldkNlbGwgPSB0aGlzLmZpbmRQcmV2U2VsZWN0YWJsZUNlbGwoY2VsbCk7XG5cbiAgICAgICAgICAgIGlmIChwcmV2Q2VsbCkge1xuICAgICAgICAgICAgICB0aGlzLmNoYW5nZVRhYkluZGV4KGNlbGwsIHByZXZDZWxsKTtcbiAgICAgICAgICAgICAgcHJldkNlbGwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIC8vcmlnaHQgYXJyb3dcblxuICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICB2YXIgbmV4dENlbGwgPSB0aGlzLmZpbmROZXh0U2VsZWN0YWJsZUNlbGwoY2VsbCk7XG5cbiAgICAgICAgICAgIGlmIChuZXh0Q2VsbCkge1xuICAgICAgICAgICAgICB0aGlzLmNoYW5nZVRhYkluZGV4KGNlbGwsIG5leHRDZWxsKTtcbiAgICAgICAgICAgICAgbmV4dENlbGwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIC8vdXAgYXJyb3dcblxuICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICB2YXIgdXBDZWxsID0gdGhpcy5maW5kVXBTZWxlY3RhYmxlQ2VsbChjZWxsKTtcblxuICAgICAgICAgICAgaWYgKHVwQ2VsbCkge1xuICAgICAgICAgICAgICB0aGlzLmNoYW5nZVRhYkluZGV4KGNlbGwsIHVwQ2VsbCk7XG4gICAgICAgICAgICAgIHVwQ2VsbC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgLy9kb3duIGFycm93XG5cbiAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgdmFyIGRvd25DZWxsID0gdGhpcy5maW5kRG93blNlbGVjdGFibGVDZWxsKGNlbGwpO1xuXG4gICAgICAgICAgICBpZiAoZG93bkNlbGwpIHtcbiAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VUYWJJbmRleChjZWxsLCBkb3duQ2VsbCk7XG4gICAgICAgICAgICAgIGRvd25DZWxsLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAvL2VudGVyXG5cbiAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgLy8gQGRlcHJlY2F0ZWRcbiAgICAgICAgICAgIGlmICghRG9tSGFuZGxlci5pc0NsaWNrYWJsZSh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHRoaXMub25DbGljayhldmVudCk7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIC8vc3BhY2VcblxuICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICBpZiAoIURvbUhhbmRsZXIuaXNDbGlja2FibGUodGFyZ2V0KSAmJiAhdGFyZ2V0LnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgIHRoaXMub25DbGljayhldmVudCk7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQmx1clwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoZXZlbnQpIHtcbiAgICAgIHRoaXMuc2VsZkNsaWNrID0gZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRNb2RlICE9PSAncm93JyAmJiB0aGlzLnN0YXRlLmVkaXRpbmcgJiYgdGhpcy5nZXRDb2x1bW5Qcm9wKCdjZWxsRWRpdFZhbGlkYXRvckV2ZW50JykgPT09ICdibHVyJykge1xuICAgICAgICB0aGlzLnN3aXRjaENlbGxUb1ZpZXdNb2RlKGV2ZW50LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25FZGl0b3JGb2N1c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkVkaXRvckZvY3VzKGV2ZW50KSB7XG4gICAgICB0aGlzLm9uQ2xpY2soZXZlbnQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJhZGlvQ2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmFkaW9DaGFuZ2UoZXZlbnQpIHtcbiAgICAgIHRoaXMucHJvcHMub25SYWRpb0NoYW5nZSh7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgIGluZGV4OiB0aGlzLnByb3BzLnJvd0luZGV4XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DaGVja2JveENoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoZWNrYm94Q2hhbmdlKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hlY2tib3hDaGFuZ2Uoe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICBpbmRleDogdGhpcy5wcm9wcy5yb3dJbmRleFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93VG9nZ2xlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93VG9nZ2xlKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93VG9nZ2xlKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMucHJvcHMucm93RGF0YVxuICAgICAgfSk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJvd0VkaXRJbml0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93RWRpdEluaXQoZXZlbnQpIHtcbiAgICAgIHRoaXMucHJvcHMub25Sb3dFZGl0SW5pdCh7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgIG5ld0RhdGE6IHRoaXMuZ2V0RWRpdGluZ1Jvd0RhdGEoKSxcbiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgIGluZGV4OiB0aGlzLnByb3BzLnJvd0luZGV4XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dFZGl0U2F2ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJvd0VkaXRTYXZlKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93RWRpdFNhdmUoe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICBuZXdEYXRhOiB0aGlzLmdldEVkaXRpbmdSb3dEYXRhKCksXG4gICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkLFxuICAgICAgICBpbmRleDogdGhpcy5wcm9wcy5yb3dJbmRleFxuICAgICAgfSk7XG4gICAgICB0aGlzLmZvY3VzT25Jbml0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93RWRpdENhbmNlbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJvd0VkaXRDYW5jZWwoZXZlbnQpIHtcbiAgICAgIHRoaXMucHJvcHMub25Sb3dFZGl0Q2FuY2VsKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMucHJvcHMucm93RGF0YSxcbiAgICAgICAgbmV3RGF0YTogdGhpcy5nZXRFZGl0aW5nUm93RGF0YSgpLFxuICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMucm93SW5kZXhcbiAgICAgIH0pO1xuICAgICAgdGhpcy5mb2N1c09uSW5pdCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmluZERvY3VtZW50RWRpdExpc3RlbmVyKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5kb2N1bWVudEVkaXRMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmRvY3VtZW50RWRpdExpc3RlbmVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoIV90aGlzNy5zZWxmQ2xpY2sgJiYgX3RoaXM3LmlzT3V0c2lkZUNsaWNrZWQoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICBfdGhpczcuc3dpdGNoQ2VsbFRvVmlld01vZGUoZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXM3LnNlbGZDbGljayA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5kb2N1bWVudEVkaXRMaXN0ZW5lciwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVuYmluZERvY3VtZW50RWRpdExpc3RlbmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVuYmluZERvY3VtZW50RWRpdExpc3RlbmVyKCkge1xuICAgICAgaWYgKHRoaXMuZG9jdW1lbnRFZGl0TGlzdGVuZXIpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRvY3VtZW50RWRpdExpc3RlbmVyLCB0cnVlKTtcbiAgICAgICAgdGhpcy5kb2N1bWVudEVkaXRMaXN0ZW5lciA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VsZkNsaWNrID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKHRoaXMuZ2V0Q29sdW1uUHJvcCgnZnJvemVuJykpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTdGlja3lQb3NpdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdmcm96ZW4nKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0aWNreVBvc2l0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRNb2RlID09PSAnY2VsbCcgfHwgdGhpcy5wcm9wcy5lZGl0TW9kZSA9PT0gJ3JvdycpIHtcbiAgICAgICAgdGhpcy5mb2N1c09uRWxlbWVudCgpO1xuXG4gICAgICAgIGlmIChwcmV2UHJvcHMuZWRpdGluZ01ldGEgIT09IHRoaXMucHJvcHMuZWRpdGluZ01ldGEpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVkaXRpbmdSb3dEYXRhOiB0aGlzLmdldEVkaXRpbmdSb3dEYXRhKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcmV2U3RhdGUuZWRpdGluZyAhPT0gdGhpcy5zdGF0ZS5lZGl0aW5nKSB7XG4gICAgICAgICAgdmFyIGNhbGxiYWNrUGFyYW1zID0gdGhpcy5nZXRDZWxsQ2FsbGJhY2tQYXJhbXMoKTtcblxuICAgICAgICAgIHZhciBwYXJhbXMgPSBfb2JqZWN0U3ByZWFkJDcoX29iamVjdFNwcmVhZCQ3KHt9LCBjYWxsYmFja1BhcmFtcyksIHt9LCB7XG4gICAgICAgICAgICBlZGl0aW5nOiB0aGlzLnN0YXRlLmVkaXRpbmdcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMucHJvcHMub25FZGl0aW5nTWV0YUNoYW5nZShwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy51bmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpO1xuXG4gICAgICBpZiAodGhpcy5vdmVybGF5RXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBPdmVybGF5U2VydmljZS5vZmYoJ292ZXJsYXktY2xpY2snLCB0aGlzLm92ZXJsYXlFdmVudExpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5vdmVybGF5RXZlbnRMaXN0ZW5lciA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlckxvYWRpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyTG9hZGluZygpIHtcbiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5nZXRWaXJ0dWFsU2Nyb2xsZXJPcHRpb24oJ2dldExvYWRlck9wdGlvbnMnKSh0aGlzLnByb3BzLnJvd0luZGV4LCB7XG4gICAgICAgIGNlbGxJbmRleDogdGhpcy5wcm9wcy5pbmRleCxcbiAgICAgICAgY2VsbEZpcnN0OiB0aGlzLnByb3BzLmluZGV4ID09PSAwLFxuICAgICAgICBjZWxsTGFzdDogdGhpcy5wcm9wcy5pbmRleCA9PT0gdGhpcy5nZXRWaXJ0dWFsU2Nyb2xsZXJPcHRpb24oJ2NvbHVtbnMnKS5sZW5ndGggLSAxLFxuICAgICAgICBjZWxsRXZlbjogdGhpcy5wcm9wcy5pbmRleCAlIDIgPT09IDAsXG4gICAgICAgIGNlbGxPZGQ6IHRoaXMucHJvcHMuaW5kZXggJSAyICE9PSAwLFxuICAgICAgICBjb2x1bW46IHRoaXMucHJvcHMuY29sdW1uLFxuICAgICAgICBmaWVsZDogdGhpcy5maWVsZFxuICAgICAgfSk7XG4gICAgICB2YXIgY29udGVudCA9IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQodGhpcy5nZXRWaXJ0dWFsU2Nyb2xsZXJPcHRpb24oJ2xvYWRpbmdUZW1wbGF0ZScpLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRkXCIsIG51bGwsIGNvbnRlbnQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJFbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckVsZW1lbnQoKSB7XG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgdmFyIGNvbnRlbnQsIGVkaXRvcktleUhlbHBlcjtcbiAgICAgIHZhciBjZWxsU2VsZWN0ZWQgPSB0aGlzLnByb3BzLmFsbG93Q2VsbFNlbGVjdGlvbiAmJiB0aGlzLmlzU2VsZWN0ZWQoKTtcbiAgICAgIHZhciBpc1Jvd0VkaXRvciA9IHRoaXMucHJvcHMuZWRpdE1vZGUgPT09ICdyb3cnO1xuICAgICAgdmFyIHRhYkluZGV4ID0gdGhpcy5nZXRUYWJJbmRleChjZWxsU2VsZWN0ZWQpO1xuICAgICAgdmFyIHNlbGVjdGlvbk1vZGUgPSB0aGlzLmdldENvbHVtblByb3AoJ3NlbGVjdGlvbk1vZGUnKTtcbiAgICAgIHZhciByb3dSZW9yZGVyID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdyb3dSZW9yZGVyJyk7XG4gICAgICB2YXIgZXhwYW5kZXIgPSB0aGlzLmdldENvbHVtblByb3AoJ2V4cGFuZGVyJyk7XG4gICAgICB2YXIgcm93RWRpdG9yID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdyb3dFZGl0b3InKTtcbiAgICAgIHZhciBoZWFkZXIgPSB0aGlzLmdldENvbHVtblByb3AoJ2hlYWRlcicpO1xuICAgICAgdmFyIGJvZHkgPSB0aGlzLmdldENvbHVtblByb3AoJ2JvZHknKTtcbiAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmdldENvbHVtblByb3AoJ2VkaXRvcicpO1xuICAgICAgdmFyIGZyb3plbiA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnZnJvemVuJyk7XG4gICAgICB2YXIgYWxpZ24gPSB0aGlzLmdldENvbHVtblByb3AoJ2FsaWduJyk7XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLnJlc29sdmVGaWVsZERhdGEoKTtcbiAgICAgIHZhciBjZWxsQ2xhc3NOYW1lID0gT2JqZWN0VXRpbHMuZ2V0UHJvcFZhbHVlKHRoaXMucHJvcHMuY2VsbENsYXNzTmFtZSwgdmFsdWUsIHtcbiAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMudGFibGVQcm9wcyxcbiAgICAgICAgcm93RGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICBjb2x1bW46IHRoaXMucHJvcHMuY29sdW1uXG4gICAgICB9KTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKHRoaXMuZ2V0Q29sdW1uUHJvcCgnYm9keUNsYXNzTmFtZScpLCB0aGlzLmdldENvbHVtblByb3AoJ2NsYXNzTmFtZScpLCBjZWxsQ2xhc3NOYW1lLCBfZGVmaW5lUHJvcGVydHkoe1xuICAgICAgICAncC1zZWxlY3Rpb24tY29sdW1uJzogc2VsZWN0aW9uTW9kZSAhPT0gbnVsbCxcbiAgICAgICAgJ3AtZWRpdGFibGUtY29sdW1uJzogZWRpdG9yLFxuICAgICAgICAncC1jZWxsLWVkaXRpbmcnOiBlZGl0b3IgJiYgdGhpcy5zdGF0ZS5lZGl0aW5nLFxuICAgICAgICAncC1mcm96ZW4tY29sdW1uJzogZnJvemVuLFxuICAgICAgICAncC1zZWxlY3RhYmxlLWNlbGwnOiB0aGlzLnByb3BzLmFsbG93Q2VsbFNlbGVjdGlvbiAmJiB0aGlzLnByb3BzLmlzU2VsZWN0YWJsZSh7XG4gICAgICAgICAgZGF0YTogdGhpcy5nZXRDZWxsUGFyYW1zKCksXG4gICAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMucm93SW5kZXhcbiAgICAgICAgfSksXG4gICAgICAgICdwLWhpZ2hsaWdodCc6IGNlbGxTZWxlY3RlZFxuICAgICAgfSwgXCJwLWFsaWduLVwiLmNvbmNhdChhbGlnbiksICEhYWxpZ24pKTtcbiAgICAgIHZhciBzdHlsZSA9IHRoaXMuZ2V0U3R5bGUoKTtcbiAgICAgIHZhciB0aXRsZSA9IHRoaXMucHJvcHMucmVzcG9uc2l2ZUxheW91dCA9PT0gJ3N0YWNrJyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicC1jb2x1bW4tdGl0bGVcIlxuICAgICAgfSwgT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudChoZWFkZXIsIHtcbiAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMudGFibGVQcm9wc1xuICAgICAgfSkpO1xuXG4gICAgICBpZiAoc2VsZWN0aW9uTW9kZSkge1xuICAgICAgICB2YXIgc2hvd1NlbGVjdGlvbiA9IHRoaXMucHJvcHMuc2hvd1NlbGVjdGlvbkVsZW1lbnQgPyB0aGlzLnByb3BzLnNob3dTZWxlY3Rpb25FbGVtZW50KHRoaXMucHJvcHMucm93RGF0YSwge1xuICAgICAgICAgIHJvd0luZGV4OiB0aGlzLnByb3BzLnJvd0luZGV4LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzLnRhYmxlUHJvcHNcbiAgICAgICAgfSkgOiB0cnVlO1xuICAgICAgICBjb250ZW50ID0gc2hvd1NlbGVjdGlvbiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgc2VsZWN0aW9uTW9kZSA9PT0gJ3NpbmdsZScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUm93UmFkaW9CdXR0b24sIHtcbiAgICAgICAgICBjaGVja2VkOiB0aGlzLnByb3BzLnNlbGVjdGVkLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uUmFkaW9DaGFuZ2UsXG4gICAgICAgICAgdGFiSW5kZXg6IHRoaXMucHJvcHMudGFiSW5kZXgsXG4gICAgICAgICAgdGFibGVTZWxlY3RvcjogdGhpcy5wcm9wcy50YWJsZVNlbGVjdG9yXG4gICAgICAgIH0pLCBzZWxlY3Rpb25Nb2RlID09PSAnbXVsdGlwbGUnICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJvd0NoZWNrYm94LCB7XG4gICAgICAgICAgY2hlY2tlZDogdGhpcy5wcm9wcy5zZWxlY3RlZCxcbiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoZWNrYm94Q2hhbmdlLFxuICAgICAgICAgIHRhYkluZGV4OiB0aGlzLnByb3BzLnRhYkluZGV4XG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSBpZiAocm93UmVvcmRlcikge1xuICAgICAgICB2YXIgc2hvd1Jlb3JkZXIgPSB0aGlzLnByb3BzLnNob3dSb3dSZW9yZGVyRWxlbWVudCA/IHRoaXMucHJvcHMuc2hvd1Jvd1Jlb3JkZXJFbGVtZW50KHRoaXMucHJvcHMucm93RGF0YSwge1xuICAgICAgICAgIHJvd0luZGV4OiB0aGlzLnByb3BzLnJvd0luZGV4LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzLnRhYmxlUHJvcHNcbiAgICAgICAgfSkgOiB0cnVlO1xuICAgICAgICBjb250ZW50ID0gc2hvd1Jlb3JkZXIgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpXCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ3AtZGF0YXRhYmxlLXJlb3JkZXJhYmxlcm93LWhhbmRsZScsIHRoaXMuZ2V0Q29sdW1uUHJvcCgncm93UmVvcmRlckljb24nKSlcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGV4cGFuZGVyKSB7XG4gICAgICAgIHZhciBpY29uQ2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1yb3ctdG9nZ2xlci1pY29uJywgdGhpcy5wcm9wcy5leHBhbmRlZCA/IHRoaXMucHJvcHMuZXhwYW5kZWRSb3dJY29uIDogdGhpcy5wcm9wcy5jb2xsYXBzZWRSb3dJY29uKTtcbiAgICAgICAgdmFyIGFyaWFDb250cm9scyA9IFwiXCIuY29uY2F0KHRoaXMucHJvcHMudGFibGVTZWxlY3RvciwgXCJfY29udGVudF9cIikuY29uY2F0KHRoaXMucHJvcHMucm93SW5kZXgsIFwiX2V4cGFuZGVkXCIpO1xuICAgICAgICB2YXIgZXhwYW5kZXJQcm9wcyA9IHtcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9uUm93VG9nZ2xlLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ3Atcm93LXRvZ2dsZXIgcC1saW5rJyxcbiAgICAgICAgICBpY29uQ2xhc3NOYW1lOiBpY29uQ2xhc3NOYW1lXG4gICAgICAgIH07XG4gICAgICAgIGNvbnRlbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBleHBhbmRlclByb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBvbkNsaWNrOiBleHBhbmRlclByb3BzLm9uQ2xpY2ssXG4gICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICBcImFyaWEtZXhwYW5kZWRcIjogdGhpcy5wcm9wcy5leHBhbmRlZCxcbiAgICAgICAgICBcImFyaWEtY29udHJvbHNcIjogYXJpYUNvbnRyb2xzLFxuICAgICAgICAgIHRhYkluZGV4OiB0aGlzLnByb3BzLnRhYkluZGV4XG4gICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBleHBhbmRlclByb3BzLmljb25DbGFzc05hbWVcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJpcHBsZSwgbnVsbCkpO1xuXG4gICAgICAgIGlmIChib2R5KSB7XG4gICAgICAgICAgZXhwYW5kZXJQcm9wc1snZWxlbWVudCddID0gY29udGVudDtcbiAgICAgICAgICBjb250ZW50ID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudChib2R5LCB0aGlzLnByb3BzLnJvd0RhdGEsIHtcbiAgICAgICAgICAgIGNvbHVtbjogdGhpcy5wcm9wcy5jb2x1bW4sXG4gICAgICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgICAgIHJvd0luZGV4OiB0aGlzLnByb3BzLnJvd0luZGV4LFxuICAgICAgICAgICAgZnJvemVuUm93OiB0aGlzLnByb3BzLmZyb3plblJvdyxcbiAgICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzLnRhYmxlUHJvcHMsXG4gICAgICAgICAgICBleHBhbmRlcjogZXhwYW5kZXJQcm9wc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzUm93RWRpdG9yICYmIHJvd0VkaXRvcikge1xuICAgICAgICB2YXIgcm93RWRpdG9yUHJvcHMgPSB7fTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nKSB7XG4gICAgICAgICAgcm93RWRpdG9yUHJvcHMgPSB7XG4gICAgICAgICAgICBlZGl0aW5nOiB0cnVlLFxuICAgICAgICAgICAgb25TYXZlQ2xpY2s6IHRoaXMub25Sb3dFZGl0U2F2ZSxcbiAgICAgICAgICAgIHNhdmVDbGFzc05hbWU6ICdwLXJvdy1lZGl0b3Itc2F2ZSBwLWxpbmsnLFxuICAgICAgICAgICAgc2F2ZUljb25DbGFzc05hbWU6ICdwLXJvdy1lZGl0b3Itc2F2ZS1pY29uIHBpIHBpLWZ3IHBpLWNoZWNrJyxcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2xpY2s6IHRoaXMub25Sb3dFZGl0Q2FuY2VsLFxuICAgICAgICAgICAgY2FuY2VsQ2xhc3NOYW1lOiAncC1yb3ctZWRpdG9yLWNhbmNlbCBwLWxpbmsnLFxuICAgICAgICAgICAgY2FuY2VsSWNvbkNsYXNzTmFtZTogJ3Atcm93LWVkaXRvci1jYW5jZWwtaWNvbiBwaSBwaS1mdyBwaS10aW1lcydcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnRlbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgIG9uQ2xpY2s6IHJvd0VkaXRvclByb3BzLm9uU2F2ZUNsaWNrLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiByb3dFZGl0b3JQcm9wcy5zYXZlQ2xhc3NOYW1lLFxuICAgICAgICAgICAgdGFiSW5kZXg6IHRoaXMucHJvcHMudGFiSW5kZXhcbiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiByb3dFZGl0b3JQcm9wcy5zYXZlSWNvbkNsYXNzTmFtZVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSaXBwbGUsIG51bGwpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgIG9uQ2xpY2s6IHJvd0VkaXRvclByb3BzLm9uQ2FuY2VsQ2xpY2ssXG4gICAgICAgICAgICBjbGFzc05hbWU6IHJvd0VkaXRvclByb3BzLmNhbmNlbENsYXNzTmFtZSxcbiAgICAgICAgICAgIHRhYkluZGV4OiB0aGlzLnByb3BzLnRhYkluZGV4XG4gICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogcm93RWRpdG9yUHJvcHMuY2FuY2VsSWNvbkNsYXNzTmFtZVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSaXBwbGUsIG51bGwpKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93RWRpdG9yUHJvcHMgPSB7XG4gICAgICAgICAgICBlZGl0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIG9uSW5pdENsaWNrOiB0aGlzLm9uUm93RWRpdEluaXQsXG4gICAgICAgICAgICBpbml0Q2xhc3NOYW1lOiAncC1yb3ctZWRpdG9yLWluaXQgcC1saW5rJyxcbiAgICAgICAgICAgIGluaXRJY29uQ2xhc3NOYW1lOiAncC1yb3ctZWRpdG9yLWluaXQtaWNvbiBwaSBwaS1mdyBwaS1wZW5jaWwnXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb250ZW50ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgIG9uQ2xpY2s6IHJvd0VkaXRvclByb3BzLm9uSW5pdENsaWNrLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiByb3dFZGl0b3JQcm9wcy5pbml0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgdGFiSW5kZXg6IHRoaXMucHJvcHMudGFiSW5kZXhcbiAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiByb3dFZGl0b3JQcm9wcy5pbml0SWNvbkNsYXNzTmFtZVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSaXBwbGUsIG51bGwpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChib2R5KSB7XG4gICAgICAgICAgcm93RWRpdG9yUHJvcHNbJ2VsZW1lbnQnXSA9IGNvbnRlbnQ7XG4gICAgICAgICAgY29udGVudCA9IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQoYm9keSwgdGhpcy5wcm9wcy5yb3dEYXRhLCB7XG4gICAgICAgICAgICBjb2x1bW46IHRoaXMucHJvcHMuY29sdW1uLFxuICAgICAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgICAgICByb3dJbmRleDogdGhpcy5wcm9wcy5yb3dJbmRleCxcbiAgICAgICAgICAgIGZyb3plblJvdzogdGhpcy5wcm9wcy5mcm96ZW5Sb3csXG4gICAgICAgICAgICBwcm9wczogdGhpcy5wcm9wcy50YWJsZVByb3BzLFxuICAgICAgICAgICAgcm93RWRpdG9yOiByb3dFZGl0b3JQcm9wc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGJvZHkgJiYgIXRoaXMuc3RhdGUuZWRpdGluZykge1xuICAgICAgICBjb250ZW50ID0gYm9keSA/IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQoYm9keSwgdGhpcy5wcm9wcy5yb3dEYXRhLCB7XG4gICAgICAgICAgY29sdW1uOiB0aGlzLnByb3BzLmNvbHVtbixcbiAgICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgICByb3dJbmRleDogdGhpcy5wcm9wcy5yb3dJbmRleCxcbiAgICAgICAgICBmcm96ZW5Sb3c6IHRoaXMucHJvcHMuZnJvemVuUm93LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzLnRhYmxlUHJvcHNcbiAgICAgICAgfSkgOiB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZWRpdG9yICYmIHRoaXMuc3RhdGUuZWRpdGluZykge1xuICAgICAgICBjb250ZW50ID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudChlZGl0b3IsIHtcbiAgICAgICAgICByb3dEYXRhOiB0aGlzLnN0YXRlLmVkaXRpbmdSb3dEYXRhLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJlc29sdmVGaWVsZERhdGEodGhpcy5zdGF0ZS5lZGl0aW5nUm93RGF0YSksXG4gICAgICAgICAgY29sdW1uOiB0aGlzLnByb3BzLmNvbHVtbixcbiAgICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgICByb3dJbmRleDogdGhpcy5wcm9wcy5yb3dJbmRleCxcbiAgICAgICAgICBmcm96ZW5Sb3c6IHRoaXMucHJvcHMuZnJvemVuUm93LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzLnRhYmxlUHJvcHMsXG4gICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IHRoaXMuZWRpdG9yQ2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNSb3dFZGl0b3IgJiYgZWRpdG9yKSB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgICAgIGVkaXRvcktleUhlbHBlciA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYVwiLCB7XG4gICAgICAgICAgdGFiSW5kZXg6IFwiMFwiLFxuICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM4LmtleUhlbHBlciA9IGVsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtY2VsbC1lZGl0b3Ita2V5LWhlbHBlciBwLWhpZGRlbi1hY2Nlc3NpYmxlXCIsXG4gICAgICAgICAgb25Gb2N1czogdGhpcy5vbkVkaXRvckZvY3VzXG4gICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsKSk7XG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGRcIiwge1xuICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczguZWwgPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgcm93U3BhbjogdGhpcy5wcm9wcy5yb3dTcGFuLFxuICAgICAgICB0YWJJbmRleDogdGFiSW5kZXgsXG4gICAgICAgIHJvbGU6IFwiY2VsbFwiLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLm9uQ2xpY2ssXG4gICAgICAgIG9uS2V5RG93bjogdGhpcy5vbktleURvd24sXG4gICAgICAgIG9uQmx1cjogdGhpcy5vbkJsdXIsXG4gICAgICAgIG9uTW91c2VEb3duOiB0aGlzLm9uTW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlVXA6IHRoaXMub25Nb3VzZVVwXG4gICAgICB9LCBlZGl0b3JLZXlIZWxwZXIsIHRpdGxlLCBjb250ZW50KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFZpcnR1YWxTY3JvbGxlck9wdGlvbignbG9hZGluZycpID8gdGhpcy5yZW5kZXJMb2FkaW5nKCkgOiB0aGlzLnJlbmRlckVsZW1lbnQoKTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICBpZiAobmV4dFByb3BzLmVkaXRNb2RlID09PSAncm93JyAmJiBuZXh0UHJvcHMuZWRpdGluZyAhPT0gcHJldlN0YXRlLmVkaXRpbmcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlZGl0aW5nOiBuZXh0UHJvcHMuZWRpdGluZ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQm9keUNlbGw7XG59KENvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIG93bktleXMkNihvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCQ2KHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzJDYoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyQ2KE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyJDkoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkOSgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkOSgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgQm9keVJvdyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQm9keVJvdywgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlciQ5KEJvZHlSb3cpO1xuXG4gIGZ1bmN0aW9uIEJvZHlSb3cocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQm9keVJvdyk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTtcblxuICAgIGlmICghX3RoaXMucHJvcHMub25Sb3dFZGl0Q2hhbmdlKSB7XG4gICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgZWRpdGluZzogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuXG4gICAgX3RoaXMub25DbGljayA9IF90aGlzLm9uQ2xpY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Eb3VibGVDbGljayA9IF90aGlzLm9uRG91YmxlQ2xpY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25SaWdodENsaWNrID0gX3RoaXMub25SaWdodENsaWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uVG91Y2hFbmQgPSBfdGhpcy5vblRvdWNoRW5kLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uS2V5RG93biA9IF90aGlzLm9uS2V5RG93bi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbk1vdXNlRG93biA9IF90aGlzLm9uTW91c2VEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uTW91c2VVcCA9IF90aGlzLm9uTW91c2VVcC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkRyYWdTdGFydCA9IF90aGlzLm9uRHJhZ1N0YXJ0LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uRHJhZ0VuZCA9IF90aGlzLm9uRHJhZ0VuZC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkRyYWdPdmVyID0gX3RoaXMub25EcmFnT3Zlci5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkRyYWdMZWF2ZSA9IF90aGlzLm9uRHJhZ0xlYXZlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uRHJvcCA9IF90aGlzLm9uRHJvcC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkVkaXRJbml0ID0gX3RoaXMub25FZGl0SW5pdC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkVkaXRTYXZlID0gX3RoaXMub25FZGl0U2F2ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkVkaXRDYW5jZWwgPSBfdGhpcy5vbkVkaXRDYW5jZWwuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEJvZHlSb3csIFt7XG4gICAga2V5OiBcImlzRm9jdXNhYmxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzRm9jdXNhYmxlKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc2VsZWN0aW9uTW9kZSAmJiB0aGlzLnByb3BzLnNlbGVjdGlvbk1vZGVJbkNvbHVtbiAhPT0gJ3NpbmdsZScgJiYgdGhpcy5wcm9wcy5zZWxlY3Rpb25Nb2RlSW5Db2x1bW4gIT09ICdtdWx0aXBsZSc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzR3JvdXBlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0dyb3VwZWQoY29sdW1uKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5ncm91cFJvd3NCeSAmJiB0aGlzLmdldENvbHVtblByb3AoY29sdW1uLCAnZmllbGQnKSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmdyb3VwUm93c0J5KSkgcmV0dXJuIHRoaXMucHJvcHMuZ3JvdXBSb3dzQnkuaW5kZXhPZihjb2x1bW4ucHJvcHMuZmllbGQpID4gLTE7ZWxzZSByZXR1cm4gdGhpcy5wcm9wcy5ncm91cFJvd3NCeSA9PT0gY29sdW1uLnByb3BzLmZpZWxkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVxdWFsc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlcXVhbHMoZGF0YTEsIGRhdGEyKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jb21wYXJlU2VsZWN0aW9uQnkgPT09ICdlcXVhbHMnID8gZGF0YTEgPT09IGRhdGEyIDogT2JqZWN0VXRpbHMuZXF1YWxzKGRhdGExLCBkYXRhMiwgdGhpcy5wcm9wcy5kYXRhS2V5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Q29sdW1uUHJvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb2x1bW5Qcm9wKGNvbCwgcHJvcCkge1xuICAgICAgcmV0dXJuIGNvbCA/IGNvbC5wcm9wc1twcm9wXSA6IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEVkaXRpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RWRpdGluZygpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uUm93RWRpdENoYW5nZSA/IHRoaXMucHJvcHMuZWRpdGluZyA6IHRoaXMuc3RhdGUuZWRpdGluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VGFiSW5kZXhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFiSW5kZXgoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0ZvY3VzYWJsZSgpICYmICF0aGlzLnByb3BzLmFsbG93Q2VsbFNlbGVjdGlvbiA/IHRoaXMucHJvcHMuaW5kZXggPT09IDAgPyB0aGlzLnByb3BzLnRhYkluZGV4IDogLTEgOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmaW5kSW5kZXhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZEluZGV4KGNvbGxlY3Rpb24sIHJvd0RhdGEpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gKGNvbGxlY3Rpb24gfHwgW10pLmZpbmRJbmRleChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLmVxdWFscyhyb3dEYXRhLCBkYXRhKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjaGFuZ2VUYWJJbmRleFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VUYWJJbmRleChjdXJyZW50Um93LCBuZXh0Um93KSB7XG4gICAgICBpZiAoY3VycmVudFJvdyAmJiBuZXh0Um93KSB7XG4gICAgICAgIGN1cnJlbnRSb3cudGFiSW5kZXggPSAtMTtcbiAgICAgICAgbmV4dFJvdy50YWJJbmRleCA9IHRoaXMucHJvcHMudGFiSW5kZXg7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbmROZXh0U2VsZWN0YWJsZVJvd1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTmV4dFNlbGVjdGFibGVSb3cocm93KSB7XG4gICAgICB2YXIgbmV4dFJvdyA9IHJvdy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICByZXR1cm4gbmV4dFJvdyA/IERvbUhhbmRsZXIuaGFzQ2xhc3MobmV4dFJvdywgJ3Atc2VsZWN0YWJsZS1yb3cnKSA/IG5leHRSb3cgOiB0aGlzLmZpbmROZXh0U2VsZWN0YWJsZVJvdyhuZXh0Um93KSA6IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbmRQcmV2U2VsZWN0YWJsZVJvd1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kUHJldlNlbGVjdGFibGVSb3cocm93KSB7XG4gICAgICB2YXIgcHJldlJvdyA9IHJvdy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgcmV0dXJuIHByZXZSb3cgPyBEb21IYW5kbGVyLmhhc0NsYXNzKHByZXZSb3csICdwLXNlbGVjdGFibGUtcm93JykgPyBwcmV2Um93IDogdGhpcy5maW5kUHJldlNlbGVjdGFibGVSb3cocHJldlJvdykgOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzaG91bGRSZW5kZXJCb2R5Q2VsbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRSZW5kZXJCb2R5Q2VsbCh2YWx1ZSwgY29sdW1uLCBpKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKGNvbHVtbiwgJ2hpZGRlbicpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5yb3dHcm91cE1vZGUgJiYgdGhpcy5wcm9wcy5yb3dHcm91cE1vZGUgPT09ICdyb3dzcGFuJyAmJiB0aGlzLmlzR3JvdXBlZChjb2x1bW4pKSB7XG4gICAgICAgIHZhciBwcmV2Um93RGF0YSA9IHZhbHVlW2kgLSAxXTtcblxuICAgICAgICBpZiAocHJldlJvd0RhdGEpIHtcbiAgICAgICAgICB2YXIgY3VycmVudFJvd0ZpZWxkRGF0YSA9IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEodmFsdWVbaV0sIHRoaXMuZ2V0Q29sdW1uUHJvcChjb2x1bW4sICdmaWVsZCcpKTtcbiAgICAgICAgICB2YXIgcHJldmlvdXNSb3dGaWVsZERhdGEgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKHByZXZSb3dEYXRhLCB0aGlzLmdldENvbHVtblByb3AoY29sdW1uLCAnZmllbGQnKSk7XG4gICAgICAgICAgcmV0dXJuIGN1cnJlbnRSb3dGaWVsZERhdGEgIT09IHByZXZpb3VzUm93RmllbGREYXRhO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYWxjdWxhdGVSb3dHcm91cFNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlUm93R3JvdXBTaXplKHZhbHVlLCBjb2x1bW4sIGluZGV4KSB7XG4gICAgICBpZiAodGhpcy5pc0dyb3VwZWQoY29sdW1uKSkge1xuICAgICAgICB2YXIgY3VycmVudFJvd0ZpZWxkRGF0YSA9IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEodmFsdWVbaW5kZXhdLCB0aGlzLmdldENvbHVtblByb3AoY29sdW1uLCAnZmllbGQnKSk7XG4gICAgICAgIHZhciBuZXh0Um93RmllbGREYXRhID0gY3VycmVudFJvd0ZpZWxkRGF0YTtcbiAgICAgICAgdmFyIGdyb3VwUm93U3BhbiA9IDA7XG5cbiAgICAgICAgd2hpbGUgKGN1cnJlbnRSb3dGaWVsZERhdGEgPT09IG5leHRSb3dGaWVsZERhdGEpIHtcbiAgICAgICAgICBncm91cFJvd1NwYW4rKztcbiAgICAgICAgICB2YXIgbmV4dFJvd0RhdGEgPSB2YWx1ZVsrK2luZGV4XTtcblxuICAgICAgICAgIGlmIChuZXh0Um93RGF0YSkge1xuICAgICAgICAgICAgbmV4dFJvd0ZpZWxkRGF0YSA9IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEobmV4dFJvd0RhdGEsIHRoaXMuZ2V0Q29sdW1uUHJvcChjb2x1bW4sICdmaWVsZCcpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdyb3VwUm93U3BhbiA9PT0gMSA/IG51bGwgOiBncm91cFJvd1NwYW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93Q2xpY2soe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICBpbmRleDogdGhpcy5wcm9wcy5pbmRleFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRG91YmxlQ2xpY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Eb3VibGVDbGljayhldmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5vblJvd0RvdWJsZUNsaWNrKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMucHJvcHMucm93RGF0YSxcbiAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMuaW5kZXhcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJpZ2h0Q2xpY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SaWdodENsaWNrKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93UmlnaHRDbGljayh7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluZGV4XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Ub3VjaEVuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblRvdWNoRW5kKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93VG91Y2hFbmQoZXZlbnQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbktleURvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5pc0ZvY3VzYWJsZSgpICYmICF0aGlzLnByb3BzLmFsbG93Q2VsbFNlbGVjdGlvbikge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgcm93ID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICAgICAgLy9kb3duIGFycm93XG4gICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgIHZhciBuZXh0Um93ID0gdGhpcy5maW5kTmV4dFNlbGVjdGFibGVSb3cocm93KTtcblxuICAgICAgICAgICAgaWYgKG5leHRSb3cpIHtcbiAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VUYWJJbmRleChyb3csIG5leHRSb3cpO1xuICAgICAgICAgICAgICBuZXh0Um93LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAvL3VwIGFycm93XG5cbiAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgdmFyIHByZXZSb3cgPSB0aGlzLmZpbmRQcmV2U2VsZWN0YWJsZVJvdyhyb3cpO1xuXG4gICAgICAgICAgICBpZiAocHJldlJvdykge1xuICAgICAgICAgICAgICB0aGlzLmNoYW5nZVRhYkluZGV4KHJvdywgcHJldlJvdyk7XG4gICAgICAgICAgICAgIHByZXZSb3cuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIC8vZW50ZXJcblxuICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAvLyBAZGVwcmVjYXRlZFxuICAgICAgICAgICAgaWYgKCFEb21IYW5kbGVyLmlzQ2xpY2thYmxlKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgLy9zcGFjZVxuXG4gICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIGlmICghRG9tSGFuZGxlci5pc0NsaWNrYWJsZSh0YXJnZXQpICYmICF0YXJnZXQucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgdGhpcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Nb3VzZURvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQpIHtcbiAgICAgIHRoaXMucHJvcHMub25Sb3dNb3VzZURvd24oe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICBpbmRleDogdGhpcy5wcm9wcy5pbmRleFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uTW91c2VVcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1vdXNlVXAoZXZlbnQpIHtcbiAgICAgIHRoaXMucHJvcHMub25Sb3dNb3VzZVVwKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMucHJvcHMucm93RGF0YSxcbiAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMuaW5kZXhcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkRyYWdTdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdTdGFydChldmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5vblJvd0RyYWdTdGFydCh7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluZGV4XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25EcmFnT3ZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdPdmVyKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93RHJhZ092ZXIoe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICBpbmRleDogdGhpcy5wcm9wcy5pbmRleFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRHJhZ0xlYXZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhZ0xlYXZlKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93RHJhZ0xlYXZlKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMucHJvcHMucm93RGF0YSxcbiAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMuaW5kZXhcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkRyYWdFbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnRW5kKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uUm93RHJhZ0VuZCh7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluZGV4XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Ecm9wXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJvcChldmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5vblJvd0Ryb3Aoe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICBpbmRleDogdGhpcy5wcm9wcy5pbmRleFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRWRpdENoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkVkaXRDaGFuZ2UoZSwgZWRpdGluZykge1xuICAgICAgaWYgKHRoaXMucHJvcHMub25Sb3dFZGl0Q2hhbmdlKSB7XG4gICAgICAgIHZhciBlZGl0aW5nUm93cztcbiAgICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLnByb3BzLmRhdGFLZXk7XG4gICAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50LFxuICAgICAgICAgICAgZGF0YSA9IGUuZGF0YSxcbiAgICAgICAgICAgIGluZGV4ID0gZS5pbmRleDtcblxuICAgICAgICBpZiAoZGF0YUtleSkge1xuICAgICAgICAgIHZhciBkYXRhS2V5VmFsdWUgPSBTdHJpbmcoT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShkYXRhLCBkYXRhS2V5KSk7XG4gICAgICAgICAgZWRpdGluZ1Jvd3MgPSB0aGlzLnByb3BzLmVkaXRpbmdSb3dzID8gX29iamVjdFNwcmVhZCQ2KHt9LCB0aGlzLnByb3BzLmVkaXRpbmdSb3dzKSA6IHt9O1xuICAgICAgICAgIGlmIChlZGl0aW5nUm93c1tkYXRhS2V5VmFsdWVdICE9IG51bGwpIGRlbGV0ZSBlZGl0aW5nUm93c1tkYXRhS2V5VmFsdWVdO2Vsc2UgZWRpdGluZ1Jvd3NbZGF0YUtleVZhbHVlXSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGVkaXRpbmdSb3dJbmRleCA9IHRoaXMuZmluZEluZGV4KHRoaXMucHJvcHMuZWRpdGluZ1Jvd3MsIGRhdGEpO1xuICAgICAgICAgIGVkaXRpbmdSb3dzID0gdGhpcy5wcm9wcy5lZGl0aW5nUm93cyA/IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnByb3BzLmVkaXRpbmdSb3dzKSA6IFtdO1xuICAgICAgICAgIGlmIChlZGl0aW5nUm93SW5kZXggIT09IC0xKSBlZGl0aW5nUm93cyA9IGVkaXRpbmdSb3dzLmZpbHRlcihmdW5jdGlvbiAodmFsLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gaSAhPT0gZWRpdGluZ1Jvd0luZGV4O1xuICAgICAgICAgIH0pO2Vsc2UgZWRpdGluZ1Jvd3MucHVzaChkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvcHMub25Sb3dFZGl0Q2hhbmdlKHtcbiAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBvcmlnaW5hbEV2ZW50LFxuICAgICAgICAgIGRhdGE6IGVkaXRpbmdSb3dzLFxuICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGVkaXRpbmc6IGVkaXRpbmdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRWRpdEluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25FZGl0SW5pdChlKSB7XG4gICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUm93RWRpdEluaXQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblJvd0VkaXRJbml0KHtcbiAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICBkYXRhOiB0aGlzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMuaW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25FZGl0Q2hhbmdlKGUsIHRydWUpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25FZGl0U2F2ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkVkaXRTYXZlKGUpIHtcbiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIHZhciB2YWxpZCA9IHRoaXMucHJvcHMucm93RWRpdFZhbGlkYXRvciA/IHRoaXMucHJvcHMucm93RWRpdFZhbGlkYXRvcih0aGlzLnByb3BzLnJvd0RhdGEsIHtcbiAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMudGFibGVQcm9wc1xuICAgICAgfSkgOiB0cnVlO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblJvd0VkaXRTYXZlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Sb3dFZGl0U2F2ZSh7XG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluZGV4LFxuICAgICAgICAgIHZhbGlkOiB2YWxpZFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uUm93RWRpdENvbXBsZXRlKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vblJvd0VkaXRDb21wbGV0ZShlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25FZGl0Q2hhbmdlKGUsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25FZGl0Q2FuY2VsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRWRpdENhbmNlbChlKSB7XG4gICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUm93RWRpdENhbmNlbCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uUm93RWRpdENhbmNlbCh7XG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgICAgZGF0YTogdGhpcy5wcm9wcy5yb3dEYXRhLFxuICAgICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9uRWRpdENoYW5nZShlLCBmYWxzZSk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDb250ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY29sdW1ucy5tYXAoZnVuY3Rpb24gKGNvbCwgaSkge1xuICAgICAgICBpZiAoX3RoaXMzLnNob3VsZFJlbmRlckJvZHlDZWxsKF90aGlzMy5wcm9wcy52YWx1ZSwgY29sLCBfdGhpczMucHJvcHMuaW5kZXgpKSB7XG4gICAgICAgICAgdmFyIGtleSA9IFwiXCIuY29uY2F0KF90aGlzMy5nZXRDb2x1bW5Qcm9wKGNvbCwgJ2NvbHVtbktleScpIHx8IF90aGlzMy5nZXRDb2x1bW5Qcm9wKGNvbCwgJ2ZpZWxkJyksIFwiX1wiKS5jb25jYXQoaSk7XG4gICAgICAgICAgdmFyIHJvd1NwYW4gPSBfdGhpczMucHJvcHMucm93R3JvdXBNb2RlID09PSAncm93c3BhbicgPyBfdGhpczMuY2FsY3VsYXRlUm93R3JvdXBTaXplKF90aGlzMy5wcm9wcy52YWx1ZSwgY29sLCBfdGhpczMucHJvcHMuaW5kZXgpIDogbnVsbDtcblxuICAgICAgICAgIHZhciBlZGl0aW5nID0gX3RoaXMzLmdldEVkaXRpbmcoKTtcblxuICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCb2R5Q2VsbCwge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICB2YWx1ZTogX3RoaXMzLnByb3BzLnZhbHVlLFxuICAgICAgICAgICAgdGFibGVQcm9wczogX3RoaXMzLnByb3BzLnRhYmxlUHJvcHMsXG4gICAgICAgICAgICB0YWJsZVNlbGVjdG9yOiBfdGhpczMucHJvcHMudGFibGVTZWxlY3RvcixcbiAgICAgICAgICAgIGNvbHVtbjogY29sLFxuICAgICAgICAgICAgcm93RGF0YTogX3RoaXMzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgICAgICByb3dJbmRleDogX3RoaXMzLnByb3BzLmluZGV4LFxuICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICByb3dTcGFuOiByb3dTcGFuLFxuICAgICAgICAgICAgZGF0YUtleTogX3RoaXMzLnByb3BzLmRhdGFLZXksXG4gICAgICAgICAgICBlZGl0aW5nOiBlZGl0aW5nLFxuICAgICAgICAgICAgZWRpdGluZ01ldGE6IF90aGlzMy5wcm9wcy5lZGl0aW5nTWV0YSxcbiAgICAgICAgICAgIGVkaXRNb2RlOiBfdGhpczMucHJvcHMuZWRpdE1vZGUsXG4gICAgICAgICAgICBvblJvd0VkaXRJbml0OiBfdGhpczMub25FZGl0SW5pdCxcbiAgICAgICAgICAgIG9uUm93RWRpdFNhdmU6IF90aGlzMy5vbkVkaXRTYXZlLFxuICAgICAgICAgICAgb25Sb3dFZGl0Q2FuY2VsOiBfdGhpczMub25FZGl0Q2FuY2VsLFxuICAgICAgICAgICAgb25FZGl0aW5nTWV0YUNoYW5nZTogX3RoaXMzLnByb3BzLm9uRWRpdGluZ01ldGFDaGFuZ2UsXG4gICAgICAgICAgICBvblJvd1RvZ2dsZTogX3RoaXMzLnByb3BzLm9uUm93VG9nZ2xlLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBfdGhpczMucHJvcHMuc2VsZWN0aW9uLFxuICAgICAgICAgICAgYWxsb3dDZWxsU2VsZWN0aW9uOiBfdGhpczMucHJvcHMuYWxsb3dDZWxsU2VsZWN0aW9uLFxuICAgICAgICAgICAgY29tcGFyZVNlbGVjdGlvbkJ5OiBfdGhpczMucHJvcHMuY29tcGFyZVNlbGVjdGlvbkJ5LFxuICAgICAgICAgICAgc2VsZWN0T25FZGl0OiBfdGhpczMucHJvcHMuc2VsZWN0T25FZGl0LFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IF90aGlzMy5wcm9wcy5zZWxlY3RlZCxcbiAgICAgICAgICAgIG9uQ2xpY2s6IF90aGlzMy5wcm9wcy5vbkNlbGxDbGljayxcbiAgICAgICAgICAgIG9uTW91c2VEb3duOiBfdGhpczMucHJvcHMub25DZWxsTW91c2VEb3duLFxuICAgICAgICAgICAgb25Nb3VzZVVwOiBfdGhpczMucHJvcHMub25DZWxsTW91c2VVcCxcbiAgICAgICAgICAgIHRhYkluZGV4OiBfdGhpczMucHJvcHMudGFiSW5kZXgsXG4gICAgICAgICAgICBjZWxsQ2xhc3NOYW1lOiBfdGhpczMucHJvcHMuY2VsbENsYXNzTmFtZSxcbiAgICAgICAgICAgIHJlc3BvbnNpdmVMYXlvdXQ6IF90aGlzMy5wcm9wcy5yZXNwb25zaXZlTGF5b3V0LFxuICAgICAgICAgICAgZnJvemVuUm93OiBfdGhpczMucHJvcHMuZnJvemVuUm93LFxuICAgICAgICAgICAgaXNTZWxlY3RhYmxlOiBfdGhpczMucHJvcHMuaXNTZWxlY3RhYmxlLFxuICAgICAgICAgICAgc2hvd1NlbGVjdGlvbkVsZW1lbnQ6IF90aGlzMy5wcm9wcy5zaG93U2VsZWN0aW9uRWxlbWVudCxcbiAgICAgICAgICAgIHNob3dSb3dSZW9yZGVyRWxlbWVudDogX3RoaXMzLnByb3BzLnNob3dSb3dSZW9yZGVyRWxlbWVudCxcbiAgICAgICAgICAgIG9uUmFkaW9DaGFuZ2U6IF90aGlzMy5wcm9wcy5vblJhZGlvQ2hhbmdlLFxuICAgICAgICAgICAgb25DaGVja2JveENoYW5nZTogX3RoaXMzLnByb3BzLm9uQ2hlY2tib3hDaGFuZ2UsXG4gICAgICAgICAgICBleHBhbmRlZDogX3RoaXMzLnByb3BzLmV4cGFuZGVkLFxuICAgICAgICAgICAgZXhwYW5kZWRSb3dJY29uOiBfdGhpczMucHJvcHMuZXhwYW5kZWRSb3dJY29uLFxuICAgICAgICAgICAgY29sbGFwc2VkUm93SWNvbjogX3RoaXMzLnByb3BzLmNvbGxhcHNlZFJvd0ljb24sXG4gICAgICAgICAgICB2aXJ0dWFsU2Nyb2xsZXJPcHRpb25zOiBfdGhpczMucHJvcHMudmlydHVhbFNjcm9sbGVyT3B0aW9uc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB2YXIgcm93Q2xhc3NOYW1lID0gT2JqZWN0VXRpbHMuZ2V0UHJvcFZhbHVlKHRoaXMucHJvcHMucm93Q2xhc3NOYW1lLCB0aGlzLnByb3BzLnJvd0RhdGEsIHtcbiAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMudGFibGVQcm9wc1xuICAgICAgfSk7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcyhyb3dDbGFzc05hbWUsIHtcbiAgICAgICAgJ3AtaGlnaGxpZ2h0JzogIXRoaXMucHJvcHMuYWxsb3dDZWxsU2VsZWN0aW9uICYmIHRoaXMucHJvcHMuc2VsZWN0ZWQsXG4gICAgICAgICdwLWhpZ2hsaWdodC1jb250ZXh0bWVudSc6IHRoaXMucHJvcHMuY29udGV4dE1lbnVTZWxlY3RlZCxcbiAgICAgICAgJ3Atc2VsZWN0YWJsZS1yb3cnOiB0aGlzLnByb3BzLmFsbG93Um93U2VsZWN0aW9uICYmIHRoaXMucHJvcHMuaXNTZWxlY3RhYmxlKHtcbiAgICAgICAgICBkYXRhOiB0aGlzLnByb3BzLnJvd0RhdGEsXG4gICAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMuaW5kZXhcbiAgICAgICAgfSksXG4gICAgICAgICdwLXJvdy1vZGQnOiB0aGlzLnByb3BzLmluZGV4ICUgMiAhPT0gMFxuICAgICAgfSk7XG4gICAgICB2YXIgY29udGVudCA9IHRoaXMucmVuZGVyQ29udGVudCgpO1xuICAgICAgdmFyIHRhYkluZGV4ID0gdGhpcy5nZXRUYWJJbmRleCgpO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwge1xuICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczQuZWwgPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgcm9sZTogXCJyb3dcIixcbiAgICAgICAgdGFiSW5kZXg6IHRhYkluZGV4LFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMub25Nb3VzZURvd24sXG4gICAgICAgIG9uTW91c2VVcDogdGhpcy5vbk1vdXNlVXAsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGljayxcbiAgICAgICAgb25Eb3VibGVDbGljazogdGhpcy5vbkRvdWJsZUNsaWNrLFxuICAgICAgICBvbkNvbnRleHRNZW51OiB0aGlzLm9uUmlnaHRDbGljayxcbiAgICAgICAgb25Ub3VjaEVuZDogdGhpcy5vblRvdWNoRW5kLFxuICAgICAgICBvbktleURvd246IHRoaXMub25LZXlEb3duLFxuICAgICAgICBvbkRyYWdTdGFydDogdGhpcy5vbkRyYWdTdGFydCxcbiAgICAgICAgb25EcmFnT3ZlcjogdGhpcy5vbkRyYWdPdmVyLFxuICAgICAgICBvbkRyYWdMZWF2ZTogdGhpcy5vbkRyYWdMZWF2ZSxcbiAgICAgICAgb25EcmFnRW5kOiB0aGlzLm9uRHJhZ0VuZCxcbiAgICAgICAgb25Ecm9wOiB0aGlzLm9uRHJvcFxuICAgICAgfSwgY29udGVudCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEJvZHlSb3c7XG59KENvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlciQ4KERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDgoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDgoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxudmFyIFJvd1RvZ2dsZXJCdXR0b24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFJvd1RvZ2dsZXJCdXR0b24sIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkOChSb3dUb2dnbGVyQnV0dG9uKTtcblxuICBmdW5jdGlvbiBSb3dUb2dnbGVyQnV0dG9uKHByb3BzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvd1RvZ2dsZXJCdXR0b24pO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgX3RoaXMub25DbGljayA9IF90aGlzLm9uQ2xpY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJvd1RvZ2dsZXJCdXR0b24sIFt7XG4gICAga2V5OiBcIm9uQ2xpY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMucHJvcHMucm93RGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgaWNvbkNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3Atcm93LXRvZ2dsZXItaWNvbicsIHRoaXMucHJvcHMuZXhwYW5kZWQgPyB0aGlzLnByb3BzLmV4cGFuZGVkUm93SWNvbiA6IHRoaXMucHJvcHMuY29sbGFwc2VkUm93SWNvbik7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLm9uQ2xpY2ssXG4gICAgICAgIGNsYXNzTmFtZTogXCJwLXJvdy10b2dnbGVyIHAtbGlua1wiLFxuICAgICAgICB0YWJJbmRleDogdGhpcy5wcm9wcy50YWJJbmRleFxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBpY29uQ2xhc3NOYW1lXG4gICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmlwcGxlLCBudWxsKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJvd1RvZ2dsZXJCdXR0b247XG59KENvbXBvbmVudCk7XG5cbnZhciBfZXhjbHVkZWQgPSBbXCJvcmlnaW5hbEV2ZW50XCJdO1xuXG5mdW5jdGlvbiBvd25LZXlzJDUob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQkNSh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyQ1KE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMkNShPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlciQ3KERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDcoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDcoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxudmFyIFRhYmxlQm9keSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoVGFibGVCb2R5LCBfQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyJDcoVGFibGVCb2R5KTtcblxuICBmdW5jdGlvbiBUYWJsZUJvZHkocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFibGVCb2R5KTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgcm93R3JvdXBIZWFkZXJTdHlsZU9iamVjdDoge31cbiAgICB9OyAvLyByb3dcblxuICAgIF90aGlzLm9uUm93Q2xpY2sgPSBfdGhpcy5vblJvd0NsaWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93RG91YmxlQ2xpY2sgPSBfdGhpcy5vblJvd0RvdWJsZUNsaWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93UmlnaHRDbGljayA9IF90aGlzLm9uUm93UmlnaHRDbGljay5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vblJvd1RvdWNoRW5kID0gX3RoaXMub25Sb3dUb3VjaEVuZC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vblJvd01vdXNlRG93biA9IF90aGlzLm9uUm93TW91c2VEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93TW91c2VVcCA9IF90aGlzLm9uUm93TW91c2VVcC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vblJvd1RvZ2dsZSA9IF90aGlzLm9uUm93VG9nZ2xlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOyAvLyBkcmFnXG5cbiAgICBfdGhpcy5vblJvd0RyYWdTdGFydCA9IF90aGlzLm9uUm93RHJhZ1N0YXJ0LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93RHJhZ092ZXIgPSBfdGhpcy5vblJvd0RyYWdPdmVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93RHJhZ0xlYXZlID0gX3RoaXMub25Sb3dEcmFnTGVhdmUuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Sb3dEcmFnRW5kID0gX3RoaXMub25Sb3dEcmFnRW5kLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUm93RHJvcCA9IF90aGlzLm9uUm93RHJvcC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsgLy8gc2VsZWN0aW9uXG5cbiAgICBfdGhpcy5vblJhZGlvQ2hhbmdlID0gX3RoaXMub25SYWRpb0NoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkNoZWNrYm94Q2hhbmdlID0gX3RoaXMub25DaGVja2JveENoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkRyYWdTZWxlY3Rpb25Nb3VzZU1vdmUgPSBfdGhpcy5vbkRyYWdTZWxlY3Rpb25Nb3VzZU1vdmUuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25EcmFnU2VsZWN0aW9uTW91c2VVcCA9IF90aGlzLm9uRHJhZ1NlbGVjdGlvbk1vdXNlVXAuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuaXNTZWxlY3RhYmxlID0gX3RoaXMuaXNTZWxlY3RhYmxlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOyAvLyBjZWxsXG5cbiAgICBfdGhpcy5vbkNlbGxDbGljayA9IF90aGlzLm9uQ2VsbENsaWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQ2VsbE1vdXNlRG93biA9IF90aGlzLm9uQ2VsbE1vdXNlRG93bi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkNlbGxNb3VzZVVwID0gX3RoaXMub25DZWxsTW91c2VVcC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5yZWYgPSBfdGhpcy5yZWYuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFRhYmxlQm9keSwgW3tcbiAgICBrZXk6IFwicmVmXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgdGhpcy5lbCA9IGVsO1xuICAgICAgdGhpcy5wcm9wcy52aXJ0dWFsU2Nyb2xsZXJDb250ZW50UmVmICYmIHRoaXMucHJvcHMudmlydHVhbFNjcm9sbGVyQ29udGVudFJlZihlbCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVxdWFsc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlcXVhbHMoZGF0YTEsIGRhdGEyKSB7XG4gICAgICBpZiAodGhpcy5hbGxvd0NlbGxTZWxlY3Rpb24oKSkgcmV0dXJuIChkYXRhMS5yb3dJbmRleCA9PT0gZGF0YTIucm93SW5kZXggfHwgZGF0YTEucm93RGF0YSA9PT0gZGF0YTIucm93RGF0YSkgJiYgKGRhdGExLmZpZWxkID09PSBkYXRhMi5maWVsZCB8fCBkYXRhMS5jZWxsSW5kZXggPT09IGRhdGEyLmNlbGxJbmRleCk7ZWxzZSByZXR1cm4gdGhpcy5wcm9wcy5jb21wYXJlU2VsZWN0aW9uQnkgPT09ICdlcXVhbHMnID8gZGF0YTEgPT09IGRhdGEyIDogT2JqZWN0VXRpbHMuZXF1YWxzKGRhdGExLCBkYXRhMiwgdGhpcy5wcm9wcy5kYXRhS2V5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNTdWJoZWFkZXJHcm91cGluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1N1YmhlYWRlckdyb3VwaW5nKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucm93R3JvdXBNb2RlICYmIHRoaXMucHJvcHMucm93R3JvdXBNb2RlID09PSAnc3ViaGVhZGVyJztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNTZWxlY3Rpb25FbmFibGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2VsZWN0aW9uRW5hYmxlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnNlbGVjdGlvbk1vZGUgfHwgdGhpcy5wcm9wcy5zZWxlY3Rpb25Nb2RlSW5Db2x1bW4gIT09IG51bGwgfHwgdGhpcy5wcm9wcy5jb2x1bW5zICYmIHRoaXMucHJvcHMuY29sdW1ucy5zb21lKGZ1bmN0aW9uIChjb2wpIHtcbiAgICAgICAgcmV0dXJuIGNvbCAmJiAhIWNvbC5wcm9wcy5zZWxlY3Rpb25Nb2RlO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzUmFkaW9TZWxlY3Rpb25Nb2RlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzUmFkaW9TZWxlY3Rpb25Nb2RlKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc2VsZWN0aW9uTW9kZSA9PT0gJ3JhZGlvYnV0dG9uJztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNDaGVja2JveFNlbGVjdGlvbk1vZGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDaGVja2JveFNlbGVjdGlvbk1vZGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3Rpb25Nb2RlID09PSAnY2hlY2tib3gnO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1JhZGlvU2VsZWN0aW9uTW9kZUluQ29sdW1uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzUmFkaW9TZWxlY3Rpb25Nb2RlSW5Db2x1bW4oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3Rpb25Nb2RlSW5Db2x1bW4gPT09ICdzaW5nbGUnO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc0NoZWNrYm94U2VsZWN0aW9uTW9kZUluQ29sdW1uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2hlY2tib3hTZWxlY3Rpb25Nb2RlSW5Db2x1bW4oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3Rpb25Nb2RlSW5Db2x1bW4gPT09ICdtdWx0aXBsZSc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzU2luZ2xlU2VsZWN0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2luZ2xlU2VsZWN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc2VsZWN0aW9uTW9kZSA9PT0gJ3NpbmdsZScgJiYgIXRoaXMuaXNDaGVja2JveFNlbGVjdGlvbk1vZGVJbkNvbHVtbigpIHx8ICF0aGlzLmlzUmFkaW9TZWxlY3Rpb25Nb2RlKCkgJiYgdGhpcy5pc1JhZGlvU2VsZWN0aW9uTW9kZUluQ29sdW1uKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzTXVsdGlwbGVTZWxlY3Rpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNNdWx0aXBsZVNlbGVjdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnNlbGVjdGlvbk1vZGUgPT09ICdtdWx0aXBsZScgJiYgIXRoaXMuaXNSYWRpb1NlbGVjdGlvbk1vZGVJbkNvbHVtbigpIHx8IHRoaXMuaXNDaGVja2JveFNlbGVjdGlvbk1vZGVJbkNvbHVtbigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1JhZGlvT25seVNlbGVjdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1JhZGlvT25seVNlbGVjdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzUmFkaW9TZWxlY3Rpb25Nb2RlKCkgJiYgdGhpcy5pc1JhZGlvU2VsZWN0aW9uTW9kZUluQ29sdW1uKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzQ2hlY2tib3hPbmx5U2VsZWN0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2hlY2tib3hPbmx5U2VsZWN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNDaGVja2JveFNlbGVjdGlvbk1vZGUoKSAmJiB0aGlzLmlzQ2hlY2tib3hTZWxlY3Rpb25Nb2RlSW5Db2x1bW4oKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNTZWxlY3RlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NlbGVjdGVkKHJvd0RhdGEpIHtcbiAgICAgIGlmIChyb3dEYXRhICYmIHRoaXMucHJvcHMuc2VsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLnNlbGVjdGlvbiBpbnN0YW5jZW9mIEFycmF5ID8gdGhpcy5maW5kSW5kZXgodGhpcy5wcm9wcy5zZWxlY3Rpb24sIHJvd0RhdGEpID4gLTEgOiB0aGlzLmVxdWFscyhyb3dEYXRhLCB0aGlzLnByb3BzLnNlbGVjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNDb250ZXh0TWVudVNlbGVjdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29udGV4dE1lbnVTZWxlY3RlZChyb3dEYXRhKSB7XG4gICAgICBpZiAocm93RGF0YSAmJiB0aGlzLnByb3BzLmNvbnRleHRNZW51U2VsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVxdWFscyhyb3dEYXRhLCB0aGlzLnByb3BzLmNvbnRleHRNZW51U2VsZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1NlbGVjdGFibGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTZWxlY3RhYmxlKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmlzRGF0YVNlbGVjdGFibGUgPyB0aGlzLnByb3BzLmlzRGF0YVNlbGVjdGFibGUob3B0aW9ucykgOiB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1Jvd0V4cGFuZGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzUm93RXhwYW5kZWQocm93RGF0YSkge1xuICAgICAgaWYgKHJvd0RhdGEgJiYgdGhpcy5wcm9wcy5leHBhbmRlZFJvd3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdWJoZWFkZXJHcm91cGluZygpICYmIHRoaXMucHJvcHMuZXhwYW5kYWJsZVJvd0dyb3Vwcykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmlzUm93R3JvdXBFeHBhbmRlZChyb3dEYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5kYXRhS2V5KSByZXR1cm4gdGhpcy5wcm9wcy5leHBhbmRlZFJvd3MgPyB0aGlzLnByb3BzLmV4cGFuZGVkUm93c1tPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKHJvd0RhdGEsIHRoaXMucHJvcHMuZGF0YUtleSldICE9PSB1bmRlZmluZWQgOiBmYWxzZTtlbHNlIHJldHVybiB0aGlzLmZpbmRJbmRleCh0aGlzLnByb3BzLmV4cGFuZGVkUm93cywgcm93RGF0YSkgIT09IC0xO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNSb3dHcm91cEV4cGFuZGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzUm93R3JvdXBFeHBhbmRlZChyb3dEYXRhKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMuZGF0YUtleSA9PT0gdGhpcy5wcm9wcy5ncm91cFJvd3NCeSkgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMucHJvcHMuZXhwYW5kZWRSb3dzKS5zb21lKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBPYmplY3RVdGlscy5lcXVhbHMoZGF0YSwgT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShyb3dEYXRhLCBfdGhpczIucHJvcHMuZGF0YUtleSkpO1xuICAgICAgfSk7ZWxzZSByZXR1cm4gdGhpcy5wcm9wcy5leHBhbmRlZFJvd3Muc29tZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0VXRpbHMuZXF1YWxzKGRhdGEsIHJvd0RhdGEsIF90aGlzMi5wcm9wcy5ncm91cFJvd3NCeSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNSb3dFZGl0aW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzUm93RWRpdGluZyhyb3dEYXRhKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5lZGl0TW9kZSA9PT0gJ3JvdycgJiYgcm93RGF0YSAmJiB0aGlzLnByb3BzLmVkaXRpbmdSb3dzKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRhdGFLZXkpIHJldHVybiB0aGlzLnByb3BzLmVkaXRpbmdSb3dzID8gdGhpcy5wcm9wcy5lZGl0aW5nUm93c1tPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKHJvd0RhdGEsIHRoaXMucHJvcHMuZGF0YUtleSldICE9PSB1bmRlZmluZWQgOiBmYWxzZTtlbHNlIHJldHVybiB0aGlzLmZpbmRJbmRleCh0aGlzLnByb3BzLmVkaXRpbmdSb3dzLCByb3dEYXRhKSAhPT0gLTE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWxsb3dEcmFnXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFsbG93RHJhZyhldmVudCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZHJhZ1NlbGVjdGlvbiAmJiB0aGlzLmlzTXVsdGlwbGVTZWxlY3Rpb24oKSAmJiAhZXZlbnQub3JpZ2luYWxFdmVudC5zaGlmdEtleTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWxsb3dSb3dEcmFnXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFsbG93Um93RHJhZyhldmVudCkge1xuICAgICAgcmV0dXJuICF0aGlzLmFsbG93Q2VsbFNlbGVjdGlvbigpICYmIHRoaXMuYWxsb3dEcmFnKGV2ZW50KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWxsb3dDZWxsRHJhZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhbGxvd0NlbGxEcmFnKGV2ZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5hbGxvd0NlbGxTZWxlY3Rpb24oKSAmJiB0aGlzLmFsbG93RHJhZyhldmVudCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFsbG93U2VsZWN0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFsbG93U2VsZWN0aW9uKGV2ZW50KSB7XG4gICAgICByZXR1cm4gIURvbUhhbmRsZXIuaXNDbGlja2FibGUoZXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhbGxvd01ldGFLZXlTZWxlY3Rpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWxsb3dNZXRhS2V5U2VsZWN0aW9uKGV2ZW50KSB7XG4gICAgICByZXR1cm4gIXRoaXMucm93VG91Y2hlZCAmJiAoIXRoaXMucHJvcHMubWV0YUtleVNlbGVjdGlvbiB8fCB0aGlzLnByb3BzLm1ldGFLZXlTZWxlY3Rpb24gJiYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBldmVudC5vcmlnaW5hbEV2ZW50LmN0cmxLZXkpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWxsb3dSYW5nZVNlbGVjdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhbGxvd1JhbmdlU2VsZWN0aW9uKGV2ZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5pc011bHRpcGxlU2VsZWN0aW9uKCkgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5zaGlmdEtleSAmJiB0aGlzLmFuY2hvclJvd0luZGV4ICE9PSBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhbGxvd1Jvd1NlbGVjdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhbGxvd1Jvd1NlbGVjdGlvbigpIHtcbiAgICAgIHJldHVybiAodGhpcy5wcm9wcy5zZWxlY3Rpb25Nb2RlIHx8IHRoaXMucHJvcHMuc2VsZWN0aW9uTW9kZUluQ29sdW1uKSAmJiAhdGhpcy5pc1JhZGlvT25seVNlbGVjdGlvbigpICYmICF0aGlzLmlzQ2hlY2tib3hPbmx5U2VsZWN0aW9uKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFsbG93Q2VsbFNlbGVjdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhbGxvd0NlbGxTZWxlY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jZWxsU2VsZWN0aW9uICYmICF0aGlzLmlzUmFkaW9TZWxlY3Rpb25Nb2RlSW5Db2x1bW4oKSAmJiAhdGhpcy5pc0NoZWNrYm94U2VsZWN0aW9uTW9kZUluQ29sdW1uKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENvbHVtbnNMZW5ndGhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sdW1uc0xlbmd0aCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmNvbHVtbnMgPyB0aGlzLnByb3BzLmNvbHVtbnMubGVuZ3RoIDogMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VmlydHVhbFNjcm9sbGVyT3B0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZpcnR1YWxTY3JvbGxlck9wdGlvbihvcHRpb24sIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMucHJvcHMudmlydHVhbFNjcm9sbGVyT3B0aW9ucztcbiAgICAgIHJldHVybiBvcHRpb25zID8gb3B0aW9uc1tvcHRpb25dIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZEluZGV4XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRJbmRleChjb2xsZWN0aW9uLCByb3dEYXRhKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgcmV0dXJuIChjb2xsZWN0aW9uIHx8IFtdKS5maW5kSW5kZXgoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMy5lcXVhbHMocm93RGF0YSwgZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicm93R3JvdXBIZWFkZXJTdHlsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByb3dHcm91cEhlYWRlclN0eWxlKCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuc2Nyb2xsYWJsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRvcDogdGhpcy5zdGF0ZS5yb3dHcm91cEhlYWRlclN0eWxlT2JqZWN0Wyd0b3AnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Um93S2V5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJvd0tleShyb3dEYXRhLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZGF0YUtleSA/IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEocm93RGF0YSwgdGhpcy5wcm9wcy5kYXRhS2V5KSArICdfJyArIGluZGV4IDogaW5kZXg7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNob3VsZFJlbmRlclJvd0dyb3VwSGVhZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZFJlbmRlclJvd0dyb3VwSGVhZGVyKHZhbHVlLCByb3dEYXRhLCBpKSB7XG4gICAgICB2YXIgY3VycmVudFJvd0ZpZWxkRGF0YSA9IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEocm93RGF0YSwgdGhpcy5wcm9wcy5ncm91cFJvd3NCeSk7XG4gICAgICB2YXIgcHJldlJvd0RhdGEgPSB2YWx1ZVtpIC0gMV07XG5cbiAgICAgIGlmIChwcmV2Um93RGF0YSkge1xuICAgICAgICB2YXIgcHJldmlvdXNSb3dGaWVsZERhdGEgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKHByZXZSb3dEYXRhLCB0aGlzLnByb3BzLmdyb3VwUm93c0J5KTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRSb3dGaWVsZERhdGEgIT09IHByZXZpb3VzUm93RmllbGREYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNob3VsZFJlbmRlclJvd0dyb3VwRm9vdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZFJlbmRlclJvd0dyb3VwRm9vdGVyKHZhbHVlLCByb3dEYXRhLCBpLCBleHBhbmRlZCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuZXhwYW5kYWJsZVJvd0dyb3VwcyAmJiAhZXhwYW5kZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGN1cnJlbnRSb3dGaWVsZERhdGEgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKHJvd0RhdGEsIHRoaXMucHJvcHMuZ3JvdXBSb3dzQnkpO1xuICAgICAgICB2YXIgbmV4dFJvd0RhdGEgPSB2YWx1ZVtpICsgMV07XG5cbiAgICAgICAgaWYgKG5leHRSb3dEYXRhKSB7XG4gICAgICAgICAgdmFyIG5leHRSb3dGaWVsZERhdGEgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKG5leHRSb3dEYXRhLCB0aGlzLnByb3BzLmdyb3VwUm93c0J5KTtcbiAgICAgICAgICByZXR1cm4gY3VycmVudFJvd0ZpZWxkRGF0YSAhPT0gbmV4dFJvd0ZpZWxkRGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVGcm96ZW5Sb3dTdGlja3lQb3NpdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVGcm96ZW5Sb3dTdGlja3lQb3NpdGlvbigpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gRG9tSGFuZGxlci5nZXRPdXRlckhlaWdodCh0aGlzLmVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpICsgJ3B4JztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlRnJvemVuUm93R3JvdXBIZWFkZXJTdGlja3lQb3NpdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVGcm96ZW5Sb3dHcm91cEhlYWRlclN0aWNreVBvc2l0aW9uKCkge1xuICAgICAgdmFyIHRhYmxlSGVhZGVySGVpZ2h0ID0gRG9tSGFuZGxlci5nZXRPdXRlckhlaWdodCh0aGlzLmVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpO1xuICAgICAgdmFyIHRvcCA9IHRhYmxlSGVhZGVySGVpZ2h0ICsgJ3B4JztcblxuICAgICAgaWYgKHRoaXMuc3RhdGUucm93R3JvdXBIZWFkZXJTdHlsZU9iamVjdCAmJiB0aGlzLnN0YXRlLnJvd0dyb3VwSGVhZGVyU3R5bGVPYmplY3QudG9wICE9PSB0b3ApIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcm93R3JvdXBIZWFkZXJTdHlsZU9iamVjdDoge1xuICAgICAgICAgICAgdG9wOiB0b3BcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVWaXJ0dWFsU2Nyb2xsZXJQb3NpdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVWaXJ0dWFsU2Nyb2xsZXJQb3NpdGlvbigpIHtcbiAgICAgIHZhciB0YWJsZUhlYWRlckhlaWdodCA9IERvbUhhbmRsZXIuZ2V0T3V0ZXJIZWlnaHQodGhpcy5lbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKTtcbiAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gKHRoaXMuZWwuc3R5bGUudG9wIHx8IDApICsgdGFibGVIZWFkZXJIZWlnaHQgKyAncHgnO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblNpbmdsZVNlbGVjdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblNpbmdsZVNlbGVjdGlvbihfcmVmKSB7XG4gICAgICB2YXIgb3JpZ2luYWxFdmVudCA9IF9yZWYub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhLFxuICAgICAgICAgIGluZGV4ID0gX3JlZi5pbmRleCxcbiAgICAgICAgICB0b2dnbGVhYmxlID0gX3JlZi50b2dnbGVhYmxlLFxuICAgICAgICAgIHR5cGUgPSBfcmVmLnR5cGU7XG5cbiAgICAgIGlmICghdGhpcy5pc1NlbGVjdGFibGUoe1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgIH0pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5pc1NlbGVjdGVkKGRhdGEpO1xuICAgICAgdmFyIHNlbGVjdGlvbiA9IHRoaXMucHJvcHMuc2VsZWN0aW9uO1xuXG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRvZ2dsZWFibGUpIHtcbiAgICAgICAgICBzZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICAgIHRoaXMub25VbnNlbGVjdCh7XG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBvcmlnaW5hbEV2ZW50LFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0aW9uID0gZGF0YTtcbiAgICAgICAgdGhpcy5vblNlbGVjdCh7XG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogb3JpZ2luYWxFdmVudCxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZm9jdXNPbkVsZW1lbnQob3JpZ2luYWxFdmVudCwgdHJ1ZSk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlICYmIHNlbGVjdGlvbiAhPT0gdGhpcy5wcm9wcy5zZWxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdGlvbkNoYW5nZSh7XG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogb3JpZ2luYWxFdmVudCxcbiAgICAgICAgICB2YWx1ZTogc2VsZWN0aW9uLFxuICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uTXVsdGlwbGVTZWxlY3Rpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25NdWx0aXBsZVNlbGVjdGlvbihfcmVmMikge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gX3JlZjIub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICBkYXRhID0gX3JlZjIuZGF0YSxcbiAgICAgICAgICBpbmRleCA9IF9yZWYyLmluZGV4LFxuICAgICAgICAgIHRvZ2dsZWFibGUgPSBfcmVmMi50b2dnbGVhYmxlLFxuICAgICAgICAgIHR5cGUgPSBfcmVmMi50eXBlO1xuXG4gICAgICBpZiAoIXRoaXMuaXNTZWxlY3RhYmxlKHtcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgaW5kZXg6IGluZGV4XG4gICAgICB9KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuaXNTZWxlY3RlZChkYXRhKTtcbiAgICAgIHZhciBzZWxlY3Rpb24gPSB0aGlzLnByb3BzLnNlbGVjdGlvbiB8fCBbXTtcblxuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGlmICh0b2dnbGVhYmxlKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgoc2VsZWN0aW9uLCBkYXRhKTtcbiAgICAgICAgICBzZWxlY3Rpb24gPSB0aGlzLnByb3BzLnNlbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24gKHZhbCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIGkgIT09IHNlbGVjdGlvbkluZGV4O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMub25VbnNlbGVjdCh7XG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBvcmlnaW5hbEV2ZW50LFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5vblVuc2VsZWN0KHtcbiAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogb3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgICAgZGF0YTogZCxcbiAgICAgICAgICAgICAgdHlwZTogdHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2VsZWN0aW9uID0gW2RhdGFdO1xuICAgICAgICAgIHRoaXMub25TZWxlY3Qoe1xuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogb3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IHRvZ2dsZWFibGUgJiYgdGhpcy5pc011bHRpcGxlU2VsZWN0aW9uKCkgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNlbGVjdGlvbiksIFtkYXRhXSkgOiBbZGF0YV07XG4gICAgICAgIHRoaXMub25TZWxlY3Qoe1xuICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IG9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZvY3VzT25FbGVtZW50KG9yaWdpbmFsRXZlbnQsIHRydWUpO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblNlbGVjdGlvbkNoYW5nZSAmJiBzZWxlY3Rpb24gIT09IHRoaXMucHJvcHMuc2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25TZWxlY3Rpb25DaGFuZ2Uoe1xuICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IG9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgdmFsdWU6IHNlbGVjdGlvbixcbiAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJhbmdlU2VsZWN0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmFuZ2VTZWxlY3Rpb24oZXZlbnQsIHR5cGUpIHtcbiAgICAgIERvbUhhbmRsZXIuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIHRoaXMucmFuZ2VSb3dJbmRleCA9IHRoaXMuYWxsb3dDZWxsU2VsZWN0aW9uKCkgPyBldmVudC5yb3dJbmRleCA6IGV2ZW50LmluZGV4O1xuICAgICAgdmFyIHNlbGVjdGlvbkluUmFuZ2UgPSB0aGlzLnNlbGVjdFJhbmdlKGV2ZW50KTtcbiAgICAgIHZhciBzZWxlY3Rpb24gPSB0aGlzLmlzTXVsdGlwbGVTZWxlY3Rpb24oKSA/IF90b0NvbnN1bWFibGVBcnJheShuZXcgU2V0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5wcm9wcy5zZWxlY3Rpb24gfHwgW10pLCBfdG9Db25zdW1hYmxlQXJyYXkoc2VsZWN0aW9uSW5SYW5nZSkpKSkgOiBzZWxlY3Rpb25JblJhbmdlO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblNlbGVjdGlvbkNoYW5nZSAmJiBzZWxlY3Rpb24gIT09IHRoaXMucHJvcHMuc2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25TZWxlY3Rpb25DaGFuZ2Uoe1xuICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50Lm9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgdmFsdWU6IHNlbGVjdGlvbixcbiAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFuY2hvclJvd0luZGV4ID0gdGhpcy5yYW5nZVJvd0luZGV4O1xuICAgICAgdGhpcy5hbmNob3JDZWxsSW5kZXggPSBldmVudC5jZWxsSW5kZXg7XG4gICAgICB0aGlzLmZvY3VzT25FbGVtZW50KGV2ZW50Lm9yaWdpbmFsRXZlbnQsIGZhbHNlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2VsZWN0UmFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0UmFuZ2UoZXZlbnQpIHtcbiAgICAgIHZhciByYW5nZVN0YXJ0LCByYW5nZUVuZDtcblxuICAgICAgaWYgKHRoaXMucmFuZ2VSb3dJbmRleCA+IHRoaXMuYW5jaG9yUm93SW5kZXgpIHtcbiAgICAgICAgcmFuZ2VTdGFydCA9IHRoaXMuYW5jaG9yUm93SW5kZXg7XG4gICAgICAgIHJhbmdlRW5kID0gdGhpcy5yYW5nZVJvd0luZGV4O1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnJhbmdlUm93SW5kZXggPCB0aGlzLmFuY2hvclJvd0luZGV4KSB7XG4gICAgICAgIHJhbmdlU3RhcnQgPSB0aGlzLnJhbmdlUm93SW5kZXg7XG4gICAgICAgIHJhbmdlRW5kID0gdGhpcy5hbmNob3JSb3dJbmRleDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmdlU3RhcnQgPSByYW5nZUVuZCA9IHRoaXMucmFuZ2VSb3dJbmRleDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdG9yKSB7XG4gICAgICAgIHJhbmdlU3RhcnQgPSBNYXRoLm1heChyYW5nZVN0YXJ0IC0gdGhpcy5wcm9wcy5maXJzdCwgMCk7XG4gICAgICAgIHJhbmdlRW5kIC09IHRoaXMucHJvcHMuZmlyc3Q7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmFsbG93Q2VsbFNlbGVjdGlvbigpID8gdGhpcy5zZWxlY3RSYW5nZU9uQ2VsbChldmVudCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQpIDogdGhpcy5zZWxlY3RSYW5nZU9uUm93KGV2ZW50LCByYW5nZVN0YXJ0LCByYW5nZUVuZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNlbGVjdFJhbmdlT25Sb3dcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0UmFuZ2VPblJvdyhldmVudCwgcm93UmFuZ2VTdGFydCwgcm93UmFuZ2VFbmQpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHRoaXMucHJvcHMudmFsdWU7XG4gICAgICB2YXIgc2VsZWN0aW9uID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSByb3dSYW5nZVN0YXJ0OyBpIDw9IHJvd1JhbmdlRW5kOyBpKyspIHtcbiAgICAgICAgdmFyIHJhbmdlUm93RGF0YSA9IHZhbHVlW2ldO1xuXG4gICAgICAgIGlmICghdGhpcy5pc1NlbGVjdGFibGUoe1xuICAgICAgICAgIGRhdGE6IHJhbmdlUm93RGF0YSxcbiAgICAgICAgICBpbmRleDogaVxuICAgICAgICB9KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0aW9uLnB1c2gocmFuZ2VSb3dEYXRhKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdCh7XG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICBkYXRhOiByYW5nZVJvd0RhdGEsXG4gICAgICAgICAgdHlwZTogJ3JvdydcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxlY3Rpb247XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNlbGVjdFJhbmdlT25DZWxsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdFJhbmdlT25DZWxsKGV2ZW50LCByb3dSYW5nZVN0YXJ0LCByb3dSYW5nZUVuZCkge1xuICAgICAgdmFyIGNlbGxSYW5nZVN0YXJ0LFxuICAgICAgICAgIGNlbGxSYW5nZUVuZCxcbiAgICAgICAgICBjZWxsSW5kZXggPSBldmVudC5jZWxsSW5kZXg7XG5cbiAgICAgIGlmIChjZWxsSW5kZXggPiB0aGlzLmFuY2hvckNlbGxJbmRleCkge1xuICAgICAgICBjZWxsUmFuZ2VTdGFydCA9IHRoaXMuYW5jaG9yQ2VsbEluZGV4O1xuICAgICAgICBjZWxsUmFuZ2VFbmQgPSBjZWxsSW5kZXg7XG4gICAgICB9IGVsc2UgaWYgKGNlbGxJbmRleCA8IHRoaXMuYW5jaG9yQ2VsbEluZGV4KSB7XG4gICAgICAgIGNlbGxSYW5nZVN0YXJ0ID0gY2VsbEluZGV4O1xuICAgICAgICBjZWxsUmFuZ2VFbmQgPSB0aGlzLmFuY2hvckNlbGxJbmRleDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNlbGxSYW5nZVN0YXJ0ID0gY2VsbFJhbmdlRW5kID0gY2VsbEluZGV4O1xuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLnByb3BzLnZhbHVlO1xuICAgICAgdmFyIHNlbGVjdGlvbiA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gcm93UmFuZ2VTdGFydDsgaSA8PSByb3dSYW5nZUVuZDsgaSsrKSB7XG4gICAgICAgIHZhciByb3dEYXRhID0gdmFsdWVbaV07XG4gICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wcm9wcy5jb2x1bW5zO1xuXG4gICAgICAgIGZvciAodmFyIGogPSBjZWxsUmFuZ2VTdGFydDsgaiA8PSBjZWxsUmFuZ2VFbmQ7IGorKykge1xuICAgICAgICAgIHZhciBmaWVsZCA9IGNvbHVtbnNbal0ucHJvcHMuZmllbGQ7XG5cbiAgICAgICAgICB2YXIgX3ZhbHVlID0gT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShyb3dEYXRhLCBmaWVsZCk7XG5cbiAgICAgICAgICB2YXIgcmFuZ2VSb3dEYXRhID0ge1xuICAgICAgICAgICAgdmFsdWU6IF92YWx1ZSxcbiAgICAgICAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgICAgICAgIHJvd0RhdGE6IHJvd0RhdGEsXG4gICAgICAgICAgICByb3dJbmRleDogaSxcbiAgICAgICAgICAgIGNlbGxJbmRleDogaixcbiAgICAgICAgICAgIHNlbGVjdGVkOiB0cnVlXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmICghdGhpcy5pc1NlbGVjdGFibGUoe1xuICAgICAgICAgICAgZGF0YTogcmFuZ2VSb3dEYXRhLFxuICAgICAgICAgICAgaW5kZXg6IGlcbiAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZWN0aW9uLnB1c2gocmFuZ2VSb3dEYXRhKTtcbiAgICAgICAgICB0aGlzLm9uU2VsZWN0KHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50Lm9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgICBkYXRhOiByYW5nZVJvd0RhdGEsXG4gICAgICAgICAgICB0eXBlOiAnY2VsbCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblNlbGVjdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblNlbGVjdChldmVudCkge1xuICAgICAgaWYgKHRoaXMuYWxsb3dDZWxsU2VsZWN0aW9uKCkpIHRoaXMucHJvcHMub25DZWxsU2VsZWN0ICYmIHRoaXMucHJvcHMub25DZWxsU2VsZWN0KF9vYmplY3RTcHJlYWQkNShfb2JqZWN0U3ByZWFkJDUoe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudC5vcmlnaW5hbEV2ZW50XG4gICAgICB9LCBldmVudC5kYXRhKSwge30sIHtcbiAgICAgICAgdHlwZTogZXZlbnQudHlwZVxuICAgICAgfSkpO2Vsc2UgdGhpcy5wcm9wcy5vblJvd1NlbGVjdCAmJiB0aGlzLnByb3BzLm9uUm93U2VsZWN0KGV2ZW50KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25VbnNlbGVjdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblVuc2VsZWN0KGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5hbGxvd0NlbGxTZWxlY3Rpb24oKSkgdGhpcy5wcm9wcy5vbkNlbGxVbnNlbGVjdCAmJiB0aGlzLnByb3BzLm9uQ2VsbFVuc2VsZWN0KF9vYmplY3RTcHJlYWQkNShfb2JqZWN0U3ByZWFkJDUoe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudC5vcmlnaW5hbEV2ZW50XG4gICAgICB9LCBldmVudC5kYXRhKSwge30sIHtcbiAgICAgICAgdHlwZTogZXZlbnQudHlwZVxuICAgICAgfSkpO2Vsc2UgdGhpcy5wcm9wcy5vblJvd1Vuc2VsZWN0ICYmIHRoaXMucHJvcHMub25Sb3dVbnNlbGVjdChldmVudCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVuYWJsZURyYWdTZWxlY3Rpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5hYmxlRHJhZ1NlbGVjdGlvbihldmVudCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuZHJhZ1NlbGVjdGlvbiAmJiAhdGhpcy5kcmFnU2VsZWN0aW9uSGVscGVyKSB7XG4gICAgICAgIHRoaXMuZHJhZ1NlbGVjdGlvbkhlbHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBEb21IYW5kbGVyLmFkZENsYXNzKHRoaXMuZHJhZ1NlbGVjdGlvbkhlbHBlciwgJ3AtZGF0YXRhYmxlLWRyYWctc2VsZWN0aW9uLWhlbHBlcicpO1xuICAgICAgICB0aGlzLmluaXRpYWxEcmFnUG9zaXRpb24gPSB7XG4gICAgICAgICAgeDogZXZlbnQuY2xpZW50WCxcbiAgICAgICAgICB5OiBldmVudC5jbGllbnRZXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZHJhZ1NlbGVjdGlvbkhlbHBlci5zdHlsZS50b3AgPSBcIlwiLmNvbmNhdChldmVudC5wYWdlWSwgXCJweFwiKTtcbiAgICAgICAgdGhpcy5kcmFnU2VsZWN0aW9uSGVscGVyLnN0eWxlLmxlZnQgPSBcIlwiLmNvbmNhdChldmVudC5wYWdlWCwgXCJweFwiKTtcbiAgICAgICAgdGhpcy5iaW5kRHJhZ1NlbGVjdGlvbkV2ZW50cygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmb2N1c09uRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmb2N1c09uRWxlbWVudChldmVudCwgaXNGb2N1c2VkKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgICAgaWYgKCF0aGlzLmFsbG93Q2VsbFNlbGVjdGlvbigpICYmIHRoaXMucHJvcHMuc2VsZWN0aW9uQXV0b0ZvY3VzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2hlY2tib3hTZWxlY3Rpb25Nb2RlSW5Db2x1bW4oKSkge1xuICAgICAgICAgIHZhciBjaGVja2JveCA9IERvbUhhbmRsZXIuZmluZFNpbmdsZSh0YXJnZXQsICd0ZC5wLXNlbGVjdGlvbi1jb2x1bW4gLnAtY2hlY2tib3gtYm94Jyk7XG4gICAgICAgICAgY2hlY2tib3ggJiYgY2hlY2tib3guZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzUmFkaW9TZWxlY3Rpb25Nb2RlSW5Db2x1bW4oKSkge1xuICAgICAgICAgIHZhciByYWRpbyA9IERvbUhhbmRsZXIuZmluZFNpbmdsZSh0YXJnZXQsICd0ZC5wLXNlbGVjdGlvbi1jb2x1bW4gaW5wdXRbdHlwZT1cInJhZGlvXCJdJyk7XG4gICAgICAgICAgcmFkaW8gJiYgcmFkaW8uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAhaXNGb2N1c2VkICYmIHRhcmdldCAmJiB0YXJnZXQuZm9jdXMoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2hhbmdlVGFiSW5kZXhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlVGFiSW5kZXgoZXZlbnQsIHR5cGUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgdmFyIGlzU2VsZWN0YWJsZSA9IERvbUhhbmRsZXIuaGFzQ2xhc3ModGFyZ2V0LCB0eXBlID09PSAnY2VsbCcgPyAncC1zZWxlY3RhYmxlLWNlbGwnIDogJ3Atc2VsZWN0YWJsZS1yb3cnKTtcblxuICAgICAgaWYgKGlzU2VsZWN0YWJsZSkge1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSB0eXBlID09PSAnY2VsbCcgPyAndHIgPiB0ZCcgOiAndHInO1xuICAgICAgICB2YXIgdGFiYmFibGVFbCA9IERvbUhhbmRsZXIuZmluZFNpbmdsZSh0aGlzLmVsLCBcIlwiLmNvbmNhdChzZWxlY3RvciwgXCJbdGFiaW5kZXg9XFxcIlwiKS5jb25jYXQodGhpcy5wcm9wcy50YWJJbmRleCwgXCJcXFwiXVwiKSk7XG5cbiAgICAgICAgaWYgKHRhYmJhYmxlRWwgJiYgdGFyZ2V0KSB7XG4gICAgICAgICAgdGFiYmFibGVFbC50YWJJbmRleCA9IC0xO1xuICAgICAgICAgIHRhcmdldC50YWJJbmRleCA9IHRoaXMucHJvcHMudGFiSW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dDbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJvd0NsaWNrKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5hbGxvd0NlbGxTZWxlY3Rpb24oKSB8fCAhdGhpcy5hbGxvd1NlbGVjdGlvbihldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3BzLm9uUm93Q2xpY2sgJiYgdGhpcy5wcm9wcy5vblJvd0NsaWNrKGV2ZW50KTtcblxuICAgICAgaWYgKHRoaXMuYWxsb3dSb3dTZWxlY3Rpb24oKSkge1xuICAgICAgICBpZiAodGhpcy5hbGxvd1JhbmdlU2VsZWN0aW9uKGV2ZW50KSkge1xuICAgICAgICAgIHRoaXMub25SYW5nZVNlbGVjdGlvbihldmVudCwgJ3JvdycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0b2dnbGVhYmxlID0gdGhpcy5pc1JhZGlvU2VsZWN0aW9uTW9kZUluQ29sdW1uKCkgfHwgdGhpcy5pc0NoZWNrYm94U2VsZWN0aW9uTW9kZUluQ29sdW1uKCkgfHwgdGhpcy5hbGxvd01ldGFLZXlTZWxlY3Rpb24oZXZlbnQpO1xuICAgICAgICAgIHRoaXMuYW5jaG9yUm93SW5kZXggPSBldmVudC5pbmRleDtcbiAgICAgICAgICB0aGlzLnJhbmdlUm93SW5kZXggPSBldmVudC5pbmRleDtcbiAgICAgICAgICB0aGlzLmFuY2hvclJvd0ZpcnN0ID0gdGhpcy5wcm9wcy5maXJzdDtcblxuICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsZWN0aW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMub25TaW5nbGVTZWxlY3Rpb24oX29iamVjdFNwcmVhZCQ1KF9vYmplY3RTcHJlYWQkNSh7fSwgZXZlbnQpLCB7fSwge1xuICAgICAgICAgICAgICB0b2dnbGVhYmxlOiB0b2dnbGVhYmxlLFxuICAgICAgICAgICAgICB0eXBlOiAncm93J1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9uTXVsdGlwbGVTZWxlY3Rpb24oX29iamVjdFNwcmVhZCQ1KF9vYmplY3RTcHJlYWQkNSh7fSwgZXZlbnQpLCB7fSwge1xuICAgICAgICAgICAgICB0b2dnbGVhYmxlOiB0b2dnbGVhYmxlLFxuICAgICAgICAgICAgICB0eXBlOiAncm93J1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2hhbmdlVGFiSW5kZXgoZXZlbnQub3JpZ2luYWxFdmVudCwgJ3JvdycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mb2N1c09uRWxlbWVudChldmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yb3dUb3VjaGVkID0gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93RG91YmxlQ2xpY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Sb3dEb3VibGVDbGljayhlKSB7XG4gICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7XG5cbiAgICAgIGlmIChEb21IYW5kbGVyLmlzQ2xpY2thYmxlKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblJvd0RvdWJsZUNsaWNrKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Sb3dEb3VibGVDbGljayhlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dSaWdodENsaWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93UmlnaHRDbGljayhldmVudCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMub25Db250ZXh0TWVudSB8fCB0aGlzLnByb3BzLm9uQ29udGV4dE1lbnVTZWxlY3Rpb25DaGFuZ2UpIHtcbiAgICAgICAgRG9tSGFuZGxlci5jbGVhclNlbGVjdGlvbigpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ29udGV4dE1lbnVTZWxlY3Rpb25DaGFuZ2UpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uQ29udGV4dE1lbnVTZWxlY3Rpb25DaGFuZ2Uoe1xuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgIHZhbHVlOiBldmVudC5kYXRhXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50Lm9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgICBkYXRhOiBldmVudC5kYXRhXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93VG91Y2hFbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Sb3dUb3VjaEVuZCgpIHtcbiAgICAgIHRoaXMucm93VG91Y2hlZCA9IHRydWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93TW91c2VEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93TW91c2VEb3duKGUpIHtcbiAgICAgIERvbUhhbmRsZXIuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIGlmIChEb21IYW5kbGVyLmhhc0NsYXNzKGV2ZW50LnRhcmdldCwgJ3AtZGF0YXRhYmxlLXJlb3JkZXJhYmxlcm93LWhhbmRsZScpKSBldmVudC5jdXJyZW50VGFyZ2V0LmRyYWdnYWJsZSA9IHRydWU7ZWxzZSBldmVudC5jdXJyZW50VGFyZ2V0LmRyYWdnYWJsZSA9IGZhbHNlO1xuXG4gICAgICBpZiAodGhpcy5hbGxvd1Jvd0RyYWcoZSkpIHtcbiAgICAgICAgdGhpcy5lbmFibGVEcmFnU2VsZWN0aW9uKGV2ZW50LCAncm93Jyk7XG4gICAgICAgIHRoaXMuYW5jaG9yUm93SW5kZXggPSBlLmluZGV4O1xuICAgICAgICB0aGlzLnJhbmdlUm93SW5kZXggPSBlLmluZGV4O1xuICAgICAgICB0aGlzLmFuY2hvclJvd0ZpcnN0ID0gdGhpcy5wcm9wcy5maXJzdDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dNb3VzZVVwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93TW91c2VVcChldmVudCkge1xuICAgICAgdmFyIGlzU2FtZVJvdyA9IGV2ZW50LmluZGV4ID09PSB0aGlzLmFuY2hvclJvd0luZGV4O1xuXG4gICAgICBpZiAodGhpcy5hbGxvd1Jvd0RyYWcoZXZlbnQpICYmICFpc1NhbWVSb3cpIHtcbiAgICAgICAgdGhpcy5vblJhbmdlU2VsZWN0aW9uKGV2ZW50LCAncm93Jyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93VG9nZ2xlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93VG9nZ2xlKGV2ZW50KSB7XG4gICAgICB2YXIgZXhwYW5kZWRSb3dzO1xuICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLnByb3BzLmRhdGFLZXk7XG4gICAgICB2YXIgaGFzRGF0YUtleSA9IHRoaXMucHJvcHMuZ3JvdXBSb3dzQnkgPyBkYXRhS2V5ID09PSB0aGlzLnByb3BzLmdyb3VwUm93c0J5IDogISFkYXRhS2V5O1xuXG4gICAgICBpZiAoaGFzRGF0YUtleSkge1xuICAgICAgICB2YXIgZGF0YUtleVZhbHVlID0gU3RyaW5nKE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEoZXZlbnQuZGF0YSwgZGF0YUtleSkpO1xuICAgICAgICBleHBhbmRlZFJvd3MgPSB0aGlzLnByb3BzLmV4cGFuZGVkUm93cyA/IF9vYmplY3RTcHJlYWQkNSh7fSwgdGhpcy5wcm9wcy5leHBhbmRlZFJvd3MpIDoge307XG5cbiAgICAgICAgaWYgKGV4cGFuZGVkUm93c1tkYXRhS2V5VmFsdWVdICE9IG51bGwpIHtcbiAgICAgICAgICBkZWxldGUgZXhwYW5kZWRSb3dzW2RhdGFLZXlWYWx1ZV07XG5cbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vblJvd0NvbGxhcHNlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUm93Q29sbGFwc2Uoe1xuICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgZGF0YTogZXZlbnQuZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV4cGFuZGVkUm93c1tkYXRhS2V5VmFsdWVdID0gdHJ1ZTtcblxuICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uUm93RXhwYW5kKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUm93RXhwYW5kKHtcbiAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgICAgICAgIGRhdGE6IGV2ZW50LmRhdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGV4cGFuZGVkUm93SW5kZXggPSB0aGlzLmZpbmRJbmRleCh0aGlzLnByb3BzLmV4cGFuZGVkUm93cywgZXZlbnQuZGF0YSk7XG4gICAgICAgIGV4cGFuZGVkUm93cyA9IHRoaXMucHJvcHMuZXhwYW5kZWRSb3dzID8gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMucHJvcHMuZXhwYW5kZWRSb3dzKSA6IFtdO1xuXG4gICAgICAgIGlmIChleHBhbmRlZFJvd0luZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGV4cGFuZGVkUm93cyA9IGV4cGFuZGVkUm93cy5maWx0ZXIoZnVuY3Rpb24gKHZhbCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIGkgIT09IGV4cGFuZGVkUm93SW5kZXg7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vblJvd0NvbGxhcHNlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUm93Q29sbGFwc2Uoe1xuICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgZGF0YTogZXZlbnQuZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV4cGFuZGVkUm93cy5wdXNoKGV2ZW50LmRhdGEpO1xuXG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMub25Sb3dFeHBhbmQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Sb3dFeHBhbmQoe1xuICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgZGF0YTogZXZlbnQuZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUm93VG9nZ2xlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Sb3dUb2dnbGUoe1xuICAgICAgICAgIGRhdGE6IGV4cGFuZGVkUm93c1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dEcmFnU3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Sb3dEcmFnU3RhcnQoZSkge1xuICAgICAgdmFyIGV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50LFxuICAgICAgICAgIGluZGV4ID0gZS5pbmRleDtcbiAgICAgIHRoaXMucm93RHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5kcmFnZ2VkUm93SW5kZXggPSBpbmRleDtcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0JywgJ2InKTsgLy8gRm9yIGZpcmVmb3hcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dEcmFnT3ZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJvd0RyYWdPdmVyKGUpIHtcbiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICBpbmRleCA9IGUuaW5kZXg7XG5cbiAgICAgIGlmICh0aGlzLnJvd0RyYWdnaW5nICYmIHRoaXMuZHJhZ2dlZFJvd0luZGV4ICE9PSBpbmRleCkge1xuICAgICAgICB2YXIgcm93RWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIHZhciByb3dZID0gRG9tSGFuZGxlci5nZXRPZmZzZXQocm93RWxlbWVudCkudG9wICsgRG9tSGFuZGxlci5nZXRXaW5kb3dTY3JvbGxUb3AoKTtcbiAgICAgICAgdmFyIHBhZ2VZID0gZXZlbnQucGFnZVk7XG4gICAgICAgIHZhciByb3dNaWRZID0gcm93WSArIERvbUhhbmRsZXIuZ2V0T3V0ZXJIZWlnaHQocm93RWxlbWVudCkgLyAyO1xuICAgICAgICB2YXIgcHJldlJvd0VsZW1lbnQgPSByb3dFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgaWYgKHBhZ2VZIDwgcm93TWlkWSkge1xuICAgICAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3Mocm93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC1ib3R0b20nKTtcbiAgICAgICAgICB0aGlzLmRyb3BwZWRSb3dJbmRleCA9IGluZGV4O1xuICAgICAgICAgIGlmIChwcmV2Um93RWxlbWVudCkgRG9tSGFuZGxlci5hZGRDbGFzcyhwcmV2Um93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC1ib3R0b20nKTtlbHNlIERvbUhhbmRsZXIuYWRkQ2xhc3Mocm93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC10b3AnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocHJldlJvd0VsZW1lbnQpIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3MocHJldlJvd0VsZW1lbnQsICdwLWRhdGF0YWJsZS1kcmFncG9pbnQtYm90dG9tJyk7ZWxzZSBEb21IYW5kbGVyLmFkZENsYXNzKHJvd0VsZW1lbnQsICdwLWRhdGF0YWJsZS1kcmFncG9pbnQtdG9wJyk7XG4gICAgICAgICAgdGhpcy5kcm9wcGVkUm93SW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgRG9tSGFuZGxlci5hZGRDbGFzcyhyb3dFbGVtZW50LCAncC1kYXRhdGFibGUtZHJhZ3BvaW50LWJvdHRvbScpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93RHJhZ0xlYXZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93RHJhZ0xlYXZlKGUpIHtcbiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIHZhciByb3dFbGVtZW50ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgIHZhciBwcmV2Um93RWxlbWVudCA9IHJvd0VsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgICAgaWYgKHByZXZSb3dFbGVtZW50KSB7XG4gICAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3MocHJldlJvd0VsZW1lbnQsICdwLWRhdGF0YWJsZS1kcmFncG9pbnQtYm90dG9tJyk7XG4gICAgICB9XG5cbiAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3Mocm93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC1ib3R0b20nKTtcbiAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3Mocm93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC10b3AnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dEcmFnRW5kXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUm93RHJhZ0VuZChlKSB7XG4gICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgICB0aGlzLnJvd0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmRyYWdnZWRSb3dJbmRleCA9IG51bGw7XG4gICAgICB0aGlzLmRyb3BwZWRSb3dJbmRleCA9IG51bGw7XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRyYWdnYWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJvd0Ryb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Sb3dEcm9wKGUpIHtcbiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDtcblxuICAgICAgaWYgKHRoaXMuZHJvcHBlZFJvd0luZGV4ICE9IG51bGwpIHtcbiAgICAgICAgdmFyIGRyb3BJbmRleCA9IHRoaXMuZHJhZ2dlZFJvd0luZGV4ID4gdGhpcy5kcm9wcGVkUm93SW5kZXggPyB0aGlzLmRyb3BwZWRSb3dJbmRleCA6IHRoaXMuZHJvcHBlZFJvd0luZGV4ID09PSAwID8gMCA6IHRoaXMuZHJvcHBlZFJvd0luZGV4IC0gMTtcblxuICAgICAgICB2YXIgdmFsID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMucHJvcHMudmFsdWUpO1xuXG4gICAgICAgIE9iamVjdFV0aWxzLnJlb3JkZXJBcnJheSh2YWwsIHRoaXMuZHJhZ2dlZFJvd0luZGV4LCBkcm9wSW5kZXgpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uUm93UmVvcmRlcikge1xuICAgICAgICAgIHRoaXMucHJvcHMub25Sb3dSZW9yZGVyKHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgICAgIGRyYWdJbmRleDogdGhpcy5kcmFnZ2VkUm93SW5kZXgsXG4gICAgICAgICAgICBkcm9wSW5kZXg6IHRoaXMuZHJvcHBlZFJvd0luZGV4XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gLy9jbGVhbnVwXG5cblxuICAgICAgdGhpcy5vblJvd0RyYWdMZWF2ZShlKTtcbiAgICAgIHRoaXMub25Sb3dEcmFnRW5kKGUpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SYWRpb0NoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJhZGlvQ2hhbmdlKGV2ZW50KSB7XG4gICAgICB0aGlzLm9uU2luZ2xlU2VsZWN0aW9uKF9vYmplY3RTcHJlYWQkNShfb2JqZWN0U3ByZWFkJDUoe30sIGV2ZW50KSwge30sIHtcbiAgICAgICAgdG9nZ2xlYWJsZTogdHJ1ZSxcbiAgICAgICAgdHlwZTogJ3JhZGlvJ1xuICAgICAgfSkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNoZWNrYm94Q2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hlY2tib3hDaGFuZ2UoZXZlbnQpIHtcbiAgICAgIHRoaXMub25NdWx0aXBsZVNlbGVjdGlvbihfb2JqZWN0U3ByZWFkJDUoX29iamVjdFNwcmVhZCQ1KHt9LCBldmVudCksIHt9LCB7XG4gICAgICAgIHRvZ2dsZWFibGU6IHRydWUsXG4gICAgICAgIHR5cGU6ICdjaGVja2JveCdcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25EcmFnU2VsZWN0aW9uTW91c2VNb3ZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhZ1NlbGVjdGlvbk1vdXNlTW92ZShldmVudCkge1xuICAgICAgdmFyIF90aGlzJGluaXRpYWxEcmFnUG9zaSA9IHRoaXMuaW5pdGlhbERyYWdQb3NpdGlvbixcbiAgICAgICAgICB4ID0gX3RoaXMkaW5pdGlhbERyYWdQb3NpLngsXG4gICAgICAgICAgeSA9IF90aGlzJGluaXRpYWxEcmFnUG9zaS55O1xuICAgICAgdmFyIGR4ID0gZXZlbnQuY2xpZW50WCAtIHg7XG4gICAgICB2YXIgZHkgPSBldmVudC5jbGllbnRZIC0geTtcbiAgICAgIGlmIChkeSA8IDApIHRoaXMuZHJhZ1NlbGVjdGlvbkhlbHBlci5zdHlsZS50b3AgPSBcIlwiLmNvbmNhdChldmVudC5wYWdlWSArIDUsIFwicHhcIik7XG4gICAgICBpZiAoZHggPCAwKSB0aGlzLmRyYWdTZWxlY3Rpb25IZWxwZXIuc3R5bGUubGVmdCA9IFwiXCIuY29uY2F0KGV2ZW50LnBhZ2VYICsgNSwgXCJweFwiKTtcbiAgICAgIHRoaXMuZHJhZ1NlbGVjdGlvbkhlbHBlci5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdChNYXRoLmFicyhkeSksIFwicHhcIik7XG4gICAgICB0aGlzLmRyYWdTZWxlY3Rpb25IZWxwZXIuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChNYXRoLmFicyhkeCksIFwicHhcIik7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkRyYWdTZWxlY3Rpb25Nb3VzZVVwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhZ1NlbGVjdGlvbk1vdXNlVXAoKSB7XG4gICAgICBpZiAodGhpcy5kcmFnU2VsZWN0aW9uSGVscGVyKSB7XG4gICAgICAgIHRoaXMuZHJhZ1NlbGVjdGlvbkhlbHBlci5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5kcmFnU2VsZWN0aW9uSGVscGVyID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbkRyYWdTZWxlY3Rpb25Nb3VzZU1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25EcmFnU2VsZWN0aW9uTW91c2VVcCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2VsbENsaWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2VsbENsaWNrKGV2ZW50KSB7XG4gICAgICBpZiAoIXRoaXMuYWxsb3dTZWxlY3Rpb24oZXZlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9wcy5vbkNlbGxDbGljayAmJiB0aGlzLnByb3BzLm9uQ2VsbENsaWNrKGV2ZW50KTtcblxuICAgICAgaWYgKHRoaXMuYWxsb3dDZWxsU2VsZWN0aW9uKCkpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dSYW5nZVNlbGVjdGlvbihldmVudCkpIHtcbiAgICAgICAgICB0aGlzLm9uUmFuZ2VTZWxlY3Rpb24oZXZlbnQsICdjZWxsJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRvZ2dsZWFibGUgPSB0aGlzLmFsbG93TWV0YUtleVNlbGVjdGlvbihldmVudCk7XG5cbiAgICAgICAgICB2YXIgb3JpZ2luYWxFdmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgICAgIGRhdGEgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoZXZlbnQsIF9leGNsdWRlZCk7XG5cbiAgICAgICAgICB0aGlzLmFuY2hvclJvd0luZGV4ID0gZXZlbnQucm93SW5kZXg7XG4gICAgICAgICAgdGhpcy5yYW5nZVJvd0luZGV4ID0gZXZlbnQucm93SW5kZXg7XG4gICAgICAgICAgdGhpcy5hbmNob3JSb3dGaXJzdCA9IHRoaXMucHJvcHMuZmlyc3Q7XG4gICAgICAgICAgdGhpcy5hbmNob3JDZWxsSW5kZXggPSBldmVudC5jZWxsSW5kZXg7XG5cbiAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbGVjdGlvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm9uU2luZ2xlU2VsZWN0aW9uKHtcbiAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogb3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgaW5kZXg6IGV2ZW50LnJvd0luZGV4LFxuICAgICAgICAgICAgICB0b2dnbGVhYmxlOiB0b2dnbGVhYmxlLFxuICAgICAgICAgICAgICB0eXBlOiAnY2VsbCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9uTXVsdGlwbGVTZWxlY3Rpb24oe1xuICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBvcmlnaW5hbEV2ZW50LFxuICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICBpbmRleDogZXZlbnQucm93SW5kZXgsXG4gICAgICAgICAgICAgIHRvZ2dsZWFibGU6IHRvZ2dsZWFibGUsXG4gICAgICAgICAgICAgIHR5cGU6ICdjZWxsJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jaGFuZ2VUYWJJbmRleChldmVudC5vcmlnaW5hbEV2ZW50LCAnY2VsbCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJvd1RvdWNoZWQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DZWxsTW91c2VEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2VsbE1vdXNlRG93bihldmVudCkge1xuICAgICAgaWYgKHRoaXMuYWxsb3dDZWxsRHJhZyhldmVudCkpIHtcbiAgICAgICAgdGhpcy5lbmFibGVEcmFnU2VsZWN0aW9uKGV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB0aGlzLmFuY2hvclJvd0luZGV4ID0gZXZlbnQucm93SW5kZXg7XG4gICAgICAgIHRoaXMucmFuZ2VSb3dJbmRleCA9IGV2ZW50LnJvd0luZGV4O1xuICAgICAgICB0aGlzLmFuY2hvclJvd0ZpcnN0ID0gdGhpcy5wcm9wcy5maXJzdDtcbiAgICAgICAgdGhpcy5hbmNob3JDZWxsSW5kZXggPSBldmVudC5jZWxsSW5kZXg7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2VsbE1vdXNlVXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DZWxsTW91c2VVcChldmVudCkge1xuICAgICAgdmFyIGlzU2FtZUNlbGwgPSBldmVudC5yb3dJbmRleCA9PT0gdGhpcy5hbmNob3JSb3dJbmRleCAmJiBldmVudC5jZWxsSW5kZXggPT09IHRoaXMuYW5jaG9yQ2VsbEluZGV4O1xuXG4gICAgICBpZiAodGhpcy5hbGxvd0NlbGxEcmFnKGV2ZW50KSAmJiAhaXNTYW1lQ2VsbCkge1xuICAgICAgICB0aGlzLm9uUmFuZ2VTZWxlY3Rpb24oZXZlbnQsICdjZWxsJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImJpbmREcmFnU2VsZWN0aW9uRXZlbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmREcmFnU2VsZWN0aW9uRXZlbnRzKCkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbkRyYWdTZWxlY3Rpb25Nb3VzZU1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25EcmFnU2VsZWN0aW9uTW91c2VVcCk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZHJhZ1NlbGVjdGlvbkhlbHBlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVuYmluZERyYWdTZWxlY3Rpb25FdmVudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdW5iaW5kRHJhZ1NlbGVjdGlvbkV2ZW50cygpIHtcbiAgICAgIHRoaXMub25EcmFnU2VsZWN0aW9uTW91c2VVcCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmZyb3plblJvdykge1xuICAgICAgICB0aGlzLnVwZGF0ZUZyb3plblJvd1N0aWNreVBvc2l0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnNjcm9sbGFibGUgJiYgdGhpcy5wcm9wcy5yb3dHcm91cE1vZGUgPT09ICdzdWJoZWFkZXInKSB7XG4gICAgICAgIHRoaXMudXBkYXRlRnJvemVuUm93R3JvdXBIZWFkZXJTdGlja3lQb3NpdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMucHJvcHMuaXNWaXJ0dWFsU2Nyb2xsZXJEaXNhYmxlZCAmJiB0aGlzLmdldFZpcnR1YWxTY3JvbGxlck9wdGlvbigndmVydGljYWwnKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZpcnR1YWxTY3JvbGxlclBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmZyb3plblJvdykge1xuICAgICAgICB0aGlzLnVwZGF0ZUZyb3plblJvd1N0aWNreVBvc2l0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnNjcm9sbGFibGUgJiYgdGhpcy5wcm9wcy5yb3dHcm91cE1vZGUgPT09ICdzdWJoZWFkZXInKSB7XG4gICAgICAgIHRoaXMudXBkYXRlRnJvemVuUm93R3JvdXBIZWFkZXJTdGlja3lQb3NpdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMucHJvcHMuaXNWaXJ0dWFsU2Nyb2xsZXJEaXNhYmxlZCAmJiB0aGlzLmdldFZpcnR1YWxTY3JvbGxlck9wdGlvbigndmVydGljYWwnKSAmJiB0aGlzLmdldFZpcnR1YWxTY3JvbGxlck9wdGlvbignaXRlbVNpemUnLCBwcmV2UHJvcHMudmlydHVhbFNjcm9sbGVyT3B0aW9ucykgIT09IHRoaXMuZ2V0VmlydHVhbFNjcm9sbGVyT3B0aW9uKCdpdGVtU2l6ZScpKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVmlydHVhbFNjcm9sbGVyUG9zaXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdG9yICYmIHRoaXMuaXNNdWx0aXBsZVNlbGVjdGlvbigpICYmIHRoaXMucHJvcHMuZmlyc3QgIT09IHByZXZQcm9wcy5maXJzdCkge1xuICAgICAgICB0aGlzLmFuY2hvclJvd0luZGV4ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5kcmFnU2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMudW5iaW5kRHJhZ1NlbGVjdGlvbkV2ZW50cygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJFbXB0eUNvbnRlbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRW1wdHlDb250ZW50KCkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmxvYWRpbmcpIHtcbiAgICAgICAgdmFyIGNvbFNwYW4gPSB0aGlzLmdldENvbHVtbnNMZW5ndGgoKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBPYmplY3RVdGlscy5nZXRKU1hFbGVtZW50KHRoaXMucHJvcHMuZW1wdHlNZXNzYWdlLCB7XG4gICAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMsXG4gICAgICAgICAgZnJvemVuOiB0aGlzLnByb3BzLmZyb3plblJvd1xuICAgICAgICB9KSB8fCBsb2NhbGVPcHRpb24oJ2VtcHR5TWVzc2FnZScpO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtZGF0YXRhYmxlLWVtcHR5bWVzc2FnZVwiLFxuICAgICAgICAgIHJvbGU6IFwicm93XCJcbiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLCB7XG4gICAgICAgICAgY29sU3BhbjogY29sU3BhbixcbiAgICAgICAgICByb2xlOiBcImNlbGxcIlxuICAgICAgICB9LCBjb250ZW50KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJHcm91cEhlYWRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJHcm91cEhlYWRlcihyb3dEYXRhLCBpbmRleCwgZXhwYW5kZWQsIGlzU3ViaGVhZGVyR3JvdXBpbmcsIGNvbFNwYW4pIHtcbiAgICAgIGlmIChpc1N1YmhlYWRlckdyb3VwaW5nICYmIHRoaXMuc2hvdWxkUmVuZGVyUm93R3JvdXBIZWFkZXIodGhpcy5wcm9wcy52YWx1ZSwgcm93RGF0YSwgaW5kZXggLSB0aGlzLnByb3BzLmZpcnN0KSkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnJvd0dyb3VwSGVhZGVyU3R5bGUoKTtcbiAgICAgICAgdmFyIHRvZ2dsZXIgPSB0aGlzLnByb3BzLmV4cGFuZGFibGVSb3dHcm91cHMgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUm93VG9nZ2xlckJ1dHRvbiwge1xuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25Sb3dUb2dnbGUsXG4gICAgICAgICAgcm93RGF0YTogcm93RGF0YSxcbiAgICAgICAgICBleHBhbmRlZDogZXhwYW5kZWQsXG4gICAgICAgICAgZXhwYW5kZWRSb3dJY29uOiB0aGlzLnByb3BzLmV4cGFuZGVkUm93SWNvbixcbiAgICAgICAgICBjb2xsYXBzZWRSb3dJY29uOiB0aGlzLnByb3BzLmNvbGxhcHNlZFJvd0ljb25cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBjb250ZW50ID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLnByb3BzLnJvd0dyb3VwSGVhZGVyVGVtcGxhdGUsIHJvd0RhdGEsIHtcbiAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMudGFibGVQcm9wc1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJwLXJvd2dyb3VwLWhlYWRlclwiLFxuICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICByb2xlOiBcInJvd1wiXG4gICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGRcIiwge1xuICAgICAgICAgIGNvbFNwYW46IGNvbFNwYW5cbiAgICAgICAgfSwgdG9nZ2xlciwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1yb3dncm91cC1oZWFkZXItbmFtZVwiXG4gICAgICAgIH0sIGNvbnRlbnQpKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJSb3dcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUm93KHJvd0RhdGEsIGluZGV4LCBleHBhbmRlZCkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmV4cGFuZGFibGVSb3dHcm91cHMgfHwgZXhwYW5kZWQpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5pc1NlbGVjdGlvbkVuYWJsZWQoKSA/IHRoaXMuaXNTZWxlY3RlZChyb3dEYXRhKSA6IGZhbHNlO1xuICAgICAgICB2YXIgY29udGV4dE1lbnVTZWxlY3RlZCA9IHRoaXMuaXNDb250ZXh0TWVudVNlbGVjdGVkKHJvd0RhdGEpO1xuICAgICAgICB2YXIgYWxsb3dSb3dTZWxlY3Rpb24gPSB0aGlzLmFsbG93Um93U2VsZWN0aW9uKCk7XG4gICAgICAgIHZhciBhbGxvd0NlbGxTZWxlY3Rpb24gPSB0aGlzLmFsbG93Q2VsbFNlbGVjdGlvbigpO1xuICAgICAgICB2YXIgZWRpdGluZyA9IHRoaXMuaXNSb3dFZGl0aW5nKHJvd0RhdGEpO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQm9keVJvdywge1xuICAgICAgICAgIHRhYmxlUHJvcHM6IHRoaXMucHJvcHMudGFibGVQcm9wcyxcbiAgICAgICAgICB0YWJsZVNlbGVjdG9yOiB0aGlzLnByb3BzLnRhYmxlU2VsZWN0b3IsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICAgICAgY29sdW1uczogdGhpcy5wcm9wcy5jb2x1bW5zLFxuICAgICAgICAgIHJvd0RhdGE6IHJvd0RhdGEsXG4gICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZCxcbiAgICAgICAgICBjb250ZXh0TWVudVNlbGVjdGVkOiBjb250ZXh0TWVudVNlbGVjdGVkLFxuICAgICAgICAgIG9uUm93Q2xpY2s6IHRoaXMub25Sb3dDbGljayxcbiAgICAgICAgICBvblJvd0RvdWJsZUNsaWNrOiB0aGlzLm9uUm93RG91YmxlQ2xpY2ssXG4gICAgICAgICAgb25Sb3dSaWdodENsaWNrOiB0aGlzLm9uUm93UmlnaHRDbGljayxcbiAgICAgICAgICB0YWJJbmRleDogdGhpcy5wcm9wcy50YWJJbmRleCxcbiAgICAgICAgICBpc1NlbGVjdGFibGU6IHRoaXMuaXNTZWxlY3RhYmxlLFxuICAgICAgICAgIG9uUm93VG91Y2hFbmQ6IHRoaXMub25Sb3dUb3VjaEVuZCxcbiAgICAgICAgICBvblJvd01vdXNlRG93bjogdGhpcy5vblJvd01vdXNlRG93bixcbiAgICAgICAgICBvblJvd01vdXNlVXA6IHRoaXMub25Sb3dNb3VzZVVwLFxuICAgICAgICAgIG9uUm93VG9nZ2xlOiB0aGlzLm9uUm93VG9nZ2xlLFxuICAgICAgICAgIG9uUm93RHJhZ1N0YXJ0OiB0aGlzLm9uUm93RHJhZ1N0YXJ0LFxuICAgICAgICAgIG9uUm93RHJhZ092ZXI6IHRoaXMub25Sb3dEcmFnT3ZlcixcbiAgICAgICAgICBvblJvd0RyYWdMZWF2ZTogdGhpcy5vblJvd0RyYWdMZWF2ZSxcbiAgICAgICAgICBvblJvd0RyYWdFbmQ6IHRoaXMub25Sb3dEcmFnRW5kLFxuICAgICAgICAgIG9uUm93RHJvcDogdGhpcy5vblJvd0Ryb3AsXG4gICAgICAgICAgb25SYWRpb0NoYW5nZTogdGhpcy5vblJhZGlvQ2hhbmdlLFxuICAgICAgICAgIG9uQ2hlY2tib3hDaGFuZ2U6IHRoaXMub25DaGVja2JveENoYW5nZSxcbiAgICAgICAgICBvbkNlbGxDbGljazogdGhpcy5vbkNlbGxDbGljayxcbiAgICAgICAgICBvbkNlbGxNb3VzZURvd246IHRoaXMub25DZWxsTW91c2VEb3duLFxuICAgICAgICAgIG9uQ2VsbE1vdXNlVXA6IHRoaXMub25DZWxsTW91c2VVcCxcbiAgICAgICAgICBlZGl0aW5nOiBlZGl0aW5nLFxuICAgICAgICAgIGVkaXRpbmdSb3dzOiB0aGlzLnByb3BzLmVkaXRpbmdSb3dzLFxuICAgICAgICAgIGVkaXRpbmdNZXRhOiB0aGlzLnByb3BzLmVkaXRpbmdNZXRhLFxuICAgICAgICAgIGVkaXRNb2RlOiB0aGlzLnByb3BzLmVkaXRNb2RlLFxuICAgICAgICAgIG9uUm93RWRpdENoYW5nZTogdGhpcy5wcm9wcy5vblJvd0VkaXRDaGFuZ2UsXG4gICAgICAgICAgb25FZGl0aW5nTWV0YUNoYW5nZTogdGhpcy5wcm9wcy5vbkVkaXRpbmdNZXRhQ2hhbmdlLFxuICAgICAgICAgIGdyb3VwUm93c0J5OiB0aGlzLnByb3BzLmdyb3VwUm93c0J5LFxuICAgICAgICAgIGNvbXBhcmVTZWxlY3Rpb25CeTogdGhpcy5wcm9wcy5jb21wYXJlU2VsZWN0aW9uQnksXG4gICAgICAgICAgZGF0YUtleTogdGhpcy5wcm9wcy5kYXRhS2V5LFxuICAgICAgICAgIHJvd0dyb3VwTW9kZTogdGhpcy5wcm9wcy5yb3dHcm91cE1vZGUsXG4gICAgICAgICAgb25Sb3dFZGl0SW5pdDogdGhpcy5wcm9wcy5vblJvd0VkaXRJbml0LFxuICAgICAgICAgIHJvd0VkaXRWYWxpZGF0b3I6IHRoaXMucHJvcHMucm93RWRpdFZhbGlkYXRvcixcbiAgICAgICAgICBvblJvd0VkaXRTYXZlOiB0aGlzLnByb3BzLm9uUm93RWRpdFNhdmUsXG4gICAgICAgICAgb25Sb3dFZGl0Q29tcGxldGU6IHRoaXMucHJvcHMub25Sb3dFZGl0Q29tcGxldGUsXG4gICAgICAgICAgb25Sb3dFZGl0Q2FuY2VsOiB0aGlzLnByb3BzLm9uUm93RWRpdENhbmNlbCxcbiAgICAgICAgICBzZWxlY3Rpb246IHRoaXMucHJvcHMuc2VsZWN0aW9uLFxuICAgICAgICAgIGFsbG93Um93U2VsZWN0aW9uOiBhbGxvd1Jvd1NlbGVjdGlvbixcbiAgICAgICAgICBhbGxvd0NlbGxTZWxlY3Rpb246IGFsbG93Q2VsbFNlbGVjdGlvbixcbiAgICAgICAgICBzZWxlY3RPbkVkaXQ6IHRoaXMucHJvcHMuc2VsZWN0T25FZGl0LFxuICAgICAgICAgIHNlbGVjdGlvbk1vZGU6IHRoaXMucHJvcHMuc2VsZWN0aW9uTW9kZSxcbiAgICAgICAgICBzZWxlY3Rpb25Nb2RlSW5Db2x1bW46IHRoaXMucHJvcHMuc2VsZWN0aW9uTW9kZUluQ29sdW1uLFxuICAgICAgICAgIGNlbGxDbGFzc05hbWU6IHRoaXMucHJvcHMuY2VsbENsYXNzTmFtZSxcbiAgICAgICAgICByZXNwb25zaXZlTGF5b3V0OiB0aGlzLnByb3BzLnJlc3BvbnNpdmVMYXlvdXQsXG4gICAgICAgICAgZnJvemVuUm93OiB0aGlzLnByb3BzLmZyb3plblJvdyxcbiAgICAgICAgICBzaG93U2VsZWN0aW9uRWxlbWVudDogdGhpcy5wcm9wcy5zaG93U2VsZWN0aW9uRWxlbWVudCxcbiAgICAgICAgICBzaG93Um93UmVvcmRlckVsZW1lbnQ6IHRoaXMucHJvcHMuc2hvd1Jvd1Jlb3JkZXJFbGVtZW50LFxuICAgICAgICAgIGV4cGFuZGVkOiBleHBhbmRlZCxcbiAgICAgICAgICBleHBhbmRlZFJvd0ljb246IHRoaXMucHJvcHMuZXhwYW5kZWRSb3dJY29uLFxuICAgICAgICAgIGNvbGxhcHNlZFJvd0ljb246IHRoaXMucHJvcHMuY29sbGFwc2VkUm93SWNvbixcbiAgICAgICAgICByb3dDbGFzc05hbWU6IHRoaXMucHJvcHMucm93Q2xhc3NOYW1lLFxuICAgICAgICAgIHZpcnR1YWxTY3JvbGxlck9wdGlvbnM6IHRoaXMucHJvcHMudmlydHVhbFNjcm9sbGVyT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRXhwYW5zaW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckV4cGFuc2lvbihyb3dEYXRhLCBpbmRleCwgZXhwYW5kZWQsIGlzU3ViaGVhZGVyR3JvdXBpbmcsIGNvbFNwYW4pIHtcbiAgICAgIGlmIChleHBhbmRlZCAmJiAhKGlzU3ViaGVhZGVyR3JvdXBpbmcgJiYgdGhpcy5wcm9wcy5leHBhbmRhYmxlUm93R3JvdXBzKSkge1xuICAgICAgICB2YXIgY29udGVudCA9IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQodGhpcy5wcm9wcy5yb3dFeHBhbnNpb25UZW1wbGF0ZSwgcm93RGF0YSwge1xuICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGlkID0gXCJcIi5jb25jYXQodGhpcy5wcm9wcy50YWJsZVNlbGVjdG9yLCBcIl9jb250ZW50X1wiKS5jb25jYXQoaW5kZXgsIFwiX2V4cGFuZGVkXCIpO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLCB7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJwLWRhdGF0YWJsZS1yb3ctZXhwYW5zaW9uXCIsXG4gICAgICAgICAgcm9sZTogXCJyb3dcIlxuICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRkXCIsIHtcbiAgICAgICAgICByb2xlOiBcImNlbGxcIixcbiAgICAgICAgICBjb2xTcGFuOiBjb2xTcGFuXG4gICAgICAgIH0sIGNvbnRlbnQpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlckdyb3VwRm9vdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckdyb3VwRm9vdGVyKHJvd0RhdGEsIGluZGV4LCBleHBhbmRlZCwgaXNTdWJoZWFkZXJHcm91cGluZywgY29sU3Bhbikge1xuICAgICAgaWYgKGlzU3ViaGVhZGVyR3JvdXBpbmcgJiYgdGhpcy5zaG91bGRSZW5kZXJSb3dHcm91cEZvb3Rlcih0aGlzLnByb3BzLnZhbHVlLCByb3dEYXRhLCBpbmRleCAtIHRoaXMucHJvcHMuZmlyc3QsIGV4cGFuZGVkKSkge1xuICAgICAgICB2YXIgY29udGVudCA9IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQodGhpcy5wcm9wcy5yb3dHcm91cEZvb3RlclRlbXBsYXRlLCByb3dEYXRhLCB7XG4gICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgIGNvbFNwYW46IGNvbFNwYW4sXG4gICAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMudGFibGVQcm9wc1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJwLXJvd2dyb3VwLWZvb3RlclwiLFxuICAgICAgICAgIHJvbGU6IFwicm93XCJcbiAgICAgICAgfSwgY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDb250ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudmFsdWUubWFwKGZ1bmN0aW9uIChyb3dEYXRhLCBpKSB7XG4gICAgICAgIHZhciBpbmRleCA9IF90aGlzNS5nZXRWaXJ0dWFsU2Nyb2xsZXJPcHRpb24oJ2dldEl0ZW1PcHRpb25zJykgPyBfdGhpczUuZ2V0VmlydHVhbFNjcm9sbGVyT3B0aW9uKCdnZXRJdGVtT3B0aW9ucycpKGkpLmluZGV4IDogX3RoaXM1LnByb3BzLmZpcnN0ICsgaTtcblxuICAgICAgICB2YXIga2V5ID0gX3RoaXM1LmdldFJvd0tleShyb3dEYXRhLCBpbmRleCk7XG5cbiAgICAgICAgdmFyIGV4cGFuZGVkID0gX3RoaXM1LmlzUm93RXhwYW5kZWQocm93RGF0YSk7XG5cbiAgICAgICAgdmFyIGlzU3ViaGVhZGVyR3JvdXBpbmcgPSBfdGhpczUuaXNTdWJoZWFkZXJHcm91cGluZygpO1xuXG4gICAgICAgIHZhciBjb2xTcGFuID0gX3RoaXM1LmdldENvbHVtbnNMZW5ndGgoKTtcblxuICAgICAgICB2YXIgZ3JvdXBIZWFkZXIgPSBfdGhpczUucmVuZGVyR3JvdXBIZWFkZXIocm93RGF0YSwgaW5kZXgsIGV4cGFuZGVkLCBpc1N1YmhlYWRlckdyb3VwaW5nLCBjb2xTcGFuKTtcblxuICAgICAgICB2YXIgcm93ID0gX3RoaXM1LnJlbmRlclJvdyhyb3dEYXRhLCBpbmRleCwgZXhwYW5kZWQpO1xuXG4gICAgICAgIHZhciBleHBhbnNpb24gPSBfdGhpczUucmVuZGVyRXhwYW5zaW9uKHJvd0RhdGEsIGluZGV4LCBleHBhbmRlZCwgaXNTdWJoZWFkZXJHcm91cGluZywgY29sU3Bhbik7XG5cbiAgICAgICAgdmFyIGdyb3VwRm9vdGVyID0gX3RoaXM1LnJlbmRlckdyb3VwRm9vdGVyKHJvd0RhdGEsIGluZGV4LCBleHBhbmRlZCwgaXNTdWJoZWFkZXJHcm91cGluZywgY29sU3Bhbik7XG5cbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCB7XG4gICAgICAgICAga2V5OiBrZXlcbiAgICAgICAgfSwgZ3JvdXBIZWFkZXIsIHJvdywgZXhwYW5zaW9uLCBncm91cEZvb3Rlcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKCdwLWRhdGF0YWJsZS10Ym9keScsIHRoaXMucHJvcHMuY2xhc3NOYW1lKTtcbiAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wcm9wcy5lbXB0eSA/IHRoaXMucmVuZGVyRW1wdHlDb250ZW50KCkgOiB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRib2R5XCIsIHtcbiAgICAgICAgcmVmOiB0aGlzLnJlZixcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgIH0sIGNvbnRlbnQpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBUYWJsZUJvZHk7XG59KENvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIG93bktleXMkNChvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCQ0KHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzJDQoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyQ0KE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyJDYoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNigpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNigpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgRm9vdGVyQ2VsbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRm9vdGVyQ2VsbCwgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlciQ2KEZvb3RlckNlbGwpO1xuXG4gIGZ1bmN0aW9uIEZvb3RlckNlbGwocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRm9vdGVyQ2VsbCk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN0eWxlT2JqZWN0OiB7fVxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEZvb3RlckNlbGwsIFt7XG4gICAga2V5OiBcImdldENvbHVtblByb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sdW1uUHJvcChwcm9wKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jb2x1bW4ucHJvcHNbcHJvcF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFN0eWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0eWxlKCkge1xuICAgICAgdmFyIGZvb3RlclN0eWxlID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdmb290ZXJTdHlsZScpO1xuICAgICAgdmFyIGNvbHVtblN0eWxlID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdzdHlsZScpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1uUHJvcCgnZnJvemVuJykgPyBPYmplY3QuYXNzaWduKHt9LCBjb2x1bW5TdHlsZSwgZm9vdGVyU3R5bGUsIHRoaXMuc3RhdGUuc3R5bGVPYmplY3QpIDogT2JqZWN0LmFzc2lnbih7fSwgY29sdW1uU3R5bGUsIGZvb3RlclN0eWxlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlU3RpY2t5UG9zaXRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU3RpY2t5UG9zaXRpb24oKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdmcm96ZW4nKSkge1xuICAgICAgICB2YXIgc3R5bGVPYmplY3QgPSBfb2JqZWN0U3ByZWFkJDQoe30sIHRoaXMuc3RhdGUuc3R5bGVPYmplY3QpO1xuXG4gICAgICAgIHZhciBhbGlnbiA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnYWxpZ25Gcm96ZW4nKTtcblxuICAgICAgICBpZiAoYWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICB2YXIgcmlnaHQgPSAwO1xuICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgcmlnaHQgPSBEb21IYW5kbGVyLmdldE91dGVyV2lkdGgobmV4dCkgKyBwYXJzZUZsb2F0KG5leHQuc3R5bGUucmlnaHQgfHwgMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3R5bGVPYmplY3RbJ3JpZ2h0J10gPSByaWdodCArICdweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGxlZnQgPSAwO1xuICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy5lbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXG4gICAgICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgICAgIGxlZnQgPSBEb21IYW5kbGVyLmdldE91dGVyV2lkdGgocHJldikgKyBwYXJzZUZsb2F0KHByZXYuc3R5bGUubGVmdCB8fCAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdHlsZU9iamVjdFsnbGVmdCddID0gbGVmdCArICdweCc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzdHlsZU9iamVjdDogc3R5bGVPYmplY3RcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKHRoaXMuZ2V0Q29sdW1uUHJvcCgnZnJvemVuJykpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTdGlja3lQb3NpdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdmcm96ZW4nKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0aWNreVBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgICAgdmFyIGFsaWduID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdhbGlnbicpO1xuICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXModGhpcy5nZXRDb2x1bW5Qcm9wKCdmb290ZXJDbGFzc05hbWUnKSwgdGhpcy5nZXRDb2x1bW5Qcm9wKCdjbGFzc05hbWUnKSwgX2RlZmluZVByb3BlcnR5KHtcbiAgICAgICAgJ3AtZnJvemVuLWNvbHVtbic6IHRoaXMuZ2V0Q29sdW1uUHJvcCgnZnJvemVuJylcbiAgICAgIH0sIFwicC1hbGlnbi1cIi5jb25jYXQoYWxpZ24pLCAhIWFsaWduKSk7XG4gICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnY29sU3BhbicpO1xuICAgICAgdmFyIHJvd1NwYW4gPSB0aGlzLmdldENvbHVtblByb3AoJ3Jvd1NwYW4nKTtcbiAgICAgIHZhciBjb250ZW50ID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLmdldENvbHVtblByb3AoJ2Zvb3RlcicpLCB7XG4gICAgICAgIHByb3BzOiB0aGlzLnByb3BzLnRhYmxlUHJvcHNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGRcIiwge1xuICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIuZWwgPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgcm9sZTogXCJjZWxsXCIsXG4gICAgICAgIGNvbFNwYW46IGNvbFNwYW4sXG4gICAgICAgIHJvd1NwYW46IHJvd1NwYW5cbiAgICAgIH0sIGNvbnRlbnQpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGb290ZXJDZWxsO1xufShDb21wb25lbnQpO1xuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkNShEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQ1KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQ1KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBUYWJsZUZvb3RlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoVGFibGVGb290ZXIsIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkNShUYWJsZUZvb3Rlcik7XG5cbiAgZnVuY3Rpb24gVGFibGVGb290ZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhYmxlRm9vdGVyKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhUYWJsZUZvb3RlciwgW3tcbiAgICBrZXk6IFwiaGFzRm9vdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhc0Zvb3RlcigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmZvb3RlckNvbHVtbkdyb3VwID8gdHJ1ZSA6IHRoaXMucHJvcHMuY29sdW1ucyA/IHRoaXMucHJvcHMuY29sdW1ucy5zb21lKGZ1bmN0aW9uIChjb2wpIHtcbiAgICAgICAgcmV0dXJuIGNvbCAmJiBjb2wucHJvcHMuZm9vdGVyO1xuICAgICAgfSkgOiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyR3JvdXBGb290ZXJDZWxsc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJHcm91cEZvb3RlckNlbGxzKHJvdykge1xuICAgICAgdmFyIGNvbHVtbnMgPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KHJvdy5wcm9wcy5jaGlsZHJlbik7XG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXJGb290ZXJDZWxscyhjb2x1bW5zKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRm9vdGVyQ2VsbHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRm9vdGVyQ2VsbHMoY29sdW1ucykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLm1hcChjb2x1bW5zLCBmdW5jdGlvbiAoY29sLCBpKSB7XG4gICAgICAgIHZhciBpc1Zpc2libGUgPSBjb2wgPyAhY29sLnByb3BzLmhpZGRlbiA6IHRydWU7XG4gICAgICAgIHZhciBrZXkgPSBjb2wgPyBjb2wucHJvcHMuY29sdW1uS2V5IHx8IGNvbC5wcm9wcy5maWVsZCB8fCBpIDogaTtcbiAgICAgICAgcmV0dXJuIGlzVmlzaWJsZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb290ZXJDZWxsLCB7XG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgdGFibGVQcm9wczogX3RoaXMucHJvcHMudGFibGVQcm9wcyxcbiAgICAgICAgICBjb2x1bW46IGNvbFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDb250ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMuZm9vdGVyQ29sdW1uR3JvdXApIHtcbiAgICAgICAgdmFyIHJvd3MgPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KHRoaXMucHJvcHMuZm9vdGVyQ29sdW1uR3JvdXAucHJvcHMuY2hpbGRyZW4pO1xuICAgICAgICByZXR1cm4gcm93cy5tYXAoZnVuY3Rpb24gKHJvdywgaSkge1xuICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIHtcbiAgICAgICAgICAgIGtleTogaSxcbiAgICAgICAgICAgIHJvbGU6IFwicm93XCJcbiAgICAgICAgICB9LCBfdGhpczIucmVuZGVyR3JvdXBGb290ZXJDZWxscyhyb3cpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIHtcbiAgICAgICAgcm9sZTogXCJyb3dcIlxuICAgICAgfSwgdGhpcy5yZW5kZXJGb290ZXJDZWxscyh0aGlzLnByb3BzLmNvbHVtbnMpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIGlmICh0aGlzLmhhc0Zvb3RlcigpKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5yZW5kZXJDb250ZW50KCk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRmb290XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1kYXRhdGFibGUtdGZvb3RcIlxuICAgICAgICB9LCBjb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFRhYmxlRm9vdGVyO1xufShDb21wb25lbnQpO1xuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkNChEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQ0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQ0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBIZWFkZXJDaGVja2JveCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoSGVhZGVyQ2hlY2tib3gsIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkNChIZWFkZXJDaGVja2JveCk7XG5cbiAgZnVuY3Rpb24gSGVhZGVyQ2hlY2tib3gocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVhZGVyQ2hlY2tib3gpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBmb2N1c2VkOiBmYWxzZVxuICAgIH07XG4gICAgX3RoaXMub25Gb2N1cyA9IF90aGlzLm9uRm9jdXMuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25CbHVyID0gX3RoaXMub25CbHVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQ2xpY2sgPSBfdGhpcy5vbkNsaWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uS2V5RG93biA9IF90aGlzLm9uS2V5RG93bi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoSGVhZGVyQ2hlY2tib3gsIFt7XG4gICAga2V5OiBcIm9uRm9jdXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmb2N1c2VkOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25CbHVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmb2N1c2VkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2xpY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGZvY3VzZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgIGNoZWNrZWQ6ICF0aGlzLnByb3BzLmNoZWNrZWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uS2V5RG93blwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICAgIHRoaXMub25DbGljayhldmVudCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgYm94Q2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1jaGVja2JveC1ib3ggcC1jb21wb25lbnQnLCB7XG4gICAgICAgICdwLWhpZ2hsaWdodCc6IHRoaXMucHJvcHMuY2hlY2tlZCxcbiAgICAgICAgJ3AtZGlzYWJsZWQnOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAncC1mb2N1cyc6IHRoaXMuc3RhdGUuZm9jdXNlZFxuICAgICAgfSk7XG4gICAgICB2YXIgaWNvbkNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtY2hlY2tib3gtaWNvbicsIHtcbiAgICAgICAgJ3BpIHBpLWNoZWNrJzogdGhpcy5wcm9wcy5jaGVja2VkXG4gICAgICB9KTtcbiAgICAgIHZhciB0YWJJbmRleCA9IHRoaXMucHJvcHMuZGlzYWJsZWQgPyBudWxsIDogMDtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJwLWNoZWNrYm94IHAtY29tcG9uZW50XCIsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGlja1xuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGJveENsYXNzTmFtZSxcbiAgICAgICAgcm9sZTogXCJjaGVja2JveFwiLFxuICAgICAgICBcImFyaWEtY2hlY2tlZFwiOiB0aGlzLnByb3BzLmNoZWNrZWQsXG4gICAgICAgIHRhYkluZGV4OiB0YWJJbmRleCxcbiAgICAgICAgb25Gb2N1czogdGhpcy5vbkZvY3VzLFxuICAgICAgICBvbkJsdXI6IHRoaXMub25CbHVyLFxuICAgICAgICBvbktleURvd246IHRoaXMub25LZXlEb3duXG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IGljb25DbGFzc05hbWVcbiAgICAgIH0pKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEhlYWRlckNoZWNrYm94O1xufShDb21wb25lbnQpO1xuXG5mdW5jdGlvbiBvd25LZXlzJDMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQkMyh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyQzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMkMyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlciQzKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDMoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDMoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxudmFyIENvbHVtbkZpbHRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQ29sdW1uRmlsdGVyLCBfQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyJDMoQ29sdW1uRmlsdGVyKTtcblxuICBmdW5jdGlvbiBDb2x1bW5GaWx0ZXIocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sdW1uRmlsdGVyKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgb3ZlcmxheVZpc2libGU6IGZhbHNlXG4gICAgfTtcbiAgICBfdGhpcy5vdmVybGF5UmVmID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZVJlZigpO1xuICAgIF90aGlzLmZpbHRlckNhbGxiYWNrID0gX3RoaXMuZmlsdGVyQ2FsbGJhY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuZmlsdGVyQXBwbHlDYWxsYmFjayA9IF90aGlzLmZpbHRlckFwcGx5Q2FsbGJhY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25PcGVyYXRvckNoYW5nZSA9IF90aGlzLm9uT3BlcmF0b3JDaGFuZ2UuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuYWRkQ29uc3RyYWludCA9IF90aGlzLmFkZENvbnN0cmFpbnQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuY2xlYXJGaWx0ZXIgPSBfdGhpcy5jbGVhckZpbHRlci5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5hcHBseUZpbHRlciA9IF90aGlzLmFwcGx5RmlsdGVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uSW5wdXRDaGFuZ2UgPSBfdGhpcy5vbklucHV0Q2hhbmdlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLnRvZ2dsZU1lbnUgPSBfdGhpcy50b2dnbGVNZW51LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uT3ZlcmxheUVudGVyID0gX3RoaXMub25PdmVybGF5RW50ZXIuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25PdmVybGF5RXhpdCA9IF90aGlzLm9uT3ZlcmxheUV4aXQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25PdmVybGF5RXhpdGVkID0gX3RoaXMub25PdmVybGF5RXhpdGVkLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQ29udGVudEtleURvd24gPSBfdGhpcy5vbkNvbnRlbnRLZXlEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQ29udGVudENsaWNrID0gX3RoaXMub25Db250ZW50Q2xpY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Db250ZW50TW91c2VEb3duID0gX3RoaXMub25Db250ZW50TW91c2VEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDb2x1bW5GaWx0ZXIsIFt7XG4gICAga2V5OiBcImZpZWxkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5Qcm9wKCdmaWx0ZXJGaWVsZCcpIHx8IHRoaXMuZ2V0Q29sdW1uUHJvcCgnZmllbGQnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib3ZlcmxheVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheVJlZiA/IHRoaXMub3ZlcmxheVJlZi5jdXJyZW50IDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmlsdGVyTW9kZWxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmZpbHRlcnNbdGhpcy5maWVsZF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbHRlclN0b3JlTW9kZWxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmZpbHRlcnNTdG9yZVt0aGlzLmZpZWxkXTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFzRmlsdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhc0ZpbHRlcigpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmZpbHRlcnNTdG9yZSkge1xuICAgICAgICB2YXIgZmllbGRGaWx0ZXIgPSB0aGlzLnByb3BzLmZpbHRlcnNTdG9yZVt0aGlzLmZpZWxkXTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRmlsdGVyICYmIChmaWVsZEZpbHRlci5vcGVyYXRvciA/ICF0aGlzLmlzRmlsdGVyQmxhbmsoZmllbGRGaWx0ZXIuY29uc3RyYWludHNbMF0udmFsdWUpIDogIXRoaXMuaXNGaWx0ZXJCbGFuayhmaWVsZEZpbHRlci52YWx1ZSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhc1Jvd0ZpbHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNSb3dGaWx0ZXIoKSB7XG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXJNb2RlbCAmJiAhdGhpcy5pc0ZpbHRlckJsYW5rKHRoaXMuZmlsdGVyTW9kZWwudmFsdWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc0ZpbHRlckJsYW5rXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzRmlsdGVyQmxhbmsoZmlsdGVyKSB7XG4gICAgICByZXR1cm4gT2JqZWN0VXRpbHMuaXNFbXB0eShmaWx0ZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1Jvd01hdGNoTW9kZVNlbGVjdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzUm93TWF0Y2hNb2RlU2VsZWN0ZWQobWF0Y2hNb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXJNb2RlbCAmJiB0aGlzLmZpbHRlck1vZGVsLm1hdGNoTW9kZSA9PT0gbWF0Y2hNb2RlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzaG93TWVudUJ1dHRvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93TWVudUJ1dHRvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbHVtblByb3AoJ3Nob3dGaWx0ZXJNZW51JykgJiYgKHRoaXMucHJvcHMuZGlzcGxheSA9PT0gJ3JvdycgPyB0aGlzLmdldENvbHVtblByb3AoJ2RhdGFUeXBlJykgIT09ICdib29sZWFuJyA6IHRydWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJtYXRjaE1vZGVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hdGNoTW9kZXMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5Qcm9wKCdmaWx0ZXJNYXRjaE1vZGVPcHRpb25zJykgfHwgUHJpbWVSZWFjdC5maWx0ZXJNYXRjaE1vZGVPcHRpb25zW3RoaXMuZmluZERhdGFUeXBlKCldLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGFiZWw6IGxvY2FsZU9wdGlvbihrZXkpLFxuICAgICAgICAgIHZhbHVlOiBrZXlcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1Nob3dNYXRjaE1vZGVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2hvd01hdGNoTW9kZXMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5Qcm9wKCdkYXRhVHlwZScpICE9PSAnYm9vbGVhbicgJiYgdGhpcy5nZXRDb2x1bW5Qcm9wKCdzaG93RmlsdGVyTWF0Y2hNb2RlcycpICYmIHRoaXMubWF0Y2hNb2RlcygpICYmIHRoaXMuZ2V0Q29sdW1uUHJvcCgnc2hvd0ZpbHRlck1lbnVPcHRpb25zJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzU2hvd09wZXJhdG9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2hvd09wZXJhdG9yKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1uUHJvcCgnc2hvd0ZpbHRlck9wZXJhdG9yJykgJiYgdGhpcy5maWx0ZXJNb2RlbCAmJiB0aGlzLmZpbHRlck1vZGVsLm9wZXJhdG9yICYmIHRoaXMuZ2V0Q29sdW1uUHJvcCgnc2hvd0ZpbHRlck1lbnVPcHRpb25zJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNob3dSZW1vdmVJY29uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dSZW1vdmVJY29uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmllbGRDb25zdHJhaW50cygpLmxlbmd0aCA+IDE7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzU2hvd0FkZENvbnN0cmFpbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTaG93QWRkQ29uc3RyYWludCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbHVtblByb3AoJ3Nob3dBZGRCdXR0b24nKSAmJiB0aGlzLmZpbHRlck1vZGVsICYmIHRoaXMuZmlsdGVyTW9kZWwub3BlcmF0b3IgJiYgdGhpcy5maWVsZENvbnN0cmFpbnRzKCkgJiYgdGhpcy5maWVsZENvbnN0cmFpbnRzKCkubGVuZ3RoIDwgdGhpcy5nZXRDb2x1bW5Qcm9wKCdtYXhDb25zdHJhaW50cycpICYmIHRoaXMuZ2V0Q29sdW1uUHJvcCgnc2hvd0ZpbHRlck1lbnVPcHRpb25zJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzT3V0c2lkZUNsaWNrZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNPdXRzaWRlQ2xpY2tlZCh0YXJnZXQpIHtcbiAgICAgIHJldHVybiAhdGhpcy5pc1RhcmdldENsaWNrZWQodGFyZ2V0KSAmJiB0aGlzLm92ZXJsYXlSZWYgJiYgdGhpcy5vdmVybGF5UmVmLmN1cnJlbnQgJiYgISh0aGlzLm92ZXJsYXlSZWYuY3VycmVudC5pc1NhbWVOb2RlKHRhcmdldCkgfHwgdGhpcy5vdmVybGF5UmVmLmN1cnJlbnQuY29udGFpbnModGFyZ2V0KSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVGFyZ2V0Q2xpY2tlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RhcmdldENsaWNrZWQodGFyZ2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy5pY29uICYmICh0aGlzLmljb24uaXNTYW1lTm9kZSh0YXJnZXQpIHx8IHRoaXMuaWNvbi5jb250YWlucyh0YXJnZXQpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Q29sdW1uUHJvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb2x1bW5Qcm9wKHByb3ApIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmNvbHVtbi5wcm9wc1twcm9wXTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0RGVmYXVsdENvbnN0cmFpbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVmYXVsdENvbnN0cmFpbnQoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5maWx0ZXJzU3RvcmUgJiYgdGhpcy5maWx0ZXJTdG9yZU1vZGVsKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlclN0b3JlTW9kZWwub3BlcmF0b3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWF0Y2hNb2RlOiB0aGlzLmZpbHRlclN0b3JlTW9kZWwuY29uc3RyYWludHNbMF0ubWF0Y2hNb2RlLFxuICAgICAgICAgICAgb3BlcmF0b3I6IHRoaXMuZmlsdGVyU3RvcmVNb2RlbC5vcGVyYXRvclxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1hdGNoTW9kZTogdGhpcy5maWx0ZXJTdG9yZU1vZGVsLm1hdGNoTW9kZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZERhdGFUeXBlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmREYXRhVHlwZSgpIHtcbiAgICAgIHZhciBkYXRhVHlwZSA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnZGF0YVR5cGUnKTtcbiAgICAgIHZhciBtYXRjaE1vZGUgPSB0aGlzLmdldENvbHVtblByb3AoJ2ZpbHRlck1hdGNoTW9kZScpO1xuXG4gICAgICB2YXIgaGFzTWF0Y2hNb2RlID0gZnVuY3Rpb24gaGFzTWF0Y2hNb2RlKGtleSkge1xuICAgICAgICByZXR1cm4gUHJpbWVSZWFjdC5maWx0ZXJNYXRjaE1vZGVPcHRpb25zW2tleV0uc29tZShmdW5jdGlvbiAobW9kZSkge1xuICAgICAgICAgIHJldHVybiBtb2RlID09PSBtYXRjaE1vZGU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgaWYgKG1hdGNoTW9kZSA9PT0gJ2N1c3RvbScgJiYgIWhhc01hdGNoTW9kZShkYXRhVHlwZSkpIHtcbiAgICAgICAgUHJpbWVSZWFjdC5maWx0ZXJNYXRjaE1vZGVPcHRpb25zW2RhdGFUeXBlXS5wdXNoKEZpbHRlck1hdGNoTW9kZS5DVVNUT00pO1xuICAgICAgICByZXR1cm4gZGF0YVR5cGU7XG4gICAgICB9IGVsc2UgaWYgKG1hdGNoTW9kZSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoUHJpbWVSZWFjdC5maWx0ZXJNYXRjaE1vZGVPcHRpb25zKS5maW5kKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICByZXR1cm4gaGFzTWF0Y2hNb2RlKGtleSk7XG4gICAgICAgIH0pIHx8IGRhdGFUeXBlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YVR5cGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsZWFyRmlsdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyRmlsdGVyKCkge1xuICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDtcbiAgICAgIHZhciBmaWx0ZXJDbGVhckNhbGxiYWNrID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdvbkZpbHRlckNsZWFyJyk7XG4gICAgICB2YXIgZGVmYXVsdENvbnN0cmFpbnQgPSB0aGlzLmdldERlZmF1bHRDb25zdHJhaW50KCk7XG5cbiAgICAgIHZhciBmaWx0ZXJzID0gX29iamVjdFNwcmVhZCQzKHt9LCB0aGlzLnByb3BzLmZpbHRlcnMpO1xuXG4gICAgICBpZiAoZmlsdGVyc1tmaWVsZF0ub3BlcmF0b3IpIHtcbiAgICAgICAgZmlsdGVyc1tmaWVsZF0uY29uc3RyYWludHMuc3BsaWNlKDEpO1xuICAgICAgICBmaWx0ZXJzW2ZpZWxkXS5vcGVyYXRvciA9IGRlZmF1bHRDb25zdHJhaW50Lm9wZXJhdG9yO1xuICAgICAgICBmaWx0ZXJzW2ZpZWxkXS5jb25zdHJhaW50c1swXSA9IHtcbiAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICBtYXRjaE1vZGU6IGRlZmF1bHRDb25zdHJhaW50Lm1hdGNoTW9kZVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsdGVyc1tmaWVsZF0udmFsdWUgPSBudWxsO1xuICAgICAgICBmaWx0ZXJzW2ZpZWxkXS5tYXRjaE1vZGUgPSBkZWZhdWx0Q29uc3RyYWludC5tYXRjaE1vZGU7XG4gICAgICB9XG5cbiAgICAgIGZpbHRlckNsZWFyQ2FsbGJhY2sgJiYgZmlsdGVyQ2xlYXJDYWxsYmFjaygpO1xuICAgICAgdGhpcy5wcm9wcy5vbkZpbHRlckNoYW5nZShmaWx0ZXJzKTtcbiAgICAgIHRoaXMucHJvcHMub25GaWx0ZXJBcHBseSgpO1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFwcGx5RmlsdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5RmlsdGVyKCkge1xuICAgICAgdmFyIGZpbHRlckFwcGx5Q2xpY2tDYWxsYmFjayA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnb25GaWx0ZXJBcHBseUNsaWNrJyk7XG4gICAgICBmaWx0ZXJBcHBseUNsaWNrQ2FsbGJhY2sgJiYgZmlsdGVyQXBwbHlDbGlja0NhbGxiYWNrKHtcbiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgIGNvbnN0cmFpbnRzOiB0aGlzLmZpbHRlck1vZGVsXG4gICAgICB9KTtcbiAgICAgIHRoaXMucHJvcHMub25GaWx0ZXJBcHBseSgpO1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRvZ2dsZU1lbnVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG92ZXJsYXlWaXNpYmxlOiAhcHJldlN0YXRlLm92ZXJsYXlWaXNpYmxlXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Ub2dnbGVCdXR0b25LZXlEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uVG9nZ2xlQnV0dG9uS2V5RG93bihldmVudCkge1xuICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgY2FzZSAnVGFiJzpcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgIGlmICh0aGlzLnN0YXRlLm92ZXJsYXlWaXNpYmxlKSB7XG4gICAgICAgICAgICB2YXIgZm9jdXNhYmxlID0gRG9tSGFuZGxlci5nZXRGaXJzdEZvY3VzYWJsZUVsZW1lbnQodGhpcy5vdmVybGF5KTtcbiAgICAgICAgICAgIGZvY3VzYWJsZSAmJiBmb2N1c2FibGUuZm9jdXMoKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICBvdmVybGF5VmlzaWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNvbnRlbnRLZXlEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29udGVudEtleURvd24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB0aGlzLmljb24gJiYgdGhpcy5pY29uLmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uSW5wdXRDaGFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dENoYW5nZShldmVudCwgaW5kZXgpIHtcbiAgICAgIHZhciBmaWx0ZXJzID0gX29iamVjdFNwcmVhZCQzKHt9LCB0aGlzLnByb3BzLmZpbHRlcnMpO1xuXG4gICAgICB2YXIgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmRpc3BsYXkgPT09ICdtZW51Jykge1xuICAgICAgICBmaWx0ZXJzW3RoaXMuZmllbGRdLmNvbnN0cmFpbnRzW2luZGV4XS52YWx1ZSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsdGVyc1t0aGlzLmZpZWxkXS52YWx1ZSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQ2hhbmdlKGZpbHRlcnMpO1xuXG4gICAgICBpZiAoIXRoaXMuZ2V0Q29sdW1uUHJvcCgnc2hvd0FwcGx5QnV0dG9uJykgfHwgdGhpcy5wcm9wcy5kaXNwbGF5ID09PSAncm93Jykge1xuICAgICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQXBwbHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Sb3dNYXRjaE1vZGVDaGFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Sb3dNYXRjaE1vZGVDaGFuZ2UobWF0Y2hNb2RlKSB7XG4gICAgICB2YXIgZmlsdGVyTWF0Y2hNb2RlQ2hhbmdlQ2FsbGJhY2sgPSB0aGlzLmdldENvbHVtblByb3AoJ29uRmlsdGVyTWF0Y2hNb2RlQ2hhbmdlJyk7XG5cbiAgICAgIHZhciBmaWx0ZXJzID0gX29iamVjdFNwcmVhZCQzKHt9LCB0aGlzLnByb3BzLmZpbHRlcnMpO1xuXG4gICAgICBmaWx0ZXJzW3RoaXMuZmllbGRdLm1hdGNoTW9kZSA9IG1hdGNoTW9kZTtcbiAgICAgIGZpbHRlck1hdGNoTW9kZUNoYW5nZUNhbGxiYWNrICYmIGZpbHRlck1hdGNoTW9kZUNoYW5nZUNhbGxiYWNrKHtcbiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgIG1hdGNoTW9kZTogbWF0Y2hNb2RlXG4gICAgICB9KTtcbiAgICAgIHRoaXMucHJvcHMub25GaWx0ZXJDaGFuZ2UoZmlsdGVycyk7XG4gICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQXBwbHkoKTtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJvd01hdGNoTW9kZUtleURvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Sb3dNYXRjaE1vZGVLZXlEb3duKGV2ZW50LCBtYXRjaE1vZGUsIGNsZWFyKSB7XG4gICAgICB2YXIgaXRlbSA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICB2YXIgbmV4dEl0ZW0gPSB0aGlzLmZpbmROZXh0SXRlbShpdGVtKTtcblxuICAgICAgICAgIGlmIChuZXh0SXRlbSkge1xuICAgICAgICAgICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICBuZXh0SXRlbS50YWJJbmRleCA9IDA7XG4gICAgICAgICAgICBuZXh0SXRlbS5mb2N1cygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgdmFyIHByZXZJdGVtID0gdGhpcy5maW5kUHJldkl0ZW0oaXRlbSk7XG5cbiAgICAgICAgICBpZiAocHJldkl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgcHJldkl0ZW0udGFiSW5kZXggPSAwO1xuICAgICAgICAgICAgcHJldkl0ZW0uZm9jdXMoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICBjbGVhciA/IHRoaXMuY2xlYXJGaWx0ZXIoKSA6IHRoaXMub25Sb3dNYXRjaE1vZGVDaGFuZ2UobWF0Y2hNb2RlLnZhbHVlKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbk9wZXJhdG9yQ2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uT3BlcmF0b3JDaGFuZ2UoZSkge1xuICAgICAgdmFyIGZpbHRlck9wZXJhdGlvbkNoYW5nZUNhbGxiYWNrID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdvbkZpbHRlck9wZXJhdG9yQ2hhbmdlJyk7XG4gICAgICB2YXIgdmFsdWUgPSBlLnZhbHVlO1xuXG4gICAgICB2YXIgZmlsdGVycyA9IF9vYmplY3RTcHJlYWQkMyh7fSwgdGhpcy5wcm9wcy5maWx0ZXJzKTtcblxuICAgICAgZmlsdGVyc1t0aGlzLmZpZWxkXS5vcGVyYXRvciA9IHZhbHVlO1xuICAgICAgdGhpcy5wcm9wcy5vbkZpbHRlckNoYW5nZShmaWx0ZXJzKTtcbiAgICAgIGZpbHRlck9wZXJhdGlvbkNoYW5nZUNhbGxiYWNrICYmIGZpbHRlck9wZXJhdGlvbkNoYW5nZUNhbGxiYWNrKHtcbiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgIG9wZXJhdG9yOiB2YWx1ZVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGhpcy5nZXRDb2x1bW5Qcm9wKCdzaG93QXBwbHlCdXR0b24nKSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQXBwbHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25NZW51TWF0Y2hNb2RlQ2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uTWVudU1hdGNoTW9kZUNoYW5nZSh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIHZhciBmaWx0ZXJNYXRjaE1vZGVDaGFuZ2VDYWxsYmFjayA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnb25GaWx0ZXJNYXRjaE1vZGVDaGFuZ2UnKTtcblxuICAgICAgdmFyIGZpbHRlcnMgPSBfb2JqZWN0U3ByZWFkJDMoe30sIHRoaXMucHJvcHMuZmlsdGVycyk7XG5cbiAgICAgIGZpbHRlcnNbdGhpcy5maWVsZF0uY29uc3RyYWludHNbaW5kZXhdLm1hdGNoTW9kZSA9IHZhbHVlO1xuICAgICAgdGhpcy5wcm9wcy5vbkZpbHRlckNoYW5nZShmaWx0ZXJzKTtcbiAgICAgIGZpbHRlck1hdGNoTW9kZUNoYW5nZUNhbGxiYWNrICYmIGZpbHRlck1hdGNoTW9kZUNoYW5nZUNhbGxiYWNrKHtcbiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgIG1hdGNoTW9kZTogdmFsdWUsXG4gICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGhpcy5nZXRDb2x1bW5Qcm9wKCdzaG93QXBwbHlCdXR0b24nKSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQXBwbHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkQ29uc3RyYWludFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDb25zdHJhaW50KCkge1xuICAgICAgdmFyIGZpbHRlckNvbnN0cmFpbnRBZGRDYWxsYmFjayA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnb25GaWx0ZXJDb25zdHJhaW50QWRkJyk7XG4gICAgICB2YXIgZGVmYXVsdENvbnN0cmFpbnQgPSB0aGlzLmdldERlZmF1bHRDb25zdHJhaW50KCk7XG5cbiAgICAgIHZhciBmaWx0ZXJzID0gX29iamVjdFNwcmVhZCQzKHt9LCB0aGlzLnByb3BzLmZpbHRlcnMpO1xuXG4gICAgICB2YXIgbmV3Q29uc3RyYWludCA9IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIG1hdGNoTW9kZTogZGVmYXVsdENvbnN0cmFpbnQubWF0Y2hNb2RlXG4gICAgICB9O1xuICAgICAgZmlsdGVyc1t0aGlzLmZpZWxkXS5jb25zdHJhaW50cy5wdXNoKG5ld0NvbnN0cmFpbnQpO1xuICAgICAgZmlsdGVyQ29uc3RyYWludEFkZENhbGxiYWNrICYmIGZpbHRlckNvbnN0cmFpbnRBZGRDYWxsYmFjayh7XG4gICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkLFxuICAgICAgICBjb25zdHJhaW50OiBuZXdDb25zdHJhaW50XG4gICAgICB9KTtcbiAgICAgIHRoaXMucHJvcHMub25GaWx0ZXJDaGFuZ2UoZmlsdGVycyk7XG5cbiAgICAgIGlmICghdGhpcy5nZXRDb2x1bW5Qcm9wKCdzaG93QXBwbHlCdXR0b24nKSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQXBwbHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlQ29uc3RyYWludFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVDb25zdHJhaW50KGluZGV4KSB7XG4gICAgICB2YXIgZmlsdGVyQ29uc3RyYWludFJlbW92ZUNhbGxiYWNrID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdvbkZpbHRlckNvbnN0cmFpbnRSZW1vdmUnKTtcblxuICAgICAgdmFyIGZpbHRlcnMgPSBfb2JqZWN0U3ByZWFkJDMoe30sIHRoaXMucHJvcHMuZmlsdGVycyk7XG5cbiAgICAgIHZhciByZW1vdmVkQ29uc3RyYWludCA9IGZpbHRlcnNbdGhpcy5maWVsZF0uY29uc3RyYWludHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGZpbHRlckNvbnN0cmFpbnRSZW1vdmVDYWxsYmFjayAmJiBmaWx0ZXJDb25zdHJhaW50UmVtb3ZlQ2FsbGJhY2soe1xuICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgY29uc3RyYWludDogcmVtb3ZlZENvbnN0cmFpbnRcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wcm9wcy5vbkZpbHRlckNoYW5nZShmaWx0ZXJzKTtcblxuICAgICAgaWYgKCF0aGlzLmdldENvbHVtblByb3AoJ3Nob3dBcHBseUJ1dHRvbicpKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25GaWx0ZXJBcHBseSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmaW5kTmV4dEl0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZE5leHRJdGVtKGl0ZW0pIHtcbiAgICAgIHZhciBuZXh0SXRlbSA9IGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgaWYgKG5leHRJdGVtKSByZXR1cm4gRG9tSGFuZGxlci5oYXNDbGFzcyhuZXh0SXRlbSwgJ3AtY29sdW1uLWZpbHRlci1zZXBhcmF0b3InKSA/IHRoaXMuZmluZE5leHRJdGVtKG5leHRJdGVtKSA6IG5leHRJdGVtO2Vsc2UgcmV0dXJuIGl0ZW0ucGFyZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZFByZXZJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRQcmV2SXRlbShpdGVtKSB7XG4gICAgICB2YXIgcHJldkl0ZW0gPSBpdGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAocHJldkl0ZW0pIHJldHVybiBEb21IYW5kbGVyLmhhc0NsYXNzKHByZXZJdGVtLCAncC1jb2x1bW4tZmlsdGVyLXNlcGFyYXRvcicpID8gdGhpcy5maW5kUHJldkl0ZW0ocHJldkl0ZW0pIDogcHJldkl0ZW07ZWxzZSByZXR1cm4gaXRlbS5wYXJlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhpZGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvdmVybGF5VmlzaWJsZTogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNvbnRlbnRDbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbnRlbnRDbGljayhldmVudCkge1xuICAgICAgdGhpcy5zZWxmQ2xpY2sgPSB0cnVlO1xuICAgICAgT3ZlcmxheVNlcnZpY2UuZW1pdCgnb3ZlcmxheS1jbGljaycsIHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIHRhcmdldDogdGhpcy5vdmVybGF5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db250ZW50TW91c2VEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29udGVudE1vdXNlRG93bigpIHtcbiAgICAgIHRoaXMuc2VsZkNsaWNrID0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25PdmVybGF5RW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25PdmVybGF5RW50ZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgWkluZGV4VXRpbHMuc2V0KCdvdmVybGF5JywgdGhpcy5vdmVybGF5LCBQcmltZVJlYWN0LmF1dG9aSW5kZXgsIFByaW1lUmVhY3QuekluZGV4WydvdmVybGF5J10pO1xuICAgICAgRG9tSGFuZGxlci5hbGlnbk92ZXJsYXkodGhpcy5vdmVybGF5LCB0aGlzLmljb24sIFByaW1lUmVhY3QuYXBwZW5kVG8sIGZhbHNlKTtcbiAgICAgIHRoaXMuYmluZE91dHNpZGVDbGlja0xpc3RlbmVyKCk7XG4gICAgICB0aGlzLmJpbmRTY3JvbGxMaXN0ZW5lcigpO1xuICAgICAgdGhpcy5iaW5kUmVzaXplTGlzdGVuZXIoKTtcblxuICAgICAgdGhpcy5vdmVybGF5RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghX3RoaXMyLmlzT3V0c2lkZUNsaWNrZWQoZS50YXJnZXQpKSB7XG4gICAgICAgICAgX3RoaXMyLnNlbGZDbGljayA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIE92ZXJsYXlTZXJ2aWNlLm9uKCdvdmVybGF5LWNsaWNrJywgdGhpcy5vdmVybGF5RXZlbnRMaXN0ZW5lcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uT3ZlcmxheUV4aXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25PdmVybGF5RXhpdCgpIHtcbiAgICAgIHRoaXMub25PdmVybGF5SGlkZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbk92ZXJsYXlFeGl0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25PdmVybGF5RXhpdGVkKCkge1xuICAgICAgWkluZGV4VXRpbHMuY2xlYXIodGhpcy5vdmVybGF5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25PdmVybGF5SGlkZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbk92ZXJsYXlIaWRlKCkge1xuICAgICAgdGhpcy51bmJpbmRPdXRzaWRlQ2xpY2tMaXN0ZW5lcigpO1xuICAgICAgdGhpcy51bmJpbmRSZXNpemVMaXN0ZW5lcigpO1xuICAgICAgdGhpcy51bmJpbmRTY3JvbGxMaXN0ZW5lcigpO1xuICAgICAgT3ZlcmxheVNlcnZpY2Uub2ZmKCdvdmVybGF5LWNsaWNrJywgdGhpcy5vdmVybGF5RXZlbnRMaXN0ZW5lcik7XG4gICAgICB0aGlzLm92ZXJsYXlFdmVudExpc3RlbmVyID0gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYmluZE91dHNpZGVDbGlja0xpc3RlbmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRPdXRzaWRlQ2xpY2tMaXN0ZW5lcigpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICBpZiAoIXRoaXMub3V0c2lkZUNsaWNrTGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5vdXRzaWRlQ2xpY2tMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmICghX3RoaXMzLnNlbGZDbGljayAmJiBfdGhpczMuaXNPdXRzaWRlQ2xpY2tlZChldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICBfdGhpczMuaGlkZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzMy5zZWxmQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3V0c2lkZUNsaWNrTGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1bmJpbmRPdXRzaWRlQ2xpY2tMaXN0ZW5lclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1bmJpbmRPdXRzaWRlQ2xpY2tMaXN0ZW5lcigpIHtcbiAgICAgIGlmICh0aGlzLm91dHNpZGVDbGlja0xpc3RlbmVyKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vdXRzaWRlQ2xpY2tMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMub3V0c2lkZUNsaWNrTGlzdGVuZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNlbGZDbGljayA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiaW5kU2Nyb2xsTGlzdGVuZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmluZFNjcm9sbExpc3RlbmVyKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5zY3JvbGxIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9IG5ldyBDb25uZWN0ZWRPdmVybGF5U2Nyb2xsSGFuZGxlcih0aGlzLmljb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXM0LnN0YXRlLm92ZXJsYXlWaXNpYmxlKSB7XG4gICAgICAgICAgICBfdGhpczQuaGlkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlci5iaW5kU2Nyb2xsTGlzdGVuZXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidW5iaW5kU2Nyb2xsTGlzdGVuZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdW5iaW5kU2Nyb2xsTGlzdGVuZXIoKSB7XG4gICAgICBpZiAodGhpcy5zY3JvbGxIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlci51bmJpbmRTY3JvbGxMaXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiaW5kUmVzaXplTGlzdGVuZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmluZFJlc2l6ZUxpc3RlbmVyKCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5yZXNpemVMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlc2l6ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChfdGhpczUuc3RhdGUub3ZlcmxheVZpc2libGUgJiYgIURvbUhhbmRsZXIuaXNUb3VjaERldmljZSgpKSB7XG4gICAgICAgICAgICBfdGhpczUuaGlkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemVMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVuYmluZFJlc2l6ZUxpc3RlbmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVuYmluZFJlc2l6ZUxpc3RlbmVyKCkge1xuICAgICAgaWYgKHRoaXMucmVzaXplTGlzdGVuZXIpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplTGlzdGVuZXIpO1xuICAgICAgICB0aGlzLnJlc2l6ZUxpc3RlbmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmllbGRDb25zdHJhaW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaWVsZENvbnN0cmFpbnRzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyTW9kZWwgPyB0aGlzLmZpbHRlck1vZGVsLmNvbnN0cmFpbnRzIHx8IFt0aGlzLmZpbHRlck1vZGVsXSA6IFtdO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvcGVyYXRvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVyYXRvcigpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlck1vZGVsLm9wZXJhdG9yO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvcGVyYXRvck9wdGlvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlcmF0b3JPcHRpb25zKCkge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGxhYmVsOiBsb2NhbGVPcHRpb24oJ21hdGNoQWxsJyksXG4gICAgICAgIHZhbHVlOiBGaWx0ZXJPcGVyYXRvci5BTkRcbiAgICAgIH0sIHtcbiAgICAgICAgbGFiZWw6IGxvY2FsZU9wdGlvbignbWF0Y2hBbnknKSxcbiAgICAgICAgdmFsdWU6IEZpbHRlck9wZXJhdG9yLk9SXG4gICAgICB9XTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibm9GaWx0ZXJMYWJlbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBub0ZpbHRlckxhYmVsKCkge1xuICAgICAgcmV0dXJuIGxvY2FsZU9wdGlvbignbm9GaWx0ZXInKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlUnVsZUJ1dHRvbkxhYmVsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVJ1bGVCdXR0b25MYWJlbCgpIHtcbiAgICAgIHJldHVybiBsb2NhbGVPcHRpb24oJ3JlbW92ZVJ1bGUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkUnVsZUJ1dHRvbkxhYmVsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFJ1bGVCdXR0b25MYWJlbCgpIHtcbiAgICAgIHJldHVybiBsb2NhbGVPcHRpb24oJ2FkZFJ1bGUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xlYXJCdXR0b25MYWJlbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhckJ1dHRvbkxhYmVsKCkge1xuICAgICAgcmV0dXJuIGxvY2FsZU9wdGlvbignY2xlYXInKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYXBwbHlCdXR0b25MYWJlbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBseUJ1dHRvbkxhYmVsKCkge1xuICAgICAgcmV0dXJuIGxvY2FsZU9wdGlvbignYXBwbHknKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmlsdGVyQ2FsbGJhY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyQ2FsbGJhY2sodmFsdWUpIHtcbiAgICAgIHZhciBpbmRleCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcblxuICAgICAgdmFyIGZpbHRlcnMgPSBfb2JqZWN0U3ByZWFkJDMoe30sIHRoaXMucHJvcHMuZmlsdGVycyk7XG5cbiAgICAgIHZhciBtZXRhID0gZmlsdGVyc1t0aGlzLmZpZWxkXTtcbiAgICAgIHRoaXMucHJvcHMuZGlzcGxheSA9PT0gJ21lbnUnICYmIG1ldGEgJiYgbWV0YS5vcGVyYXRvciA/IGZpbHRlcnNbdGhpcy5maWVsZF0uY29uc3RyYWludHNbaW5kZXhdLnZhbHVlID0gdmFsdWUgOiBmaWx0ZXJzW3RoaXMuZmllbGRdLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQ2hhbmdlKGZpbHRlcnMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmaWx0ZXJBcHBseUNhbGxiYWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlckFwcGx5Q2FsbGJhY2soKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgYXJncyAmJiB0aGlzLmZpbHRlckNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgdGhpcy5wcm9wcy5vbkZpbHRlckFwcGx5KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmRpc3BsYXkgPT09ICdtZW51JyAmJiB0aGlzLnN0YXRlLm92ZXJsYXlWaXNpYmxlKSB7XG4gICAgICAgIERvbUhhbmRsZXIuYWxpZ25PdmVybGF5KHRoaXMub3ZlcmxheSwgdGhpcy5pY29uLCBQcmltZVJlYWN0LmFwcGVuZFRvLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKHRoaXMub3ZlcmxheUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgT3ZlcmxheVNlcnZpY2Uub2ZmKCdvdmVybGF5LWNsaWNrJywgdGhpcy5vdmVybGF5RXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMub3ZlcmxheUV2ZW50TGlzdGVuZXIgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vdmVybGF5KSB7XG4gICAgICAgIFpJbmRleFV0aWxzLmNsZWFyKHRoaXMub3ZlcmxheSk7XG4gICAgICAgIHRoaXMub25PdmVybGF5SGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJGaWx0ZXJFbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckZpbHRlckVsZW1lbnQobW9kZWwsIGluZGV4KSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgdmFyIHZhbHVlID0gbW9kZWwgPyBtb2RlbC52YWx1ZSA6IG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5Qcm9wKCdmaWx0ZXJFbGVtZW50JykgPyBPYmplY3RVdGlscy5nZXRKU1hFbGVtZW50KHRoaXMuZ2V0Q29sdW1uUHJvcCgnZmlsdGVyRWxlbWVudCcpLCB7XG4gICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkLFxuICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgIGZpbHRlck1vZGVsOiBtb2RlbCxcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBmaWx0ZXJBcHBseUNhbGxiYWNrOiB0aGlzLmZpbHRlckFwcGx5Q2FsbGJhY2ssXG4gICAgICAgIGZpbHRlckNhbGxiYWNrOiB0aGlzLmZpbHRlckNhbGxiYWNrXG4gICAgICB9KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwge1xuICAgICAgICB0eXBlOiB0aGlzLmdldENvbHVtblByb3AoJ2ZpbHRlclR5cGUnKSxcbiAgICAgICAgdmFsdWU6IHZhbHVlIHx8ICcnLFxuICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgIHJldHVybiBfdGhpczYub25JbnB1dENoYW5nZShlLCBpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNsYXNzTmFtZTogXCJwLWNvbHVtbi1maWx0ZXJcIixcbiAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMuZ2V0Q29sdW1uUHJvcCgnZmlsdGVyUGxhY2Vob2xkZXInKSxcbiAgICAgICAgbWF4TGVuZ3RoOiB0aGlzLmdldENvbHVtblByb3AoJ2ZpbHRlck1heExlbmd0aCcpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUm93RmlsdGVyRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJSb3dGaWx0ZXJFbGVtZW50KCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuZGlzcGxheSA9PT0gJ3JvdycpIHtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnJlbmRlckZpbHRlckVsZW1lbnQodGhpcy5maWx0ZXJNb2RlbCwgMCk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtZmx1aWQgcC1jb2x1bW4tZmlsdGVyLWVsZW1lbnRcIlxuICAgICAgICB9LCBjb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlck1lbnVGaWx0ZXJFbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlck1lbnVGaWx0ZXJFbGVtZW50KGZpZWxkQ29uc3RyYWludCwgaW5kZXgpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmRpc3BsYXkgPT09ICdtZW51Jykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJGaWx0ZXJFbGVtZW50KGZpZWxkQ29uc3RyYWludCwgaW5kZXgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyTWVudUJ1dHRvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJNZW51QnV0dG9uKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnNob3dNZW51QnV0dG9uKCkpIHtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtY29sdW1uLWZpbHRlci1tZW51LWJ1dHRvbiBwLWxpbmsnLCB7XG4gICAgICAgICAgJ3AtY29sdW1uLWZpbHRlci1tZW51LWJ1dHRvbi1vcGVuJzogdGhpcy5zdGF0ZS5vdmVybGF5VmlzaWJsZSxcbiAgICAgICAgICAncC1jb2x1bW4tZmlsdGVyLW1lbnUtYnV0dG9uLWFjdGl2ZSc6IHRoaXMuaGFzRmlsdGVyKClcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczcuaWNvbiA9IGVsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBcImFyaWEtaGFzcG9wdXBcIjogdHJ1ZSxcbiAgICAgICAgICBcImFyaWEtZXhwYW5kZWRcIjogdGhpcy5zdGF0ZS5vdmVybGF5VmlzaWJsZSxcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZU1lbnUsXG4gICAgICAgICAgb25LZXlEb3duOiB0aGlzLm9uVG9nZ2xlQnV0dG9uS2V5RG93blxuICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJwaSBwaS1maWx0ZXItaWNvbiBwaS1maWx0ZXJcIlxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDbGVhckJ1dHRvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDbGVhckJ1dHRvbigpIHtcbiAgICAgIGlmICh0aGlzLmdldENvbHVtblByb3AoJ3Nob3dDbGVhckJ1dHRvbicpICYmIHRoaXMucHJvcHMuZGlzcGxheSA9PT0gJ3JvdycpIHtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtY29sdW1uLWZpbHRlci1jbGVhci1idXR0b24gcC1saW5rJywge1xuICAgICAgICAgICdwLWhpZGRlbi1zcGFjZSc6ICF0aGlzLmhhc1Jvd0ZpbHRlcigpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgb25DbGljazogdGhpcy5jbGVhckZpbHRlclxuICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJwaSBwaS1maWx0ZXItc2xhc2hcIlxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJSb3dJdGVtc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJSb3dJdGVtcygpIHtcbiAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5pc1Nob3dNYXRjaE1vZGVzKCkpIHtcbiAgICAgICAgdmFyIG1hdGNoTW9kZXMgPSB0aGlzLm1hdGNoTW9kZXMoKTtcbiAgICAgICAgdmFyIG5vRmlsdGVyTGFiZWwgPSB0aGlzLm5vRmlsdGVyTGFiZWwoKTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidWxcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJwLWNvbHVtbi1maWx0ZXItcm93LWl0ZW1zXCJcbiAgICAgICAgfSwgbWF0Y2hNb2Rlcy5tYXAoZnVuY3Rpb24gKG1hdGNoTW9kZSwgaSkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IG1hdGNoTW9kZS52YWx1ZSxcbiAgICAgICAgICAgICAgbGFiZWwgPSBtYXRjaE1vZGUubGFiZWw7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtY29sdW1uLWZpbHRlci1yb3ctaXRlbScsIHtcbiAgICAgICAgICAgICdwLWhpZ2hsaWdodCc6IF90aGlzOC5pc1Jvd01hdGNoTW9kZVNlbGVjdGVkKHZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciB0YWJJbmRleCA9IGkgPT09IDAgPyAwIDogbnVsbDtcbiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICAgIGtleTogbGFiZWwsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4Lm9uUm93TWF0Y2hNb2RlQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfdGhpczgub25Sb3dNYXRjaE1vZGVLZXlEb3duKGUsIG1hdGNoTW9kZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGFiSW5kZXg6IHRhYkluZGV4XG4gICAgICAgICAgfSwgbGFiZWwpO1xuICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtY29sdW1uLWZpbHRlci1zZXBhcmF0b3JcIlxuICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtY29sdW1uLWZpbHRlci1yb3ctaXRlbVwiLFxuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2xlYXJGaWx0ZXIsXG4gICAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5vblJvd01hdGNoTW9kZUtleURvd24oZSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBub0ZpbHRlckxhYmVsKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJPcGVyYXRvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJPcGVyYXRvcigpIHtcbiAgICAgIGlmICh0aGlzLmlzU2hvd09wZXJhdG9yKCkpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wZXJhdG9yT3B0aW9ucygpO1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLm9wZXJhdG9yKCk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtY29sdW1uLWZpbHRlci1vcGVyYXRvclwiXG4gICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7XG4gICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25PcGVyYXRvckNoYW5nZSxcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1jb2x1bW4tZmlsdGVyLW9wZXJhdG9yLWRyb3Bkb3duXCJcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyTWF0Y2hNb2RlRHJvcGRvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyTWF0Y2hNb2RlRHJvcGRvd24oY29uc3RyYWludCwgaW5kZXgpIHtcbiAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5pc1Nob3dNYXRjaE1vZGVzKCkpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm1hdGNoTW9kZXMoKTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7XG4gICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICB2YWx1ZTogY29uc3RyYWludC5tYXRjaE1vZGUsXG4gICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczkub25NZW51TWF0Y2hNb2RlQ2hhbmdlKGUudmFsdWUsIGluZGV4KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJwLWNvbHVtbi1maWx0ZXItbWF0Y2htb2RlLWRyb3Bkb3duXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJSZW1vdmVCdXR0b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUmVtb3ZlQnV0dG9uKGluZGV4KSB7XG4gICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnNob3dSZW1vdmVJY29uKCkpIHtcbiAgICAgICAgdmFyIHJlbW92ZVJ1bGVMYWJlbCA9IHRoaXMucmVtb3ZlUnVsZUJ1dHRvbkxhYmVsKCk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgIGljb246IFwicGkgcGktdHJhc2hcIixcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1jb2x1bW4tZmlsdGVyLXJlbW92ZS1idXR0b24gcC1idXR0b24tdGV4dCBwLWJ1dHRvbi1kYW5nZXIgcC1idXR0b24tc21cIixcbiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAucmVtb3ZlQ29uc3RyYWludChpbmRleCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsYWJlbDogcmVtb3ZlUnVsZUxhYmVsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyQ29uc3RyYWludHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQ29uc3RyYWludHMoKSB7XG4gICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgIHZhciBmaWVsZENvbnN0cmFpbnRzID0gdGhpcy5maWVsZENvbnN0cmFpbnRzKCk7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicC1jb2x1bW4tZmlsdGVyLWNvbnN0cmFpbnRzXCJcbiAgICAgIH0sIGZpZWxkQ29uc3RyYWludHMubWFwKGZ1bmN0aW9uIChmaWVsZENvbnN0cmFpbnQsIGkpIHtcbiAgICAgICAgdmFyIG1hdGNoTW9kZURyb3Bkb3duID0gX3RoaXMxMS5yZW5kZXJNYXRjaE1vZGVEcm9wZG93bihmaWVsZENvbnN0cmFpbnQsIGkpO1xuXG4gICAgICAgIHZhciBtZW51RmlsdGVyRWxlbWVudCA9IF90aGlzMTEucmVuZGVyTWVudUZpbHRlckVsZW1lbnQoZmllbGRDb25zdHJhaW50LCBpKTtcblxuICAgICAgICB2YXIgcmVtb3ZlQnV0dG9uID0gX3RoaXMxMS5yZW5kZXJSZW1vdmVCdXR0b24oaSk7XG5cbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBrZXk6IGksXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtY29sdW1uLWZpbHRlci1jb25zdHJhaW50XCJcbiAgICAgICAgfSwgbWF0Y2hNb2RlRHJvcGRvd24sIG1lbnVGaWx0ZXJFbGVtZW50LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCByZW1vdmVCdXR0b24pKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyQWRkUnVsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJBZGRSdWxlKCkge1xuICAgICAgaWYgKHRoaXMuaXNTaG93QWRkQ29uc3RyYWludCgpKSB7XG4gICAgICAgIHZhciBhZGRSdWxlTGFiZWwgPSB0aGlzLmFkZFJ1bGVCdXR0b25MYWJlbCgpO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJwLWNvbHVtbi1maWx0ZXItYWRkLXJ1bGVcIlxuICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgIGxhYmVsOiBhZGRSdWxlTGFiZWwsXG4gICAgICAgICAgaWNvbjogXCJwaSBwaS1wbHVzXCIsXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtY29sdW1uLWZpbHRlci1hZGQtYnV0dG9uIHAtYnV0dG9uLXRleHQgcC1idXR0b24tc21cIixcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLmFkZENvbnN0cmFpbnRcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRmlsdGVyQ2xlYXJCdXR0b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRmlsdGVyQ2xlYXJCdXR0b24oKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdzaG93Q2xlYXJCdXR0b24nKSkge1xuICAgICAgICBpZiAoIXRoaXMuZ2V0Q29sdW1uUHJvcCgnZmlsdGVyQ2xlYXInKSkge1xuICAgICAgICAgIHZhciBjbGVhckxhYmVsID0gdGhpcy5jbGVhckJ1dHRvbkxhYmVsKCk7XG4gICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwge1xuICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJwLWJ1dHRvbi1vdXRsaW5lZCBwLWJ1dHRvbi1zbVwiLFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5jbGVhckZpbHRlcixcbiAgICAgICAgICAgIGxhYmVsOiBjbGVhckxhYmVsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLmdldENvbHVtblByb3AoJ2ZpbHRlckNsZWFyJyksIHtcbiAgICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgICBmaWx0ZXJNb2RlbDogdGhpcy5maWx0ZXJNb2RlbCxcbiAgICAgICAgICBmaWx0ZXJDbGVhckNhbGxiYWNrOiB0aGlzLmNsZWFyRmlsdGVyXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRmlsdGVyQXBwbHlCdXR0b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRmlsdGVyQXBwbHlCdXR0b24oKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdzaG93QXBwbHlCdXR0b24nKSkge1xuICAgICAgICBpZiAoIXRoaXMuZ2V0Q29sdW1uUHJvcCgnZmlsdGVyQXBwbHknKSkge1xuICAgICAgICAgIHZhciBhcHBseUxhYmVsID0gdGhpcy5hcHBseUJ1dHRvbkxhYmVsKCk7XG4gICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwge1xuICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJwLWJ1dHRvbi1zbVwiLFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5hcHBseUZpbHRlcixcbiAgICAgICAgICAgIGxhYmVsOiBhcHBseUxhYmVsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLmdldENvbHVtblByb3AoJ2ZpbHRlckFwcGx5JyksIHtcbiAgICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgICBmaWx0ZXJNb2RlbDogdGhpcy5maWx0ZXJNb2RlbCxcbiAgICAgICAgICBmaWx0ZXJBcHBseUNhbGxiYWNrOiB0aGlzLmFwcGx5RmlsdGVyXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyQnV0dG9uQmFyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckJ1dHRvbkJhcigpIHtcbiAgICAgIHZhciBjbGVhckJ1dHRvbiA9IHRoaXMucmVuZGVyRmlsdGVyQ2xlYXJCdXR0b24oKTtcbiAgICAgIHZhciBhcHBseUJ1dHRvbiA9IHRoaXMucmVuZGVyRmlsdGVyQXBwbHlCdXR0b24oKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJwLWNvbHVtbi1maWx0ZXItYnV0dG9uYmFyXCJcbiAgICAgIH0sIGNsZWFyQnV0dG9uLCBhcHBseUJ1dHRvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlckl0ZW1zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckl0ZW1zKCkge1xuICAgICAgdmFyIG9wZXJhdG9yID0gdGhpcy5yZW5kZXJPcGVyYXRvcigpO1xuICAgICAgdmFyIGNvbnN0cmFpbnRzID0gdGhpcy5yZW5kZXJDb25zdHJhaW50cygpO1xuICAgICAgdmFyIGFkZFJ1bGUgPSB0aGlzLnJlbmRlckFkZFJ1bGUoKTtcbiAgICAgIHZhciBidXR0b25CYXIgPSB0aGlzLnJlbmRlckJ1dHRvbkJhcigpO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBvcGVyYXRvciwgY29uc3RyYWludHMsIGFkZFJ1bGUsIGJ1dHRvbkJhcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlck92ZXJsYXlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyT3ZlcmxheSgpIHtcbiAgICAgIHZhciBzdHlsZSA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnZmlsdGVyTWVudVN0eWxlJyk7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1jb2x1bW4tZmlsdGVyLW92ZXJsYXkgcC1jb21wb25lbnQgcC1mbHVpZCcsIHRoaXMuZ2V0Q29sdW1uUHJvcCgnZmlsdGVyTWVudUNsYXNzTmFtZScpLCB7XG4gICAgICAgICdwLWNvbHVtbi1maWx0ZXItb3ZlcmxheS1tZW51JzogdGhpcy5wcm9wcy5kaXNwbGF5ID09PSAnbWVudScsXG4gICAgICAgICdwLWlucHV0LWZpbGxlZCc6IFByaW1lUmVhY3QuaW5wdXRTdHlsZSA9PT0gJ2ZpbGxlZCcsXG4gICAgICAgICdwLXJpcHBsZS1kaXNhYmxlZCc6IFByaW1lUmVhY3QucmlwcGxlID09PSBmYWxzZVxuICAgICAgfSk7XG4gICAgICB2YXIgZmlsdGVySGVhZGVyID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLmdldENvbHVtblByb3AoJ2ZpbHRlckhlYWRlcicpLCB7XG4gICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkLFxuICAgICAgICBmaWx0ZXJNb2RlbDogdGhpcy5maWx0ZXJNb2RlbCxcbiAgICAgICAgZmlsdGVyQXBwbHlDYWxsYmFjazogdGhpcy5maWx0ZXJBcHBseUNhbGxiYWNrXG4gICAgICB9KTtcbiAgICAgIHZhciBmaWx0ZXJGb290ZXIgPSBPYmplY3RVdGlscy5nZXRKU1hFbGVtZW50KHRoaXMuZ2V0Q29sdW1uUHJvcCgnZmlsdGVyRm9vdGVyJyksIHtcbiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgIGZpbHRlck1vZGVsOiB0aGlzLmZpbHRlck1vZGVsLFxuICAgICAgICBmaWx0ZXJBcHBseUNhbGxiYWNrOiB0aGlzLmZpbHRlckFwcGx5Q2FsbGJhY2tcbiAgICAgIH0pO1xuICAgICAgdmFyIGl0ZW1zID0gdGhpcy5wcm9wcy5kaXNwbGF5ID09PSAncm93JyA/IHRoaXMucmVuZGVyUm93SXRlbXMoKSA6IHRoaXMucmVuZGVySXRlbXMoKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb3J0YWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTU1RyYW5zaXRpb24sIHtcbiAgICAgICAgbm9kZVJlZjogdGhpcy5vdmVybGF5UmVmLFxuICAgICAgICBjbGFzc05hbWVzOiBcInAtY29ubmVjdGVkLW92ZXJsYXlcIixcbiAgICAgICAgXCJpblwiOiB0aGlzLnN0YXRlLm92ZXJsYXlWaXNpYmxlLFxuICAgICAgICB0aW1lb3V0OiB7XG4gICAgICAgICAgZW50ZXI6IDEyMCxcbiAgICAgICAgICBleGl0OiAxMDBcbiAgICAgICAgfSxcbiAgICAgICAgdW5tb3VudE9uRXhpdDogdHJ1ZSxcbiAgICAgICAgb25FbnRlcjogdGhpcy5vbk92ZXJsYXlFbnRlcixcbiAgICAgICAgb25FeGl0OiB0aGlzLm9uT3ZlcmxheUV4aXQsXG4gICAgICAgIG9uRXhpdGVkOiB0aGlzLm9uT3ZlcmxheUV4aXRlZFxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICByZWY6IHRoaXMub3ZlcmxheVJlZixcbiAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25LZXlEb3duOiB0aGlzLm9uQ29udGVudEtleURvd24sXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMub25Db250ZW50Q2xpY2ssXG4gICAgICAgIG9uTW91c2VEb3duOiB0aGlzLm9uQ29udGVudE1vdXNlRG93blxuICAgICAgfSwgZmlsdGVySGVhZGVyLCBpdGVtcywgZmlsdGVyRm9vdGVyKSkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtY29sdW1uLWZpbHRlciBwLWZsdWlkJywge1xuICAgICAgICAncC1jb2x1bW4tZmlsdGVyLXJvdyc6IHRoaXMucHJvcHMuZGlzcGxheSA9PT0gJ3JvdycsXG4gICAgICAgICdwLWNvbHVtbi1maWx0ZXItbWVudSc6IHRoaXMucHJvcHMuZGlzcGxheSA9PT0gJ21lbnUnXG4gICAgICB9KTtcbiAgICAgIHZhciByb3dGaWx0ZXJFbGVtZW50ID0gdGhpcy5yZW5kZXJSb3dGaWx0ZXJFbGVtZW50KCk7XG4gICAgICB2YXIgbWVudUJ1dHRvbiA9IHRoaXMucmVuZGVyTWVudUJ1dHRvbigpO1xuICAgICAgdmFyIGNsZWFyQnV0dG9uID0gdGhpcy5yZW5kZXJDbGVhckJ1dHRvbigpO1xuICAgICAgdmFyIG92ZXJsYXkgPSB0aGlzLnJlbmRlck92ZXJsYXkoKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lXG4gICAgICB9LCByb3dGaWx0ZXJFbGVtZW50LCBtZW51QnV0dG9uLCBjbGVhckJ1dHRvbiwgb3ZlcmxheSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENvbHVtbkZpbHRlcjtcbn0oQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gb3duS2V5cyQyKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkJDIodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMkMihPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzJDIoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkMihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQyKCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQyKCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBIZWFkZXJDZWxsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhIZWFkZXJDZWxsLCBfQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyJDIoSGVhZGVyQ2VsbCk7XG5cbiAgZnVuY3Rpb24gSGVhZGVyQ2VsbChwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIZWFkZXJDZWxsKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgc3R5bGVPYmplY3Q6IHt9XG4gICAgfTtcbiAgICBfdGhpcy5vbkNsaWNrID0gX3RoaXMub25DbGljay5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbk1vdXNlRG93biA9IF90aGlzLm9uTW91c2VEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uS2V5RG93biA9IF90aGlzLm9uS2V5RG93bi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsgLy8gZHJhZ1xuXG4gICAgX3RoaXMub25EcmFnU3RhcnQgPSBfdGhpcy5vbkRyYWdTdGFydC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkRyYWdPdmVyID0gX3RoaXMub25EcmFnT3Zlci5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkRyYWdMZWF2ZSA9IF90aGlzLm9uRHJhZ0xlYXZlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uRHJvcCA9IF90aGlzLm9uRHJvcC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsgLy8gcmVzaXplXG5cbiAgICBfdGhpcy5vblJlc2l6ZXJNb3VzZURvd24gPSBfdGhpcy5vblJlc2l6ZXJNb3VzZURvd24uYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25SZXNpemVyQ2xpY2sgPSBfdGhpcy5vblJlc2l6ZXJDbGljay5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vblJlc2l6ZXJEb3VibGVDbGljayA9IF90aGlzLm9uUmVzaXplckRvdWJsZUNsaWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhIZWFkZXJDZWxsLCBbe1xuICAgIGtleTogXCJpc0JhZGdlVmlzaWJsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0JhZGdlVmlzaWJsZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm11bHRpU29ydE1ldGEgJiYgdGhpcy5wcm9wcy5tdWx0aVNvcnRNZXRhLmxlbmd0aCA+IDE7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzU29ydGFibGVEaXNhYmxlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NvcnRhYmxlRGlzYWJsZWQoKSB7XG4gICAgICByZXR1cm4gIXRoaXMuZ2V0Q29sdW1uUHJvcCgnc29ydGFibGUnKSB8fCB0aGlzLmdldENvbHVtblByb3AoJ3NvcnRhYmxlJykgJiYgKHRoaXMucHJvcHMuYWxsU29ydGFibGVEaXNhYmxlZCB8fCB0aGlzLmdldENvbHVtblByb3AoJ3NvcnRhYmxlRGlzYWJsZWQnKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENvbHVtblByb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sdW1uUHJvcCgpIHtcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jb2x1bW4gPyB0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycgPyB0aGlzLnByb3BzLmNvbHVtbi5wcm9wc1thcmdzWzBdXSA6IChhcmdzWzBdIHx8IHRoaXMucHJvcHMuY29sdW1uKS5wcm9wc1thcmdzWzFdXSA6IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFN0eWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0eWxlKCkge1xuICAgICAgdmFyIGhlYWRlclN0eWxlID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdoZWFkZXJTdHlsZScpO1xuICAgICAgdmFyIGNvbHVtblN0eWxlID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdzdHlsZScpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1uUHJvcCgnZnJvemVuJykgPyBPYmplY3QuYXNzaWduKHt9LCBjb2x1bW5TdHlsZSwgaGVhZGVyU3R5bGUsIHRoaXMuc3RhdGUuc3R5bGVPYmplY3QpIDogT2JqZWN0LmFzc2lnbih7fSwgY29sdW1uU3R5bGUsIGhlYWRlclN0eWxlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0TXVsdGlTb3J0TWV0YUluZGV4XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldE11bHRpU29ydE1ldGFJbmRleCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5tdWx0aVNvcnRNZXRhLmZpbmRJbmRleChmdW5jdGlvbiAobWV0YSkge1xuICAgICAgICByZXR1cm4gbWV0YS5maWVsZCA9PT0gX3RoaXMyLmdldENvbHVtblByb3AoJ2ZpZWxkJykgfHwgbWV0YS5maWVsZCA9PT0gX3RoaXMyLmdldENvbHVtblByb3AoJ3NvcnRGaWVsZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNvcnRNZXRhXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNvcnRNZXRhKCkge1xuICAgICAgdmFyIHNvcnRlZCA9IGZhbHNlO1xuICAgICAgdmFyIHNvcnRPcmRlciA9IDA7XG4gICAgICB2YXIgbWV0YUluZGV4ID0gLTE7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnNvcnRNb2RlID09PSAnc2luZ2xlJykge1xuICAgICAgICBzb3J0ZWQgPSB0aGlzLnByb3BzLnNvcnRGaWVsZCAmJiAodGhpcy5wcm9wcy5zb3J0RmllbGQgPT09IHRoaXMuZ2V0Q29sdW1uUHJvcCgnZmllbGQnKSB8fCB0aGlzLnByb3BzLnNvcnRGaWVsZCA9PT0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdzb3J0RmllbGQnKSk7XG4gICAgICAgIHNvcnRPcmRlciA9IHNvcnRlZCA/IHRoaXMucHJvcHMuc29ydE9yZGVyIDogMDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zb3J0TW9kZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgICBtZXRhSW5kZXggPSB0aGlzLmdldE11bHRpU29ydE1ldGFJbmRleCgpO1xuXG4gICAgICAgIGlmIChtZXRhSW5kZXggPiAtMSkge1xuICAgICAgICAgIHNvcnRlZCA9IHRydWU7XG4gICAgICAgICAgc29ydE9yZGVyID0gdGhpcy5wcm9wcy5tdWx0aVNvcnRNZXRhW21ldGFJbmRleF0ub3JkZXI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc29ydGVkOiBzb3J0ZWQsXG4gICAgICAgIHNvcnRPcmRlcjogc29ydE9yZGVyLFxuICAgICAgICBtZXRhSW5kZXg6IG1ldGFJbmRleFxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QXJpYVNvcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXJpYVNvcnQoX3JlZikge1xuICAgICAgdmFyIHNvcnRlZCA9IF9yZWYuc29ydGVkLFxuICAgICAgICAgIHNvcnRPcmRlciA9IF9yZWYuc29ydE9yZGVyO1xuXG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdzb3J0YWJsZScpKSB7XG4gICAgICAgIHZhciBzb3J0SWNvbiA9IHNvcnRlZCA/IHNvcnRPcmRlciA8IDAgPyAncGktc29ydC1hbW91bnQtZG93bicgOiAncGktc29ydC1hbW91bnQtdXAtYWx0JyA6ICdwaS1zb3J0LWFsdCc7XG4gICAgICAgIGlmIChzb3J0SWNvbiA9PT0gJ3BpLXNvcnQtYW1vdW50LWRvd24nKSByZXR1cm4gJ2Rlc2NlbmRpbmcnO2Vsc2UgaWYgKHNvcnRJY29uID09PSAncGktc29ydC1hbW91bnQtdXAtYWx0JykgcmV0dXJuICdhc2NlbmRpbmcnO2Vsc2UgcmV0dXJuICdub25lJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVN0aWNreVBvc2l0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0aWNreVBvc2l0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuZ2V0Q29sdW1uUHJvcCgnZnJvemVuJykpIHtcbiAgICAgICAgdmFyIHN0eWxlT2JqZWN0ID0gX29iamVjdFNwcmVhZCQyKHt9LCB0aGlzLnN0YXRlLnN0eWxlT2JqZWN0KTtcblxuICAgICAgICB2YXIgYWxpZ24gPSB0aGlzLmdldENvbHVtblByb3AoJ2FsaWduRnJvemVuJyk7XG5cbiAgICAgICAgaWYgKGFsaWduID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgdmFyIHJpZ2h0ID0gMDtcbiAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgIHJpZ2h0ID0gRG9tSGFuZGxlci5nZXRPdXRlcldpZHRoKG5leHQpICsgcGFyc2VGbG9hdChuZXh0LnN0eWxlLnJpZ2h0IHx8IDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0eWxlT2JqZWN0WydyaWdodCddID0gcmlnaHQgKyAncHgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBsZWZ0ID0gMDtcbiAgICAgICAgICB2YXIgcHJldiA9IHRoaXMuZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgICBsZWZ0ID0gRG9tSGFuZGxlci5nZXRPdXRlcldpZHRoKHByZXYpICsgcGFyc2VGbG9hdChwcmV2LnN0eWxlLmxlZnQgfHwgMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3R5bGVPYmplY3RbJ2xlZnQnXSA9IGxlZnQgKyAncHgnO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbHRlclJvdyA9IHRoaXMuZWwucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgaWYgKGZpbHRlclJvdykge1xuICAgICAgICAgIHZhciBpbmRleCA9IERvbUhhbmRsZXIuaW5kZXgodGhpcy5lbCk7XG4gICAgICAgICAgZmlsdGVyUm93LmNoaWxkcmVuW2luZGV4XS5zdHlsZS5sZWZ0ID0gc3R5bGVPYmplY3RbJ2xlZnQnXTtcbiAgICAgICAgICBmaWx0ZXJSb3cuY2hpbGRyZW5baW5kZXhdLnN0eWxlLnJpZ2h0ID0gc3R5bGVPYmplY3RbJ3JpZ2h0J107XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNTYW1lU3R5bGUgPSB0aGlzLnN0YXRlLnN0eWxlT2JqZWN0WydsZWZ0J10gPT09IHN0eWxlT2JqZWN0WydsZWZ0J10gJiYgdGhpcy5zdGF0ZS5zdHlsZU9iamVjdFsncmlnaHQnXSA9PT0gc3R5bGVPYmplY3RbJ3JpZ2h0J107XG4gICAgICAgICFpc1NhbWVTdHlsZSAmJiB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzdHlsZU9iamVjdDogc3R5bGVPYmplY3RcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVNvcnRhYmxlRGlzYWJsZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU29ydGFibGVEaXNhYmxlZChwcmV2Q29sdW1uKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKHByZXZDb2x1bW4sICdzb3J0YWJsZURpc2FibGVkJykgIT09IHRoaXMuZ2V0Q29sdW1uUHJvcCgnc29ydGFibGVEaXNhYmxlZCcpIHx8IHRoaXMuZ2V0Q29sdW1uUHJvcChwcmV2Q29sdW1uLCAnc29ydGFibGUnKSAhPT0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdzb3J0YWJsZScpKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Tb3J0YWJsZUNoYW5nZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNsaWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5pc1NvcnRhYmxlRGlzYWJsZWQoKSkge1xuICAgICAgICB2YXIgdGFyZ2V0Tm9kZSA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICBpZiAoRG9tSGFuZGxlci5oYXNDbGFzcyh0YXJnZXROb2RlLCAncC1zb3J0YWJsZS1jb2x1bW4nKSB8fCBEb21IYW5kbGVyLmhhc0NsYXNzKHRhcmdldE5vZGUsICdwLWNvbHVtbi10aXRsZScpIHx8IERvbUhhbmRsZXIuaGFzQ2xhc3ModGFyZ2V0Tm9kZSwgJ3AtY29sdW1uLWhlYWRlci1jb250ZW50JykgfHwgRG9tSGFuZGxlci5oYXNDbGFzcyh0YXJnZXROb2RlLCAncC1zb3J0YWJsZS1jb2x1bW4taWNvbicpIHx8IERvbUhhbmRsZXIuaGFzQ2xhc3ModGFyZ2V0Tm9kZS5wYXJlbnRFbGVtZW50LCAncC1zb3J0YWJsZS1jb2x1bW4taWNvbicpKSB7XG4gICAgICAgICAgRG9tSGFuZGxlci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgIHRoaXMucHJvcHMub25Tb3J0Q2hhbmdlKHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgY29sdW1uOiB0aGlzLnByb3BzLmNvbHVtbixcbiAgICAgICAgICAgIHNvcnRhYmxlRGlzYWJsZWRGaWVsZHM6IHRoaXMucHJvcHMuc29ydGFibGVEaXNhYmxlZEZpZWxkc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uTW91c2VEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ29sdW1uTW91c2VEb3duKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGNvbHVtbjogdGhpcy5wcm9wcy5jb2x1bW5cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbktleURvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmIGV2ZW50LmN1cnJlbnRUYXJnZXQgPT09IHRoaXMuZWwgJiYgRG9tSGFuZGxlci5oYXNDbGFzcyhldmVudC5jdXJyZW50VGFyZ2V0LCAncC1zb3J0YWJsZS1jb2x1bW4nKSkge1xuICAgICAgICB0aGlzLm9uQ2xpY2soZXZlbnQpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkRyYWdTdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdTdGFydChldmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNvbHVtbkRyYWdTdGFydCh7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICBjb2x1bW46IHRoaXMucHJvcHMuY29sdW1uXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25EcmFnT3ZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdPdmVyKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ29sdW1uRHJhZ092ZXIoe1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgY29sdW1uOiB0aGlzLnByb3BzLmNvbHVtblxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRHJhZ0xlYXZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhZ0xlYXZlKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ29sdW1uRHJhZ0xlYXZlKHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGNvbHVtbjogdGhpcy5wcm9wcy5jb2x1bW5cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkRyb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Ecm9wKGV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ29sdW1uRHJvcCh7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICBjb2x1bW46IHRoaXMucHJvcHMuY29sdW1uXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVyTW91c2VEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplck1vdXNlRG93bihldmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNvbHVtblJlc2l6ZVN0YXJ0KHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgIGNvbHVtbjogdGhpcy5wcm9wcy5jb2x1bW5cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZXJDbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZXJDbGljayhldmVudCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMub25Db2x1bW5SZXNpemVyQ2xpY2spIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNvbHVtblJlc2l6ZXJDbGljayh7XG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgICAgZWxlbWVudDogZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LFxuICAgICAgICAgIGNvbHVtbjogdGhpcy5wcm9wcy5jb2x1bW5cbiAgICAgICAgfSk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplckRvdWJsZUNsaWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplckRvdWJsZUNsaWNrKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vbkNvbHVtblJlc2l6ZXJEb3VibGVDbGljaykge1xuICAgICAgICB0aGlzLnByb3BzLm9uQ29sdW1uUmVzaXplckRvdWJsZUNsaWNrKHtcbiAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICBlbGVtZW50OiBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQsXG4gICAgICAgICAgY29sdW1uOiB0aGlzLnByb3BzLmNvbHVtblxuICAgICAgICB9KTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdmcm96ZW4nKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0aWNreVBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICBpZiAodGhpcy5nZXRDb2x1bW5Qcm9wKCdmcm96ZW4nKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0aWNreVBvc2l0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXBkYXRlU29ydGFibGVEaXNhYmxlZChwcmV2UHJvcHMuY29sdW1uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUmVzaXplclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJSZXNpemVyKCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMucmVzaXphYmxlQ29sdW1ucyAmJiAhdGhpcy5nZXRDb2x1bW5Qcm9wKCdmcm96ZW4nKSkge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1jb2x1bW4tcmVzaXplclwiLFxuICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLm9uUmVzaXplck1vdXNlRG93bixcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9uUmVzaXplckNsaWNrLFxuICAgICAgICAgIG9uRG91YmxlQ2xpY2s6IHRoaXMub25SZXNpemVyRG91YmxlQ2xpY2tcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJUaXRsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUaXRsZSgpIHtcbiAgICAgIHZhciB0aXRsZSA9IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQodGhpcy5nZXRDb2x1bW5Qcm9wKCdoZWFkZXInKSwge1xuICAgICAgICBwcm9wczogdGhpcy5wcm9wcy50YWJsZVByb3BzXG4gICAgICB9KTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicC1jb2x1bW4tdGl0bGVcIlxuICAgICAgfSwgdGl0bGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJTb3J0SWNvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJTb3J0SWNvbihfcmVmMikge1xuICAgICAgdmFyIHNvcnRlZCA9IF9yZWYyLnNvcnRlZCxcbiAgICAgICAgICBzb3J0T3JkZXIgPSBfcmVmMi5zb3J0T3JkZXI7XG5cbiAgICAgIGlmICh0aGlzLmdldENvbHVtblByb3AoJ3NvcnRhYmxlJykpIHtcbiAgICAgICAgdmFyIHNvcnRJY29uID0gc29ydGVkID8gc29ydE9yZGVyIDwgMCA/ICdwaS1zb3J0LWFtb3VudC1kb3duJyA6ICdwaS1zb3J0LWFtb3VudC11cC1hbHQnIDogJ3BpLXNvcnQtYWx0JztcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3Atc29ydGFibGUtY29sdW1uLWljb24gcGkgcGktZncnLCBzb3J0SWNvbik7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyQmFkZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQmFkZ2UoX3JlZjMpIHtcbiAgICAgIHZhciBtZXRhSW5kZXggPSBfcmVmMy5tZXRhSW5kZXg7XG5cbiAgICAgIGlmIChtZXRhSW5kZXggIT09IC0xICYmIHRoaXMuaXNCYWRnZVZpc2libGUoKSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnByb3BzLmdyb3VwUm93c0J5ICYmIHRoaXMucHJvcHMuZ3JvdXBSb3dzQnkgPT09IHRoaXMucHJvcHMuZ3JvdXBSb3dTb3J0RmllbGQgPyBtZXRhSW5kZXggOiBtZXRhSW5kZXggKyAxO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1zb3J0YWJsZS1jb2x1bW4tYmFkZ2VcIlxuICAgICAgICB9LCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDaGVja2JveFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDaGVja2JveCgpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLnNob3dTZWxlY3RBbGwgJiYgdGhpcy5nZXRDb2x1bW5Qcm9wKCdzZWxlY3Rpb25Nb2RlJykgPT09ICdtdWx0aXBsZScgJiYgdGhpcy5wcm9wcy5maWx0ZXJEaXNwbGF5ICE9PSAncm93Jykge1xuICAgICAgICB2YXIgYWxsUm93c1NlbGVjdGVkID0gdGhpcy5wcm9wcy5hbGxSb3dzU2VsZWN0ZWQodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXJDaGVja2JveCwge1xuICAgICAgICAgIGNoZWNrZWQ6IGFsbFJvd3NTZWxlY3RlZCxcbiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5wcm9wcy5vbkNvbHVtbkNoZWNrYm94Q2hhbmdlLFxuICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmVtcHR5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRmlsdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckZpbHRlcigpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmZpbHRlckRpc3BsYXkgPT09ICdtZW51JyAmJiB0aGlzLmdldENvbHVtblByb3AoJ2ZpbHRlcicpKSB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb2x1bW5GaWx0ZXIsIHtcbiAgICAgICAgICBkaXNwbGF5OiBcIm1lbnVcIixcbiAgICAgICAgICBjb2x1bW46IHRoaXMucHJvcHMuY29sdW1uLFxuICAgICAgICAgIGZpbHRlcnM6IHRoaXMucHJvcHMuZmlsdGVycyxcbiAgICAgICAgICBvbkZpbHRlckNoYW5nZTogdGhpcy5wcm9wcy5vbkZpbHRlckNoYW5nZSxcbiAgICAgICAgICBvbkZpbHRlckFwcGx5OiB0aGlzLnByb3BzLm9uRmlsdGVyQXBwbHksXG4gICAgICAgICAgZmlsdGVyc1N0b3JlOiB0aGlzLnByb3BzLmZpbHRlcnNTdG9yZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlckhlYWRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJIZWFkZXIoc29ydE1ldGEpIHtcbiAgICAgIHZhciB0aXRsZSA9IHRoaXMucmVuZGVyVGl0bGUoKTtcbiAgICAgIHZhciBzb3J0SWNvbiA9IHRoaXMucmVuZGVyU29ydEljb24oc29ydE1ldGEpO1xuICAgICAgdmFyIGJhZGdlID0gdGhpcy5yZW5kZXJCYWRnZShzb3J0TWV0YSk7XG4gICAgICB2YXIgY2hlY2tib3ggPSB0aGlzLnJlbmRlckNoZWNrYm94KCk7XG4gICAgICB2YXIgZmlsdGVyID0gdGhpcy5yZW5kZXJGaWx0ZXIoKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJwLWNvbHVtbi1oZWFkZXItY29udGVudFwiXG4gICAgICB9LCB0aXRsZSwgc29ydEljb24sIGJhZGdlLCBjaGVja2JveCwgZmlsdGVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFbGVtZW50KCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBpc1NvcnRhYmxlRGlzYWJsZWQgPSB0aGlzLmlzU29ydGFibGVEaXNhYmxlZCgpO1xuICAgICAgdmFyIHNvcnRNZXRhID0gdGhpcy5nZXRTb3J0TWV0YSgpO1xuICAgICAgdmFyIHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgICAgdmFyIGFsaWduID0gdGhpcy5nZXRDb2x1bW5Qcm9wKCdhbGlnbkhlYWRlcicpIHx8IHRoaXMuZ2V0Q29sdW1uUHJvcCgnYWxpZ24nKTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKHRoaXMuZ2V0Q29sdW1uUHJvcCgnaGVhZGVyQ2xhc3NOYW1lJyksIHRoaXMuZ2V0Q29sdW1uUHJvcCgnY2xhc3NOYW1lJyksIF9kZWZpbmVQcm9wZXJ0eSh7XG4gICAgICAgICdwLXNvcnRhYmxlLWNvbHVtbic6IHRoaXMuZ2V0Q29sdW1uUHJvcCgnc29ydGFibGUnKSxcbiAgICAgICAgJ3AtcmVzaXphYmxlLWNvbHVtbic6IHRoaXMucHJvcHMucmVzaXphYmxlQ29sdW1ucyxcbiAgICAgICAgJ3AtaGlnaGxpZ2h0Jzogc29ydE1ldGEuc29ydGVkLFxuICAgICAgICAncC1mcm96ZW4tY29sdW1uJzogdGhpcy5nZXRDb2x1bW5Qcm9wKCdmcm96ZW4nKSxcbiAgICAgICAgJ3Atc2VsZWN0aW9uLWNvbHVtbic6IHRoaXMuZ2V0Q29sdW1uUHJvcCgnc2VsZWN0aW9uTW9kZScpLFxuICAgICAgICAncC1zb3J0YWJsZS1kaXNhYmxlZCc6IHRoaXMuZ2V0Q29sdW1uUHJvcCgnc29ydGFibGUnKSAmJiBpc1NvcnRhYmxlRGlzYWJsZWQsXG4gICAgICAgICdwLXJlb3JkZXJhYmxlLWNvbHVtbic6IHRoaXMucHJvcHMucmVvcmRlcmFibGVDb2x1bW5zICYmIHRoaXMuZ2V0Q29sdW1uUHJvcCgncmVvcmRlcmFibGUnKVxuICAgICAgfSwgXCJwLWFsaWduLVwiLmNvbmNhdChhbGlnbiksICEhYWxpZ24pKTtcbiAgICAgIHZhciB0YWJJbmRleCA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnc29ydGFibGUnKSAmJiAhaXNTb3J0YWJsZURpc2FibGVkID8gdGhpcy5wcm9wcy50YWJJbmRleCA6IG51bGw7XG4gICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q29sdW1uUHJvcCgnY29sU3BhbicpO1xuICAgICAgdmFyIHJvd1NwYW4gPSB0aGlzLmdldENvbHVtblByb3AoJ3Jvd1NwYW4nKTtcbiAgICAgIHZhciBhcmlhU29ydCA9IHRoaXMuZ2V0QXJpYVNvcnQoc29ydE1ldGEpO1xuICAgICAgdmFyIHJlc2l6ZXIgPSB0aGlzLnJlbmRlclJlc2l6ZXIoKTtcbiAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnJlbmRlckhlYWRlcihzb3J0TWV0YSk7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLCB7XG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMy5lbCA9IGVsO1xuICAgICAgICB9LFxuICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICB0YWJJbmRleDogdGFiSW5kZXgsXG4gICAgICAgIHJvbGU6IFwiY29sdW1uaGVhZGVyXCIsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGljayxcbiAgICAgICAgb25LZXlEb3duOiB0aGlzLm9uS2V5RG93bixcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMub25Nb3VzZURvd24sXG4gICAgICAgIG9uRHJhZ1N0YXJ0OiB0aGlzLm9uRHJhZ1N0YXJ0LFxuICAgICAgICBvbkRyYWdPdmVyOiB0aGlzLm9uRHJhZ092ZXIsXG4gICAgICAgIG9uRHJhZ0xlYXZlOiB0aGlzLm9uRHJhZ0xlYXZlLFxuICAgICAgICBvbkRyb3A6IHRoaXMub25Ecm9wLFxuICAgICAgICBjb2xTcGFuOiBjb2xTcGFuLFxuICAgICAgICByb3dTcGFuOiByb3dTcGFuLFxuICAgICAgICBcImFyaWEtc29ydFwiOiBhcmlhU29ydFxuICAgICAgfSwgcmVzaXplciwgaGVhZGVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlckVsZW1lbnQoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSGVhZGVyQ2VsbDtcbn0oQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gb3duS2V5cyQxKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkJDEodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMkMShPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzJDEoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkMShEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQxKCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQxKCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBUYWJsZUhlYWRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoVGFibGVIZWFkZXIsIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkMShUYWJsZUhlYWRlcik7XG5cbiAgZnVuY3Rpb24gVGFibGVIZWFkZXIocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFibGVIZWFkZXIpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBzb3J0YWJsZURpc2FibGVkRmllbGRzOiBbXSxcbiAgICAgIGFsbFNvcnRhYmxlRGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgc3R5bGVPYmplY3Q6IHt9XG4gICAgfTtcbiAgICBfdGhpcy5vblNvcnRhYmxlQ2hhbmdlID0gX3RoaXMub25Tb3J0YWJsZUNoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkNoZWNrYm94Q2hhbmdlID0gX3RoaXMub25DaGVja2JveENoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVGFibGVIZWFkZXIsIFt7XG4gICAga2V5OiBcImlzU2luZ2xlU29ydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NpbmdsZVNvcnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zb3J0TW9kZSA9PT0gJ3NpbmdsZSc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzTXVsdGlwbGVTb3J0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzTXVsdGlwbGVTb3J0KCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydE1vZGUgPT09ICdtdWx0aXBsZSc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzQWxsU29ydGFibGVEaXNhYmxlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FsbFNvcnRhYmxlRGlzYWJsZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1NpbmdsZVNvcnQoKSAmJiB0aGlzLnN0YXRlLmFsbFNvcnRhYmxlRGlzYWJsZWQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzQ29sdW1uU29ydGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29sdW1uU29ydGVkKGNvbHVtbikge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydEZpZWxkICE9PSBudWxsID8gY29sdW1uLnByb3BzLmZpZWxkID09PSB0aGlzLnByb3BzLnNvcnRGaWVsZCB8fCBjb2x1bW4ucHJvcHMuc29ydEZpZWxkID09PSB0aGlzLnByb3BzLnNvcnRGaWVsZCA6IGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVTb3J0YWJsZURpc2FibGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVNvcnRhYmxlRGlzYWJsZWQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTb3J0KCkgfHwgdGhpcy5pc011bHRpcGxlU29ydCgpICYmIHRoaXMucHJvcHMub25Tb3J0Q2hhbmdlKSB7XG4gICAgICAgIHZhciBzb3J0YWJsZURpc2FibGVkRmllbGRzID0gW107XG4gICAgICAgIHZhciBhbGxTb3J0YWJsZURpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvcHMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICBpZiAoY29sdW1uLnByb3BzLnNvcnRhYmxlRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHNvcnRhYmxlRGlzYWJsZWRGaWVsZHMucHVzaChjb2x1bW4ucHJvcHMuc29ydEZpZWxkIHx8IGNvbHVtbi5wcm9wcy5maWVsZCk7XG5cbiAgICAgICAgICAgIGlmICghYWxsU29ydGFibGVEaXNhYmxlZCAmJiBfdGhpczIuaXNDb2x1bW5Tb3J0ZWQoY29sdW1uKSkge1xuICAgICAgICAgICAgICBhbGxTb3J0YWJsZURpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzb3J0YWJsZURpc2FibGVkRmllbGRzOiBzb3J0YWJsZURpc2FibGVkRmllbGRzLFxuICAgICAgICAgIGFsbFNvcnRhYmxlRGlzYWJsZWQ6IGFsbFNvcnRhYmxlRGlzYWJsZWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uU29ydGFibGVDaGFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Tb3J0YWJsZUNoYW5nZSgpIHtcbiAgICAgIHRoaXMudXBkYXRlU29ydGFibGVEaXNhYmxlZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNoZWNrYm94Q2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hlY2tib3hDaGFuZ2UoZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNvbHVtbkNoZWNrYm94Q2hhbmdlKGUsIHRoaXMucHJvcHMudmFsdWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMudXBkYXRlU29ydGFibGVEaXNhYmxlZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJHcm91cEhlYWRlckNlbGxzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckdyb3VwSGVhZGVyQ2VsbHMocm93KSB7XG4gICAgICB2YXIgY29sdW1ucyA9IFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkocm93LnByb3BzLmNoaWxkcmVuKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlckhlYWRlckNlbGxzKGNvbHVtbnMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJIZWFkZXJDZWxsc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJIZWFkZXJDZWxscyhjb2x1bW5zKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLm1hcChjb2x1bW5zLCBmdW5jdGlvbiAoY29sLCBpKSB7XG4gICAgICAgIHZhciBpc1Zpc2libGUgPSBjb2wgPyAhY29sLnByb3BzLmhpZGRlbiA6IHRydWU7XG4gICAgICAgIHZhciBrZXkgPSBjb2wgPyBjb2wucHJvcHMuY29sdW1uS2V5IHx8IGNvbC5wcm9wcy5maWVsZCB8fCBpIDogaTtcbiAgICAgICAgcmV0dXJuIGlzVmlzaWJsZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXJDZWxsLCB7XG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgdmFsdWU6IF90aGlzMy5wcm9wcy52YWx1ZSxcbiAgICAgICAgICB0YWJsZVByb3BzOiBfdGhpczMucHJvcHMudGFibGVQcm9wcyxcbiAgICAgICAgICBjb2x1bW46IGNvbCxcbiAgICAgICAgICB0YWJJbmRleDogX3RoaXMzLnByb3BzLnRhYkluZGV4LFxuICAgICAgICAgIGVtcHR5OiBfdGhpczMucHJvcHMuZW1wdHksXG4gICAgICAgICAgcmVzaXphYmxlQ29sdW1uczogX3RoaXMzLnByb3BzLnJlc2l6YWJsZUNvbHVtbnMsXG4gICAgICAgICAgZ3JvdXBSb3dzQnk6IF90aGlzMy5wcm9wcy5ncm91cFJvd3NCeSxcbiAgICAgICAgICBncm91cFJvd1NvcnRGaWVsZDogX3RoaXMzLnByb3BzLmdyb3VwUm93U29ydEZpZWxkLFxuICAgICAgICAgIHNvcnRNb2RlOiBfdGhpczMucHJvcHMuc29ydE1vZGUsXG4gICAgICAgICAgc29ydEZpZWxkOiBfdGhpczMucHJvcHMuc29ydEZpZWxkLFxuICAgICAgICAgIHNvcnRPcmRlcjogX3RoaXMzLnByb3BzLnNvcnRPcmRlcixcbiAgICAgICAgICBtdWx0aVNvcnRNZXRhOiBfdGhpczMucHJvcHMubXVsdGlTb3J0TWV0YSxcbiAgICAgICAgICBhbGxTb3J0YWJsZURpc2FibGVkOiBfdGhpczMuaXNBbGxTb3J0YWJsZURpc2FibGVkKCksXG4gICAgICAgICAgb25Tb3J0YWJsZUNoYW5nZTogX3RoaXMzLm9uU29ydGFibGVDaGFuZ2UsXG4gICAgICAgICAgc29ydGFibGVEaXNhYmxlZEZpZWxkczogX3RoaXMzLnN0YXRlLnNvcnRhYmxlRGlzYWJsZWRGaWVsZHMsXG4gICAgICAgICAgZmlsdGVyRGlzcGxheTogX3RoaXMzLnByb3BzLmZpbHRlckRpc3BsYXksXG4gICAgICAgICAgZmlsdGVyczogX3RoaXMzLnByb3BzLmZpbHRlcnMsXG4gICAgICAgICAgZmlsdGVyc1N0b3JlOiBfdGhpczMucHJvcHMuZmlsdGVyc1N0b3JlLFxuICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlOiBfdGhpczMucHJvcHMub25GaWx0ZXJDaGFuZ2UsXG4gICAgICAgICAgb25GaWx0ZXJBcHBseTogX3RoaXMzLnByb3BzLm9uRmlsdGVyQXBwbHksXG4gICAgICAgICAgb25Db2x1bW5Nb3VzZURvd246IF90aGlzMy5wcm9wcy5vbkNvbHVtbk1vdXNlRG93bixcbiAgICAgICAgICBvbkNvbHVtbkRyYWdTdGFydDogX3RoaXMzLnByb3BzLm9uQ29sdW1uRHJhZ1N0YXJ0LFxuICAgICAgICAgIG9uQ29sdW1uRHJhZ092ZXI6IF90aGlzMy5wcm9wcy5vbkNvbHVtbkRyYWdPdmVyLFxuICAgICAgICAgIG9uQ29sdW1uRHJhZ0xlYXZlOiBfdGhpczMucHJvcHMub25Db2x1bW5EcmFnTGVhdmUsXG4gICAgICAgICAgb25Db2x1bW5Ecm9wOiBfdGhpczMucHJvcHMub25Db2x1bW5Ecm9wLFxuICAgICAgICAgIG9uQ29sdW1uUmVzaXplU3RhcnQ6IF90aGlzMy5wcm9wcy5vbkNvbHVtblJlc2l6ZVN0YXJ0LFxuICAgICAgICAgIG9uQ29sdW1uUmVzaXplckNsaWNrOiBfdGhpczMucHJvcHMub25Db2x1bW5SZXNpemVyQ2xpY2ssXG4gICAgICAgICAgb25Db2x1bW5SZXNpemVyRG91YmxlQ2xpY2s6IF90aGlzMy5wcm9wcy5vbkNvbHVtblJlc2l6ZXJEb3VibGVDbGljayxcbiAgICAgICAgICBzaG93U2VsZWN0QWxsOiBfdGhpczMucHJvcHMuc2hvd1NlbGVjdEFsbCxcbiAgICAgICAgICBhbGxSb3dzU2VsZWN0ZWQ6IF90aGlzMy5wcm9wcy5hbGxSb3dzU2VsZWN0ZWQsXG4gICAgICAgICAgb25Db2x1bW5DaGVja2JveENoYW5nZTogX3RoaXMzLm9uQ2hlY2tib3hDaGFuZ2UsXG4gICAgICAgICAgcmVvcmRlcmFibGVDb2x1bW5zOiBfdGhpczMucHJvcHMucmVvcmRlcmFibGVDb2x1bW5zLFxuICAgICAgICAgIG9uU29ydENoYW5nZTogX3RoaXMzLnByb3BzLm9uU29ydENoYW5nZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDaGVja2JveFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDaGVja2JveChzZWxlY3Rpb25Nb2RlKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5zaG93U2VsZWN0QWxsICYmIHNlbGVjdGlvbk1vZGUgPT09ICdtdWx0aXBsZScpIHtcbiAgICAgICAgdmFyIGFsbFJvd3NTZWxlY3RlZCA9IHRoaXMucHJvcHMuYWxsUm93c1NlbGVjdGVkKHRoaXMucHJvcHMudmFsdWUpO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSGVhZGVyQ2hlY2tib3gsIHtcbiAgICAgICAgICBjaGVja2VkOiBhbGxSb3dzU2VsZWN0ZWQsXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGVja2JveENoYW5nZSxcbiAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5lbXB0eVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlckZpbHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJGaWx0ZXIoY29sdW1uLCBmaWx0ZXIpIHtcbiAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbHVtbkZpbHRlciwge1xuICAgICAgICAgIGRpc3BsYXk6IFwicm93XCIsXG4gICAgICAgICAgY29sdW1uOiBjb2x1bW4sXG4gICAgICAgICAgZmlsdGVyczogdGhpcy5wcm9wcy5maWx0ZXJzLFxuICAgICAgICAgIGZpbHRlcnNTdG9yZTogdGhpcy5wcm9wcy5maWx0ZXJzU3RvcmUsXG4gICAgICAgICAgb25GaWx0ZXJDaGFuZ2U6IHRoaXMucHJvcHMub25GaWx0ZXJDaGFuZ2UsXG4gICAgICAgICAgb25GaWx0ZXJBcHBseTogdGhpcy5wcm9wcy5vbkZpbHRlckFwcGx5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRmlsdGVyQ2VsbHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRmlsdGVyQ2VsbHMoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLm1hcCh0aGlzLnByb3BzLmNvbHVtbnMsIGZ1bmN0aW9uIChjb2wsIGkpIHtcbiAgICAgICAgdmFyIGlzVmlzaWJsZSA9ICFjb2wucHJvcHMuaGlkZGVuO1xuXG4gICAgICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgICAgICB2YXIgX2NvbCRwcm9wcyA9IGNvbC5wcm9wcyxcbiAgICAgICAgICAgICAgZmlsdGVySGVhZGVyU3R5bGUgPSBfY29sJHByb3BzLmZpbHRlckhlYWRlclN0eWxlLFxuICAgICAgICAgICAgICBzdHlsZSA9IF9jb2wkcHJvcHMuc3R5bGUsXG4gICAgICAgICAgICAgIGZpbHRlckhlYWRlckNsYXNzTmFtZSA9IF9jb2wkcHJvcHMuZmlsdGVySGVhZGVyQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBfY29sJHByb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgZnJvemVuID0gX2NvbCRwcm9wcy5mcm96ZW4sXG4gICAgICAgICAgICAgIGNvbHVtbktleSA9IF9jb2wkcHJvcHMuY29sdW1uS2V5LFxuICAgICAgICAgICAgICBmaWVsZCA9IF9jb2wkcHJvcHMuZmllbGQsXG4gICAgICAgICAgICAgIHNlbGVjdGlvbk1vZGUgPSBfY29sJHByb3BzLnNlbGVjdGlvbk1vZGUsXG4gICAgICAgICAgICAgIGZpbHRlciA9IF9jb2wkcHJvcHMuZmlsdGVyO1xuXG4gICAgICAgICAgdmFyIGNvbFN0eWxlID0gX29iamVjdFNwcmVhZCQxKF9vYmplY3RTcHJlYWQkMSh7fSwgZmlsdGVySGVhZGVyU3R5bGUgfHwge30pLCBzdHlsZSB8fCB7fSk7XG5cbiAgICAgICAgICB2YXIgY29sQ2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1maWx0ZXItY29sdW1uJywgZmlsdGVySGVhZGVyQ2xhc3NOYW1lLCBjbGFzc05hbWUsIHtcbiAgICAgICAgICAgICdwLWZyb3plbi1jb2x1bW4nOiBmcm96ZW5cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgY29sS2V5ID0gY29sdW1uS2V5IHx8IGZpZWxkIHx8IGk7XG5cbiAgICAgICAgICB2YXIgY2hlY2tib3ggPSBfdGhpczQucmVuZGVyQ2hlY2tib3goc2VsZWN0aW9uTW9kZSk7XG5cbiAgICAgICAgICB2YXIgZmlsdGVyUm93ID0gX3RoaXM0LnJlbmRlckZpbHRlcihjb2wsIGZpbHRlcik7XG5cbiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLCB7XG4gICAgICAgICAgICBrZXk6IGNvbEtleSxcbiAgICAgICAgICAgIHN0eWxlOiBjb2xTdHlsZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY29sQ2xhc3NOYW1lXG4gICAgICAgICAgfSwgY2hlY2tib3gsIGZpbHRlclJvdyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDb250ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMuaGVhZGVyQ29sdW1uR3JvdXApIHtcbiAgICAgICAgdmFyIHJvd3MgPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KHRoaXMucHJvcHMuaGVhZGVyQ29sdW1uR3JvdXAucHJvcHMuY2hpbGRyZW4pO1xuICAgICAgICByZXR1cm4gcm93cy5tYXAoZnVuY3Rpb24gKHJvdywgaSkge1xuICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIHtcbiAgICAgICAgICAgIGtleTogaSxcbiAgICAgICAgICAgIHJvbGU6IFwicm93XCJcbiAgICAgICAgICB9LCBfdGhpczUucmVuZGVyR3JvdXBIZWFkZXJDZWxscyhyb3cpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaGVhZGVyUm93ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLCB7XG4gICAgICAgICAgcm9sZTogXCJyb3dcIlxuICAgICAgICB9LCB0aGlzLnJlbmRlckhlYWRlckNlbGxzKHRoaXMucHJvcHMuY29sdW1ucykpO1xuICAgICAgICB2YXIgZmlsdGVyUm93ID0gdGhpcy5wcm9wcy5maWx0ZXJEaXNwbGF5ID09PSAncm93JyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIHtcbiAgICAgICAgICByb2xlOiBcInJvd1wiXG4gICAgICAgIH0sIHRoaXMucmVuZGVyRmlsdGVyQ2VsbHMoKSk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgaGVhZGVyUm93LCBmaWx0ZXJSb3cpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRoZWFkXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInAtZGF0YXRhYmxlLXRoZWFkXCJcbiAgICAgIH0sIGNvbnRlbnQpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBUYWJsZUhlYWRlcjtcbn0oQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgRGF0YVRhYmxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhEYXRhVGFibGUsIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRGF0YVRhYmxlKTtcblxuICBmdW5jdGlvbiBEYXRhVGFibGUocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0YVRhYmxlKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgZF9yb3dzOiBwcm9wcy5yb3dzLFxuICAgICAgY29sdW1uT3JkZXI6IFtdLFxuICAgICAgZ3JvdXBSb3dzU29ydE1ldGE6IG51bGwsXG4gICAgICBlZGl0aW5nTWV0YToge30sXG4gICAgICBhdHRyaWJ1dGVTZWxlY3RvcjogbnVsbFxuICAgIH07XG5cbiAgICBpZiAoIV90aGlzLnByb3BzLm9uUGFnZSkge1xuICAgICAgX3RoaXMuc3RhdGUuZmlyc3QgPSBwcm9wcy5maXJzdDtcbiAgICAgIF90aGlzLnN0YXRlLnJvd3MgPSBwcm9wcy5yb3dzO1xuICAgIH1cblxuICAgIGlmICghX3RoaXMucHJvcHMub25Tb3J0KSB7XG4gICAgICBfdGhpcy5zdGF0ZS5zb3J0RmllbGQgPSBwcm9wcy5zb3J0RmllbGQ7XG4gICAgICBfdGhpcy5zdGF0ZS5zb3J0T3JkZXIgPSBwcm9wcy5zb3J0T3JkZXI7XG4gICAgICBfdGhpcy5zdGF0ZS5tdWx0aVNvcnRNZXRhID0gcHJvcHMubXVsdGlTb3J0TWV0YTtcbiAgICB9XG5cbiAgICBfdGhpcy5zdGF0ZS5kX2ZpbHRlcnMgPSBfdGhpcy5jbG9uZUZpbHRlcnMocHJvcHMuZmlsdGVycyk7XG5cbiAgICBpZiAoIV90aGlzLnByb3BzLm9uRmlsdGVyKSB7XG4gICAgICBfdGhpcy5zdGF0ZS5maWx0ZXJzID0gcHJvcHMuZmlsdGVycztcbiAgICB9IC8vIGhlYWRlclxuXG5cbiAgICBfdGhpcy5vblNvcnRDaGFuZ2UgPSBfdGhpcy5vblNvcnRDaGFuZ2UuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25GaWx0ZXJDaGFuZ2UgPSBfdGhpcy5vbkZpbHRlckNoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkZpbHRlckFwcGx5ID0gX3RoaXMub25GaWx0ZXJBcHBseS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkNvbHVtbkhlYWRlck1vdXNlRG93biA9IF90aGlzLm9uQ29sdW1uSGVhZGVyTW91c2VEb3duLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uQ29sdW1uSGVhZGVyRHJhZ1N0YXJ0ID0gX3RoaXMub25Db2x1bW5IZWFkZXJEcmFnU3RhcnQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Db2x1bW5IZWFkZXJEcmFnT3ZlciA9IF90aGlzLm9uQ29sdW1uSGVhZGVyRHJhZ092ZXIuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Db2x1bW5IZWFkZXJEcmFnTGVhdmUgPSBfdGhpcy5vbkNvbHVtbkhlYWRlckRyYWdMZWF2ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5vbkNvbHVtbkhlYWRlckRyb3AgPSBfdGhpcy5vbkNvbHVtbkhlYWRlckRyb3AuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Db2x1bW5SZXNpemVTdGFydCA9IF90aGlzLm9uQ29sdW1uUmVzaXplU3RhcnQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Db2x1bW5IZWFkZXJDaGVja2JveENoYW5nZSA9IF90aGlzLm9uQ29sdW1uSGVhZGVyQ2hlY2tib3hDaGFuZ2UuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuYWxsUm93c1NlbGVjdGVkID0gX3RoaXMuYWxsUm93c1NlbGVjdGVkLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOyAvLyBib2R5XG5cbiAgICBfdGhpcy5vbkVkaXRpbmdNZXRhQ2hhbmdlID0gX3RoaXMub25FZGl0aW5nTWV0YUNoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsgLy9wYWdpbmF0b3JcblxuICAgIF90aGlzLm9uUGFnZUNoYW5nZSA9IF90aGlzLm9uUGFnZUNoYW5nZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRGF0YVRhYmxlLCBbe1xuICAgIGtleTogXCJpc0N1c3RvbVN0YXRlU3RvcmFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0N1c3RvbVN0YXRlU3RvcmFnZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnN0YXRlU3RvcmFnZSA9PT0gJ2N1c3RvbSc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzU3RhdGVmdWxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdGF0ZWZ1bCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnN0YXRlS2V5ICE9IG51bGwgfHwgdGhpcy5pc0N1c3RvbVN0YXRlU3RvcmFnZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1ZpcnR1YWxTY3JvbGxlckRpc2FibGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzVmlydHVhbFNjcm9sbGVyRGlzYWJsZWQoKSB7XG4gICAgICByZXR1cm4gT2JqZWN0VXRpbHMuaXNFbXB0eSh0aGlzLnByb3BzLnZpcnR1YWxTY3JvbGxlck9wdGlvbnMpIHx8ICF0aGlzLnByb3BzLnNjcm9sbGFibGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzRXF1YWxzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzRXF1YWxzKGRhdGExLCBkYXRhMikge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY29tcGFyZVNlbGVjdGlvbkJ5ID09PSAnZXF1YWxzJyA/IGRhdGExID09PSBkYXRhMiA6IE9iamVjdFV0aWxzLmVxdWFscyhkYXRhMSwgZGF0YTIsIHRoaXMucHJvcHMuZGF0YUtleSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhc0ZpbHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNGaWx0ZXIoKSB7XG4gICAgICByZXR1cm4gT2JqZWN0VXRpbHMuaXNOb3RFbXB0eSh0aGlzLmdldEZpbHRlcnMoKSkgfHwgdGhpcy5wcm9wcy5nbG9iYWxGaWx0ZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEZpcnN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpcnN0KCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMub25QYWdlID8gdGhpcy5wcm9wcy5maXJzdCA6IHRoaXMuc3RhdGUuZmlyc3Q7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFJvd3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Um93cygpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uUGFnZSA/IHRoaXMucHJvcHMucm93cyA6IHRoaXMuc3RhdGUucm93cztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U29ydEZpZWxkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNvcnRGaWVsZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uU29ydCA/IHRoaXMucHJvcHMuc29ydEZpZWxkIDogdGhpcy5zdGF0ZS5zb3J0RmllbGQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNvcnRPcmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTb3J0T3JkZXIoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5vblNvcnQgPyB0aGlzLnByb3BzLnNvcnRPcmRlciA6IHRoaXMuc3RhdGUuc29ydE9yZGVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRNdWx0aVNvcnRNZXRhXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldE11bHRpU29ydE1ldGEoKSB7XG4gICAgICByZXR1cm4gKHRoaXMucHJvcHMub25Tb3J0ID8gdGhpcy5wcm9wcy5tdWx0aVNvcnRNZXRhIDogdGhpcy5zdGF0ZS5tdWx0aVNvcnRNZXRhKSB8fCBbXTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0RmlsdGVyc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMub25GaWx0ZXIgPyB0aGlzLnByb3BzLmZpbHRlcnMgOiB0aGlzLnN0YXRlLmZpbHRlcnM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENvbHVtblByb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sdW1uUHJvcChjb2wsIHByb3ApIHtcbiAgICAgIHJldHVybiBjb2wucHJvcHNbcHJvcF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENvbHVtbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sdW1ucyhpZ25vcmVSZW9yZGVyYWJsZSkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBjb2x1bW5zID0gUmVhY3QuQ2hpbGRyZW4udG9BcnJheSh0aGlzLnByb3BzLmNoaWxkcmVuKTtcblxuICAgICAgaWYgKCFjb2x1bW5zKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlnbm9yZVJlb3JkZXJhYmxlICYmIHRoaXMucHJvcHMucmVvcmRlcmFibGVDb2x1bW5zICYmIHRoaXMuc3RhdGUuY29sdW1uT3JkZXIpIHtcbiAgICAgICAgdmFyIG9yZGVyZWRDb2x1bW5zID0gdGhpcy5zdGF0ZS5jb2x1bW5PcmRlci5yZWR1Y2UoZnVuY3Rpb24gKGFyciwgY29sdW1uS2V5KSB7XG4gICAgICAgICAgdmFyIGNvbHVtbiA9IF90aGlzMi5maW5kQ29sdW1uQnlLZXkoY29sdW1ucywgY29sdW1uS2V5KTtcblxuICAgICAgICAgIGNvbHVtbiAmJiBhcnIucHVzaChjb2x1bW4pO1xuICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgIH0sIFtdKTtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkob3JkZXJlZENvbHVtbnMpLCBfdG9Db25zdW1hYmxlQXJyYXkoY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGNvbCkge1xuICAgICAgICAgIHJldHVybiBvcmRlcmVkQ29sdW1ucy5pbmRleE9mKGNvbCkgPCAwO1xuICAgICAgICB9KSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29sdW1ucztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U3RvcmFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdG9yYWdlKCkge1xuICAgICAgc3dpdGNoICh0aGlzLnByb3BzLnN0YXRlU3RvcmFnZSkge1xuICAgICAgICBjYXNlICdsb2NhbCc6XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG5cbiAgICAgICAgY2FzZSAnc2Vzc2lvbic6XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5zZXNzaW9uU3RvcmFnZTtcblxuICAgICAgICBjYXNlICdjdXN0b20nOlxuICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMucHJvcHMuc3RhdGVTdG9yYWdlICsgJyBpcyBub3QgYSB2YWxpZCB2YWx1ZSBmb3IgdGhlIHN0YXRlIHN0b3JhZ2UsIHN1cHBvcnRlZCB2YWx1ZXMgYXJlIFwibG9jYWxcIiwgXCJzZXNzaW9uXCIgYW5kIFwiY3VzdG9tXCIuJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNhdmVTdGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlU3RhdGUoKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7fTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdG9yKSB7XG4gICAgICAgIHN0YXRlLmZpcnN0ID0gdGhpcy5nZXRGaXJzdCgpO1xuICAgICAgICBzdGF0ZS5yb3dzID0gdGhpcy5nZXRSb3dzKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzb3J0RmllbGQgPSB0aGlzLmdldFNvcnRGaWVsZCgpO1xuXG4gICAgICBpZiAoc29ydEZpZWxkKSB7XG4gICAgICAgIHN0YXRlLnNvcnRGaWVsZCA9IHNvcnRGaWVsZDtcbiAgICAgICAgc3RhdGUuc29ydE9yZGVyID0gdGhpcy5nZXRTb3J0T3JkZXIoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG11bHRpU29ydE1ldGEgPSB0aGlzLmdldE11bHRpU29ydE1ldGEoKTtcblxuICAgICAgaWYgKG11bHRpU29ydE1ldGEpIHtcbiAgICAgICAgc3RhdGUubXVsdGlTb3J0TWV0YSA9IG11bHRpU29ydE1ldGE7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhhc0ZpbHRlcigpKSB7XG4gICAgICAgIHN0YXRlLmZpbHRlcnMgPSB0aGlzLmdldEZpbHRlcnMoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMucmVzaXphYmxlQ29sdW1ucykge1xuICAgICAgICB0aGlzLnNhdmVDb2x1bW5XaWR0aHMoc3RhdGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5yZW9yZGVyYWJsZUNvbHVtbnMpIHtcbiAgICAgICAgc3RhdGUuY29sdW1uT3JkZXIgPSB0aGlzLnN0YXRlLmNvbHVtbk9yZGVyO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5leHBhbmRlZFJvd3MpIHtcbiAgICAgICAgc3RhdGUuZXhwYW5kZWRSb3dzID0gdGhpcy5wcm9wcy5leHBhbmRlZFJvd3M7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdGlvbiAmJiB0aGlzLnByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICAgIHN0YXRlLnNlbGVjdGlvbiA9IHRoaXMucHJvcHMuc2VsZWN0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc0N1c3RvbVN0YXRlU3RvcmFnZSgpKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmN1c3RvbVNhdmVTdGF0ZSkge1xuICAgICAgICAgIHRoaXMucHJvcHMuY3VzdG9tU2F2ZVN0YXRlKHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHN0b3JhZ2UgPSB0aGlzLmdldFN0b3JhZ2UoKTtcblxuICAgICAgICBpZiAoT2JqZWN0VXRpbHMuaXNOb3RFbXB0eShzdGF0ZSkpIHtcbiAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0odGhpcy5wcm9wcy5zdGF0ZUtleSwgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblN0YXRlU2F2ZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uU3RhdGVTYXZlKHN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xlYXJTdGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhclN0YXRlKCkge1xuICAgICAgdmFyIHN0b3JhZ2UgPSB0aGlzLmdldFN0b3JhZ2UoKTtcblxuICAgICAgaWYgKHN0b3JhZ2UgJiYgdGhpcy5wcm9wcy5zdGF0ZUtleSkge1xuICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5wcm9wcy5zdGF0ZUtleSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc3RvcmVTdGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXN0b3JlU3RhdGUoc3RhdGUpIHtcbiAgICAgIHZhciByZXN0b3JlZFN0YXRlID0ge307XG5cbiAgICAgIGlmICh0aGlzLmlzQ3VzdG9tU3RhdGVTdG9yYWdlKCkpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY3VzdG9tUmVzdG9yZVN0YXRlKSB7XG4gICAgICAgICAgcmVzdG9yZWRTdGF0ZSA9IHRoaXMucHJvcHMuY3VzdG9tUmVzdG9yZVN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzdG9yYWdlID0gdGhpcy5nZXRTdG9yYWdlKCk7XG4gICAgICAgIHZhciBzdGF0ZVN0cmluZyA9IHN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnByb3BzLnN0YXRlS2V5KTtcbiAgICAgICAgdmFyIGRhdGVGb3JtYXQgPSAvXFxkezR9LVxcZHsyfS1cXGR7Mn1UXFxkezJ9OlxcZHsyfTpcXGR7Mn0uXFxkezN9Wi87XG5cbiAgICAgICAgdmFyIHJldml2ZXIgPSBmdW5jdGlvbiByZXZpdmVyKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIGRhdGVGb3JtYXQudGVzdCh2YWx1ZSkgPyBuZXcgRGF0ZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc3RhdGVTdHJpbmcpIHtcbiAgICAgICAgICByZXN0b3JlZFN0YXRlID0gSlNPTi5wYXJzZShzdGF0ZVN0cmluZywgcmV2aXZlcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVzdG9yZVN0YXRlKHJlc3RvcmVkU3RhdGUsIHN0YXRlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzdG9yZVRhYmxlU3RhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdG9yZVRhYmxlU3RhdGUocmVzdG9yZWRTdGF0ZSkge1xuICAgICAgdmFyIHN0YXRlID0gdGhpcy5fcmVzdG9yZVN0YXRlKHJlc3RvcmVkU3RhdGUpO1xuXG4gICAgICBpZiAoT2JqZWN0VXRpbHMuaXNOb3RFbXB0eShzdGF0ZSkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9yZXN0b3JlU3RhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc3RvcmVTdGF0ZShyZXN0b3JlZFN0YXRlKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgICAgaWYgKE9iamVjdFV0aWxzLmlzTm90RW1wdHkocmVzdG9yZWRTdGF0ZSkpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMucGFnaW5hdG9yKSB7XG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMub25QYWdlKSB7XG4gICAgICAgICAgICB2YXIgZ2V0T25QYWdlUGFyYW1zID0gZnVuY3Rpb24gZ2V0T25QYWdlUGFyYW1zKGZpcnN0LCByb3dzKSB7XG4gICAgICAgICAgICAgIHZhciB0b3RhbFJlY29yZHMgPSBfdGhpczMuZ2V0VG90YWxSZWNvcmRzKF90aGlzMy5wcm9jZXNzZWREYXRhKCkpO1xuXG4gICAgICAgICAgICAgIHZhciBwYWdlQ291bnQgPSBNYXRoLmNlaWwodG90YWxSZWNvcmRzIC8gcm93cykgfHwgMTtcbiAgICAgICAgICAgICAgdmFyIHBhZ2UgPSBNYXRoLmZsb29yKGZpcnN0IC8gcm93cyk7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmlyc3Q6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHJvd3M6IHJvd3MsXG4gICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcbiAgICAgICAgICAgICAgICBwYWdlQ291bnQ6IHBhZ2VDb3VudFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblBhZ2UodGhpcy5jcmVhdGVFdmVudChnZXRPblBhZ2VQYXJhbXMocmVzdG9yZWRTdGF0ZS5maXJzdCwgcmVzdG9yZWRTdGF0ZS5yb3dzKSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS5maXJzdCA9IHJlc3RvcmVkU3RhdGUuZmlyc3Q7XG4gICAgICAgICAgICBzdGF0ZS5yb3dzID0gcmVzdG9yZWRTdGF0ZS5yb3dzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN0b3JlZFN0YXRlLnNvcnRGaWVsZCkge1xuICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uU29ydCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblNvcnQodGhpcy5jcmVhdGVFdmVudCh7XG4gICAgICAgICAgICAgIHNvcnRGaWVsZDogcmVzdG9yZWRTdGF0ZS5zb3J0RmllbGQsXG4gICAgICAgICAgICAgIHNvcnRPcmRlcjogcmVzdG9yZWRTdGF0ZS5zb3J0T3JkZXJcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUuc29ydEZpZWxkID0gcmVzdG9yZWRTdGF0ZS5zb3J0RmllbGQ7XG4gICAgICAgICAgICBzdGF0ZS5zb3J0T3JkZXIgPSByZXN0b3JlZFN0YXRlLnNvcnRPcmRlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdG9yZWRTdGF0ZS5tdWx0aVNvcnRNZXRhKSB7XG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMub25Tb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uU29ydCh0aGlzLmNyZWF0ZUV2ZW50KHtcbiAgICAgICAgICAgICAgbXVsdGlTb3J0TWV0YTogcmVzdG9yZWRTdGF0ZS5tdWx0aVNvcnRNZXRhXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlLm11bHRpU29ydE1ldGEgPSByZXN0b3JlZFN0YXRlLm11bHRpU29ydE1ldGE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3RvcmVkU3RhdGUuZmlsdGVycykge1xuICAgICAgICAgIHN0YXRlLmRfZmlsdGVycyA9IHRoaXMuY2xvbmVGaWx0ZXJzKHJlc3RvcmVkU3RhdGUuZmlsdGVycyk7XG5cbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkZpbHRlcikge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkZpbHRlcih0aGlzLmNyZWF0ZUV2ZW50KHtcbiAgICAgICAgICAgICAgZmlsdGVyczogcmVzdG9yZWRTdGF0ZS5maWx0ZXJzXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlLmZpbHRlcnMgPSB0aGlzLmNsb25lRmlsdGVycyhyZXN0b3JlZFN0YXRlLmZpbHRlcnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnJlc2l6YWJsZUNvbHVtbnMpIHtcbiAgICAgICAgICB0aGlzLmNvbHVtbldpZHRoc1N0YXRlID0gcmVzdG9yZWRTdGF0ZS5jb2x1bW5XaWR0aHM7XG4gICAgICAgICAgdGhpcy50YWJsZVdpZHRoU3RhdGUgPSByZXN0b3JlZFN0YXRlLnRhYmxlV2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5yZW9yZGVyYWJsZUNvbHVtbnMpIHtcbiAgICAgICAgICBzdGF0ZS5jb2x1bW5PcmRlciA9IHJlc3RvcmVkU3RhdGUuY29sdW1uT3JkZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdG9yZWRTdGF0ZS5leHBhbmRlZFJvd3MgJiYgdGhpcy5wcm9wcy5vblJvd1RvZ2dsZSkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25Sb3dUb2dnbGUoe1xuICAgICAgICAgICAgZGF0YTogcmVzdG9yZWRTdGF0ZS5leHBhbmRlZFJvd3NcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN0b3JlZFN0YXRlLnNlbGVjdGlvbiAmJiB0aGlzLnByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdGlvbkNoYW5nZSh7XG4gICAgICAgICAgICB2YWx1ZTogcmVzdG9yZWRTdGF0ZS5zZWxlY3Rpb25cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uU3RhdGVSZXN0b3JlKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vblN0YXRlUmVzdG9yZShyZXN0b3JlZFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNhdmVDb2x1bW5XaWR0aHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUNvbHVtbldpZHRocyhzdGF0ZSkge1xuICAgICAgdmFyIHdpZHRocyA9IFtdO1xuICAgICAgdmFyIGhlYWRlcnMgPSBEb21IYW5kbGVyLmZpbmQodGhpcy5lbCwgJy5wLWRhdGF0YWJsZS10aGVhZCA+IHRyID4gdGgnKTtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7XG4gICAgICAgIHJldHVybiB3aWR0aHMucHVzaChEb21IYW5kbGVyLmdldE91dGVyV2lkdGgoaGVhZGVyKSk7XG4gICAgICB9KTtcbiAgICAgIHN0YXRlLmNvbHVtbldpZHRocyA9IHdpZHRocy5qb2luKCcsJyk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmNvbHVtblJlc2l6ZU1vZGUgPT09ICdleHBhbmQnKSB7XG4gICAgICAgIHN0YXRlLnRhYmxlV2lkdGggPSBEb21IYW5kbGVyLmdldE91dGVyV2lkdGgodGhpcy50YWJsZSkgKyAncHgnO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXN0b3JlQ29sdW1uV2lkdGhzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3RvcmVDb2x1bW5XaWR0aHMoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuY29sdW1uV2lkdGhzU3RhdGUpIHtcbiAgICAgICAgdmFyIHdpZHRocyA9IHRoaXMuY29sdW1uV2lkdGhzU3RhdGUuc3BsaXQoJywnKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb2x1bW5SZXNpemVNb2RlID09PSAnZXhwYW5kJyAmJiB0aGlzLnRhYmxlV2lkdGhTdGF0ZSkge1xuICAgICAgICAgIHRoaXMudGFibGUuc3R5bGUud2lkdGggPSB0aGlzLnRhYmxlV2lkdGhTdGF0ZTtcbiAgICAgICAgICB0aGlzLnRhYmxlLnN0eWxlLm1pbldpZHRoID0gdGhpcy50YWJsZVdpZHRoU3RhdGU7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IHRoaXMudGFibGVXaWR0aFN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE9iamVjdFV0aWxzLmlzTm90RW1wdHkod2lkdGhzKSkge1xuICAgICAgICAgIHRoaXMuY3JlYXRlU3R5bGVFbGVtZW50KCk7XG4gICAgICAgICAgdmFyIGlubmVySFRNTCA9ICcnO1xuICAgICAgICAgIHdpZHRocy5mb3JFYWNoKGZ1bmN0aW9uICh3aWR0aCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IF90aGlzNC5wcm9wcy5zY3JvbGxhYmxlID8gXCJmbGV4OiAxIDEgXCIuY29uY2F0KHdpZHRoLCBcInB4ICFpbXBvcnRhbnRcIikgOiBcIndpZHRoOiBcIi5jb25jYXQod2lkdGgsIFwicHggIWltcG9ydGFudFwiKTtcbiAgICAgICAgICAgIGlubmVySFRNTCArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wLWRhdGF0YWJsZVtcIi5jb25jYXQoX3RoaXM0LnN0YXRlLmF0dHJpYnV0ZVNlbGVjdG9yLCBcIl0gLnAtZGF0YXRhYmxlLXRoZWFkID4gdHIgPiB0aDpudGgtY2hpbGQoXCIpLmNvbmNhdChpbmRleCArIDEsIFwiKSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAucC1kYXRhdGFibGVbXCIpLmNvbmNhdChfdGhpczQuc3RhdGUuYXR0cmlidXRlU2VsZWN0b3IsIFwiXSAucC1kYXRhdGFibGUtdGJvZHkgPiB0ciA+IHRkOm50aC1jaGlsZChcIikuY29uY2F0KGluZGV4ICsgMSwgXCIpLFxcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wLWRhdGF0YWJsZVtcIikuY29uY2F0KF90aGlzNC5zdGF0ZS5hdHRyaWJ1dGVTZWxlY3RvciwgXCJdIC5wLWRhdGF0YWJsZS10Zm9vdCA+IHRyID4gdGQ6bnRoLWNoaWxkKFwiKS5jb25jYXQoaW5kZXggKyAxLCBcIikge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIikuY29uY2F0KHN0eWxlLCBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIFwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZFBhcmVudEhlYWRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kUGFyZW50SGVhZGVyKGVsZW1lbnQpIHtcbiAgICAgIGlmIChlbGVtZW50Lm5vZGVOYW1lID09PSAnVEgnKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcblxuICAgICAgICB3aGlsZSAocGFyZW50Lm5vZGVOYW1lICE9PSAnVEgnKSB7XG4gICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKCFwYXJlbnQpIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0R3JvdXBSb3dTb3J0RmllbGRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0R3JvdXBSb3dTb3J0RmllbGQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zb3J0TW9kZSA9PT0gJ3NpbmdsZScgPyB0aGlzLnByb3BzLnNvcnRGaWVsZCA6IHRoaXMuc3RhdGUuZ3JvdXBSb3dzU29ydE1ldGEgPyB0aGlzLnN0YXRlLmdyb3VwUm93c1NvcnRNZXRhLmZpZWxkIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U2VsZWN0YWJsZURhdGFcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VsZWN0YWJsZURhdGEodmFsKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMuc2hvd1NlbGVjdGlvbkVsZW1lbnQgfHwgdGhpcy5wcm9wcy5pc0RhdGFTZWxlY3RhYmxlKSB7XG4gICAgICAgIHJldHVybiB2YWwuZmlsdGVyKGZ1bmN0aW9uIChkYXRhLCBpbmRleCkge1xuICAgICAgICAgIHZhciBpc1NlbGVjdGFibGUgPSB0cnVlO1xuICAgICAgICAgIGlmIChfdGhpczUucHJvcHMuc2hvd1NlbGVjdGlvbkVsZW1lbnQpIGlzU2VsZWN0YWJsZSA9IF90aGlzNS5wcm9wcy5zaG93U2VsZWN0aW9uRWxlbWVudCh7XG4gICAgICAgICAgICByb3dJbmRleDogaW5kZXgsXG4gICAgICAgICAgICBwcm9wczogX3RoaXM1LnByb3BzXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKF90aGlzNS5wcm9wcy5pc0RhdGFTZWxlY3RhYmxlICYmIGlzU2VsZWN0YWJsZSkgaXNTZWxlY3RhYmxlID0gX3RoaXM1LnByb3BzLmlzRGF0YVNlbGVjdGFibGUoe1xuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBpc1NlbGVjdGFibGU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhbGxSb3dzU2VsZWN0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWxsUm93c1NlbGVjdGVkKHByb2Nlc3NlZERhdGEpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblNlbGVjdEFsbENoYW5nZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3RBbGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMucHJvcHMuc2VsZWN0aW9uUGFnZU9ubHkgPyB0aGlzLmRhdGFUb1JlbmRlcihwcm9jZXNzZWREYXRhKSA6IHByb2Nlc3NlZERhdGE7XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLnByb3BzLmZyb3plblZhbHVlID8gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnByb3BzLmZyb3plblZhbHVlKSwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEpKSA6IGRhdGE7XG4gICAgICAgIHZhciBzZWxlY3RhYmxlVmFsID0gdGhpcy5nZXRTZWxlY3RhYmxlRGF0YSh2YWwpO1xuICAgICAgICByZXR1cm4gc2VsZWN0YWJsZVZhbCAmJiB0aGlzLnByb3BzLnNlbGVjdGlvbiAmJiBzZWxlY3RhYmxlVmFsLmV2ZXJ5KGZ1bmN0aW9uIChzdikge1xuICAgICAgICAgIHJldHVybiBfdGhpczYucHJvcHMuc2VsZWN0aW9uLnNvbWUoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczYuaXNFcXVhbHMocywgc3YpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U2VsZWN0aW9uTW9kZUluQ29sdW1uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNlbGVjdGlvbk1vZGVJbkNvbHVtbihjb2x1bW5zKSB7XG4gICAgICBpZiAoY29sdW1ucykge1xuICAgICAgICB2YXIgY29sID0gY29sdW1ucy5maW5kKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgcmV0dXJuICEhYy5wcm9wcy5zZWxlY3Rpb25Nb2RlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbCA/IGNvbC5wcm9wcy5zZWxlY3Rpb25Nb2RlIDogbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbmRDb2x1bW5CeUtleVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kQ29sdW1uQnlLZXkoY29sdW1ucywga2V5KSB7XG4gICAgICByZXR1cm4gT2JqZWN0VXRpbHMuaXNOb3RFbXB0eShjb2x1bW5zKSA/IGNvbHVtbnMuZmluZChmdW5jdGlvbiAoY29sKSB7XG4gICAgICAgIHJldHVybiBjb2wucHJvcHMuY29sdW1uS2V5ID09PSBrZXkgfHwgY29sLnByb3BzLmZpZWxkID09PSBrZXk7XG4gICAgICB9KSA6IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFRvdGFsUmVjb3Jkc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUb3RhbFJlY29yZHMoZGF0YSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMubGF6eSA/IHRoaXMucHJvcHMudG90YWxSZWNvcmRzIDogZGF0YSA/IGRhdGEubGVuZ3RoIDogMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25FZGl0aW5nTWV0YUNoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkVkaXRpbmdNZXRhQ2hhbmdlKGUpIHtcbiAgICAgIHZhciByb3dEYXRhID0gZS5yb3dEYXRhLFxuICAgICAgICAgIGZpZWxkID0gZS5maWVsZCxcbiAgICAgICAgICByb3dJbmRleCA9IGUucm93SW5kZXgsXG4gICAgICAgICAgZWRpdGluZyA9IGUuZWRpdGluZztcblxuICAgICAgdmFyIGVkaXRpbmdNZXRhID0gX29iamVjdFNwcmVhZCh7fSwgdGhpcy5zdGF0ZS5lZGl0aW5nTWV0YSk7XG5cbiAgICAgIHZhciBtZXRhID0gZWRpdGluZ01ldGFbcm93SW5kZXhdO1xuXG4gICAgICBpZiAoZWRpdGluZykge1xuICAgICAgICAhbWV0YSAmJiAobWV0YSA9IGVkaXRpbmdNZXRhW3Jvd0luZGV4XSA9IHtcbiAgICAgICAgICBkYXRhOiBfb2JqZWN0U3ByZWFkKHt9LCByb3dEYXRhKSxcbiAgICAgICAgICBmaWVsZHM6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBtZXRhWydmaWVsZHMnXS5wdXNoKGZpZWxkKTtcbiAgICAgIH0gZWxzZSBpZiAobWV0YSkge1xuICAgICAgICB2YXIgZmllbGRzID0gbWV0YVsnZmllbGRzJ10uZmlsdGVyKGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgcmV0dXJuIGYgIT09IGZpZWxkO1xuICAgICAgICB9KTtcbiAgICAgICAgIWZpZWxkcy5sZW5ndGggPyBkZWxldGUgZWRpdGluZ01ldGFbcm93SW5kZXhdIDogbWV0YVsnZmllbGRzJ10gPSBmaWVsZHM7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBlZGl0aW5nTWV0YTogZWRpdGluZ01ldGFcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjbGVhckVkaXRpbmdNZXRhRGF0YVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhckVkaXRpbmdNZXRhRGF0YSgpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRNb2RlICYmIE9iamVjdFV0aWxzLmlzTm90RW1wdHkodGhpcy5zdGF0ZS5lZGl0aW5nTWV0YSkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgZWRpdGluZ01ldGE6IHt9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNvbHVtblJlc2l6ZVN0YXJ0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29sdW1uUmVzaXplU3RhcnQoZSkge1xuICAgICAgdmFyIGV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50LFxuICAgICAgICAgIGNvbHVtbiA9IGUuY29sdW1uO1xuICAgICAgdmFyIGNvbnRhaW5lckxlZnQgPSBEb21IYW5kbGVyLmdldE9mZnNldCh0aGlzLmVsKS5sZWZ0O1xuICAgICAgdGhpcy5yZXNpemVDb2x1bW4gPSBjb2x1bW47XG4gICAgICB0aGlzLnJlc2l6ZUNvbHVtbkVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICB0aGlzLmNvbHVtblJlc2l6aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMubGFzdFJlc2l6ZUhlbHBlclggPSBldmVudC5wYWdlWCAtIGNvbnRhaW5lckxlZnQgKyB0aGlzLmVsLnNjcm9sbExlZnQ7XG4gICAgICB0aGlzLmJpbmRDb2x1bW5SZXNpemVFdmVudHMoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db2x1bW5SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db2x1bW5SZXNpemUoZXZlbnQpIHtcbiAgICAgIHZhciBjb250YWluZXJMZWZ0ID0gRG9tSGFuZGxlci5nZXRPZmZzZXQodGhpcy5lbCkubGVmdDtcbiAgICAgIERvbUhhbmRsZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ3AtdW5zZWxlY3RhYmxlLXRleHQnKTtcbiAgICAgIHRoaXMucmVzaXplSGVscGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuZWwub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRoaXMucmVzaXplSGVscGVyLnN0eWxlLnRvcCA9IDAgKyAncHgnO1xuICAgICAgdGhpcy5yZXNpemVIZWxwZXIuc3R5bGUubGVmdCA9IGV2ZW50LnBhZ2VYIC0gY29udGFpbmVyTGVmdCArIHRoaXMuZWwuc2Nyb2xsTGVmdCArICdweCc7XG4gICAgICB0aGlzLnJlc2l6ZUhlbHBlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db2x1bW5SZXNpemVFbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db2x1bW5SZXNpemVFbmQoKSB7XG4gICAgICB2YXIgZGVsdGEgPSB0aGlzLnJlc2l6ZUhlbHBlci5vZmZzZXRMZWZ0IC0gdGhpcy5sYXN0UmVzaXplSGVscGVyWDtcbiAgICAgIHZhciBjb2x1bW5XaWR0aCA9IHRoaXMucmVzaXplQ29sdW1uRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgIHZhciBuZXdDb2x1bW5XaWR0aCA9IGNvbHVtbldpZHRoICsgZGVsdGE7XG4gICAgICB2YXIgbWluV2lkdGggPSB0aGlzLnJlc2l6ZUNvbHVtbkVsZW1lbnQuc3R5bGUubWluV2lkdGggfHwgMTU7XG5cbiAgICAgIGlmIChjb2x1bW5XaWR0aCArIGRlbHRhID4gcGFyc2VJbnQobWluV2lkdGgsIDEwKSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb2x1bW5SZXNpemVNb2RlID09PSAnZml0Jykge1xuICAgICAgICAgIHZhciBuZXh0Q29sdW1uID0gdGhpcy5yZXNpemVDb2x1bW5FbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICB2YXIgbmV4dENvbHVtbldpZHRoID0gbmV4dENvbHVtbi5vZmZzZXRXaWR0aCAtIGRlbHRhO1xuXG4gICAgICAgICAgaWYgKG5ld0NvbHVtbldpZHRoID4gMTUgJiYgbmV4dENvbHVtbldpZHRoID4gMTUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplVGFibGVDZWxscyhuZXdDb2x1bW5XaWR0aCwgbmV4dENvbHVtbldpZHRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5jb2x1bW5SZXNpemVNb2RlID09PSAnZXhwYW5kJykge1xuICAgICAgICAgIHZhciB0YWJsZVdpZHRoID0gdGhpcy50YWJsZS5vZmZzZXRXaWR0aCArIGRlbHRhICsgJ3B4JztcbiAgICAgICAgICB0aGlzLnRhYmxlLnN0eWxlLndpZHRoID0gdGFibGVXaWR0aDtcbiAgICAgICAgICB0aGlzLnRhYmxlLnN0eWxlLm1pbldpZHRoID0gdGFibGVXaWR0aDtcbiAgICAgICAgICB0aGlzLnJlc2l6ZVRhYmxlQ2VsbHMobmV3Q29sdW1uV2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25Db2x1bW5SZXNpemVFbmQpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uQ29sdW1uUmVzaXplRW5kKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMucmVzaXplQ29sdW1uRWxlbWVudCxcbiAgICAgICAgICAgIGNvbHVtbjogdGhpcy5yZXNpemVDb2x1bW4sXG4gICAgICAgICAgICBkZWx0YTogZGVsdGFcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzU3RhdGVmdWwoKSkge1xuICAgICAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXNpemVIZWxwZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIHRoaXMucmVzaXplQ29sdW1uID0gbnVsbDtcbiAgICAgIHRoaXMucmVzaXplQ29sdW1uRWxlbWVudCA9IG51bGw7XG4gICAgICBEb21IYW5kbGVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdwLXVuc2VsZWN0YWJsZS10ZXh0Jyk7XG4gICAgICB0aGlzLnVuYmluZENvbHVtblJlc2l6ZUV2ZW50cygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXNpemVUYWJsZUNlbGxzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZVRhYmxlQ2VsbHMobmV3Q29sdW1uV2lkdGgsIG5leHRDb2x1bW5XaWR0aCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciB3aWR0aHMgPSBbXTtcbiAgICAgIHZhciBjb2xJbmRleCA9IERvbUhhbmRsZXIuaW5kZXgodGhpcy5yZXNpemVDb2x1bW5FbGVtZW50KTtcbiAgICAgIHZhciBoZWFkZXJzID0gRG9tSGFuZGxlci5maW5kKHRoaXMudGFibGUsICcucC1kYXRhdGFibGUtdGhlYWQgPiB0ciA+IHRoJyk7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICByZXR1cm4gd2lkdGhzLnB1c2goRG9tSGFuZGxlci5nZXRPdXRlcldpZHRoKGhlYWRlcikpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmRlc3Ryb3lTdHlsZUVsZW1lbnQoKTtcbiAgICAgIHRoaXMuY3JlYXRlU3R5bGVFbGVtZW50KCk7XG4gICAgICB2YXIgaW5uZXJIVE1MID0gJyc7XG4gICAgICB3aWR0aHMuZm9yRWFjaChmdW5jdGlvbiAod2lkdGgsIGluZGV4KSB7XG4gICAgICAgIHZhciBjb2xXaWR0aCA9IGluZGV4ID09PSBjb2xJbmRleCA/IG5ld0NvbHVtbldpZHRoIDogbmV4dENvbHVtbldpZHRoICYmIGluZGV4ID09PSBjb2xJbmRleCArIDEgPyBuZXh0Q29sdW1uV2lkdGggOiB3aWR0aDtcbiAgICAgICAgdmFyIHN0eWxlID0gX3RoaXM3LnByb3BzLnNjcm9sbGFibGUgPyBcImZsZXg6IDEgMSBcIi5jb25jYXQoY29sV2lkdGgsIFwicHggIWltcG9ydGFudFwiKSA6IFwid2lkdGg6IFwiLmNvbmNhdChjb2xXaWR0aCwgXCJweCAhaW1wb3J0YW50XCIpO1xuICAgICAgICBpbm5lckhUTUwgKz0gXCJcXG4gICAgICAgICAgICAgICAgLnAtZGF0YXRhYmxlW1wiLmNvbmNhdChfdGhpczcuc3RhdGUuYXR0cmlidXRlU2VsZWN0b3IsIFwiXSAucC1kYXRhdGFibGUtdGhlYWQgPiB0ciA+IHRoOm50aC1jaGlsZChcIikuY29uY2F0KGluZGV4ICsgMSwgXCIpLFxcbiAgICAgICAgICAgICAgICAucC1kYXRhdGFibGVbXCIpLmNvbmNhdChfdGhpczcuc3RhdGUuYXR0cmlidXRlU2VsZWN0b3IsIFwiXSAucC1kYXRhdGFibGUtdGJvZHkgPiB0ciA+IHRkOm50aC1jaGlsZChcIikuY29uY2F0KGluZGV4ICsgMSwgXCIpLFxcbiAgICAgICAgICAgICAgICAucC1kYXRhdGFibGVbXCIpLmNvbmNhdChfdGhpczcuc3RhdGUuYXR0cmlidXRlU2VsZWN0b3IsIFwiXSAucC1kYXRhdGFibGUtdGZvb3QgPiB0ciA+IHRkOm50aC1jaGlsZChcIikuY29uY2F0KGluZGV4ICsgMSwgXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgIFwiKS5jb25jYXQoc3R5bGUsIFwiXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcIik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc3R5bGVFbGVtZW50LmlubmVySFRNTCA9IGlubmVySFRNTDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYmluZENvbHVtblJlc2l6ZUV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kQ29sdW1uUmVzaXplRXZlbnRzKCkge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRDb2x1bW5SZXNpemVMaXN0ZW5lciA9IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmIChfdGhpczguY29sdW1uUmVzaXppbmcpIHtcbiAgICAgICAgICAgIF90aGlzOC5vbkNvbHVtblJlc2l6ZShldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplRW5kTGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyID0gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXM4LmNvbHVtblJlc2l6aW5nKSB7XG4gICAgICAgICAgICBfdGhpczguY29sdW1uUmVzaXppbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgX3RoaXM4Lm9uQ29sdW1uUmVzaXplRW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidW5iaW5kQ29sdW1uUmVzaXplRXZlbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVuYmluZENvbHVtblJlc2l6ZUV2ZW50cygpIHtcbiAgICAgIGlmICh0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplTGlzdGVuZXIpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZG9jdW1lbnQnLCB0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplTGlzdGVuZXIpO1xuICAgICAgICB0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplTGlzdGVuZXIgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RvY3VtZW50JywgdGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db2x1bW5IZWFkZXJNb3VzZURvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db2x1bW5IZWFkZXJNb3VzZURvd24oZSkge1xuICAgICAgRG9tSGFuZGxlci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgdmFyIGV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50LFxuICAgICAgICAgIGNvbHVtbiA9IGUuY29sdW1uO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5yZW9yZGVyYWJsZUNvbHVtbnMgJiYgdGhpcy5nZXRDb2x1bW5Qcm9wKGNvbHVtbiwgJ3Jlb3JkZXJhYmxlJykgIT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdJTlBVVCcgfHwgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnIHx8IERvbUhhbmRsZXIuaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAncC1jb2x1bW4tcmVzaXplcicpKSBldmVudC5jdXJyZW50VGFyZ2V0LmRyYWdnYWJsZSA9IGZhbHNlO2Vsc2UgZXZlbnQuY3VycmVudFRhcmdldC5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNvbHVtbkhlYWRlckNoZWNrYm94Q2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29sdW1uSGVhZGVyQ2hlY2tib3hDaGFuZ2UoZSwgcHJvY2Vzc2VkRGF0YSkge1xuICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uU2VsZWN0QWxsQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25TZWxlY3RBbGxDaGFuZ2UoZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3JpZ2luYWxFdmVudCA9IGUub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgIGNoZWNrZWQgPSBlLmNoZWNrZWQ7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5wcm9wcy5zZWxlY3Rpb25QYWdlT25seSA/IHRoaXMuZGF0YVRvUmVuZGVyKHByb2Nlc3NlZERhdGEpIDogcHJvY2Vzc2VkRGF0YTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHRoaXMucHJvcHMuc2VsZWN0aW9uUGFnZU9ubHkgJiYgdGhpcy5wcm9wcy5zZWxlY3Rpb24gPyB0aGlzLnByb3BzLnNlbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICByZXR1cm4gIWRhdGEuc29tZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzOS5pc0VxdWFscyhzLCBkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkgOiBbXTtcblxuICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgIHNlbGVjdGlvbiA9IHRoaXMucHJvcHMuZnJvemVuVmFsdWUgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNlbGVjdGlvbiksIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnByb3BzLmZyb3plblZhbHVlKSwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEpKSA6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2VsZWN0aW9uKSwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEpKTtcbiAgICAgICAgICBzZWxlY3Rpb24gPSB0aGlzLmdldFNlbGVjdGFibGVEYXRhKHNlbGVjdGlvbik7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vbkFsbFJvd3NTZWxlY3QgJiYgdGhpcy5wcm9wcy5vbkFsbFJvd3NTZWxlY3Qoe1xuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogb3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgIGRhdGE6IHNlbGVjdGlvbixcbiAgICAgICAgICAgIHR5cGU6ICdhbGwnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vbkFsbFJvd3NVbnNlbGVjdCAmJiB0aGlzLnByb3BzLm9uQWxsUm93c1Vuc2VsZWN0KHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IG9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgICBkYXRhOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICB0eXBlOiAnYWxsJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25TZWxlY3Rpb25DaGFuZ2UpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlKHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IG9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgICB2YWx1ZTogc2VsZWN0aW9uLFxuICAgICAgICAgICAgdHlwZTogJ2FsbCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNvbHVtbkhlYWRlckRyYWdTdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbHVtbkhlYWRlckRyYWdTdGFydChlKSB7XG4gICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgY29sdW1uID0gZS5jb2x1bW47XG5cbiAgICAgIGlmICh0aGlzLmNvbHVtblJlc2l6aW5nKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jb2xSZW9yZGVySWNvbldpZHRoID0gRG9tSGFuZGxlci5nZXRIaWRkZW5FbGVtZW50T3V0ZXJXaWR0aCh0aGlzLnJlb3JkZXJJbmRpY2F0b3JVcCk7XG4gICAgICB0aGlzLmNvbFJlb3JkZXJJY29uSGVpZ2h0ID0gRG9tSGFuZGxlci5nZXRIaWRkZW5FbGVtZW50T3V0ZXJIZWlnaHQodGhpcy5yZW9yZGVySW5kaWNhdG9yVXApO1xuICAgICAgdGhpcy5kcmFnZ2VkQ29sdW1uID0gY29sdW1uO1xuICAgICAgdGhpcy5kcmFnZ2VkQ29sdW1uRWxlbWVudCA9IHRoaXMuZmluZFBhcmVudEhlYWRlcihldmVudC5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0JywgJ2InKTsgLy8gRmlyZWZveCByZXF1aXJlcyB0aGlzIHRvIG1ha2UgZHJhZ2dpbmcgcG9zc2libGVcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db2x1bW5IZWFkZXJEcmFnT3ZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbHVtbkhlYWRlckRyYWdPdmVyKGUpIHtcbiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIHZhciBkcm9wSGVhZGVyID0gdGhpcy5maW5kUGFyZW50SGVhZGVyKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5yZW9yZGVyYWJsZUNvbHVtbnMgJiYgdGhpcy5kcmFnZ2VkQ29sdW1uRWxlbWVudCAmJiBkcm9wSGVhZGVyKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dlZENvbHVtbkVsZW1lbnQgIT09IGRyb3BIZWFkZXIpIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyT2Zmc2V0ID0gRG9tSGFuZGxlci5nZXRPZmZzZXQodGhpcy5lbCk7XG4gICAgICAgICAgdmFyIGRyb3BIZWFkZXJPZmZzZXQgPSBEb21IYW5kbGVyLmdldE9mZnNldChkcm9wSGVhZGVyKTtcbiAgICAgICAgICB2YXIgdGFyZ2V0TGVmdCA9IGRyb3BIZWFkZXJPZmZzZXQubGVmdCAtIGNvbnRhaW5lck9mZnNldC5sZWZ0O1xuICAgICAgICAgIHZhciBjb2x1bW5DZW50ZXIgPSBkcm9wSGVhZGVyT2Zmc2V0LmxlZnQgKyBkcm9wSGVhZGVyLm9mZnNldFdpZHRoIC8gMjtcbiAgICAgICAgICB0aGlzLnJlb3JkZXJJbmRpY2F0b3JVcC5zdHlsZS50b3AgPSBkcm9wSGVhZGVyT2Zmc2V0LnRvcCAtIGNvbnRhaW5lck9mZnNldC50b3AgLSAodGhpcy5jb2xSZW9yZGVySWNvbkhlaWdodCAtIDEpICsgJ3B4JztcbiAgICAgICAgICB0aGlzLnJlb3JkZXJJbmRpY2F0b3JEb3duLnN0eWxlLnRvcCA9IGRyb3BIZWFkZXJPZmZzZXQudG9wIC0gY29udGFpbmVyT2Zmc2V0LnRvcCArIGRyb3BIZWFkZXIub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcblxuICAgICAgICAgIGlmIChldmVudC5wYWdlWCA+IGNvbHVtbkNlbnRlcikge1xuICAgICAgICAgICAgdGhpcy5yZW9yZGVySW5kaWNhdG9yVXAuc3R5bGUubGVmdCA9IHRhcmdldExlZnQgKyBkcm9wSGVhZGVyLm9mZnNldFdpZHRoIC0gTWF0aC5jZWlsKHRoaXMuY29sUmVvcmRlckljb25XaWR0aCAvIDIpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMucmVvcmRlckluZGljYXRvckRvd24uc3R5bGUubGVmdCA9IHRhcmdldExlZnQgKyBkcm9wSGVhZGVyLm9mZnNldFdpZHRoIC0gTWF0aC5jZWlsKHRoaXMuY29sUmVvcmRlckljb25XaWR0aCAvIDIpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZHJvcFBvc2l0aW9uID0gMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW9yZGVySW5kaWNhdG9yVXAuc3R5bGUubGVmdCA9IHRhcmdldExlZnQgLSBNYXRoLmNlaWwodGhpcy5jb2xSZW9yZGVySWNvbldpZHRoIC8gMikgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5yZW9yZGVySW5kaWNhdG9yRG93bi5zdHlsZS5sZWZ0ID0gdGFyZ2V0TGVmdCAtIE1hdGguY2VpbCh0aGlzLmNvbFJlb3JkZXJJY29uV2lkdGggLyAyKSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmRyb3BQb3NpdGlvbiA9IC0xO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMucmVvcmRlckluZGljYXRvclVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIHRoaXMucmVvcmRlckluZGljYXRvckRvd24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db2x1bW5IZWFkZXJEcmFnTGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db2x1bW5IZWFkZXJEcmFnTGVhdmUoZSkge1xuICAgICAgdmFyIGV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50O1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5yZW9yZGVyYWJsZUNvbHVtbnMgJiYgdGhpcy5kcmFnZ2VkQ29sdW1uRWxlbWVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnJlb3JkZXJJbmRpY2F0b3JVcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLnJlb3JkZXJJbmRpY2F0b3JEb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ29sdW1uSGVhZGVyRHJvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbHVtbkhlYWRlckRyb3AoZSkge1xuICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQsXG4gICAgICAgICAgY29sdW1uID0gZS5jb2x1bW47XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAodGhpcy5kcmFnZ2VkQ29sdW1uRWxlbWVudCkge1xuICAgICAgICB2YXIgZHJhZ0luZGV4ID0gRG9tSGFuZGxlci5pbmRleCh0aGlzLmRyYWdnZWRDb2x1bW5FbGVtZW50KTtcbiAgICAgICAgdmFyIGRyb3BJbmRleCA9IERvbUhhbmRsZXIuaW5kZXgodGhpcy5maW5kUGFyZW50SGVhZGVyKGV2ZW50LmN1cnJlbnRUYXJnZXQpKTtcbiAgICAgICAgdmFyIGFsbG93RHJvcCA9IGRyYWdJbmRleCAhPT0gZHJvcEluZGV4O1xuXG4gICAgICAgIGlmIChhbGxvd0Ryb3AgJiYgKGRyb3BJbmRleCAtIGRyYWdJbmRleCA9PT0gMSAmJiB0aGlzLmRyb3BQb3NpdGlvbiA9PT0gLTEgfHwgZHJhZ0luZGV4IC0gZHJvcEluZGV4ID09PSAxICYmIHRoaXMuZHJvcFBvc2l0aW9uID09PSAxKSkge1xuICAgICAgICAgIGFsbG93RHJvcCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFsbG93RHJvcCkge1xuICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zKCk7XG5cbiAgICAgICAgICB2YXIgaXNTYW1lQ29sdW1uID0gZnVuY3Rpb24gaXNTYW1lQ29sdW1uKGNvbDEsIGNvbDIpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2wxLnByb3BzLmNvbHVtbktleSB8fCBjb2wyLnByb3BzLmNvbHVtbktleSA/IE9iamVjdFV0aWxzLmVxdWFscyhjb2wxLnByb3BzLCBjb2wyLnByb3BzLCAnY29sdW1uS2V5JykgOiBPYmplY3RVdGlscy5lcXVhbHMoY29sMS5wcm9wcywgY29sMi5wcm9wcywgJ2ZpZWxkJyk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBkcmFnQ29sSW5kZXggPSBjb2x1bW5zLmZpbmRJbmRleChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1NhbWVDb2x1bW4oY2hpbGQsIF90aGlzMTAuZHJhZ2dlZENvbHVtbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGRyb3BDb2xJbmRleCA9IGNvbHVtbnMuZmluZEluZGV4KGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzU2FtZUNvbHVtbihjaGlsZCwgY29sdW1uKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChkcm9wQ29sSW5kZXggPCBkcmFnQ29sSW5kZXggJiYgdGhpcy5kcm9wUG9zaXRpb24gPT09IDEpIHtcbiAgICAgICAgICAgIGRyb3BDb2xJbmRleCsrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChkcm9wQ29sSW5kZXggPiBkcmFnQ29sSW5kZXggJiYgdGhpcy5kcm9wUG9zaXRpb24gPT09IC0xKSB7XG4gICAgICAgICAgICBkcm9wQ29sSW5kZXgtLTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBPYmplY3RVdGlscy5yZW9yZGVyQXJyYXkoY29sdW1ucywgZHJhZ0NvbEluZGV4LCBkcm9wQ29sSW5kZXgpO1xuICAgICAgICAgIHZhciBjb2x1bW5PcmRlciA9IGNvbHVtbnMucmVkdWNlKGZ1bmN0aW9uIChvcmRlcnMsIGNvbCkge1xuICAgICAgICAgICAgb3JkZXJzLnB1c2goY29sLnByb3BzLmNvbHVtbktleSB8fCBjb2wucHJvcHMuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIG9yZGVycztcbiAgICAgICAgICB9LCBbXSk7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjb2x1bW5PcmRlcjogY29sdW1uT3JkZXJcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ29sUmVvcmRlcikge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbFJlb3JkZXIoe1xuICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgZHJhZ0luZGV4OiBkcmFnQ29sSW5kZXgsXG4gICAgICAgICAgICAgIGRyb3BJbmRleDogZHJvcENvbEluZGV4LFxuICAgICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlb3JkZXJJbmRpY2F0b3JVcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLnJlb3JkZXJJbmRpY2F0b3JEb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMuZHJhZ2dlZENvbHVtbkVsZW1lbnQuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZHJhZ2dlZENvbHVtbkVsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmRyYWdnZWRDb2x1bW4gPSBudWxsO1xuICAgICAgICB0aGlzLmRyb3BQb3NpdGlvbiA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVN0eWxlRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQoKSB7XG4gICAgICB0aGlzLnN0eWxlRWxlbWVudCA9IERvbUhhbmRsZXIuY3JlYXRlSW5saW5lU3R5bGUoUHJpbWVSZWFjdC5ub25jZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVJlc3BvbnNpdmVTdHlsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZXNwb25zaXZlU3R5bGUoKSB7XG4gICAgICBpZiAoIXRoaXMucmVzcG9uc2l2ZVN0eWxlRWxlbWVudCkge1xuICAgICAgICB0aGlzLnJlc3BvbnNpdmVTdHlsZUVsZW1lbnQgPSBEb21IYW5kbGVyLmNyZWF0ZUlubGluZVN0eWxlKFByaW1lUmVhY3Qubm9uY2UpO1xuICAgICAgICB2YXIgaW5uZXJIVE1MID0gXCJcXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiBcIi5jb25jYXQodGhpcy5wcm9wcy5icmVha3BvaW50LCBcIikge1xcbiAgICAucC1kYXRhdGFibGVbXCIpLmNvbmNhdCh0aGlzLnN0YXRlLmF0dHJpYnV0ZVNlbGVjdG9yLCBcIl0gLnAtZGF0YXRhYmxlLXRoZWFkID4gdHIgPiB0aCxcXG4gICAgLnAtZGF0YXRhYmxlW1wiKS5jb25jYXQodGhpcy5zdGF0ZS5hdHRyaWJ1dGVTZWxlY3RvciwgXCJdIC5wLWRhdGF0YWJsZS10Zm9vdCA+IHRyID4gdGQge1xcbiAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xcbiAgICB9XFxuXFxuICAgIC5wLWRhdGF0YWJsZVtcIikuY29uY2F0KHRoaXMuc3RhdGUuYXR0cmlidXRlU2VsZWN0b3IsIFwiXSAucC1kYXRhdGFibGUtdGJvZHkgPiB0ciA+IHRkIHtcXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG4gICAgfVxcblxcbiAgICAucC1kYXRhdGFibGVbXCIpLmNvbmNhdCh0aGlzLnN0YXRlLmF0dHJpYnV0ZVNlbGVjdG9yLCBcIl0gLnAtZGF0YXRhYmxlLXRib2R5ID4gdHIgPiB0ZDpub3QoOmxhc3QtY2hpbGQpIHtcXG4gICAgICAgIGJvcmRlcjogMCBub25lO1xcbiAgICB9XFxuXFxuICAgIC5wLWRhdGF0YWJsZVtcIikuY29uY2F0KHRoaXMuc3RhdGUuYXR0cmlidXRlU2VsZWN0b3IsIFwiXS5wLWRhdGF0YWJsZS1ncmlkbGluZXMgLnAtZGF0YXRhYmxlLXRib2R5ID4gdHIgPiB0ZDpsYXN0LWNoaWxkIHtcXG4gICAgICAgIGJvcmRlci10b3A6IDA7XFxuICAgICAgICBib3JkZXItcmlnaHQ6IDA7XFxuICAgICAgICBib3JkZXItbGVmdDogMDtcXG4gICAgfVxcblxcbiAgICAucC1kYXRhdGFibGVbXCIpLmNvbmNhdCh0aGlzLnN0YXRlLmF0dHJpYnV0ZVNlbGVjdG9yLCBcIl0gLnAtZGF0YXRhYmxlLXRib2R5ID4gdHIgPiB0ZCA+IC5wLWNvbHVtbi10aXRsZSB7XFxuICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgfVxcbn1cXG5cIik7XG4gICAgICAgIHRoaXMucmVzcG9uc2l2ZVN0eWxlRWxlbWVudC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRlc3Ryb3lSZXNwb25zaXZlU3R5bGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveVJlc3BvbnNpdmVTdHlsZSgpIHtcbiAgICAgIHRoaXMucmVzcG9uc2l2ZVN0eWxlRWxlbWVudCA9IERvbUhhbmRsZXIucmVtb3ZlSW5saW5lU3R5bGUodGhpcy5yZXNwb25zaXZlU3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGVzdHJveVN0eWxlRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95U3R5bGVFbGVtZW50KCkge1xuICAgICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBEb21IYW5kbGVyLnJlbW92ZUlubGluZVN0eWxlKHRoaXMuc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25QYWdlQ2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUGFnZUNoYW5nZShlKSB7XG4gICAgICB0aGlzLmNsZWFyRWRpdGluZ01ldGFEYXRhKCk7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vblBhZ2UpIHRoaXMucHJvcHMub25QYWdlKHRoaXMuY3JlYXRlRXZlbnQoZSkpO2Vsc2UgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGZpcnN0OiBlLmZpcnN0LFxuICAgICAgICByb3dzOiBlLnJvd3NcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblZhbHVlQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25WYWx1ZUNoYW5nZSh0aGlzLnByb2Nlc3NlZERhdGEoKSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uU29ydENoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblNvcnRDaGFuZ2UoZSkge1xuICAgICAgdGhpcy5jbGVhckVkaXRpbmdNZXRhRGF0YSgpO1xuICAgICAgdmFyIGV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50LFxuICAgICAgICAgIGNvbHVtbiA9IGUuY29sdW1uLFxuICAgICAgICAgIHNvcnRhYmxlRGlzYWJsZWRGaWVsZHMgPSBlLnNvcnRhYmxlRGlzYWJsZWRGaWVsZHM7XG4gICAgICB2YXIgc29ydEZpZWxkID0gY29sdW1uLnByb3BzLnNvcnRGaWVsZCB8fCBjb2x1bW4ucHJvcHMuZmllbGQ7XG4gICAgICB2YXIgc29ydE9yZGVyID0gdGhpcy5wcm9wcy5kZWZhdWx0U29ydE9yZGVyO1xuICAgICAgdmFyIG11bHRpU29ydE1ldGE7XG4gICAgICB2YXIgZXZlbnRNZXRhO1xuICAgICAgdGhpcy5jb2x1bW5Tb3J0YWJsZSA9IGNvbHVtbi5wcm9wcy5zb3J0YWJsZTtcbiAgICAgIHRoaXMuY29sdW1uU29ydEZ1bmN0aW9uID0gY29sdW1uLnByb3BzLnNvcnRGdW5jdGlvbjtcbiAgICAgIHRoaXMuY29sdW1uRmllbGQgPSBjb2x1bW4ucHJvcHMuc29ydEZpZWxkO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5zb3J0TW9kZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgICB2YXIgbWV0YUtleSA9IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleTtcbiAgICAgICAgbXVsdGlTb3J0TWV0YSA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmdldE11bHRpU29ydE1ldGEoKSk7XG4gICAgICAgIHZhciBzb3J0TWV0YSA9IG11bHRpU29ydE1ldGEuZmluZChmdW5jdGlvbiAoc29ydE1ldGEpIHtcbiAgICAgICAgICByZXR1cm4gc29ydE1ldGEuZmllbGQgPT09IHNvcnRGaWVsZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHNvcnRPcmRlciA9IHNvcnRNZXRhID8gdGhpcy5nZXRDYWxjdWxhdGVkU29ydE9yZGVyKHNvcnRNZXRhLm9yZGVyKSA6IHNvcnRPcmRlcjtcbiAgICAgICAgdmFyIG5ld01ldGFEYXRhID0ge1xuICAgICAgICAgIGZpZWxkOiBzb3J0RmllbGQsXG4gICAgICAgICAgb3JkZXI6IHNvcnRPcmRlclxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzb3J0T3JkZXIpIHtcbiAgICAgICAgICBtdWx0aVNvcnRNZXRhID0gbWV0YUtleSA/IG11bHRpU29ydE1ldGEgOiBtdWx0aVNvcnRNZXRhLmZpbHRlcihmdW5jdGlvbiAobWV0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHNvcnRhYmxlRGlzYWJsZWRGaWVsZHMuc29tZShmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkID09PSBtZXRhLmZpZWxkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5hZGRTb3J0TWV0YShuZXdNZXRhRGF0YSwgbXVsdGlTb3J0TWV0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5yZW1vdmFibGVTb3J0KSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVTb3J0TWV0YShuZXdNZXRhRGF0YSwgbXVsdGlTb3J0TWV0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudE1ldGEgPSB7XG4gICAgICAgICAgbXVsdGlTb3J0TWV0YTogbXVsdGlTb3J0TWV0YVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc29ydE9yZGVyID0gdGhpcy5nZXRTb3J0RmllbGQoKSA9PT0gc29ydEZpZWxkID8gdGhpcy5nZXRDYWxjdWxhdGVkU29ydE9yZGVyKHRoaXMuZ2V0U29ydE9yZGVyKCkpIDogc29ydE9yZGVyO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnJlbW92YWJsZVNvcnQpIHtcbiAgICAgICAgICBzb3J0RmllbGQgPSBzb3J0T3JkZXIgPyBzb3J0RmllbGQgOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnRNZXRhID0ge1xuICAgICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLFxuICAgICAgICAgIHNvcnRPcmRlcjogc29ydE9yZGVyXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uU29ydCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uU29ydCh0aGlzLmNyZWF0ZUV2ZW50KGV2ZW50TWV0YSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnRNZXRhLmZpcnN0ID0gMDtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShldmVudE1ldGEpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblZhbHVlQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25WYWx1ZUNoYW5nZSh0aGlzLnByb2Nlc3NlZERhdGEoe1xuICAgICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLFxuICAgICAgICAgIHNvcnRPcmRlcjogc29ydE9yZGVyLFxuICAgICAgICAgIG11bHRpU29ydE1ldGE6IG11bHRpU29ydE1ldGFcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDYWxjdWxhdGVkU29ydE9yZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldENhbGN1bGF0ZWRTb3J0T3JkZXIoY3VycmVudE9yZGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5yZW1vdmFibGVTb3J0ID8gdGhpcy5wcm9wcy5kZWZhdWx0U29ydE9yZGVyID09PSBjdXJyZW50T3JkZXIgPyBjdXJyZW50T3JkZXIgKiAtMSA6IDAgOiBjdXJyZW50T3JkZXIgKiAtMTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcGFyZVZhbHVlc09uU29ydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wYXJlVmFsdWVzT25Tb3J0KHZhbHVlMSwgdmFsdWUyKSB7XG4gICAgICByZXR1cm4gT2JqZWN0VXRpbHMuc29ydCh2YWx1ZTEsIHZhbHVlMiwgMSwgUHJpbWVSZWFjdC5sb2NhbGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhZGRTb3J0TWV0YVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTb3J0TWV0YShtZXRhLCBtdWx0aVNvcnRNZXRhKSB7XG4gICAgICB2YXIgaW5kZXggPSBtdWx0aVNvcnRNZXRhLmZpbmRJbmRleChmdW5jdGlvbiAoc29ydE1ldGEpIHtcbiAgICAgICAgcmV0dXJuIHNvcnRNZXRhLmZpZWxkID09PSBtZXRhLmZpZWxkO1xuICAgICAgfSk7XG4gICAgICBpZiAoaW5kZXggPj0gMCkgbXVsdGlTb3J0TWV0YVtpbmRleF0gPSBtZXRhO2Vsc2UgbXVsdGlTb3J0TWV0YS5wdXNoKG1ldGEpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVTb3J0TWV0YVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVTb3J0TWV0YShtZXRhLCBtdWx0aVNvcnRNZXRhKSB7XG4gICAgICB2YXIgaW5kZXggPSBtdWx0aVNvcnRNZXRhLmZpbmRJbmRleChmdW5jdGlvbiAoc29ydE1ldGEpIHtcbiAgICAgICAgcmV0dXJuIHNvcnRNZXRhLmZpZWxkID09PSBtZXRhLmZpZWxkO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIG11bHRpU29ydE1ldGEuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cblxuICAgICAgbXVsdGlTb3J0TWV0YSA9IG11bHRpU29ydE1ldGEubGVuZ3RoID4gMCA/IG11bHRpU29ydE1ldGEgOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzb3J0U2luZ2xlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNvcnRTaW5nbGUoZGF0YSwgZmllbGQsIG9yZGVyKSB7XG4gICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmdyb3VwUm93c0J5ICYmIHRoaXMucHJvcHMuZ3JvdXBSb3dzQnkgPT09IHRoaXMucHJvcHMuc29ydEZpZWxkKSB7XG4gICAgICAgIHZhciBtdWx0aVNvcnRNZXRhID0gW3tcbiAgICAgICAgICBmaWVsZDogdGhpcy5wcm9wcy5zb3J0RmllbGQsXG4gICAgICAgICAgb3JkZXI6IHRoaXMucHJvcHMuc29ydE9yZGVyIHx8IHRoaXMucHJvcHMuZGVmYXVsdFNvcnRPcmRlclxuICAgICAgICB9XTtcbiAgICAgICAgdGhpcy5wcm9wcy5zb3J0RmllbGQgIT09IGZpZWxkICYmIG11bHRpU29ydE1ldGEucHVzaCh7XG4gICAgICAgICAgZmllbGQ6IGZpZWxkLFxuICAgICAgICAgIG9yZGVyOiBvcmRlclxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydE11bHRpcGxlKGRhdGEsIG11bHRpU29ydE1ldGEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWUgPSBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YSk7XG5cbiAgICAgIGlmICh0aGlzLmNvbHVtblNvcnRhYmxlICYmIHRoaXMuY29sdW1uU29ydEZ1bmN0aW9uKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5jb2x1bW5Tb3J0RnVuY3Rpb24oe1xuICAgICAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgICAgICBvcmRlcjogb3JkZXJcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZS5zb3J0KGZ1bmN0aW9uIChkYXRhMSwgZGF0YTIpIHtcbiAgICAgICAgICB2YXIgdmFsdWUxID0gT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShkYXRhMSwgZmllbGQpO1xuICAgICAgICAgIHZhciB2YWx1ZTIgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGEyLCBmaWVsZCk7XG5cbiAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMxMS5jb21wYXJlVmFsdWVzT25Tb3J0KHZhbHVlMSwgdmFsdWUyKTtcblxuICAgICAgICAgIHJldHVybiBvcmRlciAqIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic29ydE11bHRpcGxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNvcnRNdWx0aXBsZShkYXRhKSB7XG4gICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7XG5cbiAgICAgIHZhciBtdWx0aVNvcnRNZXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMuZ3JvdXBSb3dzQnkgJiYgKHRoaXMuZ3JvdXBSb3dzU29ydE1ldGEgfHwgbXVsdGlTb3J0TWV0YS5sZW5ndGggJiYgdGhpcy5wcm9wcy5ncm91cFJvd3NCeSA9PT0gbXVsdGlTb3J0TWV0YVswXS5maWVsZCkpIHtcbiAgICAgICAgdmFyIGZpcnN0U29ydE1ldGEgPSBtdWx0aVNvcnRNZXRhWzBdO1xuICAgICAgICAhdGhpcy5ncm91cFJvd3NTb3J0TWV0YSAmJiAodGhpcy5ncm91cFJvd3NTb3J0TWV0YSA9IGZpcnN0U29ydE1ldGEpO1xuXG4gICAgICAgIGlmIChmaXJzdFNvcnRNZXRhLmZpZWxkICE9PSB0aGlzLmdyb3VwUm93c1NvcnRNZXRhLmZpZWxkKSB7XG4gICAgICAgICAgbXVsdGlTb3J0TWV0YSA9IFt0aGlzLmdyb3VwUm93c1NvcnRNZXRhXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG11bHRpU29ydE1ldGEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWUgPSBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YSk7XG5cbiAgICAgIGlmICh0aGlzLmNvbHVtblNvcnRhYmxlICYmIHRoaXMuY29sdW1uU29ydEZ1bmN0aW9uKSB7XG4gICAgICAgIHZhciBtZXRhID0gbXVsdGlTb3J0TWV0YS5maW5kKGZ1bmN0aW9uIChtZXRhKSB7XG4gICAgICAgICAgcmV0dXJuIG1ldGEuZmllbGQgPT09IF90aGlzMTIuY29sdW1uRmllbGQ7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmNvbHVtbkZpZWxkO1xuICAgICAgICB2YXIgb3JkZXIgPSBtZXRhID8gbWV0YS5vcmRlciA6IHRoaXMuZGVmYXVsdFNvcnRPcmRlcjtcbiAgICAgICAgdmFsdWUgPSB0aGlzLmNvbHVtblNvcnRGdW5jdGlvbih7XG4gICAgICAgICAgZmllbGQ6IGZpZWxkLFxuICAgICAgICAgIG9yZGVyOiBvcmRlclxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlLnNvcnQoZnVuY3Rpb24gKGRhdGExLCBkYXRhMikge1xuICAgICAgICAgIHJldHVybiBfdGhpczEyLm11bHRpc29ydEZpZWxkKGRhdGExLCBkYXRhMiwgbXVsdGlTb3J0TWV0YSwgMCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm11bHRpc29ydEZpZWxkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG11bHRpc29ydEZpZWxkKGRhdGExLCBkYXRhMiwgbXVsdGlTb3J0TWV0YSwgaW5kZXgpIHtcbiAgICAgIHZhciB2YWx1ZTEgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGExLCBtdWx0aVNvcnRNZXRhW2luZGV4XS5maWVsZCk7XG4gICAgICB2YXIgdmFsdWUyID0gT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShkYXRhMiwgbXVsdGlTb3J0TWV0YVtpbmRleF0uZmllbGQpO1xuXG4gICAgICBpZiAodmFsdWUxID09PSB2YWx1ZTIpIHtcbiAgICAgICAgcmV0dXJuIG11bHRpU29ydE1ldGEubGVuZ3RoIC0gMSA+IGluZGV4ID8gdGhpcy5tdWx0aXNvcnRGaWVsZChkYXRhMSwgZGF0YTIsIG11bHRpU29ydE1ldGEsIGluZGV4ICsgMSkgOiAwO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jb21wYXJlVmFsdWVzT25Tb3J0KHZhbHVlMSwgdmFsdWUyKTtcbiAgICAgIHJldHVybiBtdWx0aVNvcnRNZXRhW2luZGV4XS5vcmRlciAqIHJlc3VsdDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25GaWx0ZXJDaGFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25GaWx0ZXJDaGFuZ2UoZmlsdGVycykge1xuICAgICAgdGhpcy5jbGVhckVkaXRpbmdNZXRhRGF0YSgpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGRfZmlsdGVyczogZmlsdGVyc1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRmlsdGVyQXBwbHlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25GaWx0ZXJBcHBseSgpIHtcbiAgICAgIHZhciBfdGhpczEzID0gdGhpcztcblxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVyVGltZW91dCk7XG4gICAgICB0aGlzLmZpbHRlclRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbHRlcnMgPSBfdGhpczEzLmNsb25lRmlsdGVycyhfdGhpczEzLnN0YXRlLmRfZmlsdGVycyk7XG5cbiAgICAgICAgaWYgKF90aGlzMTMucHJvcHMub25GaWx0ZXIpIHtcbiAgICAgICAgICBfdGhpczEzLnByb3BzLm9uRmlsdGVyKF90aGlzMTMuY3JlYXRlRXZlbnQoe1xuICAgICAgICAgICAgZmlsdGVyczogZmlsdGVyc1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpczEzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZpcnN0OiAwLFxuICAgICAgICAgICAgZmlsdGVyczogZmlsdGVyc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF90aGlzMTMucHJvcHMub25WYWx1ZUNoYW5nZSkge1xuICAgICAgICAgIF90aGlzMTMucHJvcHMub25WYWx1ZUNoYW5nZShfdGhpczEzLnByb2Nlc3NlZERhdGEoe1xuICAgICAgICAgICAgZmlsdGVyczogZmlsdGVyc1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcy5wcm9wcy5maWx0ZXJEZWxheSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbHRlckxvY2FsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlckxvY2FsKGRhdGEsIGZpbHRlcnMpIHtcbiAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xuICAgICAgZmlsdGVycyA9IGZpbHRlcnMgfHwge307XG4gICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1ucygpO1xuICAgICAgdmFyIGZpbHRlcmVkVmFsdWUgPSBbXTtcbiAgICAgIHZhciBpc0dsb2JhbEZpbHRlciA9IGZpbHRlcnNbJ2dsb2JhbCddIHx8IHRoaXMucHJvcHMuZ2xvYmFsRmlsdGVyO1xuICAgICAgdmFyIGdsb2JhbEZpbHRlckZpZWxkc0FycmF5O1xuXG4gICAgICBpZiAoaXNHbG9iYWxGaWx0ZXIpIHtcbiAgICAgICAgZ2xvYmFsRmlsdGVyRmllbGRzQXJyYXkgPSB0aGlzLnByb3BzLmdsb2JhbEZpbHRlckZpZWxkcyB8fCBjb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoY29sKSB7XG4gICAgICAgICAgcmV0dXJuICFjb2wucHJvcHMuZXhjbHVkZUdsb2JhbEZpbHRlcjtcbiAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChjb2wpIHtcbiAgICAgICAgICByZXR1cm4gY29sLnByb3BzLmZpbHRlckZpZWxkIHx8IGNvbC5wcm9wcy5maWVsZDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbG9jYWxNYXRjaCA9IHRydWU7XG4gICAgICAgIHZhciBnbG9iYWxNYXRjaCA9IGZhbHNlO1xuICAgICAgICB2YXIgbG9jYWxGaWx0ZXJlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gZmlsdGVycykge1xuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZmlsdGVycywgcHJvcCkgJiYgcHJvcCAhPT0gJ2dsb2JhbCcpIHtcbiAgICAgICAgICAgIGxvY2FsRmlsdGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGZpbHRlckZpZWxkID0gcHJvcDtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJNZXRhID0gZmlsdGVyc1tmaWx0ZXJGaWVsZF07XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXJNZXRhLm9wZXJhdG9yKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmlsdGVyTWV0YS5jb25zdHJhaW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJDb25zdHJhaW50ID0gZmlsdGVyTWV0YS5jb25zdHJhaW50c1tqXTtcbiAgICAgICAgICAgICAgICBsb2NhbE1hdGNoID0gdGhpcy5leGVjdXRlTG9jYWxGaWx0ZXIoZmlsdGVyRmllbGQsIGRhdGFbaV0sIGZpbHRlckNvbnN0cmFpbnQsIGopO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlck1ldGEub3BlcmF0b3IgPT09IEZpbHRlck9wZXJhdG9yLk9SICYmIGxvY2FsTWF0Y2ggfHwgZmlsdGVyTWV0YS5vcGVyYXRvciA9PT0gRmlsdGVyT3BlcmF0b3IuQU5EICYmICFsb2NhbE1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxvY2FsTWF0Y2ggPSB0aGlzLmV4ZWN1dGVMb2NhbEZpbHRlcihmaWx0ZXJGaWVsZCwgZGF0YVtpXSwgZmlsdGVyTWV0YSwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghbG9jYWxNYXRjaCkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNHbG9iYWxGaWx0ZXIgJiYgIWdsb2JhbE1hdGNoICYmIGdsb2JhbEZpbHRlckZpZWxkc0FycmF5KSB7XG4gICAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IGdsb2JhbEZpbHRlckZpZWxkc0FycmF5Lmxlbmd0aDsgX2orKykge1xuICAgICAgICAgICAgdmFyIGdsb2JhbEZpbHRlckZpZWxkID0gZ2xvYmFsRmlsdGVyRmllbGRzQXJyYXlbX2pdO1xuICAgICAgICAgICAgdmFyIG1hdGNoTW9kZSA9IGZpbHRlcnNbJ2dsb2JhbCddID8gZmlsdGVyc1snZ2xvYmFsJ10ubWF0Y2hNb2RlIDogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZmlsdGVyc1snZ2xvYmFsJ10gPyBmaWx0ZXJzWydnbG9iYWwnXS52YWx1ZSA6IHRoaXMucHJvcHMuZ2xvYmFsRmlsdGVyO1xuICAgICAgICAgICAgZ2xvYmFsTWF0Y2ggPSBGaWx0ZXJTZXJ2aWNlLmZpbHRlcnNbbWF0Y2hNb2RlXShPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGFbaV0sIGdsb2JhbEZpbHRlckZpZWxkKSwgdmFsdWUsIHRoaXMucHJvcHMuZmlsdGVyTG9jYWxlKTtcblxuICAgICAgICAgICAgaWYgKGdsb2JhbE1hdGNoKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXRjaGVzID0gdm9pZCAwO1xuXG4gICAgICAgIGlmIChpc0dsb2JhbEZpbHRlcikge1xuICAgICAgICAgIG1hdGNoZXMgPSBsb2NhbEZpbHRlcmVkID8gbG9jYWxGaWx0ZXJlZCAmJiBsb2NhbE1hdGNoICYmIGdsb2JhbE1hdGNoIDogZ2xvYmFsTWF0Y2g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF0Y2hlcyA9IGxvY2FsRmlsdGVyZWQgJiYgbG9jYWxNYXRjaDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgZmlsdGVyZWRWYWx1ZS5wdXNoKGRhdGFbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXJlZFZhbHVlLmxlbmd0aCA9PT0gdGhpcy5wcm9wcy52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgZmlsdGVyZWRWYWx1ZSA9IGRhdGE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmaWx0ZXJlZFZhbHVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJleGVjdXRlTG9jYWxGaWx0ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXhlY3V0ZUxvY2FsRmlsdGVyKGZpZWxkLCByb3dEYXRhLCBmaWx0ZXJNZXRhLCBpbmRleCkge1xuICAgICAgdmFyIGZpbHRlclZhbHVlID0gZmlsdGVyTWV0YS52YWx1ZTtcbiAgICAgIHZhciBmaWx0ZXJNYXRjaE1vZGUgPSBmaWx0ZXJNZXRhLm1hdGNoTW9kZSA9PT0gJ2N1c3RvbScgPyBcImN1c3RvbV9cIi5jb25jYXQoZmllbGQpIDogZmlsdGVyTWV0YS5tYXRjaE1vZGUgfHwgRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRIO1xuICAgICAgdmFyIGRhdGFGaWVsZFZhbHVlID0gT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShyb3dEYXRhLCBmaWVsZCk7XG4gICAgICB2YXIgZmlsdGVyQ29uc3RyYWludCA9IEZpbHRlclNlcnZpY2UuZmlsdGVyc1tmaWx0ZXJNYXRjaE1vZGVdO1xuICAgICAgcmV0dXJuIGZpbHRlckNvbnN0cmFpbnQoZGF0YUZpZWxkVmFsdWUsIGZpbHRlclZhbHVlLCB0aGlzLnByb3BzLmZpbHRlckxvY2FsZSwgaW5kZXgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjbG9uZUZpbHRlcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvbmVGaWx0ZXJzKGZpbHRlcnMpIHtcbiAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcblxuICAgICAgZmlsdGVycyA9IGZpbHRlcnMgfHwgdGhpcy5wcm9wcy5maWx0ZXJzO1xuICAgICAgdmFyIGNsb25lZCA9IHt9O1xuXG4gICAgICBpZiAoZmlsdGVycykge1xuICAgICAgICBPYmplY3QuZW50cmllcyhmaWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksXG4gICAgICAgICAgICAgIHByb3AgPSBfcmVmMlswXSxcbiAgICAgICAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTtcblxuICAgICAgICAgIGNsb25lZFtwcm9wXSA9IHZhbHVlLm9wZXJhdG9yID8ge1xuICAgICAgICAgICAgb3BlcmF0b3I6IHZhbHVlLm9wZXJhdG9yLFxuICAgICAgICAgICAgY29uc3RyYWludHM6IHZhbHVlLmNvbnN0cmFpbnRzLm1hcChmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgY29uc3RyYWludCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gOiBfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoKTtcbiAgICAgICAgY2xvbmVkID0gY29sdW1ucy5yZWR1Y2UoZnVuY3Rpb24gKF9maWx0ZXJzLCBjb2wpIHtcbiAgICAgICAgICB2YXIgZmllbGQgPSBjb2wucHJvcHMuZmlsdGVyRmllbGQgfHwgY29sLnByb3BzLmZpZWxkO1xuICAgICAgICAgIHZhciBmaWx0ZXJGdW5jdGlvbiA9IGNvbC5wcm9wcy5maWx0ZXJGdW5jdGlvbjtcbiAgICAgICAgICB2YXIgZGF0YVR5cGUgPSBjb2wucHJvcHMuZGF0YVR5cGU7XG4gICAgICAgICAgdmFyIG1hdGNoTW9kZSA9IGNvbC5wcm9wcy5maWx0ZXJNYXRjaE1vZGUgfHwgKFByaW1lUmVhY3QuZmlsdGVyTWF0Y2hNb2RlT3B0aW9uc1tkYXRhVHlwZV0gPyBQcmltZVJlYWN0LmZpbHRlck1hdGNoTW9kZU9wdGlvbnNbZGF0YVR5cGVdWzBdIDogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRIKTtcbiAgICAgICAgICB2YXIgY29uc3RyYWludCA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF0Y2hNb2RlOiBtYXRjaE1vZGVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKGZpbHRlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBGaWx0ZXJTZXJ2aWNlLnJlZ2lzdGVyKFwiY3VzdG9tX1wiLmNvbmNhdChmaWVsZCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJGdW5jdGlvbi5hcHBseSh2b2lkIDAsIGFyZ3MuY29uY2F0KFt7XG4gICAgICAgICAgICAgICAgY29sdW1uOiBjb2xcbiAgICAgICAgICAgICAgfV0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9maWx0ZXJzW2ZpZWxkXSA9IF90aGlzMTQucHJvcHMuZmlsdGVyRGlzcGxheSA9PT0gJ21lbnUnID8ge1xuICAgICAgICAgICAgb3BlcmF0b3I6IEZpbHRlck9wZXJhdG9yLkFORCxcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbY29uc3RyYWludF1cbiAgICAgICAgICB9IDogY29uc3RyYWludDtcbiAgICAgICAgICByZXR1cm4gX2ZpbHRlcnM7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmlsdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlcih2YWx1ZSwgZmllbGQsIG1hdGNoTW9kZSkge1xuICAgICAgdmFyIGluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAwO1xuXG4gICAgICB2YXIgZmlsdGVycyA9IF9vYmplY3RTcHJlYWQoe30sIHRoaXMuc3RhdGUuZF9maWx0ZXJzKTtcblxuICAgICAgdmFyIG1ldGEgPSBmaWx0ZXJzW2ZpZWxkXTtcbiAgICAgIHZhciBjb25zdHJhaW50ID0gbWV0YSAmJiBtZXRhLm9wZXJhdG9yID8gbWV0YS5jb25zdHJhaW50c1tpbmRleF0gOiBtZXRhO1xuICAgICAgY29uc3RyYWludCA9IG1ldGEgPyB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgbWF0Y2hNb2RlOiBtYXRjaE1vZGUgfHwgY29uc3RyYWludC5tYXRjaE1vZGVcbiAgICAgIH0gOiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgbWF0Y2hNb2RlOiBtYXRjaE1vZGVcbiAgICAgIH07XG4gICAgICB0aGlzLnByb3BzLmZpbHRlckRpc3BsYXkgPT09ICdtZW51JyAmJiBtZXRhICYmIG1ldGEub3BlcmF0b3IgPyBmaWx0ZXJzW2ZpZWxkXS5jb25zdHJhaW50c1tpbmRleF0gPSBjb25zdHJhaW50IDogZmlsdGVyc1tmaWVsZF0gPSBjb25zdHJhaW50O1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGRfZmlsdGVyczogZmlsdGVyc1xuICAgICAgfSwgdGhpcy5vbkZpbHRlckFwcGx5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGRfcm93czogdGhpcy5wcm9wcy5yb3dzLFxuICAgICAgICBkX2ZpbHRlcnM6IHRoaXMuY2xvbmVGaWx0ZXJzKHRoaXMucHJvcHMuZmlsdGVycyksXG4gICAgICAgIGdyb3VwUm93c1NvcnRNZXRhOiBudWxsLFxuICAgICAgICBlZGl0aW5nTWV0YToge31cbiAgICAgIH07XG5cbiAgICAgIGlmICghdGhpcy5wcm9wcy5vblBhZ2UpIHtcbiAgICAgICAgc3RhdGUuZmlyc3QgPSB0aGlzLnByb3BzLmZpcnN0O1xuICAgICAgICBzdGF0ZS5yb3dzID0gdGhpcy5wcm9wcy5yb3dzO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMucHJvcHMub25Tb3J0KSB7XG4gICAgICAgIHN0YXRlLnNvcnRGaWVsZCA9IHRoaXMucHJvcHMuc29ydEZpZWxkO1xuICAgICAgICBzdGF0ZS5zb3J0T3JkZXIgPSB0aGlzLnByb3BzLnNvcnRPcmRlcjtcbiAgICAgICAgc3RhdGUubXVsdGlTb3J0TWV0YSA9IHRoaXMucHJvcHMubXVsdGlTb3J0TWV0YTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnByb3BzLm9uRmlsdGVyKSB7XG4gICAgICAgIHN0YXRlLmZpbHRlcnMgPSB0aGlzLnByb3BzLmZpbHRlcnM7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzZXRDb2x1bW5PcmRlcigpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2V0U2Nyb2xsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0U2Nyb2xsKCkge1xuICAgICAgaWYgKHRoaXMud3JhcHBlcikge1xuICAgICAgICB2YXIgc2Nyb2xsYWJsZUNvbnRhaW5lciA9ICF0aGlzLmlzVmlydHVhbFNjcm9sbGVyRGlzYWJsZWQoKSA/IERvbUhhbmRsZXIuZmluZFNpbmdsZSh0aGlzLndyYXBwZXIsICcucC12aXJ0dWFsc2Nyb2xsZXInKSA6IHRoaXMud3JhcHBlcjtcbiAgICAgICAgc2Nyb2xsYWJsZUNvbnRhaW5lci5zY3JvbGxUbygwLCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzZXRDb2x1bW5PcmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldENvbHVtbk9yZGVyKCkge1xuICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnModHJ1ZSk7XG4gICAgICB2YXIgY29sdW1uT3JkZXIgPSBbXTtcblxuICAgICAgaWYgKGNvbHVtbnMpIHtcbiAgICAgICAgY29sdW1uT3JkZXIgPSBjb2x1bW5zLnJlZHVjZShmdW5jdGlvbiAob3JkZXJzLCBjb2wpIHtcbiAgICAgICAgICBvcmRlcnMucHVzaChjb2wucHJvcHMuY29sdW1uS2V5IHx8IGNvbC5wcm9wcy5maWVsZCk7XG4gICAgICAgICAgcmV0dXJuIG9yZGVycztcbiAgICAgICAgfSwgW10pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY29sdW1uT3JkZXI6IGNvbHVtbk9yZGVyXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZXhwb3J0Q1NWXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV4cG9ydENTVihvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7XG5cbiAgICAgIHZhciBkYXRhO1xuICAgICAgdmFyIGNzdiA9IFwiXFx1RkVGRlwiO1xuICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoKTtcblxuICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zZWxlY3Rpb25Pbmx5KSB7XG4gICAgICAgIGRhdGEgPSB0aGlzLnByb3BzLnNlbGVjdGlvbiB8fCBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMucHJvcHMuZnJvemVuVmFsdWUgfHwgW10pLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5wcm9jZXNzZWREYXRhKCkgfHwgW10pKTtcbiAgICAgIH0gLy9oZWFkZXJzXG5cblxuICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcbiAgICAgICAgdmFyIF9jb2x1bW4kcHJvcHMgPSBjb2x1bW4ucHJvcHMsXG4gICAgICAgICAgICBmaWVsZCA9IF9jb2x1bW4kcHJvcHMuZmllbGQsXG4gICAgICAgICAgICBoZWFkZXIgPSBfY29sdW1uJHByb3BzLmhlYWRlcixcbiAgICAgICAgICAgIGV4cG9ydGFibGUgPSBfY29sdW1uJHByb3BzLmV4cG9ydGFibGU7XG5cbiAgICAgICAgaWYgKGV4cG9ydGFibGUgJiYgZmllbGQpIHtcbiAgICAgICAgICBjc3YgKz0gJ1wiJyArIChoZWFkZXIgfHwgZmllbGQpICsgJ1wiJztcblxuICAgICAgICAgIGlmIChpIDwgY29sdW1ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBjc3YgKz0gX3RoaXMxNS5wcm9wcy5jc3ZTZXBhcmF0b3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTsgLy9ib2R5XG5cbiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAocmVjb3JkKSB7XG4gICAgICAgIGNzdiArPSAnXFxuJztcbiAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4sIGkpIHtcbiAgICAgICAgICB2YXIgX2NvbHVtbiRwcm9wczIgPSBjb2x1bW4ucHJvcHMsXG4gICAgICAgICAgICAgIGNvbHVtbkZpZWxkID0gX2NvbHVtbiRwcm9wczIuZmllbGQsXG4gICAgICAgICAgICAgIGV4cG9ydEZpZWxkID0gX2NvbHVtbiRwcm9wczIuZXhwb3J0RmllbGQsXG4gICAgICAgICAgICAgIGV4cG9ydGFibGUgPSBfY29sdW1uJHByb3BzMi5leHBvcnRhYmxlO1xuICAgICAgICAgIHZhciBmaWVsZCA9IGV4cG9ydEZpZWxkIHx8IGNvbHVtbkZpZWxkO1xuXG4gICAgICAgICAgaWYgKGV4cG9ydGFibGUgJiYgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjZWxsRGF0YSA9IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEocmVjb3JkLCBmaWVsZCk7XG5cbiAgICAgICAgICAgIGlmIChjZWxsRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGNlbGxEYXRhID0gX3RoaXMxNS5wcm9wcy5leHBvcnRGdW5jdGlvbiA/IF90aGlzMTUucHJvcHMuZXhwb3J0RnVuY3Rpb24oe1xuICAgICAgICAgICAgICAgIGRhdGE6IGNlbGxEYXRhLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgICAgICAgICAgICByb3dEYXRhOiByZWNvcmQsXG4gICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5cbiAgICAgICAgICAgICAgfSkgOiBTdHJpbmcoY2VsbERhdGEpLnJlcGxhY2UoL1wiL2csICdcIlwiJyk7XG4gICAgICAgICAgICB9IGVsc2UgY2VsbERhdGEgPSAnJztcblxuICAgICAgICAgICAgY3N2ICs9ICdcIicgKyBjZWxsRGF0YSArICdcIic7XG5cbiAgICAgICAgICAgIGlmIChpIDwgY29sdW1ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgIGNzdiArPSBfdGhpczE1LnByb3BzLmNzdlNlcGFyYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBEb21IYW5kbGVyLmV4cG9ydENTVihjc3YsIHRoaXMucHJvcHMuZXhwb3J0RmlsZW5hbWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjbG9zZUVkaXRpbmdDZWxsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlRWRpdGluZ0NlbGwoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5lZGl0TW9kZSAhPT0gXCJyb3dcIikge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsaWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZUV2ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KGV2ZW50KSB7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7XG4gICAgICAgIGZpcnN0OiB0aGlzLmdldEZpcnN0KCksXG4gICAgICAgIHJvd3M6IHRoaXMuZ2V0Um93cygpLFxuICAgICAgICBzb3J0RmllbGQ6IHRoaXMuZ2V0U29ydEZpZWxkKCksXG4gICAgICAgIHNvcnRPcmRlcjogdGhpcy5nZXRTb3J0T3JkZXIoKSxcbiAgICAgICAgbXVsdGlTb3J0TWV0YTogdGhpcy5nZXRNdWx0aVNvcnRNZXRhKCksXG4gICAgICAgIGZpbHRlcnM6IHRoaXMuZ2V0RmlsdGVycygpXG4gICAgICB9LCBldmVudCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb2Nlc3NlZERhdGFcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc2VkRGF0YShsb2NhbFN0YXRlKSB7XG4gICAgICB2YXIgZGF0YSA9IHRoaXMucHJvcHMudmFsdWUgfHwgW107XG5cbiAgICAgIGlmICghdGhpcy5wcm9wcy5sYXp5KSB7XG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGZpbHRlcnMgPSBsb2NhbFN0YXRlICYmIGxvY2FsU3RhdGUuZmlsdGVycyB8fCB0aGlzLmdldEZpbHRlcnMoKTtcbiAgICAgICAgICB2YXIgc29ydEZpZWxkID0gbG9jYWxTdGF0ZSAmJiBsb2NhbFN0YXRlLnNvcnRGaWVsZCB8fCB0aGlzLmdldFNvcnRGaWVsZCgpO1xuICAgICAgICAgIHZhciBzb3J0T3JkZXIgPSBsb2NhbFN0YXRlICYmIGxvY2FsU3RhdGUuc29ydE9yZGVyIHx8IHRoaXMuZ2V0U29ydE9yZGVyKCk7XG4gICAgICAgICAgdmFyIG11bHRpU29ydE1ldGEgPSBsb2NhbFN0YXRlICYmIGxvY2FsU3RhdGUubXVsdGlTb3J0TWV0YSB8fCB0aGlzLmdldE11bHRpU29ydE1ldGEoKTtcblxuICAgICAgICAgIGlmIChPYmplY3RVdGlscy5pc05vdEVtcHR5KGZpbHRlcnMpIHx8IHRoaXMucHJvcHMuZ2xvYmFsRmlsdGVyKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5maWx0ZXJMb2NhbChkYXRhLCBmaWx0ZXJzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc29ydEZpZWxkIHx8IE9iamVjdFV0aWxzLmlzTm90RW1wdHkobXVsdGlTb3J0TWV0YSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnNvcnRNb2RlID09PSAnc2luZ2xlJykgZGF0YSA9IHRoaXMuc29ydFNpbmdsZShkYXRhLCBzb3J0RmllbGQsIHNvcnRPcmRlcik7ZWxzZSBpZiAodGhpcy5wcm9wcy5zb3J0TW9kZSA9PT0gJ211bHRpcGxlJykgZGF0YSA9IHRoaXMuc29ydE11bHRpcGxlKGRhdGEsIG11bHRpU29ydE1ldGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGF0YVRvUmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRhdGFUb1JlbmRlcihkYXRhKSB7XG4gICAgICBpZiAoZGF0YSAmJiB0aGlzLnByb3BzLnBhZ2luYXRvcikge1xuICAgICAgICB2YXIgZmlyc3QgPSB0aGlzLnByb3BzLmxhenkgPyAwIDogdGhpcy5nZXRGaXJzdCgpO1xuICAgICAgICByZXR1cm4gZGF0YS5zbGljZShmaXJzdCwgZmlyc3QgKyB0aGlzLmdldFJvd3MoKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczE2ID0gdGhpcztcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGF0dHJpYnV0ZVNlbGVjdG9yOiBVbmlxdWVDb21wb25lbnRJZCgpXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMTYuZWwuc2V0QXR0cmlidXRlKF90aGlzMTYuc3RhdGUuYXR0cmlidXRlU2VsZWN0b3IsICcnKTtcblxuICAgICAgICBpZiAoX3RoaXMxNi5wcm9wcy5yZXNwb25zaXZlTGF5b3V0ID09PSAnc3RhY2snICYmICFfdGhpczE2LnByb3BzLnNjcm9sbGFibGUpIHtcbiAgICAgICAgICBfdGhpczE2LmNyZWF0ZVJlc3BvbnNpdmVTdHlsZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMuaXNTdGF0ZWZ1bCgpKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5yZXN0b3JlU3RhdGUodGhpcy5zdGF0ZSkpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnJlc2l6YWJsZUNvbHVtbnMpIHtcbiAgICAgICAgICB0aGlzLnJlc3RvcmVDb2x1bW5XaWR0aHMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICBpZiAodGhpcy5pc1N0YXRlZnVsKCkpIHtcbiAgICAgICAgdGhpcy5zYXZlU3RhdGUoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZQcm9wcy5yZXNwb25zaXZlTGF5b3V0ICE9PSB0aGlzLnByb3BzLnJlc3BvbnNpdmVMYXlvdXQpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95UmVzcG9uc2l2ZVN0eWxlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMucmVzcG9uc2l2ZUxheW91dCA9PT0gJ3N0YWNrJyAmJiAhdGhpcy5wcm9wcy5zY3JvbGxhYmxlKSB7XG4gICAgICAgICAgdGhpcy5jcmVhdGVSZXNwb25zaXZlU3R5bGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJldlByb3BzLmZpbHRlcnMgIT09IHRoaXMucHJvcHMuZmlsdGVycykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBmaWx0ZXJzOiB0aGlzLmNsb25lRmlsdGVycyh0aGlzLnByb3BzLmZpbHRlcnMpLFxuICAgICAgICAgIGRfZmlsdGVyczogdGhpcy5jbG9uZUZpbHRlcnModGhpcy5wcm9wcy5maWx0ZXJzKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZQcm9wcy5nbG9iYWxGaWx0ZXIgIT09IHRoaXMucHJvcHMuZ2xvYmFsRmlsdGVyKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyKHRoaXMucHJvcHMuZ2xvYmFsRmlsdGVyLCAnZ2xvYmFsJywgJ2NvbnRhaW5zJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy51bmJpbmRDb2x1bW5SZXNpemVFdmVudHMoKTtcbiAgICAgIHRoaXMuZGVzdHJveVN0eWxlRWxlbWVudCgpO1xuICAgICAgdGhpcy5kZXN0cm95UmVzcG9uc2l2ZVN0eWxlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlckxvYWRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJMb2FkZXIoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5sb2FkaW5nKSB7XG4gICAgICAgIHZhciBpY29uQ2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1kYXRhdGFibGUtbG9hZGluZy1pY29uIHBpLXNwaW4nLCB0aGlzLnByb3BzLmxvYWRpbmdJY29uKTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1kYXRhdGFibGUtbG9hZGluZy1vdmVybGF5IHAtY29tcG9uZW50LW92ZXJsYXlcIlxuICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZVxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJIZWFkZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySGVhZGVyKCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaGVhZGVyKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLnByb3BzLmhlYWRlciwge1xuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJwLWRhdGF0YWJsZS1oZWFkZXJcIlxuICAgICAgICB9LCBjb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclRhYmxlSGVhZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRhYmxlSGVhZGVyKG9wdGlvbnMsIGVtcHR5KSB7XG4gICAgICB2YXIgc29ydEZpZWxkID0gdGhpcy5nZXRTb3J0RmllbGQoKTtcbiAgICAgIHZhciBzb3J0T3JkZXIgPSB0aGlzLmdldFNvcnRPcmRlcigpO1xuXG4gICAgICB2YXIgbXVsdGlTb3J0TWV0YSA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmdldE11bHRpU29ydE1ldGEoKSk7XG5cbiAgICAgIHZhciBncm91cFJvd1NvcnRGaWVsZCA9IHRoaXMuZ2V0R3JvdXBSb3dTb3J0RmllbGQoKTtcbiAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5zdGF0ZS5kX2ZpbHRlcnM7XG4gICAgICB2YXIgZmlsdGVyc1N0b3JlID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG4gICAgICB2YXIgcHJvY2Vzc2VkRGF0YSA9IG9wdGlvbnMuaXRlbXMsXG4gICAgICAgICAgY29sdW1ucyA9IG9wdGlvbnMuY29sdW1ucztcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJsZUhlYWRlciwge1xuICAgICAgICB2YWx1ZTogcHJvY2Vzc2VkRGF0YSxcbiAgICAgICAgdGFibGVQcm9wczogdGhpcy5wcm9wcyxcbiAgICAgICAgY29sdW1uczogY29sdW1ucyxcbiAgICAgICAgdGFiSW5kZXg6IHRoaXMucHJvcHMudGFiSW5kZXgsXG4gICAgICAgIGVtcHR5OiBlbXB0eSxcbiAgICAgICAgaGVhZGVyQ29sdW1uR3JvdXA6IHRoaXMucHJvcHMuaGVhZGVyQ29sdW1uR3JvdXAsXG4gICAgICAgIHJlc2l6YWJsZUNvbHVtbnM6IHRoaXMucHJvcHMucmVzaXphYmxlQ29sdW1ucyxcbiAgICAgICAgb25Db2x1bW5SZXNpemVTdGFydDogdGhpcy5vbkNvbHVtblJlc2l6ZVN0YXJ0LFxuICAgICAgICBvbkNvbHVtblJlc2l6ZXJDbGljazogdGhpcy5wcm9wcy5vbkNvbHVtblJlc2l6ZXJDbGljayxcbiAgICAgICAgb25Db2x1bW5SZXNpemVyRG91YmxlQ2xpY2s6IHRoaXMucHJvcHMub25Db2x1bW5SZXNpemVyRG91YmxlQ2xpY2ssXG4gICAgICAgIHNvcnRNb2RlOiB0aGlzLnByb3BzLnNvcnRNb2RlLFxuICAgICAgICBzb3J0RmllbGQ6IHNvcnRGaWVsZCxcbiAgICAgICAgc29ydE9yZGVyOiBzb3J0T3JkZXIsXG4gICAgICAgIG11bHRpU29ydE1ldGE6IG11bHRpU29ydE1ldGEsXG4gICAgICAgIGdyb3VwUm93c0J5OiB0aGlzLnByb3BzLmdyb3VwUm93c0J5LFxuICAgICAgICBncm91cFJvd1NvcnRGaWVsZDogZ3JvdXBSb3dTb3J0RmllbGQsXG4gICAgICAgIG9uU29ydENoYW5nZTogdGhpcy5vblNvcnRDaGFuZ2UsXG4gICAgICAgIGZpbHRlckRpc3BsYXk6IHRoaXMucHJvcHMuZmlsdGVyRGlzcGxheSxcbiAgICAgICAgZmlsdGVyczogZmlsdGVycyxcbiAgICAgICAgZmlsdGVyc1N0b3JlOiBmaWx0ZXJzU3RvcmUsXG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlOiB0aGlzLm9uRmlsdGVyQ2hhbmdlLFxuICAgICAgICBvbkZpbHRlckFwcGx5OiB0aGlzLm9uRmlsdGVyQXBwbHksXG4gICAgICAgIHNob3dTZWxlY3RBbGw6IHRoaXMucHJvcHMuc2hvd1NlbGVjdEFsbCxcbiAgICAgICAgYWxsUm93c1NlbGVjdGVkOiB0aGlzLmFsbFJvd3NTZWxlY3RlZCxcbiAgICAgICAgb25Db2x1bW5DaGVja2JveENoYW5nZTogdGhpcy5vbkNvbHVtbkhlYWRlckNoZWNrYm94Q2hhbmdlLFxuICAgICAgICBvbkNvbHVtbk1vdXNlRG93bjogdGhpcy5vbkNvbHVtbkhlYWRlck1vdXNlRG93bixcbiAgICAgICAgb25Db2x1bW5EcmFnU3RhcnQ6IHRoaXMub25Db2x1bW5IZWFkZXJEcmFnU3RhcnQsXG4gICAgICAgIG9uQ29sdW1uRHJhZ092ZXI6IHRoaXMub25Db2x1bW5IZWFkZXJEcmFnT3ZlcixcbiAgICAgICAgb25Db2x1bW5EcmFnTGVhdmU6IHRoaXMub25Db2x1bW5IZWFkZXJEcmFnTGVhdmUsXG4gICAgICAgIG9uQ29sdW1uRHJvcDogdGhpcy5vbkNvbHVtbkhlYWRlckRyb3AsXG4gICAgICAgIHJvd0dyb3VwTW9kZTogdGhpcy5wcm9wcy5yb3dHcm91cE1vZGUsXG4gICAgICAgIHJlb3JkZXJhYmxlQ29sdW1uczogdGhpcy5wcm9wcy5yZW9yZGVyYWJsZUNvbHVtbnNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJUYWJsZUJvZHlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGVCb2R5KG9wdGlvbnMsIHNlbGVjdGlvbk1vZGVJbkNvbHVtbiwgZW1wdHksIGlzVmlydHVhbFNjcm9sbGVyRGlzYWJsZWQpIHtcbiAgICAgIHZhciB0YWJsZVNlbGVjdG9yID0gdGhpcy5zdGF0ZS5hdHRyaWJ1dGVTZWxlY3RvcjtcbiAgICAgIHZhciBmaXJzdCA9IHRoaXMuZ2V0Rmlyc3QoKTtcbiAgICAgIHZhciBlZGl0aW5nTWV0YSA9IHRoaXMuc3RhdGUuZWRpdGluZ01ldGE7XG4gICAgICB2YXIgcm93cyA9IG9wdGlvbnMucm93cyxcbiAgICAgICAgICBjb2x1bW5zID0gb3B0aW9ucy5jb2x1bW5zLFxuICAgICAgICAgIGNvbnRlbnRSZWYgPSBvcHRpb25zLmNvbnRlbnRSZWYsXG4gICAgICAgICAgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWU7XG4gICAgICB2YXIgZnJvemVuQm9keSA9IHRoaXMucHJvcHMuZnJvemVuVmFsdWUgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGVCb2R5LCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLmZyb3plblZhbHVlLFxuICAgICAgICBjbGFzc05hbWU6IFwicC1kYXRhdGFibGUtZnJvemVuLXRib2R5XCIsXG4gICAgICAgIGZyb3plblJvdzogdHJ1ZSxcbiAgICAgICAgdGFibGVQcm9wczogdGhpcy5wcm9wcyxcbiAgICAgICAgdGFibGVTZWxlY3RvcjogdGFibGVTZWxlY3RvcixcbiAgICAgICAgY29sdW1uczogY29sdW1ucyxcbiAgICAgICAgc2VsZWN0aW9uTW9kZUluQ29sdW1uOiBzZWxlY3Rpb25Nb2RlSW5Db2x1bW4sXG4gICAgICAgIGZpcnN0OiBmaXJzdCxcbiAgICAgICAgZWRpdGluZ01ldGE6IGVkaXRpbmdNZXRhLFxuICAgICAgICBvbkVkaXRpbmdNZXRhQ2hhbmdlOiB0aGlzLm9uRWRpdGluZ01ldGFDaGFuZ2UsXG4gICAgICAgIHRhYkluZGV4OiB0aGlzLnByb3BzLnRhYkluZGV4LFxuICAgICAgICBvblJvd0NsaWNrOiB0aGlzLnByb3BzLm9uUm93Q2xpY2ssXG4gICAgICAgIG9uUm93RG91YmxlQ2xpY2s6IHRoaXMucHJvcHMub25Sb3dEb3VibGVDbGljayxcbiAgICAgICAgb25DZWxsQ2xpY2s6IHRoaXMucHJvcHMub25DZWxsQ2xpY2ssXG4gICAgICAgIHNlbGVjdGlvbjogdGhpcy5wcm9wcy5zZWxlY3Rpb24sXG4gICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlOiB0aGlzLnByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlLFxuICAgICAgICBsYXp5OiB0aGlzLnByb3BzLmxhenksXG4gICAgICAgIHBhZ2luYXRvcjogdGhpcy5wcm9wcy5wYWdpbmF0b3IsXG4gICAgICAgIG9uQ2VsbFNlbGVjdDogdGhpcy5wcm9wcy5vbkNlbGxTZWxlY3QsXG4gICAgICAgIG9uQ2VsbFVuc2VsZWN0OiB0aGlzLnByb3BzLm9uQ2VsbFVuc2VsZWN0LFxuICAgICAgICBvblJvd1NlbGVjdDogdGhpcy5wcm9wcy5vblJvd1NlbGVjdCxcbiAgICAgICAgb25Sb3dVbnNlbGVjdDogdGhpcy5wcm9wcy5vblJvd1Vuc2VsZWN0LFxuICAgICAgICBkcmFnU2VsZWN0aW9uOiB0aGlzLnByb3BzLmRyYWdTZWxlY3Rpb24sXG4gICAgICAgIG9uQ29udGV4dE1lbnU6IHRoaXMucHJvcHMub25Db250ZXh0TWVudSxcbiAgICAgICAgb25Db250ZXh0TWVudVNlbGVjdGlvbkNoYW5nZTogdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51U2VsZWN0aW9uQ2hhbmdlLFxuICAgICAgICBtZXRhS2V5U2VsZWN0aW9uOiB0aGlzLnByb3BzLm1ldGFLZXlTZWxlY3Rpb24sXG4gICAgICAgIHNlbGVjdGlvbk1vZGU6IHRoaXMucHJvcHMuc2VsZWN0aW9uTW9kZSxcbiAgICAgICAgY2VsbFNlbGVjdGlvbjogdGhpcy5wcm9wcy5jZWxsU2VsZWN0aW9uLFxuICAgICAgICBjb250ZXh0TWVudVNlbGVjdGlvbjogdGhpcy5wcm9wcy5jb250ZXh0TWVudVNlbGVjdGlvbixcbiAgICAgICAgZGF0YUtleTogdGhpcy5wcm9wcy5kYXRhS2V5LFxuICAgICAgICBleHBhbmRlZFJvd3M6IHRoaXMucHJvcHMuZXhwYW5kZWRSb3dzLFxuICAgICAgICBvblJvd0NvbGxhcHNlOiB0aGlzLnByb3BzLm9uUm93Q29sbGFwc2UsXG4gICAgICAgIG9uUm93RXhwYW5kOiB0aGlzLnByb3BzLm9uUm93RXhwYW5kLFxuICAgICAgICBvblJvd1RvZ2dsZTogdGhpcy5wcm9wcy5vblJvd1RvZ2dsZSxcbiAgICAgICAgZWRpdE1vZGU6IHRoaXMucHJvcHMuZWRpdE1vZGUsXG4gICAgICAgIGVkaXRpbmdSb3dzOiB0aGlzLnByb3BzLmVkaXRpbmdSb3dzLFxuICAgICAgICBvblJvd1Jlb3JkZXI6IHRoaXMucHJvcHMub25Sb3dSZW9yZGVyLFxuICAgICAgICBzY3JvbGxhYmxlOiB0aGlzLnByb3BzLnNjcm9sbGFibGUsXG4gICAgICAgIHJvd0dyb3VwTW9kZTogdGhpcy5wcm9wcy5yb3dHcm91cE1vZGUsXG4gICAgICAgIGdyb3VwUm93c0J5OiB0aGlzLnByb3BzLmdyb3VwUm93c0J5LFxuICAgICAgICBleHBhbmRhYmxlUm93R3JvdXBzOiB0aGlzLnByb3BzLmV4cGFuZGFibGVSb3dHcm91cHMsXG4gICAgICAgIGxvYWRpbmc6IHRoaXMucHJvcHMubG9hZGluZyxcbiAgICAgICAgZW1wdHlNZXNzYWdlOiB0aGlzLnByb3BzLmVtcHR5TWVzc2FnZSxcbiAgICAgICAgcm93R3JvdXBIZWFkZXJUZW1wbGF0ZTogdGhpcy5wcm9wcy5yb3dHcm91cEhlYWRlclRlbXBsYXRlLFxuICAgICAgICByb3dFeHBhbnNpb25UZW1wbGF0ZTogdGhpcy5wcm9wcy5yb3dFeHBhbnNpb25UZW1wbGF0ZSxcbiAgICAgICAgcm93R3JvdXBGb290ZXJUZW1wbGF0ZTogdGhpcy5wcm9wcy5yb3dHcm91cEZvb3RlclRlbXBsYXRlLFxuICAgICAgICBvblJvd0VkaXRDaGFuZ2U6IHRoaXMucHJvcHMub25Sb3dFZGl0Q2hhbmdlLFxuICAgICAgICBjb21wYXJlU2VsZWN0aW9uQnk6IHRoaXMucHJvcHMuY29tcGFyZVNlbGVjdGlvbkJ5LFxuICAgICAgICBzZWxlY3RPbkVkaXQ6IHRoaXMucHJvcHMuc2VsZWN0T25FZGl0LFxuICAgICAgICBvblJvd0VkaXRJbml0OiB0aGlzLnByb3BzLm9uUm93RWRpdEluaXQsXG4gICAgICAgIHJvd0VkaXRWYWxpZGF0b3I6IHRoaXMucHJvcHMucm93RWRpdFZhbGlkYXRvcixcbiAgICAgICAgb25Sb3dFZGl0U2F2ZTogdGhpcy5wcm9wcy5vblJvd0VkaXRTYXZlLFxuICAgICAgICBvblJvd0VkaXRDb21wbGV0ZTogdGhpcy5wcm9wcy5vblJvd0VkaXRDb21wbGV0ZSxcbiAgICAgICAgb25Sb3dFZGl0Q2FuY2VsOiB0aGlzLnByb3BzLm9uUm93RWRpdENhbmNlbCxcbiAgICAgICAgY2VsbENsYXNzTmFtZTogdGhpcy5wcm9wcy5jZWxsQ2xhc3NOYW1lLFxuICAgICAgICByZXNwb25zaXZlTGF5b3V0OiB0aGlzLnByb3BzLnJlc3BvbnNpdmVMYXlvdXQsXG4gICAgICAgIHNlbGVjdGlvbkF1dG9Gb2N1czogdGhpcy5wcm9wcy5zZWxlY3Rpb25BdXRvRm9jdXMsXG4gICAgICAgIGlzRGF0YVNlbGVjdGFibGU6IHRoaXMucHJvcHMuaXNEYXRhU2VsZWN0YWJsZSxcbiAgICAgICAgc2hvd1NlbGVjdGlvbkVsZW1lbnQ6IHRoaXMucHJvcHMuc2hvd1NlbGVjdGlvbkVsZW1lbnQsXG4gICAgICAgIHNob3dSb3dSZW9yZGVyRWxlbWVudDogdGhpcy5wcm9wcy5zaG93Um93UmVvcmRlckVsZW1lbnQsXG4gICAgICAgIGV4cGFuZGVkUm93SWNvbjogdGhpcy5wcm9wcy5leHBhbmRlZFJvd0ljb24sXG4gICAgICAgIGNvbGxhcHNlZFJvd0ljb246IHRoaXMucHJvcHMuY29sbGFwc2VkUm93SWNvbixcbiAgICAgICAgcm93Q2xhc3NOYW1lOiB0aGlzLnByb3BzLnJvd0NsYXNzTmFtZSxcbiAgICAgICAgaXNWaXJ0dWFsU2Nyb2xsZXJEaXNhYmxlZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICB2YXIgYm9keSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYmxlQm9keSwge1xuICAgICAgICB2YWx1ZTogdGhpcy5kYXRhVG9SZW5kZXIocm93cyksXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBlbXB0eTogZW1wdHksXG4gICAgICAgIGZyb3plblJvdzogZmFsc2UsXG4gICAgICAgIHRhYmxlUHJvcHM6IHRoaXMucHJvcHMsXG4gICAgICAgIHRhYmxlU2VsZWN0b3I6IHRhYmxlU2VsZWN0b3IsXG4gICAgICAgIGNvbHVtbnM6IGNvbHVtbnMsXG4gICAgICAgIHNlbGVjdGlvbk1vZGVJbkNvbHVtbjogc2VsZWN0aW9uTW9kZUluQ29sdW1uLFxuICAgICAgICBmaXJzdDogZmlyc3QsXG4gICAgICAgIGVkaXRpbmdNZXRhOiBlZGl0aW5nTWV0YSxcbiAgICAgICAgb25FZGl0aW5nTWV0YUNoYW5nZTogdGhpcy5vbkVkaXRpbmdNZXRhQ2hhbmdlLFxuICAgICAgICB0YWJJbmRleDogdGhpcy5wcm9wcy50YWJJbmRleCxcbiAgICAgICAgb25Sb3dDbGljazogdGhpcy5wcm9wcy5vblJvd0NsaWNrLFxuICAgICAgICBvblJvd0RvdWJsZUNsaWNrOiB0aGlzLnByb3BzLm9uUm93RG91YmxlQ2xpY2ssXG4gICAgICAgIG9uQ2VsbENsaWNrOiB0aGlzLnByb3BzLm9uQ2VsbENsaWNrLFxuICAgICAgICBzZWxlY3Rpb246IHRoaXMucHJvcHMuc2VsZWN0aW9uLFxuICAgICAgICBvblNlbGVjdGlvbkNoYW5nZTogdGhpcy5wcm9wcy5vblNlbGVjdGlvbkNoYW5nZSxcbiAgICAgICAgbGF6eTogdGhpcy5wcm9wcy5sYXp5LFxuICAgICAgICBwYWdpbmF0b3I6IHRoaXMucHJvcHMucGFnaW5hdG9yLFxuICAgICAgICBvbkNlbGxTZWxlY3Q6IHRoaXMucHJvcHMub25DZWxsU2VsZWN0LFxuICAgICAgICBvbkNlbGxVbnNlbGVjdDogdGhpcy5wcm9wcy5vbkNlbGxVbnNlbGVjdCxcbiAgICAgICAgb25Sb3dTZWxlY3Q6IHRoaXMucHJvcHMub25Sb3dTZWxlY3QsXG4gICAgICAgIG9uUm93VW5zZWxlY3Q6IHRoaXMucHJvcHMub25Sb3dVbnNlbGVjdCxcbiAgICAgICAgZHJhZ1NlbGVjdGlvbjogdGhpcy5wcm9wcy5kcmFnU2VsZWN0aW9uLFxuICAgICAgICBvbkNvbnRleHRNZW51OiB0aGlzLnByb3BzLm9uQ29udGV4dE1lbnUsXG4gICAgICAgIG9uQ29udGV4dE1lbnVTZWxlY3Rpb25DaGFuZ2U6IHRoaXMucHJvcHMub25Db250ZXh0TWVudVNlbGVjdGlvbkNoYW5nZSxcbiAgICAgICAgbWV0YUtleVNlbGVjdGlvbjogdGhpcy5wcm9wcy5tZXRhS2V5U2VsZWN0aW9uLFxuICAgICAgICBzZWxlY3Rpb25Nb2RlOiB0aGlzLnByb3BzLnNlbGVjdGlvbk1vZGUsXG4gICAgICAgIGNlbGxTZWxlY3Rpb246IHRoaXMucHJvcHMuY2VsbFNlbGVjdGlvbixcbiAgICAgICAgY29udGV4dE1lbnVTZWxlY3Rpb246IHRoaXMucHJvcHMuY29udGV4dE1lbnVTZWxlY3Rpb24sXG4gICAgICAgIGRhdGFLZXk6IHRoaXMucHJvcHMuZGF0YUtleSxcbiAgICAgICAgZXhwYW5kZWRSb3dzOiB0aGlzLnByb3BzLmV4cGFuZGVkUm93cyxcbiAgICAgICAgb25Sb3dDb2xsYXBzZTogdGhpcy5wcm9wcy5vblJvd0NvbGxhcHNlLFxuICAgICAgICBvblJvd0V4cGFuZDogdGhpcy5wcm9wcy5vblJvd0V4cGFuZCxcbiAgICAgICAgb25Sb3dUb2dnbGU6IHRoaXMucHJvcHMub25Sb3dUb2dnbGUsXG4gICAgICAgIGVkaXRNb2RlOiB0aGlzLnByb3BzLmVkaXRNb2RlLFxuICAgICAgICBlZGl0aW5nUm93czogdGhpcy5wcm9wcy5lZGl0aW5nUm93cyxcbiAgICAgICAgb25Sb3dSZW9yZGVyOiB0aGlzLnByb3BzLm9uUm93UmVvcmRlcixcbiAgICAgICAgc2Nyb2xsYWJsZTogdGhpcy5wcm9wcy5zY3JvbGxhYmxlLFxuICAgICAgICByb3dHcm91cE1vZGU6IHRoaXMucHJvcHMucm93R3JvdXBNb2RlLFxuICAgICAgICBncm91cFJvd3NCeTogdGhpcy5wcm9wcy5ncm91cFJvd3NCeSxcbiAgICAgICAgZXhwYW5kYWJsZVJvd0dyb3VwczogdGhpcy5wcm9wcy5leHBhbmRhYmxlUm93R3JvdXBzLFxuICAgICAgICBsb2FkaW5nOiB0aGlzLnByb3BzLmxvYWRpbmcsXG4gICAgICAgIGVtcHR5TWVzc2FnZTogdGhpcy5wcm9wcy5lbXB0eU1lc3NhZ2UsXG4gICAgICAgIHJvd0dyb3VwSGVhZGVyVGVtcGxhdGU6IHRoaXMucHJvcHMucm93R3JvdXBIZWFkZXJUZW1wbGF0ZSxcbiAgICAgICAgcm93RXhwYW5zaW9uVGVtcGxhdGU6IHRoaXMucHJvcHMucm93RXhwYW5zaW9uVGVtcGxhdGUsXG4gICAgICAgIHJvd0dyb3VwRm9vdGVyVGVtcGxhdGU6IHRoaXMucHJvcHMucm93R3JvdXBGb290ZXJUZW1wbGF0ZSxcbiAgICAgICAgb25Sb3dFZGl0Q2hhbmdlOiB0aGlzLnByb3BzLm9uUm93RWRpdENoYW5nZSxcbiAgICAgICAgY29tcGFyZVNlbGVjdGlvbkJ5OiB0aGlzLnByb3BzLmNvbXBhcmVTZWxlY3Rpb25CeSxcbiAgICAgICAgc2VsZWN0T25FZGl0OiB0aGlzLnByb3BzLnNlbGVjdE9uRWRpdCxcbiAgICAgICAgb25Sb3dFZGl0SW5pdDogdGhpcy5wcm9wcy5vblJvd0VkaXRJbml0LFxuICAgICAgICByb3dFZGl0VmFsaWRhdG9yOiB0aGlzLnByb3BzLnJvd0VkaXRWYWxpZGF0b3IsXG4gICAgICAgIG9uUm93RWRpdFNhdmU6IHRoaXMucHJvcHMub25Sb3dFZGl0U2F2ZSxcbiAgICAgICAgb25Sb3dFZGl0Q29tcGxldGU6IHRoaXMucHJvcHMub25Sb3dFZGl0Q29tcGxldGUsXG4gICAgICAgIG9uUm93RWRpdENhbmNlbDogdGhpcy5wcm9wcy5vblJvd0VkaXRDYW5jZWwsXG4gICAgICAgIGNlbGxDbGFzc05hbWU6IHRoaXMucHJvcHMuY2VsbENsYXNzTmFtZSxcbiAgICAgICAgcmVzcG9uc2l2ZUxheW91dDogdGhpcy5wcm9wcy5yZXNwb25zaXZlTGF5b3V0LFxuICAgICAgICBzZWxlY3Rpb25BdXRvRm9jdXM6IHRoaXMucHJvcHMuc2VsZWN0aW9uQXV0b0ZvY3VzLFxuICAgICAgICBpc0RhdGFTZWxlY3RhYmxlOiB0aGlzLnByb3BzLmlzRGF0YVNlbGVjdGFibGUsXG4gICAgICAgIHNob3dTZWxlY3Rpb25FbGVtZW50OiB0aGlzLnByb3BzLnNob3dTZWxlY3Rpb25FbGVtZW50LFxuICAgICAgICBzaG93Um93UmVvcmRlckVsZW1lbnQ6IHRoaXMucHJvcHMuc2hvd1Jvd1Jlb3JkZXJFbGVtZW50LFxuICAgICAgICBleHBhbmRlZFJvd0ljb246IHRoaXMucHJvcHMuZXhwYW5kZWRSb3dJY29uLFxuICAgICAgICBjb2xsYXBzZWRSb3dJY29uOiB0aGlzLnByb3BzLmNvbGxhcHNlZFJvd0ljb24sXG4gICAgICAgIHJvd0NsYXNzTmFtZTogdGhpcy5wcm9wcy5yb3dDbGFzc05hbWUsXG4gICAgICAgIHZpcnR1YWxTY3JvbGxlckNvbnRlbnRSZWY6IGNvbnRlbnRSZWYsXG4gICAgICAgIHZpcnR1YWxTY3JvbGxlck9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIGlzVmlydHVhbFNjcm9sbGVyRGlzYWJsZWQ6IGlzVmlydHVhbFNjcm9sbGVyRGlzYWJsZWRcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBmcm96ZW5Cb2R5LCBib2R5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyVGFibGVGb290ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGVGb290ZXIob3B0aW9ucykge1xuICAgICAgdmFyIGNvbHVtbnMgPSBvcHRpb25zLmNvbHVtbnM7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGVGb290ZXIsIHtcbiAgICAgICAgdGFibGVQcm9wczogdGhpcy5wcm9wcyxcbiAgICAgICAgY29sdW1uczogY29sdW1ucyxcbiAgICAgICAgZm9vdGVyQ29sdW1uR3JvdXA6IHRoaXMucHJvcHMuZm9vdGVyQ29sdW1uR3JvdXBcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDb250ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNvbnRlbnQocHJvY2Vzc2VkRGF0YSwgY29sdW1ucywgc2VsZWN0aW9uTW9kZUluQ29sdW1uLCBlbXB0eSkge1xuICAgICAgdmFyIF90aGlzMTcgPSB0aGlzO1xuXG4gICAgICBpZiAoIWNvbHVtbnMpIHJldHVybjtcbiAgICAgIHZhciBpc1ZpcnR1YWxTY3JvbGxlckRpc2FibGVkID0gdGhpcy5pc1ZpcnR1YWxTY3JvbGxlckRpc2FibGVkKCk7XG4gICAgICB2YXIgdmlydHVhbFNjcm9sbGVyT3B0aW9ucyA9IHRoaXMucHJvcHMudmlydHVhbFNjcm9sbGVyT3B0aW9ucyB8fCB7fTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTcud3JhcHBlciA9IGVsO1xuICAgICAgICB9LFxuICAgICAgICBjbGFzc05hbWU6IFwicC1kYXRhdGFibGUtd3JhcHBlclwiLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG1heEhlaWdodDogaXNWaXJ0dWFsU2Nyb2xsZXJEaXNhYmxlZCA/IHRoaXMucHJvcHMuc2Nyb2xsSGVpZ2h0IDogbnVsbFxuICAgICAgICB9XG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChWaXJ0dWFsU2Nyb2xsZXIsIF9leHRlbmRzKHt9LCB2aXJ0dWFsU2Nyb2xsZXJPcHRpb25zLCB7XG4gICAgICAgIGl0ZW1zOiBwcm9jZXNzZWREYXRhLFxuICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLFxuICAgICAgICBzY3JvbGxIZWlnaHQ6IHRoaXMucHJvcHMuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICBkaXNhYmxlZDogaXNWaXJ0dWFsU2Nyb2xsZXJEaXNhYmxlZCxcbiAgICAgICAgbG9hZGVyRGlzYWJsZWQ6IHRydWUsXG4gICAgICAgIHNob3dTcGFjZXI6IGZhbHNlLFxuICAgICAgICBjb250ZW50VGVtcGxhdGU6IGZ1bmN0aW9uIGNvbnRlbnRUZW1wbGF0ZShvcHRpb25zKSB7XG4gICAgICAgICAgdmFyIHJlZiA9IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgICAgX3RoaXMxNy50YWJsZSA9IGVsO1xuICAgICAgICAgICAgb3B0aW9ucy5zcGFjZXJSZWYgJiYgb3B0aW9ucy5zcGFjZXJSZWYoZWwpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgdGFibGVDbGFzc05hbWUgPSBjbGFzc05hbWVzKCdwLWRhdGF0YWJsZS10YWJsZScsIF90aGlzMTcucHJvcHMudGFibGVDbGFzc05hbWUpO1xuXG4gICAgICAgICAgdmFyIHRhYmxlSGVhZGVyID0gX3RoaXMxNy5yZW5kZXJUYWJsZUhlYWRlcihvcHRpb25zLCBlbXB0eSk7XG5cbiAgICAgICAgICB2YXIgdGFibGVCb2R5ID0gX3RoaXMxNy5yZW5kZXJUYWJsZUJvZHkob3B0aW9ucywgc2VsZWN0aW9uTW9kZUluQ29sdW1uLCBlbXB0eSwgaXNWaXJ0dWFsU2Nyb2xsZXJEaXNhYmxlZCk7XG5cbiAgICAgICAgICB2YXIgdGFibGVGb290ZXIgPSBfdGhpczE3LnJlbmRlclRhYmxlRm9vdGVyKG9wdGlvbnMpO1xuXG4gICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGFibGVcIiwge1xuICAgICAgICAgICAgcmVmOiByZWYsXG4gICAgICAgICAgICBzdHlsZTogX3RoaXMxNy5wcm9wcy50YWJsZVN0eWxlLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiB0YWJsZUNsYXNzTmFtZSxcbiAgICAgICAgICAgIHJvbGU6IFwidGFibGVcIlxuICAgICAgICAgIH0sIHRhYmxlSGVhZGVyLCB0YWJsZUJvZHksIHRhYmxlRm9vdGVyKTtcbiAgICAgICAgfVxuICAgICAgfSkpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRm9vdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckZvb3RlcigpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmZvb3Rlcikge1xuICAgICAgICB2YXIgY29udGVudCA9IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQodGhpcy5wcm9wcy5mb290ZXIsIHtcbiAgICAgICAgICBwcm9wczogdGhpcy5wcm9wc1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1kYXRhdGFibGUtZm9vdGVyXCJcbiAgICAgICAgfSwgY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQYWdpbmF0b3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUGFnaW5hdG9yKHBvc2l0aW9uLCB0b3RhbFJlY29yZHMpIHtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKCdwLXBhZ2luYXRvci0nICsgcG9zaXRpb24sIHRoaXMucHJvcHMucGFnaW5hdG9yQ2xhc3NOYW1lKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYWdpbmF0b3IsIHtcbiAgICAgICAgZmlyc3Q6IHRoaXMuZ2V0Rmlyc3QoKSxcbiAgICAgICAgcm93czogdGhpcy5nZXRSb3dzKCksXG4gICAgICAgIHBhZ2VMaW5rU2l6ZTogdGhpcy5wcm9wcy5wYWdlTGlua1NpemUsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBvblBhZ2VDaGFuZ2U6IHRoaXMub25QYWdlQ2hhbmdlLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5wcm9wcy5wYWdpbmF0b3JUZW1wbGF0ZSxcbiAgICAgICAgdG90YWxSZWNvcmRzOiB0b3RhbFJlY29yZHMsXG4gICAgICAgIHJvd3NQZXJQYWdlT3B0aW9uczogdGhpcy5wcm9wcy5yb3dzUGVyUGFnZU9wdGlvbnMsXG4gICAgICAgIGN1cnJlbnRQYWdlUmVwb3J0VGVtcGxhdGU6IHRoaXMucHJvcHMuY3VycmVudFBhZ2VSZXBvcnRUZW1wbGF0ZSxcbiAgICAgICAgbGVmdENvbnRlbnQ6IHRoaXMucHJvcHMucGFnaW5hdG9yTGVmdCxcbiAgICAgICAgcmlnaHRDb250ZW50OiB0aGlzLnByb3BzLnBhZ2luYXRvclJpZ2h0LFxuICAgICAgICBhbHdheXNTaG93OiB0aGlzLnByb3BzLmFsd2F5c1Nob3dQYWdpbmF0b3IsXG4gICAgICAgIGRyb3Bkb3duQXBwZW5kVG86IHRoaXMucHJvcHMucGFnaW5hdG9yRHJvcGRvd25BcHBlbmRUb1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclBhZ2luYXRvclRvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQYWdpbmF0b3JUb3AodG90YWxSZWNvcmRzKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5wYWdpbmF0b3IgJiYgdGhpcy5wcm9wcy5wYWdpbmF0b3JQb3NpdGlvbiAhPT0gJ2JvdHRvbScpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUGFnaW5hdG9yKCd0b3AnLCB0b3RhbFJlY29yZHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUGFnaW5hdG9yQm90dG9tXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclBhZ2luYXRvckJvdHRvbSh0b3RhbFJlY29yZHMpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLnBhZ2luYXRvciAmJiB0aGlzLnByb3BzLnBhZ2luYXRvclBvc2l0aW9uICE9PSAndG9wJykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQYWdpbmF0b3IoJ2JvdHRvbScsIHRvdGFsUmVjb3Jkcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJSZXNpemVIZWxwZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUmVzaXplSGVscGVyKCkge1xuICAgICAgdmFyIF90aGlzMTggPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5yZXNpemFibGVDb2x1bW5zKSB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczE4LnJlc2l6ZUhlbHBlciA9IGVsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInAtY29sdW1uLXJlc2l6ZXItaGVscGVyXCIsXG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJSZW9yZGVySW5kaWNhdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJSZW9yZGVySW5kaWNhdG9ycygpIHtcbiAgICAgIHZhciBfdGhpczE5ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMucmVvcmRlcmFibGVDb2x1bW5zKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHtcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMxOS5yZW9yZGVySW5kaWNhdG9yVXAgPSBlbDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJwaSBwaS1hcnJvdy1kb3duIHAtZGF0YXRhYmxlLXJlb3JkZXItaW5kaWNhdG9yLXVwXCIsXG4gICAgICAgICAgc3R5bGU6IHN0eWxlXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMxOS5yZW9yZGVySW5kaWNhdG9yRG93biA9IGVsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInBpIHBpLWFycm93LXVwIHAtZGF0YXRhYmxlLXJlb3JkZXItaW5kaWNhdG9yLWRvd25cIixcbiAgICAgICAgICBzdHlsZTogc3R5bGVcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczIwID0gdGhpcztcblxuICAgICAgdmFyIHByb2Nlc3NlZERhdGEgPSB0aGlzLnByb2Nlc3NlZERhdGEoKTtcbiAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zKCk7XG4gICAgICB2YXIgdG90YWxSZWNvcmRzID0gdGhpcy5nZXRUb3RhbFJlY29yZHMocHJvY2Vzc2VkRGF0YSk7XG4gICAgICB2YXIgZW1wdHkgPSBPYmplY3RVdGlscy5pc0VtcHR5KHByb2Nlc3NlZERhdGEpO1xuICAgICAgdmFyIHNlbGVjdGlvbk1vZGVJbkNvbHVtbiA9IHRoaXMuZ2V0U2VsZWN0aW9uTW9kZUluQ29sdW1uKGNvbHVtbnMpO1xuICAgICAgdmFyIHNlbGVjdGFibGUgPSB0aGlzLnByb3BzLnNlbGVjdGlvbk1vZGUgfHwgc2VsZWN0aW9uTW9kZUluQ29sdW1uO1xuICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtZGF0YXRhYmxlIHAtY29tcG9uZW50Jywge1xuICAgICAgICAncC1kYXRhdGFibGUtaG92ZXJhYmxlLXJvd3MnOiB0aGlzLnByb3BzLnJvd0hvdmVyLFxuICAgICAgICAncC1kYXRhdGFibGUtc2VsZWN0YWJsZSc6IHNlbGVjdGFibGUgJiYgIXRoaXMucHJvcHMuY2VsbFNlbGVjdGlvbixcbiAgICAgICAgJ3AtZGF0YXRhYmxlLXNlbGVjdGFibGUtY2VsbCc6IHNlbGVjdGFibGUgJiYgdGhpcy5wcm9wcy5jZWxsU2VsZWN0aW9uLFxuICAgICAgICAncC1kYXRhdGFibGUtYXV0by1sYXlvdXQnOiB0aGlzLnByb3BzLmF1dG9MYXlvdXQsXG4gICAgICAgICdwLWRhdGF0YWJsZS1yZXNpemFibGUnOiB0aGlzLnByb3BzLnJlc2l6YWJsZUNvbHVtbnMsXG4gICAgICAgICdwLWRhdGF0YWJsZS1yZXNpemFibGUtZml0JzogdGhpcy5wcm9wcy5yZXNpemFibGVDb2x1bW5zICYmIHRoaXMucHJvcHMuY29sdW1uUmVzaXplTW9kZSA9PT0gJ2ZpdCcsXG4gICAgICAgICdwLWRhdGF0YWJsZS1zY3JvbGxhYmxlJzogdGhpcy5wcm9wcy5zY3JvbGxhYmxlLFxuICAgICAgICAncC1kYXRhdGFibGUtc2Nyb2xsYWJsZS12ZXJ0aWNhbCc6IHRoaXMucHJvcHMuc2Nyb2xsYWJsZSAmJiB0aGlzLnByb3BzLnNjcm9sbERpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyxcbiAgICAgICAgJ3AtZGF0YXRhYmxlLXNjcm9sbGFibGUtaG9yaXpvbnRhbCc6IHRoaXMucHJvcHMuc2Nyb2xsYWJsZSAmJiB0aGlzLnByb3BzLnNjcm9sbERpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnLFxuICAgICAgICAncC1kYXRhdGFibGUtc2Nyb2xsYWJsZS1ib3RoJzogdGhpcy5wcm9wcy5zY3JvbGxhYmxlICYmIHRoaXMucHJvcHMuc2Nyb2xsRGlyZWN0aW9uID09PSAnYm90aCcsXG4gICAgICAgICdwLWRhdGF0YWJsZS1mbGV4LXNjcm9sbGFibGUnOiB0aGlzLnByb3BzLnNjcm9sbGFibGUgJiYgdGhpcy5wcm9wcy5zY3JvbGxIZWlnaHQgPT09ICdmbGV4JyxcbiAgICAgICAgJ3AtZGF0YXRhYmxlLXJlc3BvbnNpdmUtc3RhY2snOiB0aGlzLnByb3BzLnJlc3BvbnNpdmVMYXlvdXQgPT09ICdzdGFjaycsXG4gICAgICAgICdwLWRhdGF0YWJsZS1yZXNwb25zaXZlLXNjcm9sbCc6IHRoaXMucHJvcHMucmVzcG9uc2l2ZUxheW91dCA9PT0gJ3Njcm9sbCcsXG4gICAgICAgICdwLWRhdGF0YWJsZS1zdHJpcGVkJzogdGhpcy5wcm9wcy5zdHJpcGVkUm93cyxcbiAgICAgICAgJ3AtZGF0YXRhYmxlLWdyaWRsaW5lcyc6IHRoaXMucHJvcHMuc2hvd0dyaWRsaW5lcyxcbiAgICAgICAgJ3AtZGF0YXRhYmxlLWdyb3VwZWQtaGVhZGVyJzogdGhpcy5wcm9wcy5oZWFkZXJDb2x1bW5Hcm91cCAhPSBudWxsLFxuICAgICAgICAncC1kYXRhdGFibGUtZ3JvdXBlZC1mb290ZXInOiB0aGlzLnByb3BzLmZvb3RlckNvbHVtbkdyb3VwICE9IG51bGwsXG4gICAgICAgICdwLWRhdGF0YWJsZS1zbSc6IHRoaXMucHJvcHMuc2l6ZSA9PT0gJ3NtYWxsJyxcbiAgICAgICAgJ3AtZGF0YXRhYmxlLWxnJzogdGhpcy5wcm9wcy5zaXplID09PSAnbGFyZ2UnXG4gICAgICB9LCB0aGlzLnByb3BzLmNsYXNzTmFtZSk7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcy5yZW5kZXJMb2FkZXIoKTtcbiAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnJlbmRlckhlYWRlcigpO1xuICAgICAgdmFyIHBhZ2luYXRvclRvcCA9IHRoaXMucmVuZGVyUGFnaW5hdG9yVG9wKHRvdGFsUmVjb3Jkcyk7XG4gICAgICB2YXIgY29udGVudCA9IHRoaXMucmVuZGVyQ29udGVudChwcm9jZXNzZWREYXRhLCBjb2x1bW5zLCBzZWxlY3Rpb25Nb2RlSW5Db2x1bW4sIGVtcHR5KTtcbiAgICAgIHZhciBwYWdpbmF0b3JCb3R0b20gPSB0aGlzLnJlbmRlclBhZ2luYXRvckJvdHRvbSh0b3RhbFJlY29yZHMpO1xuICAgICAgdmFyIGZvb3RlciA9IHRoaXMucmVuZGVyRm9vdGVyKCk7XG4gICAgICB2YXIgcmVzaXplSGVscGVyID0gdGhpcy5yZW5kZXJSZXNpemVIZWxwZXIoKTtcbiAgICAgIHZhciByZW9yZGVySW5kaWNhdG9ycyA9IHRoaXMucmVuZGVyUmVvcmRlckluZGljYXRvcnMoKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMjAuZWwgPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgaWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBzdHlsZTogdGhpcy5wcm9wcy5zdHlsZSxcbiAgICAgICAgXCJkYXRhLXNjcm9sbHNlbGVjdG9yc1wiOiBcIi5wLWRhdGF0YWJsZS13cmFwcGVyXCJcbiAgICAgIH0sIGxvYWRlciwgaGVhZGVyLCBwYWdpbmF0b3JUb3AsIGNvbnRlbnQsIHBhZ2luYXRvckJvdHRvbSwgZm9vdGVyLCByZXNpemVIZWxwZXIsIHJlb3JkZXJJbmRpY2F0b3JzKTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICBpZiAobmV4dFByb3BzLnJvd3MgIT09IHByZXZTdGF0ZS5kX3Jvd3MgJiYgIW5leHRQcm9wcy5vblBhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByb3dzOiBuZXh0UHJvcHMucm93cyxcbiAgICAgICAgICBkX3Jvd3M6IG5leHRQcm9wcy5yb3dzXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEYXRhVGFibGU7XG59KENvbXBvbmVudCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShEYXRhVGFibGUsIFwiZGVmYXVsdFByb3BzXCIsIHtcbiAgaWQ6IG51bGwsXG4gIHZhbHVlOiBudWxsLFxuICBoZWFkZXI6IG51bGwsXG4gIGZvb3RlcjogbnVsbCxcbiAgc3R5bGU6IG51bGwsXG4gIGNsYXNzTmFtZTogbnVsbCxcbiAgdGFibGVTdHlsZTogbnVsbCxcbiAgdGFibGVDbGFzc05hbWU6IG51bGwsXG4gIHBhZ2luYXRvcjogZmFsc2UsXG4gIHBhZ2luYXRvclBvc2l0aW9uOiAnYm90dG9tJyxcbiAgYWx3YXlzU2hvd1BhZ2luYXRvcjogdHJ1ZSxcbiAgcGFnaW5hdG9yQ2xhc3NOYW1lOiBudWxsLFxuICBwYWdpbmF0b3JUZW1wbGF0ZTogJ0ZpcnN0UGFnZUxpbmsgUHJldlBhZ2VMaW5rIFBhZ2VMaW5rcyBOZXh0UGFnZUxpbmsgTGFzdFBhZ2VMaW5rIFJvd3NQZXJQYWdlRHJvcGRvd24nLFxuICBwYWdpbmF0b3JMZWZ0OiBudWxsLFxuICBwYWdpbmF0b3JSaWdodDogbnVsbCxcbiAgcGFnaW5hdG9yRHJvcGRvd25BcHBlbmRUbzogbnVsbCxcbiAgcGFnZUxpbmtTaXplOiA1LFxuICByb3dzUGVyUGFnZU9wdGlvbnM6IG51bGwsXG4gIGN1cnJlbnRQYWdlUmVwb3J0VGVtcGxhdGU6ICcoe2N1cnJlbnRQYWdlfSBvZiB7dG90YWxQYWdlc30pJyxcbiAgZmlyc3Q6IDAsXG4gIHJvd3M6IG51bGwsXG4gIHRvdGFsUmVjb3JkczogbnVsbCxcbiAgbGF6eTogZmFsc2UsXG4gIHNvcnRGaWVsZDogbnVsbCxcbiAgc29ydE9yZGVyOiBudWxsLFxuICBtdWx0aVNvcnRNZXRhOiBudWxsLFxuICBzb3J0TW9kZTogJ3NpbmdsZScsXG4gIGRlZmF1bHRTb3J0T3JkZXI6IDEsXG4gIHJlbW92YWJsZVNvcnQ6IGZhbHNlLFxuICBlbXB0eU1lc3NhZ2U6IG51bGwsXG4gIHNlbGVjdGlvbk1vZGU6IG51bGwsXG4gIGRyYWdTZWxlY3Rpb246IGZhbHNlLFxuICBjZWxsU2VsZWN0aW9uOiBmYWxzZSxcbiAgc2VsZWN0aW9uOiBudWxsLFxuICBvblNlbGVjdGlvbkNoYW5nZTogbnVsbCxcbiAgY29udGV4dE1lbnVTZWxlY3Rpb246IG51bGwsXG4gIG9uQ29udGV4dE1lbnVTZWxlY3Rpb25DaGFuZ2U6IG51bGwsXG4gIGNvbXBhcmVTZWxlY3Rpb25CeTogJ2RlZXBFcXVhbHMnLFxuICBkYXRhS2V5OiBudWxsLFxuICBtZXRhS2V5U2VsZWN0aW9uOiB0cnVlLFxuICBzZWxlY3RPbkVkaXQ6IHRydWUsXG4gIHNlbGVjdGlvblBhZ2VPbmx5OiBmYWxzZSxcbiAgc2VsZWN0aW9uQXV0b0ZvY3VzOiB0cnVlLFxuICBzaG93U2VsZWN0QWxsOiB0cnVlLFxuICBzZWxlY3RBbGw6IGZhbHNlLFxuICBvblNlbGVjdEFsbENoYW5nZTogbnVsbCxcbiAgaGVhZGVyQ29sdW1uR3JvdXA6IG51bGwsXG4gIGZvb3RlckNvbHVtbkdyb3VwOiBudWxsLFxuICByb3dFeHBhbnNpb25UZW1wbGF0ZTogbnVsbCxcbiAgZXhwYW5kZWRSb3dzOiBudWxsLFxuICBvblJvd1RvZ2dsZTogbnVsbCxcbiAgcmVzaXphYmxlQ29sdW1uczogZmFsc2UsXG4gIGNvbHVtblJlc2l6ZU1vZGU6ICdmaXQnLFxuICByZW9yZGVyYWJsZUNvbHVtbnM6IGZhbHNlLFxuICBmaWx0ZXJzOiBudWxsLFxuICBnbG9iYWxGaWx0ZXI6IG51bGwsXG4gIGZpbHRlckRlbGF5OiAzMDAsXG4gIGZpbHRlckxvY2FsZTogdW5kZWZpbmVkLFxuICBzY3JvbGxhYmxlOiBmYWxzZSxcbiAgc2Nyb2xsSGVpZ2h0OiBudWxsLFxuICBzY3JvbGxEaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gIHZpcnR1YWxTY3JvbGxlck9wdGlvbnM6IG51bGwsXG4gIGZyb3plbldpZHRoOiBudWxsLFxuICBmcm96ZW5WYWx1ZTogbnVsbCxcbiAgY3N2U2VwYXJhdG9yOiAnLCcsXG4gIGV4cG9ydEZpbGVuYW1lOiAnZG93bmxvYWQnLFxuICByb3dHcm91cE1vZGU6IG51bGwsXG4gIGF1dG9MYXlvdXQ6IGZhbHNlLFxuICByb3dDbGFzc05hbWU6IG51bGwsXG4gIGNlbGxDbGFzc05hbWU6IG51bGwsXG4gIHJvd0dyb3VwSGVhZGVyVGVtcGxhdGU6IG51bGwsXG4gIHJvd0dyb3VwRm9vdGVyVGVtcGxhdGU6IG51bGwsXG4gIGxvYWRpbmc6IGZhbHNlLFxuICBsb2FkaW5nSWNvbjogJ3BpIHBpLXNwaW5uZXInLFxuICB0YWJJbmRleDogMCxcbiAgc3RhdGVLZXk6IG51bGwsXG4gIHN0YXRlU3RvcmFnZTogJ3Nlc3Npb24nLFxuICBncm91cFJvd3NCeTogbnVsbCxcbiAgZWRpdE1vZGU6ICdjZWxsJyxcbiAgZWRpdGluZ1Jvd3M6IG51bGwsXG4gIGV4cGFuZGFibGVSb3dHcm91cHM6IGZhbHNlLFxuICByb3dIb3ZlcjogZmFsc2UsXG4gIHNob3dHcmlkbGluZXM6IGZhbHNlLFxuICBzdHJpcGVkUm93czogZmFsc2UsXG4gIHNpemU6ICdub3JtYWwnLFxuICByZXNwb25zaXZlTGF5b3V0OiAnc3RhY2snLFxuICBicmVha3BvaW50OiAnOTYwcHgnLFxuICBmaWx0ZXJEaXNwbGF5OiAnbWVudScsXG4gIGV4cGFuZGVkUm93SWNvbjogJ3BpIHBpLWNoZXZyb24tZG93bicsXG4gIGNvbGxhcHNlZFJvd0ljb246ICdwaSBwaS1jaGV2cm9uLXJpZ2h0JyxcbiAgb25Sb3dFZGl0Q29tcGxldGU6IG51bGwsXG4gIGdsb2JhbEZpbHRlckZpZWxkczogbnVsbCxcbiAgc2hvd1NlbGVjdGlvbkVsZW1lbnQ6IG51bGwsXG4gIHNob3dSb3dSZW9yZGVyRWxlbWVudDogbnVsbCxcbiAgaXNEYXRhU2VsZWN0YWJsZTogbnVsbCxcbiAgb25Db2x1bW5SZXNpemVFbmQ6IG51bGwsXG4gIG9uQ29sdW1uUmVzaXplckNsaWNrOiBudWxsLFxuICBvbkNvbHVtblJlc2l6ZXJEb3VibGVDbGljazogbnVsbCxcbiAgb25Tb3J0OiBudWxsLFxuICBvblBhZ2U6IG51bGwsXG4gIG9uRmlsdGVyOiBudWxsLFxuICBvbkFsbFJvd3NTZWxlY3Q6IG51bGwsXG4gIG9uQWxsUm93c1Vuc2VsZWN0OiBudWxsLFxuICBvblJvd0NsaWNrOiBudWxsLFxuICBvblJvd0RvdWJsZUNsaWNrOiBudWxsLFxuICBvblJvd1NlbGVjdDogbnVsbCxcbiAgb25Sb3dVbnNlbGVjdDogbnVsbCxcbiAgb25Sb3dFeHBhbmQ6IG51bGwsXG4gIG9uUm93Q29sbGFwc2U6IG51bGwsXG4gIG9uQ29udGV4dE1lbnU6IG51bGwsXG4gIG9uQ29sUmVvcmRlcjogbnVsbCxcbiAgb25DZWxsQ2xpY2s6IG51bGwsXG4gIG9uQ2VsbFNlbGVjdDogbnVsbCxcbiAgb25DZWxsVW5zZWxlY3Q6IG51bGwsXG4gIG9uUm93UmVvcmRlcjogbnVsbCxcbiAgb25WYWx1ZUNoYW5nZTogbnVsbCxcbiAgcm93RWRpdFZhbGlkYXRvcjogbnVsbCxcbiAgb25Sb3dFZGl0SW5pdDogbnVsbCxcbiAgb25Sb3dFZGl0U2F2ZTogbnVsbCxcbiAgb25Sb3dFZGl0Q2FuY2VsOiBudWxsLFxuICBvblJvd0VkaXRDaGFuZ2U6IG51bGwsXG4gIGV4cG9ydEZ1bmN0aW9uOiBudWxsLFxuICBjdXN0b21TYXZlU3RhdGU6IG51bGwsXG4gIGN1c3RvbVJlc3RvcmVTdGF0ZTogbnVsbCxcbiAgb25TdGF0ZVNhdmU6IG51bGwsXG4gIG9uU3RhdGVSZXN0b3JlOiBudWxsXG59KTtcblxuZXhwb3J0IHsgRGF0YVRhYmxlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/primereact/datatable/datatable.esm.js\n");

/***/ }),

/***/ "./node_modules/primereact/paginator/paginator.esm.js":
/*!************************************************************!*\
  !*** ./node_modules/primereact/paginator/paginator.esm.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Paginator\": function() { return /* binding */ Paginator; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var primereact_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! primereact/utils */ \"./node_modules/primereact/utils/utils.esm.js\");\n/* harmony import */ var primereact_ripple__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! primereact/ripple */ \"./node_modules/primereact/ripple/ripple.esm.js\");\n/* harmony import */ var primereact_dropdown__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! primereact/dropdown */ \"./node_modules/primereact/dropdown/dropdown.esm.js\");\n/* harmony import */ var primereact_inputnumber__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! primereact/inputnumber */ \"./node_modules/primereact/inputnumber/inputnumber.esm.js\");\n\n\n\n\n\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _createSuper$8(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$8(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$8() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar FirstPageLink = /*#__PURE__*/function (_Component) {\n  _inherits(FirstPageLink, _Component);\n\n  var _super = _createSuper$8(FirstPageLink);\n\n  function FirstPageLink() {\n    _classCallCheck(this, FirstPageLink);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FirstPageLink, [{\n    key: \"render\",\n    value: function render() {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-paginator-first p-paginator-element p-link', {\n        'p-disabled': this.props.disabled\n      });\n      var iconClassName = 'p-paginator-icon pi pi-angle-double-left';\n      var element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n        type: \"button\",\n        className: className,\n        onClick: this.props.onClick,\n        disabled: this.props.disabled\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: iconClassName\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_2__.Ripple, null));\n\n      if (this.props.template) {\n        var defaultOptions = {\n          onClick: this.props.onClick,\n          className: className,\n          iconClassName: iconClassName,\n          disabled: this.props.disabled,\n          element: element,\n          props: this.props\n        };\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.template, defaultOptions);\n      }\n\n      return element;\n    }\n  }]);\n\n  return FirstPageLink;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(FirstPageLink, \"defaultProps\", {\n  disabled: false,\n  onClick: null,\n  template: null\n});\n\nfunction _createSuper$7(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$7(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$7() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar NextPageLink = /*#__PURE__*/function (_Component) {\n  _inherits(NextPageLink, _Component);\n\n  var _super = _createSuper$7(NextPageLink);\n\n  function NextPageLink() {\n    _classCallCheck(this, NextPageLink);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(NextPageLink, [{\n    key: \"render\",\n    value: function render() {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-paginator-next p-paginator-element p-link', {\n        'p-disabled': this.props.disabled\n      });\n      var iconClassName = 'p-paginator-icon pi pi-angle-right';\n      var element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n        type: \"button\",\n        className: className,\n        onClick: this.props.onClick,\n        disabled: this.props.disabled\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: iconClassName\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_2__.Ripple, null));\n\n      if (this.props.template) {\n        var defaultOptions = {\n          onClick: this.props.onClick,\n          className: className,\n          iconClassName: iconClassName,\n          disabled: this.props.disabled,\n          element: element,\n          props: this.props\n        };\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.template, defaultOptions);\n      }\n\n      return element;\n    }\n  }]);\n\n  return NextPageLink;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(NextPageLink, \"defaultProps\", {\n  disabled: false,\n  onClick: null,\n  template: null\n});\n\nfunction _createSuper$6(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$6(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$6() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar PrevPageLink = /*#__PURE__*/function (_Component) {\n  _inherits(PrevPageLink, _Component);\n\n  var _super = _createSuper$6(PrevPageLink);\n\n  function PrevPageLink() {\n    _classCallCheck(this, PrevPageLink);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PrevPageLink, [{\n    key: \"render\",\n    value: function render() {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-paginator-prev p-paginator-element p-link', {\n        'p-disabled': this.props.disabled\n      });\n      var iconClassName = 'p-paginator-icon pi pi-angle-left';\n      var element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n        type: \"button\",\n        className: className,\n        onClick: this.props.onClick,\n        disabled: this.props.disabled\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: iconClassName\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_2__.Ripple, null));\n\n      if (this.props.template) {\n        var defaultOptions = {\n          onClick: this.props.onClick,\n          className: className,\n          iconClassName: iconClassName,\n          disabled: this.props.disabled,\n          element: element,\n          props: this.props\n        };\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.template, defaultOptions);\n      }\n\n      return element;\n    }\n  }]);\n\n  return PrevPageLink;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(PrevPageLink, \"defaultProps\", {\n  disabled: false,\n  onClick: null,\n  template: null\n});\n\nfunction _createSuper$5(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$5(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$5() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar LastPageLink = /*#__PURE__*/function (_Component) {\n  _inherits(LastPageLink, _Component);\n\n  var _super = _createSuper$5(LastPageLink);\n\n  function LastPageLink() {\n    _classCallCheck(this, LastPageLink);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LastPageLink, [{\n    key: \"render\",\n    value: function render() {\n      var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-paginator-last p-paginator-element p-link', {\n        'p-disabled': this.props.disabled\n      });\n      var iconClassName = 'p-paginator-icon pi pi-angle-double-right';\n      var element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n        type: \"button\",\n        className: className,\n        onClick: this.props.onClick,\n        disabled: this.props.disabled\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: iconClassName\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_2__.Ripple, null));\n\n      if (this.props.template) {\n        var defaultOptions = {\n          onClick: this.props.onClick,\n          className: className,\n          iconClassName: iconClassName,\n          disabled: this.props.disabled,\n          element: element,\n          props: this.props\n        };\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.template, defaultOptions);\n      }\n\n      return element;\n    }\n  }]);\n\n  return LastPageLink;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(LastPageLink, \"defaultProps\", {\n  disabled: false,\n  onClick: null,\n  template: null\n});\n\nfunction _createSuper$4(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$4(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$4() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar PageLinks = /*#__PURE__*/function (_Component) {\n  _inherits(PageLinks, _Component);\n\n  var _super = _createSuper$4(PageLinks);\n\n  function PageLinks() {\n    _classCallCheck(this, PageLinks);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PageLinks, [{\n    key: \"onPageLinkClick\",\n    value: function onPageLinkClick(event, pageLink) {\n      if (this.props.onClick) {\n        this.props.onClick({\n          originalEvent: event,\n          value: pageLink\n        });\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var elements;\n\n      if (this.props.value) {\n        var startPageInView = this.props.value[0];\n        var endPageInView = this.props.value[this.props.value.length - 1];\n        elements = this.props.value.map(function (pageLink, i) {\n          var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-paginator-page p-paginator-element p-link', {\n            'p-paginator-page-start': pageLink === startPageInView,\n            'p-paginator-page-end': pageLink === endPageInView,\n            'p-highlight': pageLink - 1 === _this.props.page\n          });\n          var element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n            type: \"button\",\n            className: className,\n            onClick: function onClick(e) {\n              return _this.onPageLinkClick(e, pageLink);\n            }\n          }, pageLink, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_ripple__WEBPACK_IMPORTED_MODULE_2__.Ripple, null));\n\n          if (_this.props.template) {\n            var defaultOptions = {\n              onClick: function onClick(e) {\n                return _this.onPageLinkClick(e, pageLink);\n              },\n              className: className,\n              view: {\n                startPage: startPageInView - 1,\n                endPage: endPageInView - 1\n              },\n              page: pageLink - 1,\n              currentPage: _this.props.page,\n              totalPages: _this.props.pageCount,\n              element: element,\n              props: _this.props\n            };\n            element = primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(_this.props.template, defaultOptions);\n          }\n\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {\n            key: pageLink\n          }, element);\n        });\n      }\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: \"p-paginator-pages\"\n      }, elements);\n    }\n  }]);\n\n  return PageLinks;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(PageLinks, \"defaultProps\", {\n  value: null,\n  page: null,\n  rows: null,\n  pageCount: null,\n  links: null,\n  template: null\n});\n\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar RowsPerPageDropdown = /*#__PURE__*/function (_Component) {\n  _inherits(RowsPerPageDropdown, _Component);\n\n  var _super = _createSuper$3(RowsPerPageDropdown);\n\n  function RowsPerPageDropdown() {\n    _classCallCheck(this, RowsPerPageDropdown);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(RowsPerPageDropdown, [{\n    key: \"hasOptions\",\n    value: function hasOptions() {\n      return this.props.options && this.props.options.length > 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var hasOptions = this.hasOptions();\n      var options = hasOptions ? this.props.options.map(function (opt) {\n        return {\n          label: String(opt),\n          value: opt\n        };\n      }) : [];\n      var element = hasOptions ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_dropdown__WEBPACK_IMPORTED_MODULE_3__.Dropdown, {\n        value: this.props.value,\n        options: options,\n        onChange: this.props.onChange,\n        appendTo: this.props.appendTo,\n        disabled: this.props.disabled\n      }) : null;\n\n      if (this.props.template) {\n        var defaultOptions = {\n          value: this.props.value,\n          options: options,\n          onChange: this.props.onChange,\n          appendTo: this.props.appendTo,\n          currentPage: this.props.page,\n          totalPages: this.props.pageCount,\n          totalRecords: this.props.totalRecords,\n          disabled: this.props.disabled,\n          element: element,\n          props: this.props\n        };\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.template, defaultOptions);\n      }\n\n      return element;\n    }\n  }]);\n\n  return RowsPerPageDropdown;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(RowsPerPageDropdown, \"defaultProps\", {\n  options: null,\n  value: null,\n  page: null,\n  pageCount: null,\n  totalRecords: 0,\n  appendTo: null,\n  onChange: null,\n  template: null,\n  disabled: false\n});\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar CurrentPageReport = /*#__PURE__*/function (_Component) {\n  _inherits(CurrentPageReport, _Component);\n\n  var _super = _createSuper$2(CurrentPageReport);\n\n  function CurrentPageReport() {\n    _classCallCheck(this, CurrentPageReport);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CurrentPageReport, [{\n    key: \"render\",\n    value: function render() {\n      var report = {\n        currentPage: this.props.page + 1,\n        totalPages: this.props.pageCount,\n        first: Math.min(this.props.first + 1, this.props.totalRecords),\n        last: Math.min(this.props.first + this.props.rows, this.props.totalRecords),\n        rows: this.props.rows,\n        totalRecords: this.props.totalRecords\n      };\n      var text = this.props.reportTemplate.replace(\"{currentPage}\", report.currentPage).replace(\"{totalPages}\", report.totalPages).replace(\"{first}\", report.first).replace(\"{last}\", report.last).replace(\"{rows}\", report.rows).replace(\"{totalRecords}\", report.totalRecords);\n      var element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n        className: \"p-paginator-current\"\n      }, text);\n\n      if (this.props.template) {\n        var defaultOptions = _objectSpread(_objectSpread({}, report), {\n          className: 'p-paginator-current',\n          element: element,\n          props: this.props\n        });\n\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.template, defaultOptions);\n      }\n\n      return element;\n    }\n  }]);\n\n  return CurrentPageReport;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(CurrentPageReport, \"defaultProps\", {\n  pageCount: null,\n  page: null,\n  first: null,\n  rows: null,\n  totalRecords: null,\n  reportTemplate: '({currentPage} of {totalPages})',\n  template: null\n});\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar JumpToPageInput = /*#__PURE__*/function (_Component) {\n  _inherits(JumpToPageInput, _Component);\n\n  var _super = _createSuper$1(JumpToPageInput);\n\n  function JumpToPageInput(props) {\n    var _this;\n\n    _classCallCheck(this, JumpToPageInput);\n\n    _this = _super.call(this, props);\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(JumpToPageInput, [{\n    key: \"onChange\",\n    value: function onChange(event) {\n      if (this.props.onChange) {\n        this.props.onChange(this.props.rows * (event.value - 1), this.props.rows);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var value = this.props.pageCount > 0 ? this.props.page + 1 : 0;\n      var element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(primereact_inputnumber__WEBPACK_IMPORTED_MODULE_4__.InputNumber, {\n        value: value,\n        onChange: this.onChange,\n        className: \"p-paginator-page-input\",\n        disabled: this.props.disabled\n      });\n\n      if (this.props.template) {\n        var defaultOptions = {\n          value: value,\n          onChange: this.onChange,\n          disabled: this.props.disabled,\n          className: 'p-paginator-page-input',\n          element: element,\n          props: this.props\n        };\n        return primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.template, defaultOptions);\n      }\n\n      return element;\n    }\n  }]);\n\n  return JumpToPageInput;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(JumpToPageInput, \"defaultProps\", {\n  page: null,\n  rows: null,\n  pageCount: null,\n  disabled: false,\n  template: null,\n  onChange: null\n});\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar Paginator = /*#__PURE__*/function (_Component) {\n  _inherits(Paginator, _Component);\n\n  var _super = _createSuper(Paginator);\n\n  function Paginator(props) {\n    var _this;\n\n    _classCallCheck(this, Paginator);\n\n    _this = _super.call(this, props);\n    _this.changePageToFirst = _this.changePageToFirst.bind(_assertThisInitialized(_this));\n    _this.changePageToPrev = _this.changePageToPrev.bind(_assertThisInitialized(_this));\n    _this.changePageToNext = _this.changePageToNext.bind(_assertThisInitialized(_this));\n    _this.changePageToLast = _this.changePageToLast.bind(_assertThisInitialized(_this));\n    _this.onRowsChange = _this.onRowsChange.bind(_assertThisInitialized(_this));\n    _this.changePage = _this.changePage.bind(_assertThisInitialized(_this));\n    _this.onPageLinkClick = _this.onPageLinkClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Paginator, [{\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.getPage() === 0;\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      return this.getPage() === this.getPageCount() - 1;\n    }\n  }, {\n    key: \"getPageCount\",\n    value: function getPageCount() {\n      return Math.ceil(this.props.totalRecords / this.props.rows);\n    }\n  }, {\n    key: \"calculatePageLinkBoundaries\",\n    value: function calculatePageLinkBoundaries() {\n      var numberOfPages = this.getPageCount();\n      var visiblePages = Math.min(this.props.pageLinkSize, numberOfPages); //calculate range, keep current in middle if necessary\n\n      var start = Math.max(0, Math.ceil(this.getPage() - visiblePages / 2));\n      var end = Math.min(numberOfPages - 1, start + visiblePages - 1); //check when approaching to last page\n\n      var delta = this.props.pageLinkSize - (end - start + 1);\n      start = Math.max(0, start - delta);\n      return [start, end];\n    }\n  }, {\n    key: \"updatePageLinks\",\n    value: function updatePageLinks() {\n      var pageLinks = [];\n      var boundaries = this.calculatePageLinkBoundaries();\n      var start = boundaries[0];\n      var end = boundaries[1];\n\n      for (var i = start; i <= end; i++) {\n        pageLinks.push(i + 1);\n      }\n\n      return pageLinks;\n    }\n  }, {\n    key: \"changePage\",\n    value: function changePage(first, rows) {\n      var pc = this.getPageCount();\n      var p = Math.floor(first / rows);\n\n      if (p >= 0 && p < pc) {\n        var newPageState = {\n          first: first,\n          rows: rows,\n          page: p,\n          pageCount: pc\n        };\n\n        if (this.props.onPageChange) {\n          this.props.onPageChange(newPageState);\n        }\n      }\n    }\n  }, {\n    key: \"getPage\",\n    value: function getPage() {\n      return Math.floor(this.props.first / this.props.rows);\n    }\n  }, {\n    key: \"empty\",\n    value: function empty() {\n      var pageCount = this.getPageCount();\n      return pageCount === 0;\n    }\n  }, {\n    key: \"changePageToFirst\",\n    value: function changePageToFirst(event) {\n      this.changePage(0, this.props.rows);\n      event.preventDefault();\n    }\n  }, {\n    key: \"changePageToPrev\",\n    value: function changePageToPrev(event) {\n      this.changePage(this.props.first - this.props.rows, this.props.rows);\n      event.preventDefault();\n    }\n  }, {\n    key: \"onPageLinkClick\",\n    value: function onPageLinkClick(event) {\n      this.changePage((event.value - 1) * this.props.rows, this.props.rows);\n    }\n  }, {\n    key: \"changePageToNext\",\n    value: function changePageToNext(event) {\n      this.changePage(this.props.first + this.props.rows, this.props.rows);\n      event.preventDefault();\n    }\n  }, {\n    key: \"changePageToLast\",\n    value: function changePageToLast(event) {\n      this.changePage((this.getPageCount() - 1) * this.props.rows, this.props.rows);\n      event.preventDefault();\n    }\n  }, {\n    key: \"onRowsChange\",\n    value: function onRowsChange(event) {\n      var rows = event.value;\n      this.isRowChanged = rows !== this.props.rows;\n      this.changePage(0, rows);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.rows !== prevProps.rows && !this.isRowChanged) {\n        this.changePage(0, this.props.rows);\n      } else if (this.getPage() > 0 && prevProps.totalRecords !== this.props.totalRecords && this.props.first >= this.props.totalRecords) {\n        this.changePage((this.getPageCount() - 1) * this.props.rows, this.props.rows);\n      }\n\n      this.isRowChanged = false;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(key, template) {\n      var element;\n\n      switch (key) {\n        case 'FirstPageLink':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FirstPageLink, {\n            key: key,\n            onClick: this.changePageToFirst,\n            disabled: this.isFirstPage() || this.empty(),\n            template: template\n          });\n          break;\n\n        case 'PrevPageLink':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(PrevPageLink, {\n            key: key,\n            onClick: this.changePageToPrev,\n            disabled: this.isFirstPage() || this.empty(),\n            template: template\n          });\n          break;\n\n        case 'NextPageLink':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(NextPageLink, {\n            key: key,\n            onClick: this.changePageToNext,\n            disabled: this.isLastPage() || this.empty(),\n            template: template\n          });\n          break;\n\n        case 'LastPageLink':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(LastPageLink, {\n            key: key,\n            onClick: this.changePageToLast,\n            disabled: this.isLastPage() || this.empty(),\n            template: template\n          });\n          break;\n\n        case 'PageLinks':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(PageLinks, {\n            key: key,\n            value: this.updatePageLinks(),\n            page: this.getPage(),\n            rows: this.props.rows,\n            pageCount: this.getPageCount(),\n            onClick: this.onPageLinkClick,\n            template: template\n          });\n          break;\n\n        case 'RowsPerPageDropdown':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(RowsPerPageDropdown, {\n            key: key,\n            value: this.props.rows,\n            page: this.getPage(),\n            pageCount: this.getPageCount(),\n            totalRecords: this.props.totalRecords,\n            options: this.props.rowsPerPageOptions,\n            onChange: this.onRowsChange,\n            appendTo: this.props.dropdownAppendTo,\n            template: template,\n            disabled: this.empty()\n          });\n          break;\n\n        case 'CurrentPageReport':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CurrentPageReport, {\n            reportTemplate: this.props.currentPageReportTemplate,\n            key: key,\n            page: this.getPage(),\n            pageCount: this.getPageCount(),\n            first: this.props.first,\n            rows: this.props.rows,\n            totalRecords: this.props.totalRecords,\n            template: template\n          });\n          break;\n\n        case 'JumpToPageInput':\n          element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(JumpToPageInput, {\n            key: key,\n            rows: this.props.rows,\n            page: this.getPage(),\n            pageCount: this.getPageCount(),\n            onChange: this.changePage,\n            disabled: this.empty(),\n            template: template\n          });\n          break;\n\n        default:\n          element = null;\n          break;\n      }\n\n      return element;\n    }\n  }, {\n    key: \"renderElements\",\n    value: function renderElements() {\n      var _this2 = this;\n\n      var template = this.props.template;\n\n      if (template) {\n        if (_typeof(template) === 'object') {\n          return template.layout ? template.layout.split(' ').map(function (value) {\n            var key = value.trim();\n            return _this2.renderElement(key, template[key]);\n          }) : Object.entries(template).map(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                key = _ref2[0],\n                _template = _ref2[1];\n\n            return _this2.renderElement(key, _template);\n          });\n        }\n\n        return template.split(' ').map(function (value) {\n          return _this2.renderElement(value.trim());\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.props.alwaysShow && this.getPageCount() === 1) {\n        return null;\n      } else {\n        var className = (0,primereact_utils__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-paginator p-component', this.props.className);\n        var leftContent = primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.leftContent, this.props);\n        var rightContent = primereact_utils__WEBPACK_IMPORTED_MODULE_1__.ObjectUtils.getJSXElement(this.props.rightContent, this.props);\n        var elements = this.renderElements();\n        var leftElement = leftContent && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-paginator-left-content\"\n        }, leftContent);\n        var rightElement = rightContent && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: \"p-paginator-right-content\"\n        }, rightContent);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n          className: className,\n          style: this.props.style\n        }, leftElement, elements, rightElement);\n      }\n    }\n  }]);\n\n  return Paginator;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n_defineProperty(Paginator, \"defaultProps\", {\n  totalRecords: 0,\n  rows: 0,\n  first: 0,\n  pageLinkSize: 5,\n  rowsPerPageOptions: null,\n  alwaysShow: true,\n  style: null,\n  className: null,\n  template: 'FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown',\n  onPageChange: null,\n  leftContent: null,\n  rightContent: null,\n  dropdownAppendTo: null,\n  currentPageReportTemplate: '({currentPage} of {totalPages})'\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJpbWVyZWFjdC9wYWdpbmF0b3IvcGFnaW5hdG9yLmVzbS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXlDO0FBQ2tCO0FBQ2hCO0FBQ0k7QUFDTTs7QUFFckQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEseUNBQXlDLFNBQVM7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0ws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QUFDOztBQUVvQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvcHJpbWVyZWFjdC9wYWdpbmF0b3IvcGFnaW5hdG9yLmVzbS5qcz9iMDgxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjbGFzc05hbWVzLCBPYmplY3RVdGlscyB9IGZyb20gJ3ByaW1lcmVhY3QvdXRpbHMnO1xuaW1wb3J0IHsgUmlwcGxlIH0gZnJvbSAncHJpbWVyZWFjdC9yaXBwbGUnO1xuaW1wb3J0IHsgRHJvcGRvd24gfSBmcm9tICdwcmltZXJlYWN0L2Ryb3Bkb3duJztcbmltcG9ydCB7IElucHV0TnVtYmVyIH0gZnJvbSAncHJpbWVyZWFjdC9pbnB1dG51bWJlcic7XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkge1xuICB2YXIgX2kgPSBhcnIgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGFycltTeW1ib2wuaXRlcmF0b3JdIHx8IGFycltcIkBAaXRlcmF0b3JcIl07XG5cbiAgaWYgKF9pID09IG51bGwpIHJldHVybjtcbiAgdmFyIF9hcnIgPSBbXTtcbiAgdmFyIF9uID0gdHJ1ZTtcbiAgdmFyIF9kID0gZmFsc2U7XG5cbiAgdmFyIF9zLCBfZTtcblxuICB0cnkge1xuICAgIGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kID0gdHJ1ZTtcbiAgICBfZSA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBfYXJyO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgfSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICB9LCBfdHlwZW9mKG9iaik7XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwge1xuICAgIHdyaXRhYmxlOiBmYWxzZVxuICB9KTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHtcbiAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBzZWxmO1xufVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7XG59XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlciQ4KERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDgoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0JDgoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxudmFyIEZpcnN0UGFnZUxpbmsgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEZpcnN0UGFnZUxpbmssIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkOChGaXJzdFBhZ2VMaW5rKTtcblxuICBmdW5jdGlvbiBGaXJzdFBhZ2VMaW5rKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaXJzdFBhZ2VMaW5rKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhGaXJzdFBhZ2VMaW5rLCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtcGFnaW5hdG9yLWZpcnN0IHAtcGFnaW5hdG9yLWVsZW1lbnQgcC1saW5rJywge1xuICAgICAgICAncC1kaXNhYmxlZCc6IHRoaXMucHJvcHMuZGlzYWJsZWRcbiAgICAgIH0pO1xuICAgICAgdmFyIGljb25DbGFzc05hbWUgPSAncC1wYWdpbmF0b3ItaWNvbiBwaSBwaS1hbmdsZS1kb3VibGUtbGVmdCc7XG4gICAgICB2YXIgZWxlbWVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvcHMub25DbGljayxcbiAgICAgICAgZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWRcbiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJpcHBsZSwgbnVsbCkpO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy50ZW1wbGF0ZSkge1xuICAgICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgICAgb25DbGljazogdGhpcy5wcm9wcy5vbkNsaWNrLFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIGljb25DbGFzc05hbWU6IGljb25DbGFzc05hbWUsXG4gICAgICAgICAgZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICBwcm9wczogdGhpcy5wcm9wc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLnByb3BzLnRlbXBsYXRlLCBkZWZhdWx0T3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGaXJzdFBhZ2VMaW5rO1xufShDb21wb25lbnQpO1xuXG5fZGVmaW5lUHJvcGVydHkoRmlyc3RQYWdlTGluaywgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBkaXNhYmxlZDogZmFsc2UsXG4gIG9uQ2xpY2s6IG51bGwsXG4gIHRlbXBsYXRlOiBudWxsXG59KTtcblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyJDcoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNygpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNygpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgTmV4dFBhZ2VMaW5rID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhOZXh0UGFnZUxpbmssIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkNyhOZXh0UGFnZUxpbmspO1xuXG4gIGZ1bmN0aW9uIE5leHRQYWdlTGluaygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmV4dFBhZ2VMaW5rKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhOZXh0UGFnZUxpbmssIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1wYWdpbmF0b3ItbmV4dCBwLXBhZ2luYXRvci1lbGVtZW50IHAtbGluaycsIHtcbiAgICAgICAgJ3AtZGlzYWJsZWQnOiB0aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICB9KTtcbiAgICAgIHZhciBpY29uQ2xhc3NOYW1lID0gJ3AtcGFnaW5hdG9yLWljb24gcGkgcGktYW5nbGUtcmlnaHQnO1xuICAgICAgdmFyIGVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3BzLm9uQ2xpY2ssXG4gICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IGljb25DbGFzc05hbWVcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSaXBwbGUsIG51bGwpKTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMudGVtcGxhdGUpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvcHMub25DbGljayxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBpY29uQ2xhc3NOYW1lOiBpY29uQ2xhc3NOYW1lLFxuICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgcHJvcHM6IHRoaXMucHJvcHNcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQodGhpcy5wcm9wcy50ZW1wbGF0ZSwgZGVmYXVsdE9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTmV4dFBhZ2VMaW5rO1xufShDb21wb25lbnQpO1xuXG5fZGVmaW5lUHJvcGVydHkoTmV4dFBhZ2VMaW5rLCBcImRlZmF1bHRQcm9wc1wiLCB7XG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgb25DbGljazogbnVsbCxcbiAgdGVtcGxhdGU6IG51bGxcbn0pO1xuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkNihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQ2KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQ2KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBQcmV2UGFnZUxpbmsgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFByZXZQYWdlTGluaywgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlciQ2KFByZXZQYWdlTGluayk7XG5cbiAgZnVuY3Rpb24gUHJldlBhZ2VMaW5rKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcmV2UGFnZUxpbmspO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByZXZQYWdlTGluaywgW3tcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKCdwLXBhZ2luYXRvci1wcmV2IHAtcGFnaW5hdG9yLWVsZW1lbnQgcC1saW5rJywge1xuICAgICAgICAncC1kaXNhYmxlZCc6IHRoaXMucHJvcHMuZGlzYWJsZWRcbiAgICAgIH0pO1xuICAgICAgdmFyIGljb25DbGFzc05hbWUgPSAncC1wYWdpbmF0b3ItaWNvbiBwaSBwaS1hbmdsZS1sZWZ0JztcbiAgICAgIHZhciBlbGVtZW50ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25DbGljazogdGhpcy5wcm9wcy5vbkNsaWNrLFxuICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZFxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBpY29uQ2xhc3NOYW1lXG4gICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmlwcGxlLCBudWxsKSk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnRlbXBsYXRlKSB7XG4gICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3BzLm9uQ2xpY2ssXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZSxcbiAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYmplY3RVdGlscy5nZXRKU1hFbGVtZW50KHRoaXMucHJvcHMudGVtcGxhdGUsIGRlZmF1bHRPcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByZXZQYWdlTGluaztcbn0oQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KFByZXZQYWdlTGluaywgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBkaXNhYmxlZDogZmFsc2UsXG4gIG9uQ2xpY2s6IG51bGwsXG4gIHRlbXBsYXRlOiBudWxsXG59KTtcblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyJDUoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNSgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNSgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgTGFzdFBhZ2VMaW5rID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhMYXN0UGFnZUxpbmssIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkNShMYXN0UGFnZUxpbmspO1xuXG4gIGZ1bmN0aW9uIExhc3RQYWdlTGluaygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGFzdFBhZ2VMaW5rKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhMYXN0UGFnZUxpbmssIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcygncC1wYWdpbmF0b3ItbGFzdCBwLXBhZ2luYXRvci1lbGVtZW50IHAtbGluaycsIHtcbiAgICAgICAgJ3AtZGlzYWJsZWQnOiB0aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICB9KTtcbiAgICAgIHZhciBpY29uQ2xhc3NOYW1lID0gJ3AtcGFnaW5hdG9yLWljb24gcGkgcGktYW5nbGUtZG91YmxlLXJpZ2h0JztcbiAgICAgIHZhciBlbGVtZW50ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25DbGljazogdGhpcy5wcm9wcy5vbkNsaWNrLFxuICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZFxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBpY29uQ2xhc3NOYW1lXG4gICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmlwcGxlLCBudWxsKSk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnRlbXBsYXRlKSB7XG4gICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3BzLm9uQ2xpY2ssXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZSxcbiAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYmplY3RVdGlscy5nZXRKU1hFbGVtZW50KHRoaXMucHJvcHMudGVtcGxhdGUsIGRlZmF1bHRPcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExhc3RQYWdlTGluaztcbn0oQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KExhc3RQYWdlTGluaywgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBkaXNhYmxlZDogZmFsc2UsXG4gIG9uQ2xpY2s6IG51bGwsXG4gIHRlbXBsYXRlOiBudWxsXG59KTtcblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyJDQoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkNCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgUGFnZUxpbmtzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhQYWdlTGlua3MsIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkNChQYWdlTGlua3MpO1xuXG4gIGZ1bmN0aW9uIFBhZ2VMaW5rcygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFnZUxpbmtzKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQYWdlTGlua3MsIFt7XG4gICAga2V5OiBcIm9uUGFnZUxpbmtDbGlja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblBhZ2VMaW5rQ2xpY2soZXZlbnQsIHBhZ2VMaW5rKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vbkNsaWNrKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25DbGljayh7XG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgICAgdmFsdWU6IHBhZ2VMaW5rXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIGVsZW1lbnRzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy52YWx1ZSkge1xuICAgICAgICB2YXIgc3RhcnRQYWdlSW5WaWV3ID0gdGhpcy5wcm9wcy52YWx1ZVswXTtcbiAgICAgICAgdmFyIGVuZFBhZ2VJblZpZXcgPSB0aGlzLnByb3BzLnZhbHVlW3RoaXMucHJvcHMudmFsdWUubGVuZ3RoIC0gMV07XG4gICAgICAgIGVsZW1lbnRzID0gdGhpcy5wcm9wcy52YWx1ZS5tYXAoZnVuY3Rpb24gKHBhZ2VMaW5rLCBpKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ3AtcGFnaW5hdG9yLXBhZ2UgcC1wYWdpbmF0b3ItZWxlbWVudCBwLWxpbmsnLCB7XG4gICAgICAgICAgICAncC1wYWdpbmF0b3ItcGFnZS1zdGFydCc6IHBhZ2VMaW5rID09PSBzdGFydFBhZ2VJblZpZXcsXG4gICAgICAgICAgICAncC1wYWdpbmF0b3ItcGFnZS1lbmQnOiBwYWdlTGluayA9PT0gZW5kUGFnZUluVmlldyxcbiAgICAgICAgICAgICdwLWhpZ2hsaWdodCc6IHBhZ2VMaW5rIC0gMSA9PT0gX3RoaXMucHJvcHMucGFnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBlbGVtZW50ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfdGhpcy5vblBhZ2VMaW5rQ2xpY2soZSwgcGFnZUxpbmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHBhZ2VMaW5rLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSaXBwbGUsIG51bGwpKTtcblxuICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub25QYWdlTGlua0NsaWNrKGUsIHBhZ2VMaW5rKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgICAgIHZpZXc6IHtcbiAgICAgICAgICAgICAgICBzdGFydFBhZ2U6IHN0YXJ0UGFnZUluVmlldyAtIDEsXG4gICAgICAgICAgICAgICAgZW5kUGFnZTogZW5kUGFnZUluVmlldyAtIDFcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcGFnZTogcGFnZUxpbmsgLSAxLFxuICAgICAgICAgICAgICBjdXJyZW50UGFnZTogX3RoaXMucHJvcHMucGFnZSxcbiAgICAgICAgICAgICAgdG90YWxQYWdlczogX3RoaXMucHJvcHMucGFnZUNvdW50LFxuICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgICBwcm9wczogX3RoaXMucHJvcHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbGVtZW50ID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudChfdGhpcy5wcm9wcy50ZW1wbGF0ZSwgZGVmYXVsdE9wdGlvbnMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwge1xuICAgICAgICAgICAga2V5OiBwYWdlTGlua1xuICAgICAgICAgIH0sIGVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJwLXBhZ2luYXRvci1wYWdlc1wiXG4gICAgICB9LCBlbGVtZW50cyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFBhZ2VMaW5rcztcbn0oQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KFBhZ2VMaW5rcywgXCJkZWZhdWx0UHJvcHNcIiwge1xuICB2YWx1ZTogbnVsbCxcbiAgcGFnZTogbnVsbCxcbiAgcm93czogbnVsbCxcbiAgcGFnZUNvdW50OiBudWxsLFxuICBsaW5rczogbnVsbCxcbiAgdGVtcGxhdGU6IG51bGxcbn0pO1xuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkMyhEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQzKCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQzKCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBSb3dzUGVyUGFnZURyb3Bkb3duID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSb3dzUGVyUGFnZURyb3Bkb3duLCBfQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyJDMoUm93c1BlclBhZ2VEcm9wZG93bik7XG5cbiAgZnVuY3Rpb24gUm93c1BlclBhZ2VEcm9wZG93bigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm93c1BlclBhZ2VEcm9wZG93bik7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUm93c1BlclBhZ2VEcm9wZG93biwgW3tcbiAgICBrZXk6IFwiaGFzT3B0aW9uc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNPcHRpb25zKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMub3B0aW9ucyAmJiB0aGlzLnByb3BzLm9wdGlvbnMubGVuZ3RoID4gMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBoYXNPcHRpb25zID0gdGhpcy5oYXNPcHRpb25zKCk7XG4gICAgICB2YXIgb3B0aW9ucyA9IGhhc09wdGlvbnMgPyB0aGlzLnByb3BzLm9wdGlvbnMubWFwKGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsYWJlbDogU3RyaW5nKG9wdCksXG4gICAgICAgICAgdmFsdWU6IG9wdFxuICAgICAgICB9O1xuICAgICAgfSkgOiBbXTtcbiAgICAgIHZhciBlbGVtZW50ID0gaGFzT3B0aW9ucyA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICBvbkNoYW5nZTogdGhpcy5wcm9wcy5vbkNoYW5nZSxcbiAgICAgICAgYXBwZW5kVG86IHRoaXMucHJvcHMuYXBwZW5kVG8sXG4gICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICB9KSA6IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnRlbXBsYXRlKSB7XG4gICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLnByb3BzLm9uQ2hhbmdlLFxuICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLnByb3BzLmFwcGVuZFRvLFxuICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnByb3BzLnBhZ2UsXG4gICAgICAgICAgdG90YWxQYWdlczogdGhpcy5wcm9wcy5wYWdlQ291bnQsXG4gICAgICAgICAgdG90YWxSZWNvcmRzOiB0aGlzLnByb3BzLnRvdGFsUmVjb3JkcyxcbiAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYmplY3RVdGlscy5nZXRKU1hFbGVtZW50KHRoaXMucHJvcHMudGVtcGxhdGUsIGRlZmF1bHRPcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJvd3NQZXJQYWdlRHJvcGRvd247XG59KENvbXBvbmVudCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShSb3dzUGVyUGFnZURyb3Bkb3duLCBcImRlZmF1bHRQcm9wc1wiLCB7XG4gIG9wdGlvbnM6IG51bGwsXG4gIHZhbHVlOiBudWxsLFxuICBwYWdlOiBudWxsLFxuICBwYWdlQ291bnQ6IG51bGwsXG4gIHRvdGFsUmVjb3JkczogMCxcbiAgYXBwZW5kVG86IG51bGwsXG4gIG9uQ2hhbmdlOiBudWxsLFxuICB0ZW1wbGF0ZTogbnVsbCxcbiAgZGlzYWJsZWQ6IGZhbHNlXG59KTtcblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyJDIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkMigpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkMigpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgQ3VycmVudFBhZ2VSZXBvcnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEN1cnJlbnRQYWdlUmVwb3J0LCBfQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyJDIoQ3VycmVudFBhZ2VSZXBvcnQpO1xuXG4gIGZ1bmN0aW9uIEN1cnJlbnRQYWdlUmVwb3J0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDdXJyZW50UGFnZVJlcG9ydCk7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ3VycmVudFBhZ2VSZXBvcnQsIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgcmVwb3J0ID0ge1xuICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wcm9wcy5wYWdlICsgMSxcbiAgICAgICAgdG90YWxQYWdlczogdGhpcy5wcm9wcy5wYWdlQ291bnQsXG4gICAgICAgIGZpcnN0OiBNYXRoLm1pbih0aGlzLnByb3BzLmZpcnN0ICsgMSwgdGhpcy5wcm9wcy50b3RhbFJlY29yZHMpLFxuICAgICAgICBsYXN0OiBNYXRoLm1pbih0aGlzLnByb3BzLmZpcnN0ICsgdGhpcy5wcm9wcy5yb3dzLCB0aGlzLnByb3BzLnRvdGFsUmVjb3JkcyksXG4gICAgICAgIHJvd3M6IHRoaXMucHJvcHMucm93cyxcbiAgICAgICAgdG90YWxSZWNvcmRzOiB0aGlzLnByb3BzLnRvdGFsUmVjb3Jkc1xuICAgICAgfTtcbiAgICAgIHZhciB0ZXh0ID0gdGhpcy5wcm9wcy5yZXBvcnRUZW1wbGF0ZS5yZXBsYWNlKFwie2N1cnJlbnRQYWdlfVwiLCByZXBvcnQuY3VycmVudFBhZ2UpLnJlcGxhY2UoXCJ7dG90YWxQYWdlc31cIiwgcmVwb3J0LnRvdGFsUGFnZXMpLnJlcGxhY2UoXCJ7Zmlyc3R9XCIsIHJlcG9ydC5maXJzdCkucmVwbGFjZShcIntsYXN0fVwiLCByZXBvcnQubGFzdCkucmVwbGFjZShcIntyb3dzfVwiLCByZXBvcnQucm93cykucmVwbGFjZShcInt0b3RhbFJlY29yZHN9XCIsIHJlcG9ydC50b3RhbFJlY29yZHMpO1xuICAgICAgdmFyIGVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicC1wYWdpbmF0b3ItY3VycmVudFwiXG4gICAgICB9LCB0ZXh0KTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMudGVtcGxhdGUpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXBvcnQpLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiAncC1wYWdpbmF0b3ItY3VycmVudCcsXG4gICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICBwcm9wczogdGhpcy5wcm9wc1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLnByb3BzLnRlbXBsYXRlLCBkZWZhdWx0T3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDdXJyZW50UGFnZVJlcG9ydDtcbn0oQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KEN1cnJlbnRQYWdlUmVwb3J0LCBcImRlZmF1bHRQcm9wc1wiLCB7XG4gIHBhZ2VDb3VudDogbnVsbCxcbiAgcGFnZTogbnVsbCxcbiAgZmlyc3Q6IG51bGwsXG4gIHJvd3M6IG51bGwsXG4gIHRvdGFsUmVjb3JkczogbnVsbCxcbiAgcmVwb3J0VGVtcGxhdGU6ICcoe2N1cnJlbnRQYWdlfSBvZiB7dG90YWxQYWdlc30pJyxcbiAgdGVtcGxhdGU6IG51bGxcbn0pO1xuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIkMShEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQxKCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCQxKCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbnZhciBKdW1wVG9QYWdlSW5wdXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEp1bXBUb1BhZ2VJbnB1dCwgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlciQxKEp1bXBUb1BhZ2VJbnB1dCk7XG5cbiAgZnVuY3Rpb24gSnVtcFRvUGFnZUlucHV0KHByb3BzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEp1bXBUb1BhZ2VJbnB1dCk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICBfdGhpcy5vbkNoYW5nZSA9IF90aGlzLm9uQ2hhbmdlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhKdW1wVG9QYWdlSW5wdXQsIFt7XG4gICAga2V5OiBcIm9uQ2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMucm93cyAqIChldmVudC52YWx1ZSAtIDEpLCB0aGlzLnByb3BzLnJvd3MpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHZhbHVlID0gdGhpcy5wcm9wcy5wYWdlQ291bnQgPiAwID8gdGhpcy5wcm9wcy5wYWdlICsgMSA6IDA7XG4gICAgICB2YXIgZWxlbWVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2UsXG4gICAgICAgIGNsYXNzTmFtZTogXCJwLXBhZ2luYXRvci1wYWdlLWlucHV0XCIsXG4gICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMudGVtcGxhdGUpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZSxcbiAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBjbGFzc05hbWU6ICdwLXBhZ2luYXRvci1wYWdlLWlucHV0JyxcbiAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYmplY3RVdGlscy5nZXRKU1hFbGVtZW50KHRoaXMucHJvcHMudGVtcGxhdGUsIGRlZmF1bHRPcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEp1bXBUb1BhZ2VJbnB1dDtcbn0oQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KEp1bXBUb1BhZ2VJbnB1dCwgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBwYWdlOiBudWxsLFxuICByb3dzOiBudWxsLFxuICBwYWdlQ291bnQ6IG51bGwsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgdGVtcGxhdGU6IG51bGwsXG4gIG9uQ2hhbmdlOiBudWxsXG59KTtcblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgUGFnaW5hdG9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhQYWdpbmF0b3IsIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUGFnaW5hdG9yKTtcblxuICBmdW5jdGlvbiBQYWdpbmF0b3IocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFnaW5hdG9yKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuICAgIF90aGlzLmNoYW5nZVBhZ2VUb0ZpcnN0ID0gX3RoaXMuY2hhbmdlUGFnZVRvRmlyc3QuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuY2hhbmdlUGFnZVRvUHJldiA9IF90aGlzLmNoYW5nZVBhZ2VUb1ByZXYuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuY2hhbmdlUGFnZVRvTmV4dCA9IF90aGlzLmNoYW5nZVBhZ2VUb05leHQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuY2hhbmdlUGFnZVRvTGFzdCA9IF90aGlzLmNoYW5nZVBhZ2VUb0xhc3QuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMub25Sb3dzQ2hhbmdlID0gX3RoaXMub25Sb3dzQ2hhbmdlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLmNoYW5nZVBhZ2UgPSBfdGhpcy5jaGFuZ2VQYWdlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLm9uUGFnZUxpbmtDbGljayA9IF90aGlzLm9uUGFnZUxpbmtDbGljay5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUGFnaW5hdG9yLCBbe1xuICAgIGtleTogXCJpc0ZpcnN0UGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpcnN0UGFnZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFBhZ2UoKSA9PT0gMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNMYXN0UGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0xhc3RQYWdlKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0UGFnZSgpID09PSB0aGlzLmdldFBhZ2VDb3VudCgpIC0gMTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0UGFnZUNvdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhZ2VDb3VudCgpIHtcbiAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5wcm9wcy50b3RhbFJlY29yZHMgLyB0aGlzLnByb3BzLnJvd3MpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYWxjdWxhdGVQYWdlTGlua0JvdW5kYXJpZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlUGFnZUxpbmtCb3VuZGFyaWVzKCkge1xuICAgICAgdmFyIG51bWJlck9mUGFnZXMgPSB0aGlzLmdldFBhZ2VDb3VudCgpO1xuICAgICAgdmFyIHZpc2libGVQYWdlcyA9IE1hdGgubWluKHRoaXMucHJvcHMucGFnZUxpbmtTaXplLCBudW1iZXJPZlBhZ2VzKTsgLy9jYWxjdWxhdGUgcmFuZ2UsIGtlZXAgY3VycmVudCBpbiBtaWRkbGUgaWYgbmVjZXNzYXJ5XG5cbiAgICAgIHZhciBzdGFydCA9IE1hdGgubWF4KDAsIE1hdGguY2VpbCh0aGlzLmdldFBhZ2UoKSAtIHZpc2libGVQYWdlcyAvIDIpKTtcbiAgICAgIHZhciBlbmQgPSBNYXRoLm1pbihudW1iZXJPZlBhZ2VzIC0gMSwgc3RhcnQgKyB2aXNpYmxlUGFnZXMgLSAxKTsgLy9jaGVjayB3aGVuIGFwcHJvYWNoaW5nIHRvIGxhc3QgcGFnZVxuXG4gICAgICB2YXIgZGVsdGEgPSB0aGlzLnByb3BzLnBhZ2VMaW5rU2l6ZSAtIChlbmQgLSBzdGFydCArIDEpO1xuICAgICAgc3RhcnQgPSBNYXRoLm1heCgwLCBzdGFydCAtIGRlbHRhKTtcbiAgICAgIHJldHVybiBbc3RhcnQsIGVuZF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVBhZ2VMaW5rc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVQYWdlTGlua3MoKSB7XG4gICAgICB2YXIgcGFnZUxpbmtzID0gW107XG4gICAgICB2YXIgYm91bmRhcmllcyA9IHRoaXMuY2FsY3VsYXRlUGFnZUxpbmtCb3VuZGFyaWVzKCk7XG4gICAgICB2YXIgc3RhcnQgPSBib3VuZGFyaWVzWzBdO1xuICAgICAgdmFyIGVuZCA9IGJvdW5kYXJpZXNbMV07XG5cbiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKykge1xuICAgICAgICBwYWdlTGlua3MucHVzaChpICsgMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYWdlTGlua3M7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNoYW5nZVBhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlUGFnZShmaXJzdCwgcm93cykge1xuICAgICAgdmFyIHBjID0gdGhpcy5nZXRQYWdlQ291bnQoKTtcbiAgICAgIHZhciBwID0gTWF0aC5mbG9vcihmaXJzdCAvIHJvd3MpO1xuXG4gICAgICBpZiAocCA+PSAwICYmIHAgPCBwYykge1xuICAgICAgICB2YXIgbmV3UGFnZVN0YXRlID0ge1xuICAgICAgICAgIGZpcnN0OiBmaXJzdCxcbiAgICAgICAgICByb3dzOiByb3dzLFxuICAgICAgICAgIHBhZ2U6IHAsXG4gICAgICAgICAgcGFnZUNvdW50OiBwY1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uUGFnZUNoYW5nZSkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25QYWdlQ2hhbmdlKG5ld1BhZ2VTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0UGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYWdlKCkge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5wcm9wcy5maXJzdCAvIHRoaXMucHJvcHMucm93cyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVtcHR5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVtcHR5KCkge1xuICAgICAgdmFyIHBhZ2VDb3VudCA9IHRoaXMuZ2V0UGFnZUNvdW50KCk7XG4gICAgICByZXR1cm4gcGFnZUNvdW50ID09PSAwO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjaGFuZ2VQYWdlVG9GaXJzdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlVG9GaXJzdChldmVudCkge1xuICAgICAgdGhpcy5jaGFuZ2VQYWdlKDAsIHRoaXMucHJvcHMucm93cyk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjaGFuZ2VQYWdlVG9QcmV2XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVBhZ2VUb1ByZXYoZXZlbnQpIHtcbiAgICAgIHRoaXMuY2hhbmdlUGFnZSh0aGlzLnByb3BzLmZpcnN0IC0gdGhpcy5wcm9wcy5yb3dzLCB0aGlzLnByb3BzLnJvd3MpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25QYWdlTGlua0NsaWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUGFnZUxpbmtDbGljayhldmVudCkge1xuICAgICAgdGhpcy5jaGFuZ2VQYWdlKChldmVudC52YWx1ZSAtIDEpICogdGhpcy5wcm9wcy5yb3dzLCB0aGlzLnByb3BzLnJvd3MpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjaGFuZ2VQYWdlVG9OZXh0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVBhZ2VUb05leHQoZXZlbnQpIHtcbiAgICAgIHRoaXMuY2hhbmdlUGFnZSh0aGlzLnByb3BzLmZpcnN0ICsgdGhpcy5wcm9wcy5yb3dzLCB0aGlzLnByb3BzLnJvd3MpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2hhbmdlUGFnZVRvTGFzdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlVG9MYXN0KGV2ZW50KSB7XG4gICAgICB0aGlzLmNoYW5nZVBhZ2UoKHRoaXMuZ2V0UGFnZUNvdW50KCkgLSAxKSAqIHRoaXMucHJvcHMucm93cywgdGhpcy5wcm9wcy5yb3dzKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUm93c0NoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJvd3NDaGFuZ2UoZXZlbnQpIHtcbiAgICAgIHZhciByb3dzID0gZXZlbnQudmFsdWU7XG4gICAgICB0aGlzLmlzUm93Q2hhbmdlZCA9IHJvd3MgIT09IHRoaXMucHJvcHMucm93cztcbiAgICAgIHRoaXMuY2hhbmdlUGFnZSgwLCByb3dzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMucm93cyAhPT0gcHJldlByb3BzLnJvd3MgJiYgIXRoaXMuaXNSb3dDaGFuZ2VkKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlUGFnZSgwLCB0aGlzLnByb3BzLnJvd3MpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmdldFBhZ2UoKSA+IDAgJiYgcHJldlByb3BzLnRvdGFsUmVjb3JkcyAhPT0gdGhpcy5wcm9wcy50b3RhbFJlY29yZHMgJiYgdGhpcy5wcm9wcy5maXJzdCA+PSB0aGlzLnByb3BzLnRvdGFsUmVjb3Jkcykge1xuICAgICAgICB0aGlzLmNoYW5nZVBhZ2UoKHRoaXMuZ2V0UGFnZUNvdW50KCkgLSAxKSAqIHRoaXMucHJvcHMucm93cywgdGhpcy5wcm9wcy5yb3dzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pc1Jvd0NoYW5nZWQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFbGVtZW50KGtleSwgdGVtcGxhdGUpIHtcbiAgICAgIHZhciBlbGVtZW50O1xuXG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlICdGaXJzdFBhZ2VMaW5rJzpcbiAgICAgICAgICBlbGVtZW50ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmlyc3RQYWdlTGluaywge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZVBhZ2VUb0ZpcnN0LFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuaXNGaXJzdFBhZ2UoKSB8fCB0aGlzLmVtcHR5KCksXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdQcmV2UGFnZUxpbmsnOlxuICAgICAgICAgIGVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQcmV2UGFnZUxpbmssIHtcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5jaGFuZ2VQYWdlVG9QcmV2LFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuaXNGaXJzdFBhZ2UoKSB8fCB0aGlzLmVtcHR5KCksXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdOZXh0UGFnZUxpbmsnOlxuICAgICAgICAgIGVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChOZXh0UGFnZUxpbmssIHtcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5jaGFuZ2VQYWdlVG9OZXh0LFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuaXNMYXN0UGFnZSgpIHx8IHRoaXMuZW1wdHkoKSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0xhc3RQYWdlTGluayc6XG4gICAgICAgICAgZWxlbWVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExhc3RQYWdlTGluaywge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZVBhZ2VUb0xhc3QsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5pc0xhc3RQYWdlKCkgfHwgdGhpcy5lbXB0eSgpLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnUGFnZUxpbmtzJzpcbiAgICAgICAgICBlbGVtZW50ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFnZUxpbmtzLCB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnVwZGF0ZVBhZ2VMaW5rcygpLFxuICAgICAgICAgICAgcGFnZTogdGhpcy5nZXRQYWdlKCksXG4gICAgICAgICAgICByb3dzOiB0aGlzLnByb3BzLnJvd3MsXG4gICAgICAgICAgICBwYWdlQ291bnQ6IHRoaXMuZ2V0UGFnZUNvdW50KCksXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9uUGFnZUxpbmtDbGljayxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ1Jvd3NQZXJQYWdlRHJvcGRvd24nOlxuICAgICAgICAgIGVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3dzUGVyUGFnZURyb3Bkb3duLCB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnJvd3MsXG4gICAgICAgICAgICBwYWdlOiB0aGlzLmdldFBhZ2UoKSxcbiAgICAgICAgICAgIHBhZ2VDb3VudDogdGhpcy5nZXRQYWdlQ291bnQoKSxcbiAgICAgICAgICAgIHRvdGFsUmVjb3JkczogdGhpcy5wcm9wcy50b3RhbFJlY29yZHMsXG4gICAgICAgICAgICBvcHRpb25zOiB0aGlzLnByb3BzLnJvd3NQZXJQYWdlT3B0aW9ucyxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uUm93c0NoYW5nZSxcbiAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLnByb3BzLmRyb3Bkb3duQXBwZW5kVG8sXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5lbXB0eSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQ3VycmVudFBhZ2VSZXBvcnQnOlxuICAgICAgICAgIGVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDdXJyZW50UGFnZVJlcG9ydCwge1xuICAgICAgICAgICAgcmVwb3J0VGVtcGxhdGU6IHRoaXMucHJvcHMuY3VycmVudFBhZ2VSZXBvcnRUZW1wbGF0ZSxcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgcGFnZTogdGhpcy5nZXRQYWdlKCksXG4gICAgICAgICAgICBwYWdlQ291bnQ6IHRoaXMuZ2V0UGFnZUNvdW50KCksXG4gICAgICAgICAgICBmaXJzdDogdGhpcy5wcm9wcy5maXJzdCxcbiAgICAgICAgICAgIHJvd3M6IHRoaXMucHJvcHMucm93cyxcbiAgICAgICAgICAgIHRvdGFsUmVjb3JkczogdGhpcy5wcm9wcy50b3RhbFJlY29yZHMsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdKdW1wVG9QYWdlSW5wdXQnOlxuICAgICAgICAgIGVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChKdW1wVG9QYWdlSW5wdXQsIHtcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgcm93czogdGhpcy5wcm9wcy5yb3dzLFxuICAgICAgICAgICAgcGFnZTogdGhpcy5nZXRQYWdlKCksXG4gICAgICAgICAgICBwYWdlQ291bnQ6IHRoaXMuZ2V0UGFnZUNvdW50KCksXG4gICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5jaGFuZ2VQYWdlLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuZW1wdHkoKSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJFbGVtZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFbGVtZW50cygpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLnByb3BzLnRlbXBsYXRlO1xuXG4gICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgaWYgKF90eXBlb2YodGVtcGxhdGUpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5sYXlvdXQgPyB0ZW1wbGF0ZS5sYXlvdXQuc3BsaXQoJyAnKS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5yZW5kZXJFbGVtZW50KGtleSwgdGVtcGxhdGVba2V5XSk7XG4gICAgICAgICAgfSkgOiBPYmplY3QuZW50cmllcyh0ZW1wbGF0ZSkubWFwKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSxcbiAgICAgICAgICAgICAgICBrZXkgPSBfcmVmMlswXSxcbiAgICAgICAgICAgICAgICBfdGVtcGxhdGUgPSBfcmVmMlsxXTtcblxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5yZW5kZXJFbGVtZW50KGtleSwgX3RlbXBsYXRlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZS5zcGxpdCgnICcpLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlbmRlckVsZW1lbnQodmFsdWUudHJpbSgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmFsd2F5c1Nob3cgJiYgdGhpcy5nZXRQYWdlQ291bnQoKSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKCdwLXBhZ2luYXRvciBwLWNvbXBvbmVudCcsIHRoaXMucHJvcHMuY2xhc3NOYW1lKTtcbiAgICAgICAgdmFyIGxlZnRDb250ZW50ID0gT2JqZWN0VXRpbHMuZ2V0SlNYRWxlbWVudCh0aGlzLnByb3BzLmxlZnRDb250ZW50LCB0aGlzLnByb3BzKTtcbiAgICAgICAgdmFyIHJpZ2h0Q29udGVudCA9IE9iamVjdFV0aWxzLmdldEpTWEVsZW1lbnQodGhpcy5wcm9wcy5yaWdodENvbnRlbnQsIHRoaXMucHJvcHMpO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLnJlbmRlckVsZW1lbnRzKCk7XG4gICAgICAgIHZhciBsZWZ0RWxlbWVudCA9IGxlZnRDb250ZW50ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1wYWdpbmF0b3ItbGVmdC1jb250ZW50XCJcbiAgICAgICAgfSwgbGVmdENvbnRlbnQpO1xuICAgICAgICB2YXIgcmlnaHRFbGVtZW50ID0gcmlnaHRDb250ZW50ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwicC1wYWdpbmF0b3ItcmlnaHQtY29udGVudFwiXG4gICAgICAgIH0sIHJpZ2h0Q29udGVudCk7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6IHRoaXMucHJvcHMuc3R5bGVcbiAgICAgICAgfSwgbGVmdEVsZW1lbnQsIGVsZW1lbnRzLCByaWdodEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQYWdpbmF0b3I7XG59KENvbXBvbmVudCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShQYWdpbmF0b3IsIFwiZGVmYXVsdFByb3BzXCIsIHtcbiAgdG90YWxSZWNvcmRzOiAwLFxuICByb3dzOiAwLFxuICBmaXJzdDogMCxcbiAgcGFnZUxpbmtTaXplOiA1LFxuICByb3dzUGVyUGFnZU9wdGlvbnM6IG51bGwsXG4gIGFsd2F5c1Nob3c6IHRydWUsXG4gIHN0eWxlOiBudWxsLFxuICBjbGFzc05hbWU6IG51bGwsXG4gIHRlbXBsYXRlOiAnRmlyc3RQYWdlTGluayBQcmV2UGFnZUxpbmsgUGFnZUxpbmtzIE5leHRQYWdlTGluayBMYXN0UGFnZUxpbmsgUm93c1BlclBhZ2VEcm9wZG93bicsXG4gIG9uUGFnZUNoYW5nZTogbnVsbCxcbiAgbGVmdENvbnRlbnQ6IG51bGwsXG4gIHJpZ2h0Q29udGVudDogbnVsbCxcbiAgZHJvcGRvd25BcHBlbmRUbzogbnVsbCxcbiAgY3VycmVudFBhZ2VSZXBvcnRUZW1wbGF0ZTogJyh7Y3VycmVudFBhZ2V9IG9mIHt0b3RhbFBhZ2VzfSknXG59KTtcblxuZXhwb3J0IHsgUGFnaW5hdG9yIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/primereact/paginator/paginator.esm.js\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["pages/_app","main"], function() { return __webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fvolumes&absolutePagePath=%2FUsers%2Fphpfreak%2FDevelopment%2Fdockermon-sub%2Fdockermon%2Fdockermon-react%2Fpages%2Fvolumes%2Findex.jsx!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);