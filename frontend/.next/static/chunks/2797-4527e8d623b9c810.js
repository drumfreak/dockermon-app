"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797],{2797:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var n=a(34051),r=a.n(n),s=a(85893),i=a(42670),u=a(11163),c=a(67294),l=a(57333),o=a(99403),d=a(60378),m=a(28565),f=a(27484),p=a(13643),v=a(25617),g=a(40424),h=a(42552),x=a(69868),j=a(91202),b=a(25600),k=a(74420),N=a(58650),y=a(22727),w=a(16270);function S(e,t,a,n,r,s,i){try{var u=e[s](i),c=u.value}catch(l){return void a(l)}u.done?t(c):Promise.resolve(c).then(n,r)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function i(e){S(s,n,r,i,u,"next",e)}function u(e){S(s,n,r,i,u,"throw",e)}i(void 0)}))}}function P(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,n=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,s)).toFixed(n))+" "+r[s]},a=(0,c.useRef)(null),n=(0,c.useRef)(),u=(0,v.v9)((function(e){return e.hosts.activeHost})),l=(0,c.useRef)(u);l.current=u;var d=(0,v.v9)((function(e){return e.images})),S=(0,c.useState)([]),P=S[0],R=S[1],C=(0,c.useState)(""),z=C[0],I=C[1],F=(0,c.useState)(""),H=F[0],E=F[1],L=(0,c.useState)(null),T=L[0],B=L[1];(0,c.useRef)(T).current=T;var D=(0,c.useState)(null),M=D[0],Y=D[1],K=(0,c.useState)({}),A=K[0],G=K[1],V=(0,c.useState)(null),Z=V[0],q=V[1],$=(0,c.useState)(null),O=$[0],U=$[1],J=(0,c.useRef)(O);J.current=O;var Q=(0,c.useState)(null),W=Q[0],X=Q[1];(0,c.useRef)(W).current=W;var ee=(0,c.useState)(null),te=ee[0],ae=ee[1],ne=(0,c.useRef)(te);ne.current=te;var re=(0,c.useState)(null)[0];(0,c.useRef)(re).current=re;var se=(0,c.useState)(!1),ie=se[0],ue=se[1],ce=(0,c.useState)(!0),le=ce[0],oe=ce[1],de=(0,c.useState)(!0),me=de[0],fe=de[1];(0,c.useRef)(me).current=me;var pe=(0,c.useState)(!0),ve=pe[0],ge=pe[1];(0,c.useRef)(ve).current=ve;var he=(0,c.useState)(null),xe=he[0],je=he[1],be=(0,c.useRef)(xe);be.current=xe;var ke=(0,c.useState)(!1),Ne=ke[0],ye=ke[1],we=(0,c.useState)(1),Se=we[0],_e=we[1],Pe=(0,c.useRef)(Se);Pe.current=Se;var Re=(0,c.useState)("Press 'Enter' key to go to this page."),Ce=Re[0],ze=Re[1],Ie=(0,c.useState)(1),Fe=Ie[0],He=Ie[1],Ee=(0,c.useState)(15),Le=Ee[0],Te=Ee[1],Be=(0,c.useRef)(Le);Be.current=Le;var De=(0,c.useState)(0),Me=De[0],Ye=De[1];(0,c.useRef)(Me).current=Me;var Ke=(0,c.useState)([]),Ae=Ke[0],Ge=Ke[1],Ve=(0,c.useRef)(Ae);Ve.current=Ae,(0,c.useEffect)(_(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ze(),Je(),U(e.image),ae(e.imageId),Ne){t.next=7;break}return t.next=7,qe();case 7:Oe(),B([]);case 9:case"end":return t.stop()}}),t)}))),[]),(0,c.useEffect)((function(){Je()}),[d]),(0,c.useEffect)((function(){Ve.current.length>0&&tt()}),[Ae]),(0,c.useEffect)((function(){return function(){if(be.current){var e="image_tags_"+ne.current;be.current.removeListener(e);var t="image_pull_"+ne.current;be.current.removeListener(t)}}}),[]);var Ze=function(){M&&Y(null)};function qe(){return $e.apply(this,arguments)}function $e(){return $e=_(r().mark((function t(){var n,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ne){t.next=2;break}return t.abrupt("return");case 2:return ye(!0),n="image_tags_"+e.imageId,t.next=6,m.L.getSocket();case 6:return(s=t.sent).on(n,(function(e){var t;(oe(!0),"success"===(null===e||void 0===e?void 0:e.status))&&((null===e||void 0===e?void 0:e.data.count)&&Ye(e.data.count),(null===(t=e.data)||void 0===t?void 0:t.tags)&&(X(e.data.tags),We({tags:e.data.tags,image:J.current})))})),s.on("image_pull_"+ne.current,function(){var e=_(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(!1),"success"===t.status&&(E(t.data.status),n=(null===Ve||void 0===Ve?void 0:Ve.current)?Ve.current:"",t.data.progress?(n+=t.data.progress+"\n",Ge(n)):(n+=t.data.status+"\n",Ge(n))),"fail"===t.status&&(console.warn("Fail",t.message),I("Error: "+t.message),E("Fail: "+t.status),a.current.show({severity:"error",summary:"Error",detail:t.message,life:6e3}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),je(s),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)}))),$e.apply(this,arguments)}function Oe(){return Ue.apply(this,arguments)}function Ue(){return(Ue=_(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(!0),be.current.emit("docker",{command:"dockerHubRepositoryTags",repository:ne.current,options:{limit:Be.current,page:Pe.current},callback:"image_tags_"+ne.current});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return Qe.apply(this,arguments)}function Qe(){return(Qe=_(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(d).map((function(e){return d[e]})),R(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=_(r().mark((function e(t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tags){e.next=2;break}return e.abrupt("return");case 2:a=t.tags.map((function(e,a){var n={key:""+a,data:{id:e.id,name:e.name,last_updated:e.last_updated,size:e.full_size,data:e,status:e.tag_status,os:"",install:t.image.namespace+"/"+t.image.name+":"+e.name}};return n.children=e.images.map((function(n,r){return{key:a+"-"+r,data:{id:n.digest,name:n.architecture,last_updated:n.last_pushed,size:n.size,data:n,status:n.status,os:n.os,features:n.features,os_version:n.os_version,install:t.image.namespace+"/"+t.image.name+":"+e.name,platform:n.architecture}}})),n})),q(a),fe(!1),ge(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=function(){var e;return 0===(null===(e=Ve.current)||void 0===e?void 0:e.length)?(0,s.jsx)("div",{}):Ve.current?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"col-12 ml-2 mr-2",children:(0,s.jsx)(h.g,{ref:n,autoCorrect:"off",spellCheck:"false",autoComplete:"false",autoCapitalize:"false",style:{backgroundColor:"black",padding:"4px"},value:Ve.current,onChange:function(){},className:"col-12 p-5",rows:10,cols:30})})}):(0,s.jsx)("div",{})},tt=function(){var e=n.current;if(e){var t=e.scrollHeight-e.clientHeight;e.scrollTop=t>0?t:0}};if(!Z)return(0,s.jsx)("div",{children:"No Results"});var at=function(e){ue(!0),be.current&&be.current.emit("dockerPullImage",{callback:"image_pull_"+ne.current,command:"pullImage",hostId:l.current.id,body:{tag:e.data.install},data:e.data})},nt=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,g.V)({className:"confirm-dialogs",message:a,target:(null===n||void 0===n?void 0:n.currentTarget)?n.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){if("removeImage"===e)st(t)}})},rt=function(e,t,a){(0,g.V)({className:"confirm-dialogs",message:t,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return e(a)}})},st=function(e){var t;be.current.emit("docker",{command:"removeImage",imageId:e.imageId,hostId:null===(t=e.host)||void 0===t?void 0:t.id,callback:"dockerResuls_images"+e.id,hook:"removeImage"})},it=function(e){_e(e.target.value)},ut={layout:"PrevPageLink PageLinks NextPageLink RowsPerPageDropdown CurrentPageReport",PrevPageLink:function(e){return(0,s.jsxs)("button",{type:"button",className:e.className,onClick:e.onClick,disabled:e.disabled,children:[(0,s.jsx)("span",{className:"p-3",children:"Previous"}),(0,s.jsx)(x.H,{})]})},NextPageLink:function(e){return(0,s.jsxs)("button",{type:"button",className:e.className,onClick:e.onClick,disabled:e.disabled,children:[(0,s.jsx)("span",{className:"p-3",children:"Next"}),(0,s.jsx)(x.H,{})]})},PageLinks:function(e){if(e.view.startPage===e.page&&0!==e.view.startPage||e.view.endPage===e.page&&e.page+1!==e.totalPages){var t=(0,p.AK)(e.className,{"p-disabled":!0});return(0,s.jsx)("span",{className:t,style:{userSelect:"none"},children:"..."})}return(0,s.jsxs)("button",{type:"button",className:e.className,onClick:e.onClick,children:[e.page+1,(0,s.jsx)(x.H,{})]})},RowsPerPageDropdown:function(e){return(0,s.jsx)(j.L,{value:e.value,options:[{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:30,value:30}],onChange:e.onChange})},CurrentPageReport:function(e){return(0,s.jsxs)("span",{className:"mx-3",style:{color:"var(--text-color)",userSelect:"none"},children:["Go to ",(0,s.jsx)(b.o,{size:"2",className:"ml-1",value:Se,tooltip:Ce,onKeyDown:function(t){return function(e,t){if("Enter"===e.key){var a=parseInt(Se);if(a<0||a>t.totalPages)ze("Value must be between 1 and ".concat(t.totalPages,"."));else{var n=Se?t.rows*(a-1):0;He(n),ze("Press 'Enter' key to go to this page.")}}}(t,e)},onChange:it})]})}};return me?(0,s.jsx)(i.$,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.F,{ref:a}),!le&&(0,s.jsxs)("div",{className:"card mb-4 mt-0 text-left",children:[(0,s.jsxs)("div",{className:"flex mt-0",children:[(0,s.jsx)("div",{className:"col-10 text-left p-5 m-auto pt-0",children:(0,s.jsx)("h3",{className:"lightblue-color",children:O.name})}),(0,s.jsx)("div",{className:"col-2 text-right p-5 m-auto mt-0 pt-0",children:(0,s.jsx)(o.z,{label:"Hide",onClick:function(){return ue(!1),void oe(!0)},className:"p-button-secondary",icon:"pi pi-eye"})})]}),(0,s.jsxs)("div",{className:"col-12 text-center mb-2",children:[z,(0,s.jsx)("br",{}),H]}),(0,s.jsx)(et,{className:"logScroller"})]}),(0,s.jsx)("div",{children:!ie&&(0,s.jsx)("div",{children:(null===Z||void 0===Z?void 0:Z.length)>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"lightblue-color",children:[O.name," Images"]}),(0,s.jsxs)(w.i,{value:Z,stripedRows:!0,rowHover:!0,showGridlines:!0,expandedKeys:A,onToggle:function(e){return G(e.value)},loading:ve,children:[(0,s.jsx)(N.s,{field:"name",header:"Name",className:"lightblue-color",expander:!0}),(0,s.jsx)(N.s,{field:"last_updated",header:"Last Updated",align:"right",body:function(e){return e.data.last_updated?(0,s.jsx)(s.Fragment,{children:f(e.data.last_updated).format("YYYY-MM-DD HH:mm:ss")}):(0,s.jsx)("div",{})}}),(0,s.jsx)(N.s,{field:"status",header:"Status",align:"center",body:function(e){return e.data.status?(0,s.jsx)(s.Fragment,{children:e.data.status}):(0,s.jsx)("div",{children:e.data.status})}}),(0,s.jsx)(N.s,{field:"size",header:"Size",align:"right",body:function(e){return e.data.size?(0,s.jsx)(s.Fragment,{children:t(e.data.size)}):(0,s.jsx)("div",{children:t(e.data.size)})}}),(0,s.jsx)(N.s,{field:"id",header:"Action",align:"center",body:function(e){var t=P.filter((function(t){if(e.data.install.includes(t.pullTag))return t}));return t.length>0?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{children:(0,s.jsx)(o.z,{label:"Remove",onClick:function(e){nt("removeImage",t[0],"Remove "+t[0].pullTag+"?",e)},className:"p-button-primary",icon:"pi pi-trash"},"btn_234-"+e.data.id)},"btn_23433-"+e.data.id)}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.z,{label:"Pull",onClick:function(){var t;(t=e).data.platform?rt(at,"Pull Image "+t.data.install+" platform: "+t.data.platform+"?",t):rt(at,"Pull Image "+t.data.install+"?",t)},className:"p-button-secondary",icon:"pi pi-plus"})})}})]}),(0,s.jsx)(y.D,{template:ut,first:Fe,rows:Le,totalRecords:Me,onPageChange:function(e){setTimeout((function(){He(e.first),Te(e.rows),_e(e.page+1),Oe()}))}})]})})})]})}function R(e,t,a,n,r,s,i){try{var u=e[s](i),c=u.value}catch(l){return void a(l)}u.done?t(c):Promise.resolve(c).then(n,r)}function C(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function i(e){R(s,n,r,i,u,"next",e)}function u(e){R(s,n,r,i,u,"throw",e)}i(void 0)}))}}function z(e){var t=(0,u.useRouter)(),a=(0,c.useState)(!0),n=a[0],f=a[1],p=(0,c.useRef)(n);p.current=n;var v=(0,c.useState)(!1),g=v[0],h=v[1],x=(0,c.useState)(!1)[0];(0,c.useRef)(x).current=x;var j=(0,c.useState)(!0),b=j[0],k=j[1];(0,c.useRef)(b).current=b;var N=(0,c.useState)(null),y=N[0],w=N[1],S=(0,c.useRef)(y);S.current=y;var _=(0,c.useState)(null),R=_[0],z=_[1],I=(0,c.useRef)(R);I.current=R;var F=(0,c.useState)(null)[0],H=(0,c.useState)(null),E=H[0],L=H[1],T=(0,c.useRef)(E);T.current=E;var B=(0,c.useState)(!1),D=B[0],M=B[1];function Y(){return K.apply(this,arguments)}function K(){return(K=C(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=2;break}return e.abrupt("return");case 2:return M(!0),t="image_details_"+I.current,e.next=6,m.L.getSocket();case 6:return(a=e.sent).on(t,(function(e){"success"===e.status&&e.data&&w(e.data),f(!1)})),L(a),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return G.apply(this,arguments)}function G(){return(G=C(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.current&&f(!0),t="image_details_"+I.current,T.current?T.current.emit("docker",{command:"dockerHubRepositoryDetails",repository:I.current,callback:t}):f(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)(C(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.query.name&&z(t.query.name),e.imageName&&z(e.imageName),!1===e.showTags?k(!1):k(!0),!0===e.showMarkdown?h(!0):h(!1),setTimeout(C(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=3;break}return e.next=3,Y();case 3:A();case 4:case"end":return e.stop()}}),e)}))));case 5:case"end":return a.stop()}}),a)}))),[]),(0,c.useEffect)((function(){return function(){if(T.current){var e="image_details_"+I.current;T.current.removeListener(e)}}}),[]),n?(0,s.jsx)(i.$,{}):F?(0,s.jsxs)("div",{children:["Failed to load image: ",F]}):S.current?I.current?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"col-12 p-0",children:[!e.showPreview&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"surface-0",children:[(0,s.jsxs)("ul",{className:"list-none p-0 m-0 flex align-items-center font-medium mb-3",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"text-500 no-underline line-height-3 cursor-pointer",children:"Docker Hub"})}),(0,s.jsx)("li",{className:"px-2",children:(0,s.jsx)("i",{className:"pi pi-angle-right text-500 line-height-3"})}),(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"text-900 line-height-3",children:y.namespace})})]}),(0,s.jsxs)("div",{className:"flex align-items-start flex-column lg:justify-content-between lg:flex-row",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium text-3xl text-900",children:[y.name," "]}),(0,s.jsxs)("div",{className:"flex align-items-center text-700 flex-wrap",children:[(0,s.jsxs)("div",{className:"mr-5 flex align-items-center mt-3",children:[(0,s.jsx)("i",{className:"pi pi-users mr-2"}),(0,s.jsxs)("span",{children:[(0,s.jsx)(l.Z,{displayType:"text",thousandSeparator:!0,value:y.pull_count})," Pulls"]})]}),(0,s.jsxs)("div",{className:"mr-5 flex align-items-center mt-3",children:[(0,s.jsx)("i",{className:"pi pi-star mr-2"}),(0,s.jsxs)("span",{children:[(0,s.jsx)(l.Z,{displayType:"text",thousandSeparator:!0,value:y.star_count})," Stars"]})]}),(0,s.jsxs)("div",{className:"flex align-items-center mt-3",children:[(0,s.jsx)("i",{className:"pi pi-user mr-2"}),(0,s.jsx)("span",{children:y.hub_user})]})]})]}),(0,s.jsxs)("div",{className:"mt-3 lg:mt-0",children:[(0,s.jsx)(o.z,{label:"Add",className:"p-button-outlined mr-2",icon:"pi pi-user-plus"}),(0,s.jsx)(o.z,{label:"Save",icon:"pi pi-check"})]})]})]}),(0,s.jsx)("div",{className:"col-12 mt-5"})]}),(0,s.jsxs)("div",{className:"card flex",children:[(0,s.jsx)("div",{className:"col-10",children:y.description}),(0,s.jsxs)("div",{className:"col-2 text-right p-0 m-0",children:[!g&&(0,s.jsx)(o.z,{label:"Read More",onClick:function(){return h(!0)},className:"p-button-secondary",icon:"pi pi-eye"}),g&&(0,s.jsx)(o.z,{label:"Hide",onClick:function(){return h(!1)},className:"p-button-secondary",icon:"pi pi-eye"})]})]}),g&&(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(d.D,{children:y.full_description})})}),b&&(0,s.jsx)(P,{tags:y.tags,image:y,imageId:R})]})}):(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsx)("div",{children:"Image not found in Docker Hub"})}}}]);