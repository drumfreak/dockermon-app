"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2723],{2723:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var r=t(34051),o=t.n(r),l=t(85893),a=t(67294),i=t(11163),s=t(41664),u=t(42896),c=t(58650),d=t(45795),f=t(46374),p=t(25617),h=t(28565),m=t(92814),v=t(99403),y=t(25600),b=t(66367),x=t(51436),j=t(40424),g=t(78927),w=t(29318),S=t(57191);function C(e,n,t,r,o,l,a){try{var i=e[l](a),s=i.value}catch(u){return void t(u)}i.done?n(s):Promise.resolve(s).then(r,o)}function N(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var l=e.apply(n,t);function a(e){C(l,r,o,a,i,"next",e)}function i(e){C(l,r,o,a,i,"throw",e)}a(void 0)}))}}function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){k(e,n,t[n])}))}return e}function F(e){var n=(0,i.useRouter)(),t=(0,a.useState)(!0),r=t[0],C=t[1],k=(0,a.useRef)(r);k.current=r;var F=(0,p.v9)((function(e){return e.site})),P=(0,p.v9)((function(e){return e.hosts.hosts})),M=(0,a.useRef)(P);M.current=P;var R=(0,p.v9)((function(e){return e.hosts.activeHost})),I=(0,a.useRef)(R);I.current=R;var E=(0,a.useState)(),T=E[0],U=E[1],_=(0,a.useRef)(T);_.current=T;var A=(0,p.v9)((function(e){return e.containers})),D=(0,a.useState)()[0],B=(0,a.useState)(),H=B[0],L=B[1],z=(0,a.useRef)(H);z.current=H;var G=(0,a.useState)(!1),V=G[0],W=G[1],K=(0,a.useState)(),q=K[0],Q=K[1];(0,a.useRef)(q).current=q;var J=(0,a.useState)(),X=J[0],Y=J[1],Z=(0,a.useRef)(X);Z.current=X;var $=(0,a.useState)(),ee=$[0],ne=$[1],te=(0,a.useState)(""),re=te[0],oe=te[1];function le(){return ae.apply(this,arguments)}function ae(){return(ae=N(o().mark((function t(){var r,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(V){t.next=4;break}return t.next=4,ue();case 4:if(fe(),!(null===(r=n.query)||void 0===r?void 0:r.hostId)){t.next=14;break}if(!M.current){t.next=11;break}return l=M[n.query.hostId],U(l),setTimeout((function(){return ie()})),t.abrupt("return");case 11:return U(e.host),setTimeout((function(){return ie()})),t.abrupt("return");case 14:if(!e.host){t.next=18;break}return U(e.host),setTimeout((function(){return ie()})),t.abrupt("return");case 18:R&&(U(I.current),setTimeout((function(){return ie()})));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ie(){return se.apply(this,arguments)}function se(){return(se=N(o().mark((function e(){var n,t,r,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O({},A),_.current||(null===(n=_.current)||void 0===n?void 0:n.id)){e.next=4;break}return e.abrupt("return");case 4:if(null===(t=A[_.current.id])||void 0===t?void 0:t.containers){e.next=6;break}return e.abrupt("return");case 6:r=A[_.current.id].containers,l=Object.keys(r).map((function(e){return r[e]})),Q(l),C(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return ce.apply(this,arguments)}function ce(){return(ce=N(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V){e.next=2;break}return e.abrupt("return");case 2:return W(!0),e.next=5,h.L.getSocket();case 5:return n=e.sent,L(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=N(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.current.emit("docker",{command:"listContainers",callback:"containersIndexList",hostId:_.current.id}),C(!0),setTimeout((function(){C(!1)}),1e3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.useEffect)(N(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le();case 1:case"end":return e.stop()}}),e)}))),[]),(0,a.useEffect)(N(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le();case 1:case"end":return e.stop()}}),e)}))),[R,A]);var fe=function(){ne({global:{value:null,matchMode:b.a6.CONTAINS},name:{operator:b.pg.AND,constraints:[{value:null,matchMode:b.a6.CONTAINS}]},project:{operator:b.pg.AND,constraints:[{value:null,matchMode:b.a6.CONTAINS}]},containerId:{operator:b.pg.AND,constraints:[{value:null,matchMode:b.a6.CONTAINS}]}})};if(D)return(0,l.jsxs)("div",{children:["Failed to load Container: ",D]});if(!A)return(0,l.jsx)("div",{children:"No Containers."});if(0===A.length)return(0,l.jsx)("div",{children:"No Containers."});var pe=function(e){var n;z.current.emit("docker",{command:"remove",containerId:e.containerId,containerLongId:e.containerLongId,hostId:null===(n=e.host)||void 0===n?void 0:n.id,callback:"dockerResuls_containers"+e.id,hook:"removeContainer"})},he=function(){Z.current.forEach((function(e){!1===e.running&&pe(e)})),Y(null)};return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"col-12 p-0 mt-2 pr-1 grid",children:[(0,l.jsx)("div",{className:"col-6",children:(0,l.jsxs)("h2",{children:[(0,l.jsx)(m.G,{icon:x.MW5,pull:"left",className:"fa-1x lightblue-color mt-0 pt-0",swapOpacity:!0}),"Docker Containers"]})}),(0,l.jsxs)("div",{className:"col-6 text-right pr-0",children:[(0,l.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,l.jsx)("i",{className:"pi pi-search"}),(0,l.jsx)(y.o,{value:re,onChange:function(e){var n=e.target.value,t=O({},ee);t.global.value=n,ne(t),oe(n)},placeholder:"Keyword Search"})]}),(0,l.jsx)(v.z,{label:"Container",className:"p-button-secondary mr-2",icon:"fa fa-plus",onClick:function(){return n.push("/containers/create")}}),(0,l.jsx)("button",{className:"p-button p-component p-button-secondary mt-1 p-2",label:"",onClick:function(){return function(){return de.apply(this,arguments)}()},children:(0,l.jsx)(m.G,{icon:x.lUd,className:"mt-0 p-1",swapOpacity:!0})})]})]}),(0,l.jsxs)(u.w,{value:q,stripedRows:!0,rowHover:!0,showGridlines:!0,selection:X,onSelectionChange:function(e){return function(e){Y(e.value)}(e)},paginator:!0,rows:15,totalRecords:null===q||void 0===q?void 0:q.length,dataKey:"id",rowsPerPageOptions:[10,15,20,50,100,200],sortMode:"multiple",multiSortMeta:[{field:"statsSummary.cpuUsage",order:-1},{field:"statsSummary.memoryUsage",order:-1},{field:"running",order:-1},{field:"name",order:1}],responsiveLayout:"scroll",filters:ee,filterDisplay:"menu",loading:k.current,globalFilterFields:["name","containerId"],children:[(0,l.jsx)(c.s,{sortable:!0,field:"id",header:"Id",body:function(e){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{children:e.id})})})}}),(0,l.jsx)(c.s,{sortable:!0,field:"name",header:"Name",body:function(e){var n,t,r,o,a,i="leftMenu-progressbar "+w.Q.progressBarCPUClasses(e),u=(null===(n=e.statsSummary)||void 0===n?void 0:n.cpuUsage)>0;return u=!!(e.running&&u&&(null===(t=F.userSettings)||void 0===t||null===(r=t.leftMenu)||void 0===r?void 0:r.showCpu)),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{className:"lightblue-color",children:e.name})}),u&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(g.k,{tooltip:(null===(o=e.statsSummary)||void 0===o?void 0:o.cpuUsage)+" % CPU Usage",className:i+" mt-3",value:Number(null===(a=e.statsSummary)||void 0===a?void 0:a.cpuUsage),displayValueTemplate:function(){return(0,l.jsx)("div",{})}})}),!u&&e.running&&(0,l.jsx)("div",{className:"col-12 p-0 m-0 progressbar-blank"})]})},filter:!0,filterPlaceholder:"Search by name",style:{minWidth:"12rem"}}),(0,l.jsx)(c.s,{sortable:!0,field:"project",header:"Project",filter:!0,filterPlaceholder:"Search by project name",style:{minWidth:"12rem"},body:function(e){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{children:e.project})})})}}),(0,l.jsx)(c.s,{sortable:!0,field:"running",header:"Running",align:"center",body:function(e){return e.running?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{children:(0,l.jsx)(f.Q,{className:"p-2 mr-2",status:e.state})})})}):(0,l.jsx)("div",{})}}),(0,l.jsx)(c.s,{sortable:!0,field:"statsSummary.cpuUsage",header:"CPU",align:"center",body:function(e){var n;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsxs)("a",{children:[(null===e||void 0===e||null===(n=e.statsSummary)||void 0===n?void 0:n.cpuUsage)||0,"%"]})})})}}),(0,l.jsx)(c.s,{sortable:!0,field:"status",header:"Status",align:"center",body:function(e){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{children:e.status})})})}}),(0,l.jsx)(c.s,{sortable:!0,field:"statsSummary.memoryUsage",header:"Memory",align:"center",body:function(e){var n,t,r;return(null===(n=e.statsSummary)||void 0===n?void 0:n.memoryUsage)?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{children:(null===(t=e.statsSummary)||void 0===t?void 0:t.memoryUsage)?S.t.bytes((null===e||void 0===e||null===(r=e.statsSummary)||void 0===r?void 0:r.memoryUsage)||0):0})})}):(0,l.jsx)("div",{children:"-"})}}),(0,l.jsx)(c.s,{sortable:!0,field:"dead",header:"Dead",align:"center",body:function(e){return e.dead?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{children:(0,l.jsx)(d.C,{severity:"danger"})})})}):(0,l.jsx)("div",{children:(0,l.jsx)(d.C,{severity:"info"})})}}),(0,l.jsx)(c.s,{sortable:!0,field:"containerId",filter:!0,filterPlaceholder:"Search by docker Id",style:{minWidth:"12rem"},header:"Docker Id",body:function(e){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,l.jsx)("a",{children:e.containerId})})})}}),(0,l.jsx)(c.s,{selectionMode:"multiple",headerStyle:{width:"3em"}})]}),(null===X||void 0===X?void 0:X.length)>0&&(0,l.jsx)("div",{className:"col-12 text-right pr-2",children:(0,l.jsx)(v.z,{className:"mt-2 p-button-warning",label:"Remove Selected",icon:"fa fa-trash",onClick:function(e){return function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,j.V)({className:"confirm-dialogs",message:t,target:(null===r||void 0===r?void 0:r.currentTarget)?r.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){switch(e){case"removeContainer":pe(n);break;case"removeSelected":he()}}})}("removeSelected",null,"Remove Selected Containers?",e)}})})]})})}},58650:function(e,n,t){function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function l(e,n){return l=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},l(e,n)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,n){if(n&&("object"===a(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=s(e);if(n){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return i(this,t)}}t.d(n,{s:function(){return p}});var c,d,f,p=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&l(e,n)}(s,e);var n,t,a,i=u(s);function s(){return o(this,s),i.apply(this,arguments)}return n=s,t&&r(n.prototype,t),a&&r(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}(t(67294).Component);f={columnKey:null,field:null,sortField:null,filterField:null,exportField:null,header:null,body:null,footer:null,sortable:!1,sortableDisabled:!1,sortFunction:null,dataType:"text",filter:!1,filterMatchMode:null,filterPlaceholder:null,filterType:"text",filterMaxLength:null,filterElement:null,filterFunction:null,filterHeaderStyle:null,filterHeaderClassName:null,showFilterMenu:!0,showFilterOperator:!0,showClearButton:!0,showApplyButton:!0,showFilterMatchModes:!0,showFilterMenuOptions:!0,showAddButton:!0,filterMatchModeOptions:null,maxConstraints:2,filterMenuClassName:null,filterMenuStyle:null,align:null,alignHeader:null,alignFrozen:"left",hidden:!1,onFilterClear:null,onFilterApplyClick:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,filterClear:null,filterApply:null,filterHeader:null,filterFooter:null,style:null,className:null,headerStyle:null,headerClassName:null,bodyStyle:null,bodyClassName:null,footerStyle:null,footerClassName:null,expander:!1,frozen:!1,selectionMode:null,colSpan:null,rowSpan:null,editor:null,cellEditValidator:null,cellEditValidatorEvent:"click",onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditInit:null,onCellEditComplete:null,onCellEditCancel:null,excludeGlobalFilter:!1,rowReorder:!1,rowReorderIcon:"pi pi-bars",rowEditor:!1,exportable:!0,reorderable:!0},(d="defaultProps")in(c=p)?Object.defineProperty(c,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[d]=f}}]);