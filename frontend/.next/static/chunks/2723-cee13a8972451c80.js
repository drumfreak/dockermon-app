"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2723],{2723:function(e,n,r){r.r(n),r.d(n,{default:function(){return O}});var t=r(34051),a=r.n(t),i=r(85893),s=r(67294),o=r(11163),c=r(41664),u=r(42896),l=r(58650),d=r(45795),f=r(46374),h=r(25617),m=r(28565),p=r(92814),v=r(99403),x=r(25600),j=r(66367),g=r(51436),b=r(40424),y=r(78927),S=r(29318),k=r(57191);function w(e,n,r,t,a,i,s){try{var o=e[i](s),c=o.value}catch(u){return void r(u)}o.done?n(c):Promise.resolve(c).then(t,a)}function N(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var i=e.apply(n,r);function s(e){w(i,t,a,s,o,"next",e)}function o(e){w(i,t,a,s,o,"throw",e)}s(void 0)}))}}function C(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){C(e,n,r[n])}))}return e}function O(e){var n=(0,o.useRouter)(),r=(0,s.useState)(!0),t=r[0],w=r[1],C=(0,s.useRef)(t);C.current=t;var O=(0,h.v9)((function(e){return e.site})),U=(0,h.v9)((function(e){return e.hosts.hosts})),P=(0,s.useRef)(U);P.current=U;var R=(0,h.v9)((function(e){return e.hosts.activeHost})),F=(0,s.useRef)(R);F.current=R;var T=(0,s.useState)(),M=T[0],D=T[1],A=(0,s.useRef)(M);A.current=M;var E=(0,h.v9)((function(e){return e.containers})),L=(0,s.useState)()[0],_=(0,s.useState)(),W=_[0],G=_[1],q=(0,s.useRef)(W);q.current=W;var z=(0,s.useState)(!1),H=z[0],K=z[1],Q=(0,s.useState)(),V=Q[0],B=Q[1];(0,s.useRef)(V).current=V;var J=(0,s.useState)(),X=J[0],Y=J[1],Z=(0,s.useRef)(X);Z.current=X;var $=(0,s.useState)(),ee=$[0],ne=$[1],re=(0,s.useState)(""),te=re[0],ae=re[1];function ie(){return se.apply(this,arguments)}function se(){return(se=N(a().mark((function r(){var t,i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(H){r.next=4;break}return r.next=4,ue();case 4:if(fe(),!(null===(t=n.query)||void 0===t?void 0:t.hostId)){r.next=14;break}if(!P.current){r.next=11;break}return i=P[n.query.hostId],D(i),setTimeout((function(){return oe()})),r.abrupt("return");case 11:return D(e.host),setTimeout((function(){return oe()})),r.abrupt("return");case 14:if(!e.host){r.next=18;break}return D(e.host),setTimeout((function(){return oe()})),r.abrupt("return");case 18:R&&(D(F.current),setTimeout((function(){return oe()})));case 19:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function oe(){return ce.apply(this,arguments)}function ce(){return(ce=N(a().mark((function e(){var n,r,t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=I({},E),A.current||(null===(n=A.current)||void 0===n?void 0:n.id)){e.next=4;break}return e.abrupt("return");case 4:if(null===(r=E[A.current.id])||void 0===r?void 0:r.containers){e.next=6;break}return e.abrupt("return");case 6:t=E[A.current.id].containers,i=Object.keys(t).map((function(e){return t[e]})),B(i),w(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return le.apply(this,arguments)}function le(){return(le=N(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=2;break}return e.abrupt("return");case 2:return K(!0),e.next=5,m.L.getSocket();case 5:return n=e.sent,G(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=N(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.current.emit("docker",{command:"listContainers",callback:"containersIndexList",hostId:A.current.id}),w(!0),setTimeout((function(){w(!1)}),1e3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,s.useEffect)(N(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie();case 1:case"end":return e.stop()}}),e)}))),[]),(0,s.useEffect)(N(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie();case 1:case"end":return e.stop()}}),e)}))),[R,E]);var fe=function(){ne({global:{value:null,matchMode:j.a6.CONTAINS},name:{operator:j.pg.AND,constraints:[{value:null,matchMode:j.a6.CONTAINS}]},project:{operator:j.pg.AND,constraints:[{value:null,matchMode:j.a6.CONTAINS}]},containerId:{operator:j.pg.AND,constraints:[{value:null,matchMode:j.a6.CONTAINS}]}})};if(L)return(0,i.jsxs)("div",{children:["Failed to load Container: ",L]});if(!E)return(0,i.jsx)("div",{children:"No Containers."});if(0===E.length)return(0,i.jsx)("div",{children:"No Containers."});var he=function(e){var n;q.current.emit("docker",{command:"remove",containerId:e.containerId,containerLongId:e.containerLongId,hostId:null===(n=e.host)||void 0===n?void 0:n.id,callback:"dockerResuls_containers"+e.id,hook:"removeContainer"})},me=function(){Z.current.forEach((function(e){!1===e.running&&he(e)})),Y(null)};return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"col-12 p-0 mt-2 pr-1 grid",children:[(0,i.jsx)("div",{className:"col-6",children:(0,i.jsxs)("h2",{children:[(0,i.jsx)(p.G,{icon:g.MW5,pull:"left",className:"fa-1x lightblue-color mt-0 pt-0",swapOpacity:!0}),"Docker Containers"]})}),(0,i.jsxs)("div",{className:"col-6 text-right pr-0",children:[(0,i.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,i.jsx)("i",{className:"pi pi-search"}),(0,i.jsx)(x.o,{value:te,onChange:function(e){var n=e.target.value,r=I({},ee);r.global.value=n,ne(r),ae(n)},placeholder:"Keyword Search"})]}),(0,i.jsx)(v.z,{label:"Container",className:"p-button-secondary mr-2",icon:"fa fa-plus",onClick:function(){return n.push("/containers/create")}}),(0,i.jsx)("button",{className:"p-button p-component p-button-secondary mt-1 p-2",label:"",onClick:function(){return function(){return de.apply(this,arguments)}()},children:(0,i.jsx)(p.G,{icon:g.lUd,className:"mt-0 p-1",swapOpacity:!0})})]})]}),(0,i.jsxs)(u.w,{value:V,stripedRows:!0,rowHover:!0,showGridlines:!0,selection:X,onSelectionChange:function(e){return function(e){Y(e.value)}(e)},paginator:!0,rows:15,totalRecords:null===V||void 0===V?void 0:V.length,dataKey:"id",rowsPerPageOptions:[10,15,20,50,100,200],sortMode:"multiple",multiSortMeta:[{field:"statsSummary.cpuUsage",order:-1},{field:"statsSummary.memoryUsage",order:-1},{field:"running",order:-1},{field:"name",order:1}],responsiveLayout:"scroll",filters:ee,filterDisplay:"menu",loading:C.current,globalFilterFields:["name","containerId"],children:[(0,i.jsx)(l.s,{sortable:!0,field:"id",header:"Id",body:function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.id})})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"name",header:"Name",body:function(e){var n,r,t,a,s,o="leftMenu-progressbar "+S.Q.progressBarCPUClasses(e),u=(null===(n=e.statsSummary)||void 0===n?void 0:n.cpuUsage)>0;return u=!!(e.running&&u&&(null===(r=O.userSettings)||void 0===r||null===(t=r.leftMenu)||void 0===t?void 0:t.showCpu)),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{className:"lightblue-color",children:e.name})}),u&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.k,{tooltip:(null===(a=e.statsSummary)||void 0===a?void 0:a.cpuUsage)+" % CPU Usage",className:o+" mt-3",value:Number(null===(s=e.statsSummary)||void 0===s?void 0:s.cpuUsage),displayValueTemplate:function(){return(0,i.jsx)("div",{})}})}),!u&&e.running&&(0,i.jsx)("div",{className:"col-12 p-0 m-0 progressbar-blank"})]})},filter:!0,filterPlaceholder:"Search by name",style:{minWidth:"12rem"}}),(0,i.jsx)(l.s,{sortable:!0,field:"project",header:"Project",filter:!0,filterPlaceholder:"Search by project name",style:{minWidth:"12rem"},body:function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.project})})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"running",header:"Running",align:"center",body:function(e){return e.running?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:(0,i.jsx)(f.Q,{className:"p-2 mr-2",status:e.state})})})}):(0,i.jsx)("div",{})}}),(0,i.jsx)(l.s,{sortable:!0,field:"statsSummary.cpuUsage",header:"CPU",align:"center",body:function(e){var n;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsxs)("a",{children:[(null===e||void 0===e||null===(n=e.statsSummary)||void 0===n?void 0:n.cpuUsage)||0,"%"]})})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"status",header:"Status",align:"center",body:function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.status})})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"statsSummary.memoryUsage",header:"Memory",align:"center",body:function(e){var n,r,t;return(null===(n=e.statsSummary)||void 0===n?void 0:n.memoryUsage)?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:(null===(r=e.statsSummary)||void 0===r?void 0:r.memoryUsage)?k.t.bytes((null===e||void 0===e||null===(t=e.statsSummary)||void 0===t?void 0:t.memoryUsage)||0):0})})}):(0,i.jsx)("div",{children:"-"})}}),(0,i.jsx)(l.s,{sortable:!0,field:"dead",header:"Dead",align:"center",body:function(e){return e.dead?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:(0,i.jsx)(d.C,{severity:"danger"})})})}):(0,i.jsx)("div",{children:(0,i.jsx)(d.C,{severity:"info"})})}}),(0,i.jsx)(l.s,{sortable:!0,field:"containerId",filter:!0,filterPlaceholder:"Search by docker Id",style:{minWidth:"12rem"},header:"Docker Id",body:function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.default,{href:"/containers/[id]",as:"/containers/".concat(e.id),children:(0,i.jsx)("a",{children:e.containerId})})})}}),(0,i.jsx)(l.s,{selectionMode:"multiple",headerStyle:{width:"3em"}})]}),(null===X||void 0===X?void 0:X.length)>0&&(0,i.jsx)("div",{className:"col-12 text-right pr-2",children:(0,i.jsx)(v.z,{className:"mt-2 p-button-warning",label:"Remove Selected",icon:"fa fa-trash",onClick:function(e){return function(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,b.V)({className:"confirm-dialogs",message:r,target:(null===t||void 0===t?void 0:t.currentTarget)?t.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){switch(e){case"removeContainer":he(n);break;case"removeSelected":me()}}})}("removeSelected",null,"Remove Selected Containers?",e)}})})]})})}}}]);