"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797],{2797:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var n=a(34051),r=a.n(n),s=a(85893),i=a(42670),u=a(11163),c=a(67294),l=a(57333),o=a(99403),d=a(60378),m=a(28565),f=a(27484),p=a(13643),v=a(25617),h=a(40424),g=a(12199),x=a(42552),j=a(69868),b=a(91202),k=a(25600),N=a(74420),y=a(58650),w=a(22727),S=a(16270);function _(e,t,a,n,r,s,i){try{var u=e[s](i),c=u.value}catch(l){return void a(l)}u.done?t(c):Promise.resolve(c).then(n,r)}function P(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function i(e){_(s,n,r,i,u,"next",e)}function u(e){_(s,n,r,i,u,"throw",e)}i(void 0)}))}}function R(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,n=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,s)).toFixed(n))+" "+r[s]},a=(0,c.useRef)(null),n=(0,c.useRef)(),u=(0,v.v9)((function(e){return e.hosts.activeHost})),l=(0,c.useRef)(u);l.current=u;var d=(0,v.v9)((function(e){return e.images})),_=(0,c.useState)([]),R=_[0],C=_[1],z=(0,c.useState)(""),I=z[0],F=z[1],H=(0,c.useState)(""),E=H[0],L=H[1],T=(0,c.useState)(null),B=T[0],D=T[1];(0,c.useRef)(B).current=B;var M=(0,c.useState)(null),Y=M[0],K=M[1],A=(0,c.useState)({}),G=A[0],Z=A[1],q=(0,c.useState)(null),V=q[0],$=q[1],O=(0,c.useState)(null),U=O[0],J=O[1],Q=(0,c.useRef)(U);Q.current=U;var W=(0,c.useState)(null),X=W[0],ee=W[1];(0,c.useRef)(X).current=X;var te=(0,c.useState)(null),ae=te[0],ne=te[1],re=(0,c.useRef)(ae);re.current=ae;var se=(0,c.useState)(null)[0];(0,c.useRef)(se).current=se;var ie=(0,c.useState)(!1),ue=ie[0],ce=ie[1],le=(0,c.useState)(!0),oe=le[0],de=le[1],me=(0,c.useState)(!0),fe=me[0],pe=me[1];(0,c.useRef)(fe).current=fe;var ve=(0,c.useState)(!0),he=ve[0],ge=ve[1];(0,c.useRef)(he).current=he;var xe=(0,c.useState)(null),je=xe[0],be=xe[1],ke=(0,c.useRef)(je);ke.current=je;var Ne=(0,c.useState)(!1),ye=Ne[0],we=Ne[1],Se=(0,c.useState)(1),_e=Se[0],Pe=Se[1],Re=(0,c.useRef)(_e);Re.current=_e;var Ce=(0,c.useState)("Press 'Enter' key to go to this page."),ze=Ce[0],Ie=Ce[1],Fe=(0,c.useState)(1),He=Fe[0],Ee=Fe[1],Le=(0,c.useState)(15),Te=Le[0],Be=Le[1],De=(0,c.useRef)(Te);De.current=Te;var Me=(0,c.useState)(0),Ye=Me[0],Ke=Me[1];(0,c.useRef)(Ye).current=Ye;var Ae=(0,c.useState)([]),Ge=Ae[0],Ze=Ae[1],qe=(0,c.useRef)(Ge);qe.current=Ge,(0,c.useEffect)(P(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ve(),Qe(),J(e.image),ne(e.imageId),ye){t.next=7;break}return t.next=7,$e();case 7:Ue(),D([]);case 9:case"end":return t.stop()}}),t)}))),[]),(0,c.useEffect)((function(){Qe()}),[d]),(0,c.useEffect)((function(){qe.current.length>0&&at()}),[Ge]),(0,c.useEffect)((function(){return function(){if(ke.current){var e="image_tags_"+re.current;ke.current.removeListener(e);var t="image_pull_"+re.current;ke.current.removeListener(t)}}}),[]);var Ve=function(){Y&&K(null)};function $e(){return Oe.apply(this,arguments)}function Oe(){return Oe=P(r().mark((function t(){var n,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ye){t.next=2;break}return t.abrupt("return");case 2:return we(!0),n="image_tags_"+e.imageId,t.next=6,m.L.getSocket();case 6:return(s=t.sent).on(n,(function(e){var t;(de(!0),"success"===(null===e||void 0===e?void 0:e.status))&&((null===e||void 0===e?void 0:e.data.count)&&Ke(e.data.count),(null===(t=e.data)||void 0===t?void 0:t.tags)&&(ee(e.data.tags),Xe({tags:e.data.tags,image:Q.current})))})),s.on("image_pull_"+re.current,function(){var e=P(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de(!1),"success"===t.status&&(L(t.data.status),n=(null===qe||void 0===qe?void 0:qe.current)?qe.current:"",t.data.progress?(n+=t.data.progress+"\n",Ze(n)):(n+=t.data.status+"\n",Ze(n))),"fail"===t.status&&(console.warn("Fail",t.message),F("Error: "+t.message),L("Fail: "+t.status),a.current.show({severity:"error",summary:"Error",detail:t.message,life:6e3}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),be(s),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)}))),Oe.apply(this,arguments)}function Ue(){return Je.apply(this,arguments)}function Je(){return(Je=P(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(!0),ke.current.emit("docker",{command:"dockerHubRepositoryTags",repository:re.current,options:{limit:De.current,page:Re.current},callback:"image_tags_"+re.current});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return We.apply(this,arguments)}function We(){return(We=P(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(d).map((function(e){return d[e]})),C(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return et.apply(this,arguments)}function et(){return(et=P(r().mark((function e(t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tags){e.next=2;break}return e.abrupt("return");case 2:a=t.tags.map((function(e,a){var n={key:""+a,data:{id:e.id,name:e.name,last_updated:e.last_updated,size:e.full_size,data:e,status:e.tag_status,os:"",install:t.image.namespace+"/"+t.image.name+":"+e.name}};return n.children=e.images.map((function(n,r){return{key:a+"-"+r,data:{id:n.digest,name:n.architecture,last_updated:n.last_pushed,size:n.size,data:n,status:n.status,os:n.os,features:n.features,os_version:n.os_version,install:t.image.namespace+"/"+t.image.name+":"+e.name,platform:n.architecture}}})),n})),$(a),pe(!1),ge(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tt=function(){var e;return 0===(null===(e=qe.current)||void 0===e?void 0:e.length)?(0,s.jsx)("div",{}):qe.current?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"col-12 ml-2 mr-2",children:(0,s.jsx)(x.g,{ref:n,autoCorrect:"off",spellCheck:"false",autoComplete:"false",autoCapitalize:"false",style:{backgroundColor:"black",padding:"4px"},value:qe.current,onChange:function(){},className:"col-12 p-5",rows:10,cols:30})})}):(0,s.jsx)("div",{})},at=function(){var e=n.current;if(e){var t=e.scrollHeight-e.clientHeight;e.scrollTop=t>0?t:0}};if(!V)return(0,s.jsx)("div",{children:"No Results"});var nt=function(e){ce(!0),ke.current&&ke.current.emit("dockerPullImage",{callback:"image_pull_"+re.current,command:"pullImage",hostId:l.current.id,body:{tag:e.data.install},data:e.data})},rt=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,g.w)({message:a,target:(null===n||void 0===n?void 0:n.currentTarget)?n.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){if("removeImage"===e)it(t)}})},st=function(e,t,a){(0,h.V)({message:t,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return e(a)}})},it=function(e){var t;ke.current.emit("docker",{command:"removeImage",imageId:e.imageId,hostId:null===(t=e.host)||void 0===t?void 0:t.id,callback:"dockerResuls_images"+e.id,hook:"removeImage"})},ut=function(e){Pe(e.target.value)},ct={layout:"PrevPageLink PageLinks NextPageLink RowsPerPageDropdown CurrentPageReport",PrevPageLink:function(e){return(0,s.jsxs)("button",{type:"button",className:e.className,onClick:e.onClick,disabled:e.disabled,children:[(0,s.jsx)("span",{className:"p-3",children:"Previous"}),(0,s.jsx)(j.H,{})]})},NextPageLink:function(e){return(0,s.jsxs)("button",{type:"button",className:e.className,onClick:e.onClick,disabled:e.disabled,children:[(0,s.jsx)("span",{className:"p-3",children:"Next"}),(0,s.jsx)(j.H,{})]})},PageLinks:function(e){if(e.view.startPage===e.page&&0!==e.view.startPage||e.view.endPage===e.page&&e.page+1!==e.totalPages){var t=(0,p.AK)(e.className,{"p-disabled":!0});return(0,s.jsx)("span",{className:t,style:{userSelect:"none"},children:"..."})}return(0,s.jsxs)("button",{type:"button",className:e.className,onClick:e.onClick,children:[e.page+1,(0,s.jsx)(j.H,{})]})},RowsPerPageDropdown:function(e){return(0,s.jsx)(b.L,{value:e.value,options:[{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:30,value:30}],onChange:e.onChange})},CurrentPageReport:function(e){return(0,s.jsxs)("span",{className:"mx-3",style:{color:"var(--text-color)",userSelect:"none"},children:["Go to ",(0,s.jsx)(k.o,{size:"2",className:"ml-1",value:_e,tooltip:ze,onKeyDown:function(t){return function(e,t){if("Enter"===e.key){var a=parseInt(_e);if(a<0||a>t.totalPages)Ie("Value must be between 1 and ".concat(t.totalPages,"."));else{var n=_e?t.rows*(a-1):0;Ee(n),Ie("Press 'Enter' key to go to this page.")}}}(t,e)},onChange:ut})]})}};return fe?(0,s.jsx)(i.$,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.F,{ref:a}),!oe&&(0,s.jsxs)("div",{className:"card mb-4 mt-0 text-left",children:[(0,s.jsxs)("div",{className:"flex mt-0",children:[(0,s.jsx)("div",{className:"col-10 text-left p-5 m-auto pt-0",children:(0,s.jsx)("h3",{className:"lightblue-color",children:U.name})}),(0,s.jsx)("div",{className:"col-2 text-right p-5 m-auto mt-0 pt-0",children:(0,s.jsx)(o.z,{label:"Hide",onClick:function(){return ce(!1),void de(!0)},className:"p-button-secondary",icon:"pi pi-eye"})})]}),(0,s.jsxs)("div",{className:"col-12 text-center mb-2",children:[I,(0,s.jsx)("br",{}),E]}),(0,s.jsx)(tt,{className:"logScroller"})]}),(0,s.jsx)("div",{children:!ue&&(0,s.jsx)("div",{children:(null===V||void 0===V?void 0:V.length)>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"lightblue-color",children:[U.name," Images"]}),(0,s.jsxs)(S.i,{value:V,stripedRows:!0,rowHover:!0,showGridlines:!0,expandedKeys:G,onToggle:function(e){return Z(e.value)},loading:he,children:[(0,s.jsx)(y.s,{field:"name",header:"Name",className:"lightblue-color",expander:!0}),(0,s.jsx)(y.s,{field:"last_updated",header:"Last Updated",align:"right",body:function(e){return e.data.last_updated?(0,s.jsx)(s.Fragment,{children:f(e.data.last_updated).format("YYYY-MM-DD HH:mm:ss")}):(0,s.jsx)("div",{})}}),(0,s.jsx)(y.s,{field:"status",header:"Status",align:"center",body:function(e){return e.data.status?(0,s.jsx)(s.Fragment,{children:e.data.status}):(0,s.jsx)("div",{children:e.data.status})}}),(0,s.jsx)(y.s,{field:"size",header:"Size",align:"right",body:function(e){return e.data.size?(0,s.jsx)(s.Fragment,{children:t(e.data.size)}):(0,s.jsx)("div",{children:t(e.data.size)})}}),(0,s.jsx)(y.s,{field:"id",header:"Action",align:"center",body:function(e){var t=R.filter((function(t){if(e.data.install.includes(t.pullTag))return t}));return t.length>0?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{children:(0,s.jsx)(o.z,{label:"Remove",onClick:function(e){rt("removeImage",t[0],"Remove "+t[0].pullTag+"?",e)},className:"p-button-primary",icon:"pi pi-trash"},"btn_234-"+e.data.id)},"btn_23433-"+e.data.id)}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.z,{label:"Pull",onClick:function(){var t;(t=e).data.platform?st(nt,"Pull Image "+t.data.install+" platform: "+t.data.platform+"?",t):st(nt,"Pull Image "+t.data.install+"?",t)},className:"p-button-secondary",icon:"pi pi-plus"})})}})]}),(0,s.jsx)(w.D,{template:ct,first:He,rows:Te,totalRecords:Ye,onPageChange:function(e){setTimeout((function(){Ee(e.first),Be(e.rows),Pe(e.page+1),Ue()}))}})]})})})]})}function C(e,t,a,n,r,s,i){try{var u=e[s](i),c=u.value}catch(l){return void a(l)}u.done?t(c):Promise.resolve(c).then(n,r)}function z(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function i(e){C(s,n,r,i,u,"next",e)}function u(e){C(s,n,r,i,u,"throw",e)}i(void 0)}))}}function I(e){var t=(0,u.useRouter)(),a=(0,c.useState)(!0),n=a[0],f=a[1],p=(0,c.useRef)(n);p.current=n;var v=(0,c.useState)(!1),h=v[0],g=v[1],x=(0,c.useState)(!1)[0];(0,c.useRef)(x).current=x;var j=(0,c.useState)(!0),b=j[0],k=j[1];(0,c.useRef)(b).current=b;var N=(0,c.useState)(null),y=N[0],w=N[1],S=(0,c.useRef)(y);S.current=y;var _=(0,c.useState)(null),P=_[0],C=_[1],I=(0,c.useRef)(P);I.current=P;var F=(0,c.useState)(null)[0],H=(0,c.useState)(null),E=H[0],L=H[1],T=(0,c.useRef)(E);T.current=E;var B=(0,c.useState)(!1),D=B[0],M=B[1];function Y(){return K.apply(this,arguments)}function K(){return(K=z(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=2;break}return e.abrupt("return");case 2:return M(!0),t="image_details_"+I.current,e.next=6,m.L.getSocket();case 6:return(a=e.sent).on(t,(function(e){"success"===e.status&&e.data&&w(e.data),f(!1)})),L(a),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return G.apply(this,arguments)}function G(){return(G=z(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.current&&f(!0),t="image_details_"+I.current,T.current?T.current.emit("docker",{command:"dockerHubRepositoryDetails",repository:I.current,callback:t}):f(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)(z(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.query.name&&C(t.query.name),e.imageName&&C(e.imageName),!1===e.showTags?k(!1):k(!0),!0===e.showMarkdown?g(!0):g(!1),setTimeout(z(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=3;break}return e.next=3,Y();case 3:A();case 4:case"end":return e.stop()}}),e)}))));case 5:case"end":return a.stop()}}),a)}))),[]),(0,c.useEffect)((function(){return function(){if(T.current){var e="image_details_"+I.current;T.current.removeListener(e)}}}),[]),n?(0,s.jsx)(i.$,{}):F?(0,s.jsxs)("div",{children:["Failed to load image: ",F]}):S.current?I.current?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"col-12 p-0",children:[!e.showPreview&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"surface-0",children:[(0,s.jsxs)("ul",{className:"list-none p-0 m-0 flex align-items-center font-medium mb-3",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"text-500 no-underline line-height-3 cursor-pointer",children:"Docker Hub"})}),(0,s.jsx)("li",{className:"px-2",children:(0,s.jsx)("i",{className:"pi pi-angle-right text-500 line-height-3"})}),(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"text-900 line-height-3",children:y.namespace})})]}),(0,s.jsxs)("div",{className:"flex align-items-start flex-column lg:justify-content-between lg:flex-row",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium text-3xl text-900",children:[y.name," "]}),(0,s.jsxs)("div",{className:"flex align-items-center text-700 flex-wrap",children:[(0,s.jsxs)("div",{className:"mr-5 flex align-items-center mt-3",children:[(0,s.jsx)("i",{className:"pi pi-users mr-2"}),(0,s.jsxs)("span",{children:[(0,s.jsx)(l.Z,{displayType:"text",thousandSeparator:!0,value:y.pull_count})," Pulls"]})]}),(0,s.jsxs)("div",{className:"mr-5 flex align-items-center mt-3",children:[(0,s.jsx)("i",{className:"pi pi-star mr-2"}),(0,s.jsxs)("span",{children:[(0,s.jsx)(l.Z,{displayType:"text",thousandSeparator:!0,value:y.star_count})," Stars"]})]}),(0,s.jsxs)("div",{className:"flex align-items-center mt-3",children:[(0,s.jsx)("i",{className:"pi pi-user mr-2"}),(0,s.jsx)("span",{children:y.hub_user})]})]})]}),(0,s.jsxs)("div",{className:"mt-3 lg:mt-0",children:[(0,s.jsx)(o.z,{label:"Add",className:"p-button-outlined mr-2",icon:"pi pi-user-plus"}),(0,s.jsx)(o.z,{label:"Save",icon:"pi pi-check"})]})]})]}),(0,s.jsx)("div",{className:"col-12 mt-5"})]}),(0,s.jsxs)("div",{className:"card flex",children:[(0,s.jsx)("div",{className:"col-10",children:y.description}),(0,s.jsxs)("div",{className:"col-2 text-right p-0 m-0",children:[!h&&(0,s.jsx)(o.z,{label:"Read More",onClick:function(){return g(!0)},className:"p-button-secondary",icon:"pi pi-eye"}),h&&(0,s.jsx)(o.z,{label:"Hide",onClick:function(){return g(!1)},className:"p-button-secondary",icon:"pi pi-eye"})]})]}),h&&(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(d.D,{children:y.full_description})})}),b&&(0,s.jsx)(R,{tags:y.tags,image:y,imageId:P})]})}):(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsx)("div",{children:"Image not found in Docker Hub"})}}}]);