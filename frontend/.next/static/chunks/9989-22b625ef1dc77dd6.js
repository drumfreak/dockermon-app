"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9989],{79989:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(34051),l=n.n(r),o=n(85893),a=n(67294),i=n(11163),u=n(41664),s=n(42896),c=n(58650),f=n(45795),d=n(25617),p=n(28565),h=n(57191),m=n(99403),b=n(40424),v=n(92814),g=n(66367),y=n(25600),x=n(51436);function j(e,t,n,r,l,o,a){try{var i=e[o](a),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,l)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function a(e){j(o,r,l,a,i,"next",e)}function i(e){j(o,r,l,a,i,"throw",e)}a(void 0)}))}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function C(e){var t=(0,i.useRouter)(),n=(0,a.useState)(!0),r=n[0],j=n[1],S=(0,a.useRef)(r);S.current=r;var C=(0,a.useState)()[0],N=(0,d.v9)((function(e){return e.hosts.hosts})),O=(0,a.useRef)(N);O.current=N;var F=(0,d.v9)((function(e){return e.hosts.activeHost})),I=(0,a.useRef)(F);I.current=F;var R=(0,a.useState)(),P=R[0],E=R[1],M=(0,a.useRef)(P);M.current=P;var T=(0,d.v9)((function(e){return e.images})),A=(0,a.useState)(),_=A[0],z=A[1],D=(0,a.useRef)(_);D.current=_;var B=(0,a.useState)(!1),H=B[0],V=B[1],G=(0,a.useState)(),L=G[0],K=G[1];(0,a.useRef)(L).current=L;var U=(0,a.useState)(),q=U[0],Y=U[1],J=(0,a.useRef)(q);J.current=q;var Q=(0,a.useState)(),W=Q[0],X=Q[1],Z=(0,a.useState)(""),$=Z[0],ee=Z[1];function te(){return ne.apply(this,arguments)}function ne(){return(ne=w(l().mark((function n(){var r,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(H){n.next=4;break}return n.next=4,oe();case 4:if(ue(),!(null===(r=t.query)||void 0===r?void 0:r.hostId)){n.next=14;break}if(!O.current){n.next=11;break}return o=O[t.query.hostId],E(o),setTimeout((function(){return re()})),n.abrupt("return");case 11:return E(e.host),setTimeout((function(){return re()})),n.abrupt("return");case 14:if(!e.host){n.next=18;break}return E(e.host),setTimeout((function(){return re()})),n.abrupt("return");case 18:F&&(E(I.current),setTimeout((function(){return re()})));case 19:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function re(){return le.apply(this,arguments)}function le(){return(le=w(l().mark((function e(){var t,n,r,o,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=k({},T),F||(null===(t=M.current)||void 0===t?void 0:t.id)){e.next=4;break}return e.abrupt("return");case 4:if(T&&(null===(r=T[null===(n=M.current)||void 0===n?void 0:n.id])||void 0===r?void 0:r.images)){e.next=6;break}return e.abrupt("return");case 6:o=T[M.current.id].images,a=Object.keys(o).map((function(e){return o[e]})),i=a.sort((function(e,t){return e.name||(e.name="Unknown"),e.name.localeCompare(t.name)})),K(i),j(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return ae.apply(this,arguments)}function ae(){return(ae=w(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=2;break}return e.abrupt("return");case 2:return V(!0),e.next=5,p.L.getSocket();case 5:return t=e.sent,z(t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=w(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.current.emit("docker",{command:"listImages",callback:"imagesList",hostId:M.current.id}),j(!0),setTimeout((function(){j(!1)}),1e3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.useEffect)(w(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te();case 1:case"end":return e.stop()}}),e)}))),[]),(0,a.useEffect)(w(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te();case 1:case"end":return e.stop()}}),e)}))),[F,T]),(0,a.useEffect)((function(){}),[F,T]);var ue=function(){X({global:{value:null,matchMode:g.a6.CONTAINS},name:{operator:g.pg.AND,constraints:[{value:null,matchMode:g.a6.CONTAINS}]},project:{operator:g.pg.AND,constraints:[{value:null,matchMode:g.a6.CONTAINS}]},containerId:{operator:g.pg.AND,constraints:[{value:null,matchMode:g.a6.CONTAINS}]}})};if(C)return(0,o.jsxs)("div",{children:["Failed to load Images: ",C]});if(!T)return(0,o.jsx)("div",{children:"No Images."});if(0===T.length)return(0,o.jsx)("div",{children:"No Images."});var se=function(e){var t;D.current.emit("docker",{command:"removeImage",imageId:e.imageId,hostId:null===(t=e.host)||void 0===t?void 0:t.id,callback:"dockerResuls_images"+e.id,hook:"removeImage"})},ce=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,b.V)({className:"confirm-dialogs",message:n,target:(null===r||void 0===r?void 0:r.currentTarget)?r.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){switch(e){case"removeImage":se(t);break;case"removeSelected":fe()}}})},fe=function(){J.current.forEach((function(e){var t;0===(null===(t=e.containers)||void 0===t?void 0:t.length)&&se(e)})),Y(null)};return(0,o.jsxs)("div",{className:"col-12 p-0 m-0",children:[(0,o.jsxs)("div",{className:"col-12 p-0 m-0 pr-1 grid",children:[(0,o.jsx)("div",{className:"col-6",children:(0,o.jsxs)("h2",{children:[(0,o.jsx)(v.G,{icon:x.Yws,pull:"left",className:"fa-1x lightblue-color mt-0 pt-0",swapOpacity:!0}),"Docker Images"]})}),(0,o.jsxs)("div",{className:"col-6 text-right pr-0",children:[(0,o.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,o.jsx)("i",{className:"pi pi-search"}),(0,o.jsx)(y.o,{value:$,onChange:function(e){var t=e.target.value,n=k({},W);n.global.value=t,X(n),ee(t)},placeholder:"Keyword Search"})]}),(0,o.jsx)(m.z,{label:"Image",className:"p-button-secondary mr-2",icon:"fa fa-plus",onClick:function(){return t.push("/images/create")}}),(0,o.jsx)("button",{className:"p-button p-component p-button-secondary mt-1 p-2",label:"",onClick:function(){return function(){return ie.apply(this,arguments)}()},children:(0,o.jsx)(v.G,{icon:x.lUd,className:"mt-0 p-1",swapOpacity:!0})})]})]}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.w,{value:L,stripedRows:!0,rowHover:!0,showGridlines:!0,selection:q,onSelectionChange:function(e){return function(e){Y(e.value)}(e)},paginator:!0,rows:15,totalRecords:null===L||void 0===L?void 0:L.length,dataKey:"id",rowsPerPageOptions:[10,15,20,50,100,200],sortMode:"single",responsiveLayout:"scroll",sortField:"name",sortOrder:1,filters:W,filterDisplay:"menu",loading:S.current,globalFilterFields:["name","imageId","tag"],children:[(0,o.jsx)(c.s,{sortable:!0,field:"name",header:"Name",filter:!0,filterPlaceholder:"Search by name",body:function(e){e.name&&""!==e.name||(e.name=e.imageId.substring(0,16));var t=e.imageId.substring(0,16);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.default,{href:"/images/[id]",as:"/images/".concat(e.id),children:(0,o.jsx)("a",{className:"lightblue-color",children:(0,o.jsx)("b",{children:e.name})})}),(0,o.jsx)("br",{}),(0,o.jsx)(u.default,{className:"mt-1",href:"/images/[id]",as:"/images/".concat(e.id),children:(0,o.jsx)("a",{children:t})})]})}}),(0,o.jsx)(c.s,{sortable:!0,field:"tag",header:"Tag",filter:!0,filterPlaceholder:"Search by Tag",body:function(e){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.default,{href:"/images/[id]",as:"/images/".concat(e.id),children:(0,o.jsx)("a",{className:"lightblue-color",children:(0,o.jsx)("b",{children:e.tag})})})})}}),(0,o.jsx)(c.s,{sortable:!0,field:"fileSize",header:"Size",align:"center",body:function(e){return e.fileSize>0?(0,o.jsx)(o.Fragment,{children:h.t.bytes(e.fileSize)}):(0,o.jsx)("div",{children:"--"})}}),(0,o.jsx)(c.s,{sortable:!0,field:"dockerVersion",header:"Docker Version",filter:!0,filterPlaceholder:"Search by Docker Version",align:"center",body:function(e){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.default,{href:"/images/[id]",as:"/images/".concat(e.id),children:(0,o.jsx)("a",{children:e.dockerVersion})})})}}),(0,o.jsx)(c.s,{sortable:!0,field:"status",header:"Status",align:"center",body:function(e){var t;if((null===e||void 0===e||null===(t=e.containers)||void 0===t?void 0:t.length)>0)return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.default,{href:"/images/[id]",as:"/images/".concat(e.id),children:(0,o.jsx)("a",{children:(0,o.jsx)(f.C,{size:"",value:"In Use",severity:"success"})})})})}}),(0,o.jsx)(c.s,{sortable:!0,field:"containers.length",header:"Containers",align:"center"}),(0,o.jsx)(c.s,{field:"id",header:"Actions",align:"center",body:function(e){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(m.z,{label:"",onClick:function(t){ce("removeImage",e,"Remove "+e.pullTag+"?",t)},className:"p-button-secondary",icon:"pi pi-trash"})})}}),(0,o.jsx)(c.s,{selectionMode:"multiple",headerStyle:{width:"3em"}})]}),(null===q||void 0===q?void 0:q.length)>0&&(0,o.jsx)("div",{className:"col-12 text-right pr-2",children:(0,o.jsx)(m.z,{className:"mt-2 p-button-warning",label:"Remove Selected",icon:"fa fa-trash",onClick:function(e){return ce("removeSelected",null,"Remove Selected Images?",e)}})})]})]})}},58650:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var l=u(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return i(this,n)}}n.d(t,{s:function(){return p}});var c,f,d,p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,n,a,i=s(u);function u(){return l(this,u),i.apply(this,arguments)}return t=u,n&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}(n(67294).Component);d={columnKey:null,field:null,sortField:null,filterField:null,exportField:null,header:null,body:null,footer:null,sortable:!1,sortableDisabled:!1,sortFunction:null,dataType:"text",filter:!1,filterMatchMode:null,filterPlaceholder:null,filterType:"text",filterMaxLength:null,filterElement:null,filterFunction:null,filterHeaderStyle:null,filterHeaderClassName:null,showFilterMenu:!0,showFilterOperator:!0,showClearButton:!0,showApplyButton:!0,showFilterMatchModes:!0,showFilterMenuOptions:!0,showAddButton:!0,filterMatchModeOptions:null,maxConstraints:2,filterMenuClassName:null,filterMenuStyle:null,align:null,alignHeader:null,alignFrozen:"left",hidden:!1,onFilterClear:null,onFilterApplyClick:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,filterClear:null,filterApply:null,filterHeader:null,filterFooter:null,style:null,className:null,headerStyle:null,headerClassName:null,bodyStyle:null,bodyClassName:null,footerStyle:null,footerClassName:null,expander:!1,frozen:!1,selectionMode:null,colSpan:null,rowSpan:null,editor:null,cellEditValidator:null,cellEditValidatorEvent:"click",onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditInit:null,onCellEditComplete:null,onCellEditCancel:null,excludeGlobalFilter:!1,rowReorder:!1,rowReorderIcon:"pi pi-bars",rowEditor:!1,exportable:!0,reorderable:!0},(f="defaultProps")in(c=p)?Object.defineProperty(c,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[f]=d}}]);