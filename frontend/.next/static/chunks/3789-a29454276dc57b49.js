"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3789],{3789:function(e,r,n){n.r(r),n.d(r,{default:function(){return I}});var t=n(34051),a=n.n(t),i=n(85893),s=n(42670),c=n(11163),u=n(67294),o=n(10619),l=n(40424),d=n(25617),f=n(96486),m=n.n(f),v=n(36345),h=n(28565),g=n(2797),p=n(43964),x=n(42896),j=n(58650);function k(e){var r=(0,u.useState)(),n=r[0],t=r[1],a=(0,u.useState)([]),s=a[0],c=a[1],o=(0,u.useRef)(s);o.current=s;var l=(0,u.useState)(),d=l[0],f=l[1];(0,u.useRef)(d).current=d,(0,u.useEffect)((function(){t(e.image),setTimeout((function(){return m()}),100)}),[e.image]),(0,u.useEffect)((function(){m()}),[n]);var m=function(){var e,r,t=[];if(null===n||void 0===n||null===(e=n.details)||void 0===e||null===(r=e.Config)||void 0===r?void 0:r.Env){n.details.Config.Env,n.details.Config.Env.forEach((function(e,r){var n=e.split("="),a={id:r,keyName:n[0],value:n[1]};2===n.length&&t.push(a)}));var a=t.sort((function(e,r){return e.key||(e.key="Unknown"),e.key.localeCompare(r.key)}));c(a)}};if(!n)return(0,i.jsx)("div",{});if(o.current.length<1)return(0,i.jsx)("div",{className:"col-12 text-center p-3",children:"No Env Vars assigned to this image"});var v=""+o.current.length;return v+=o.current.length>1?" Env Vars":" Env Var",(0,i.jsx)(i.Fragment,{children:s.length>0&&(0,i.jsx)(p.s,{header:v,collapsed:!1,toggleable:!0,children:(0,i.jsx)("div",{className:"col-12 m-0 p-0",children:(0,i.jsx)("div",{className:"card p-0 m-0",children:(0,i.jsxs)(x.w,{scrollable:o.current.length>10,scrollHeight:o.current.length>10?"400px":"200px",virtualScrollerOptions:{itemSize:o.current.length>10?20:o.current.length+5},selectionMode:"multiple",selection:d,onSelectionChange:function(e){return f(e.value)},dataKey:"id",value:o.current,paginator:!1,stripedRows:!0,rowHover:!0,rows:1e4,sortField:"keyName",sortOrder:1,responsiveLayout:"scroll",children:[(0,i.jsx)(j.s,{sortable:!0,field:"keyName",header:"Key"}),(0,i.jsx)(j.s,{sortable:!0,field:"value",header:"Value"})]},"foo")})})})})}var N=n(2723);function w(e,r,n,t,a,i,s){try{var c=e[i](s),u=c.value}catch(o){return void n(o)}c.done?r(u):Promise.resolve(u).then(t,a)}function y(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function s(e){w(i,t,a,s,c,"next",e)}function c(e){w(i,t,a,s,c,"throw",e)}s(void 0)}))}}function I(e){var r,n,t=function(e){var r,n=[];r=e.current?e.current:e,n.push({label:"Inspect",icon:"fa fa-fw fa-eye",command:function(){f()}}),r.active||n.push({label:"Remove",icon:"fa fa-fw fa-power-off",command:function(e){ie("removeImage","Remove Image?",e)}}),z(n)},f=function(){var e;(_(!0),null===O||void 0===O?void 0:O.current)&&A.current.emit("docker",{command:"inspectImage",imageId:O.current.imageId,hostId:null===(e=O.current.host)||void 0===e?void 0:e.id,callback:"dockerResulsImages_"+O.current.id,hook:"inspectImage"})},x=function(){var e;A.current.emit("docker",{command:"removeImage",imageId:O.current.details.Id,hostId:null===(e=O.current.host)||void 0===e?void 0:e.id,callback:"dockerResulsImages_"+O.current.id,hook:"removeImage"})},j=(0,c.useRouter)(),w=(0,d.v9)((function(e){return e.images})),I=(0,u.useState)(!0),b=I[0],E=I[1],R=(0,u.useRef)(b);R.current=b;var S=(0,u.useState)(!1),C=S[0],_=S[1];(0,u.useRef)(C).current=C;var T=(0,u.useState)(),V=T[0],q=T[1],P=(0,u.useRef)(V);P.current=V;var F=(0,u.useState)(),H=F[0],L=F[1],O=(0,u.useRef)(H);O.current=H;var K=(0,u.useState)(),M=K[0],z=K[1],D=(0,u.useState)()[0],U=(0,u.useState)(),Z=U[0],$=U[1],A=(0,u.useRef)(Z);A.current=Z;var B=(0,u.useState)(!1),G=B[0],J=B[1],Q=(0,u.useState)(!1),W=Q[0],X=Q[1],Y=(0,u.useRef)(W);Y.current=W;var ee=function(e){var r=(0,u.useRef)();return(0,u.useEffect)((function(){r.current=e})),r.current}(H);function re(){return ne.apply(this,arguments)}function ne(){return(ne=y(a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=2;break}return e.abrupt("return");case 2:return J(!0),r="dockerResulsImages_"+P.current,e.next=6,h.L.getSocket();case 6:(n=e.sent).on(r,(function(e){if("success"===e.status&&e.data)if("removeImage"===e.hook)L(null);else e.data.id&&(L(e.data),t(e.data))})),$(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return ae.apply(this,arguments)}function ae(){return(ae=y(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.current){e.next=2;break}return e.abrupt("return");case 2:P.current&&w&&Object.keys(w).forEach((function(e){var r=w[e];if(!m().isEqual(ee,r.images[P.current])&&P.current in r.images){var n=r.images[P.current];L(n),R.current&&E(!0),t(n),R.current&&E(!1)}}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,u.useEffect)(y(a().mark((function r(){var n,t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:!0===e.embedded&&X(!0),(j.query.id||(null===(n=e.image)||void 0===n?void 0:n.id))&&((null===(t=e.image)||void 0===t?void 0:t.id)?q(e.image.id):q(j.query.id),setTimeout(y(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G){e.next=3;break}return e.next=3,re();case 3:case"end":return e.stop()}}),e)})))),setTimeout((function(){te()}),300));case 3:case"end":return r.stop()}}),r)}))),[j.query,e]),(0,u.useEffect)((function(){te()}),[w]),(0,u.useEffect)((function(){return function(){if(A.current){var e="dockerResulsImages_"+P.current;A.current.removeListener(e)}}}),[]);var ie=function(e,r){var n,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,l.V)({className:"confirm-dialogs",message:r,target:(null===(n=t.originalEvent)||void 0===n?void 0:n.currentTarget)?t.originalEvent.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){if("removeImage"===e)x()}})};if(b)return(0,i.jsx)(s.$,{});if(D)return(0,i.jsxs)("div",{children:["Failed to load Image: ",D]});if(!j.query.id)return(0,i.jsx)("div",{children:"Loading..."});if(!H)return(0,i.jsx)("div",{className:"text-center mt-5",children:"Image could not be found."});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"col-12 p-0 m-0",children:[(0,i.jsxs)("h2",{className:"grid col-12 p-0 m-0",children:[(0,i.jsx)("div",{className:"flex col-10 p-0 m-0",children:H.name}),(0,i.jsx)("div",{className:"col-2 text-right p-0 m-0",children:(0,i.jsxs)("h4",{children:["[",H.id,"]"]})})]}),(0,i.jsx)("div",{className:"flex col-12 justify-content-end"}),!Y.current&&(0,i.jsx)("div",{className:"col-12 p-0 card",children:(0,i.jsx)(o.n,{className:"flex col-12 justify-content-end",model:M})})]}),(0,i.jsx)("div",{className:"col-12 m1-2"}),(0,i.jsx)("div",{className:"col-12 p-0 m-0 mt-3",children:(0,i.jsx)(v.Z,{data:H,collapsed:0,header:"Image Details"})}),(null===H||void 0===H?void 0:H.name)&&(null===H||void 0===H?void 0:H.tag)&&(0,i.jsx)("div",{className:"col-12 m-0 mt-3 p-0",children:(0,i.jsx)(g.default,{showTags:!1,showPreview:!0,showMarkdown:false,image:H,imageName:H.name})}),(null===H||void 0===H||null===(r=H.details)||void 0===r?void 0:r.Config)&&(0,i.jsx)("div",{className:"col-12 m-0 p-0 mt-3",children:(0,i.jsx)(p.s,{className:"sitePanel",header:"Image Envirotnment Variables",hideHeader:!0,toggleable:!0,children:(0,i.jsx)(k,{image:H})})}),(null===H||void 0===H||null===(n=H.containers)||void 0===n?void 0:n.length)>0&&!Y.current&&(0,i.jsx)("div",{className:"col-12 m-0 p-0 mt-3",children:(0,i.jsx)(p.s,{className:"sitePanel",header:"Containers",hideHeader:!0,toggleable:!0,children:(0,i.jsx)(N.default,{image:H})})}),(0,i.jsx)("div",{className:"bottom-spacer col-12 m-0 p-0",style:{height:"800px"}})]})}}}]);