"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2586],{82586:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(34051),o=t.n(r),a=t(85893),s=t(67294),i=t(41664),c=t(42896),l=t(58650),u=t(45795),d=t(25617),f=t(28565),v=t(99403),h=t(40424),p=t(11163),m=t(92814),w=t(66367),k=t(25600),g=t(51436);function x(e,n,t,r,o,a,s){try{var i=e[a](s),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function s(e){x(a,r,o,s,i,"next",e)}function i(e){x(a,r,o,s,i,"throw",e)}s(void 0)}))}}function j(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){j(e,n,t[n])}))}return e}function y(){var e=(0,p.useRouter)(),n=(0,s.useState)(!0),t=n[0],r=n[1],x=(0,s.useRef)(t);x.current=t;var j=(0,s.useState)(null)[0],y=(0,d.v9)((function(e){return e.hosts.hosts}));(0,s.useRef)(y).current=y;var S=(0,d.v9)((function(e){return e.hosts.activeHost})),O=(0,s.useRef)(S);O.current=S;var C=(0,d.v9)((function(e){return e.networks})),R=(0,s.useState)(null),I=R[0],P=R[1],A=(0,s.useRef)(I);A.current=I;var F=(0,s.useState)(!1),E=F[0],T=F[1],_=(0,s.useState)(null),D=_[0],M=_[1];(0,s.useRef)(D).current=D;var z=(0,s.useState)(null),L=z[0],G=z[1],H=(0,s.useRef)(L);H.current=L;var K=(0,s.useState)(null),U=K[0],V=K[1],q=(0,s.useState)(""),B=q[0],J=q[1];function Q(){return W.apply(this,arguments)}function W(){return(W=b(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=2;break}return e.abrupt("return");case 2:return T(!0),e.next=5,f.L.getSocket();case 5:return(n=e.sent).on("networks_list",(function(e){if("success"===e.status&&e.data){var n=e.data;M(n)}})),P(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=b(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.current.emit("docker",{command:"listNetworks",callback:"networksList",hostId:O.current.id}),r(!0),setTimeout((function(){r(!1)}),1e3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if((0,s.useEffect)(b(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=3;break}return e.next=3,Q();case 3:Y();case 4:case"end":return e.stop()}}),e)}))),[]),(0,s.useEffect)((function(){var e,n=N({},C);if(S||(null===S||void 0===S?void 0:S.id))if(C&&(null===(e=C[S.id])||void 0===e?void 0:e.networks)){n=C[S.id].networks;var t=Object.keys(n).map((function(e){return n[e]}));M(t),r(!1)}else console.log("returning networks")}),[S,C]),(0,s.useEffect)((function(){return function(){(null===A||void 0===A?void 0:A.current)&&A.current.removeListener("networks_list")}}),[]),j)return(0,a.jsxs)("div",{children:["Failed to load Networks: ",j]});var Y=function(){V({global:{value:null,matchMode:w.a6.CONTAINS},name:{operator:w.pg.AND,constraints:[{value:null,matchMode:w.a6.CONTAINS}]},project:{operator:w.pg.AND,constraints:[{value:null,matchMode:w.a6.CONTAINS}]},containerId:{operator:w.pg.AND,constraints:[{value:null,matchMode:w.a6.CONTAINS}]}})},Z=function(e){var n;A.current.emit("docker",{command:"removeNetwork",networkId:e.networkId,hostId:null===(n=e.host)||void 0===n?void 0:n.id,callback:"dockerResuls_networks"+e.id,hook:"removeNetwork"})},$=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,h.V)({className:"confirm-dialogs",message:t,target:(null===r||void 0===r?void 0:r.currentTarget)?r.currentTarget:null,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){switch(e){case"removeNetwork":Z(n);break;case"removeSelected":ee()}}})},ee=function(){H.current.forEach((function(e){var n;0===(null===(n=e.containers)||void 0===n?void 0:n.length)&&Z(e)})),G(null)};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"col-12 p-0 mt-2 pr-1 grid",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsxs)("h2",{children:[(0,a.jsx)(m.G,{icon:g.Pk,pull:"left",className:"fa-1x lightblue-color mt-0 pt-0",swapOpacity:!0}),"Docker Networks"]})}),(0,a.jsxs)("div",{className:"col-6 text-right pr-0",children:[(0,a.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,a.jsx)("i",{className:"pi pi-search"}),(0,a.jsx)(k.o,{value:B,onChange:function(e){var n=e.target.value,t=N({},U);t.global.value=n,V(t),J(n)},placeholder:"Keyword Search"})]}),(0,a.jsx)(v.z,{label:"Network",className:"p-button-secondary mr-2",icon:"fa fa-plus",onClick:function(){return e.push("/networks/create")}}),(0,a.jsx)("button",{className:"p-button p-component p-button-secondary mt-1 p-2",label:"",onClick:function(){return function(){return X.apply(this,arguments)}()},children:(0,a.jsx)(m.G,{icon:g.lUd,className:"mt-0 p-1",swapOpacity:!0})})]})]}),(0,a.jsxs)(c.w,{value:D,stripedRows:!0,rowHover:!0,showGridlines:!0,selection:L,onSelectionChange:function(e){return function(e){G(e.value)}(e)},paginator:!0,rows:15,totalRecords:null===D||void 0===D?void 0:D.length,dataKey:"id",rowsPerPageOptions:[10,15,20,50,100,200],sortMode:"single",responsiveLayout:"scroll",sortField:"name",sortOrder:1,filters:U,filterDisplay:"menu",loading:x.current,globalFilterFields:["name","imageId","tag"],children:[(0,a.jsx)(l.s,{sortable:!0,field:"name",header:"Name",filter:!0,filterPlaceholder:"Search by name",body:function(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.default,{href:"/networks/[id]",as:"/networks/".concat(e.id),children:(0,a.jsx)("a",{className:"lightblue-color",children:(0,a.jsx)("b",{children:e.name})})})})}}),(0,a.jsx)(l.s,{sortable:!0,field:"containers",header:"Status",align:"center",body:function(e){var n;return(null===e||void 0===e||null===(n=e.containers)||void 0===n?void 0:n.length)>0?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.default,{href:"/networks/[id]",as:"/networks/".concat(e.id),children:(0,a.jsx)("a",{children:(0,a.jsx)(u.C,{size:"",value:"In Use",severity:"success"})})})}):(0,a.jsx)("div",{})}}),(0,a.jsx)(l.s,{sortable:!0,field:"containers",header:"Containers",align:"center",body:function(e){return(null===e||void 0===e?void 0:e.containers)?(0,a.jsx)(a.Fragment,{children:e.containers.length}):(0,a.jsx)("div",{children:"0"})}}),(0,a.jsx)(l.s,{field:"id",header:"Actions",align:"center",body:function(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.z,{label:"",onClick:function(n){$("removeNetwork",e,"Remove "+e.name+"?",n)},className:"p-button-secondary",icon:"pi pi-trash"})})}}),(0,a.jsx)(l.s,{selectionMode:"multiple",headerStyle:{width:"3em"}})]}),(null===L||void 0===L?void 0:L.length)>0&&(0,a.jsx)("div",{className:"col-12 text-right pr-2",children:(0,a.jsx)(v.z,{className:"mt-2 p-button-warning",label:"Remove Selected",icon:"fa fa-trash",onClick:function(e){return $("removeSelected",null,"Remove Selected Networks?",e)}})})]})})}}}]);